# 🔌 Блок 2: Локальные сети и коммутация
## От физических основ к интеллектуальной коммутации (2-3 месяца)

---

## 📋 Обзор блока

**Цель:** Освоить принципы работы локальных сетей и технологии коммутации
**Время изучения:** 2-3 месяца  
**Результат:** Умение проектировать и настраивать современные локальные сети

**Переход от Блока 1:**
- Физический уровень → Канальный уровень
- Теоретические основы → Практические технологии
- Общие принципы → Конкретные протоколы

---

# 📖 Глава 2.1: Ethernet и коммутация

## 🌟 Что такое Ethernet?

Ethernet - это семейство технологий для локальных сетей, которое определяет, как устройства обмениваются данными в пределах одного сегмента сети.

**Аналогия:** Представьте Ethernet как систему городского транспорта:
- **MAC-адреса** = номера домов
- **Коммутатор** = диспетчер, который знает, где кто живет
- **Кадры** = автобусы с пассажирами и адресами назначения

```
Эволюция Ethernet:

1973 ───── 1980 ───── 1990 ───── 2000 ───── 2010 ───── 2020
  │         │         │         │         │         │
Изобретение 10Base5   10Base-T  100Base-T 1000Base-T 10GBase-T
          коаксиал    витая     Fast      Gigabit   10 Gigabit
          (толстый)   пара      Ethernet  Ethernet  Ethernet
```

## 🔄 Эволюция стандартов Ethernet

### Классический Ethernet (10 Мбит/с)

**10Base5 - "Толстый коаксиал"**

```
Топология 10Base5:

Терминатор ────────────────────────────────── Терминатор
50Ω     │        │        │        │        50Ω
        ▼        ▼        ▼        ▼
      💻       💻       💻       💻
   Трансивер Трансивер Трансивер Трансивер
   
Характеристики:
- Максимальная длина сегмента: 500 метров
- Максимум 100 узлов на сегмент
- Минимальное расстояние между узлами: 2.5 метра
- Одна область коллизий для всего сегмента
```

**10Base2 - "Тонкий коаксиал"**

```
Топология 10Base2:

💻─┬─💻─┬─💻─┬─💻─┬─💻
   │    │    │    │    │
  T-коннектор      Терминатор
                   50Ω

Характеристики:
- Максимальная длина сегмента: 185 метров
- Максимум 30 узлов на сегмент
- Минимальное расстояние между узлами: 0.5 метра
- Проще в установке, но менее надежно
```

**10Base-T - "Витая пара"**

```
Современная топология "звезда":

        💻
        │
💻 ─────┼───── 💻
        │
   ┌────▼────┐
   │   Хаб   │  ← Изначально хаб, позже коммутатор
   │  (Hub)  │
   └────┬────┘
        │
💻 ─────┼───── 💻
        │
        💻

Преимущества:
✓ Легкое добавление/удаление узлов
✓ Локализация неисправностей
✓ Использование стандартных кабелей
```

### Fast Ethernet (100 Мбит/с)

```
Стандарты Fast Ethernet:

┌─────────────┬─────────────┬─────────────┬─────────────┐
│ Стандарт    │ Среда       │ Расстояние  │ Применение  │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 100Base-TX  │ Cat 5 UTP   │ 100 м       │ Офисы       │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 100Base-FX  │ MM волокно  │ 2 км        │ Магистрали  │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 100Base-T4  │ Cat 3 (4 пары)│ 100 м      │ Устаревший  │
└─────────────┴─────────────┴─────────────┴─────────────┘

Ключевые улучшения:
- Автосогласование скорости (10/100 Мбит/с)
- Полнодуплексный режим
- Переход от хабов к коммутаторам
```

### Gigabit Ethernet (1000 Мбит/с)

```
Gigabit Ethernet стандарты:

1000Base-T (медь):
┌─────────────────────────────────────────┐
│ Использует все 4 пары в кабеле Cat 5e   │
│ Дуплексная передача по каждой паре      │
│ 250 Мбит/с × 4 пары = 1000 Мбит/с      │
│                                         │
│ Пара 1: TX/RX ←→ 250 Мбит/с            │
│ Пара 2: TX/RX ←→ 250 Мбит/с            │  
│ Пара 3: TX/RX ←→ 250 Мбит/с            │
│ Пара 4: TX/RX ←→ 250 Мбит/с            │
└─────────────────────────────────────────┘

1000Base-SX/LX (оптика):
- SX: многомодовое волокно, до 550 м
- LX: одномодовое волокно, до 5 км
- Используется в дата-центрах и магистралях
```

### 10 Gigabit Ethernet и выше

```
Современные стандарты:

┌─────────────┬─────────────┬─────────────┬─────────────┐
│ Скорость    │ Стандарт    │ Среда       │ Применение  │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 10 Гбит/с   │ 10GBase-T   │ Cat 6a      │ Серверы     │
│             │ 10GBase-SR  │ MM волокно  │ Дата-центры │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 25 Гбит/с   │ 25GBase-SR  │ MM волокно  │ Облачные ДЦ │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 40 Гбит/с   │ 40GBase-SR4 │ MM волокно  │ Магистрали  │
├─────────────┼─────────────┼─────────────┼─────────────┤
│ 100 Гбит/с  │ 100GBase-SR10│ MM волокно │ Провайдеры  │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

## 🏷️ MAC-адреса: паспорта сетевых устройств

### Структура MAC-адреса

MAC (Media Access Control) адрес - уникальный идентификатор сетевого интерфейса.

```
Структура MAC-адреса:

┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐
│    00       │    1B       │    44       │    11       │    3A       │    B7       │
└─────────────┴─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
│◄─────────── OUI ─────────►│◄────────── Device ID ──────────►│
│   (Organizationally       │        (Уникальный             │
│    Unique Identifier)     │         идентификатор)          │
│   Код производителя       │        Серийный номер           │

Форматы записи:
- 00:1B:44:11:3A:B7  (двоеточия)
- 00-1B-44-11-3A-B7  (дефисы)  
- 001B.4411.3AB7     (точки, Cisco стиль)
- 001b44113ab7       (слитно)
```

**Примеры известных OUI:**

```
┌─────────────┬─────────────────────────────┐
│ OUI         │ Производитель               │
├─────────────┼─────────────────────────────┤
│ 00:50:56    │ VMware                      │
├─────────────┼─────────────────────────────┤
│ 08:00:27    │ VirtualBox                  │
├─────────────┼─────────────────────────────┤
│ 00:0C:29    │ VMware                      │
├─────────────┼─────────────────────────────┤
│ AC:DE:48    │ Apple                       │
├─────────────┼─────────────────────────────┤
│ 00:15:5D    │ Microsoft                   │
└─────────────┴─────────────────────────────┘
```

### Специальные MAC-адреса

```
Типы адресов:

Unicast (индивидуальный):
00:1B:44:11:3A:B7
│
└─ Младший бит = 0

Multicast (групповой):  
01:00:5E:XX:XX:XX
│
└─ Младший бит = 1

Broadcast (широковещательный):
FF:FF:FF:FF:FF:FF
└─ Все биты = 1

Locally Administered (локально управляемый):
X2:XX:XX:XX:XX:XX или X6:XX:XX:XX:XX:XX или XA:XX:XX:XX:XX:XX или XE:XX:XX:XX:XX:XX
 │
 └─ Второй младший бит = 1
```

### Таблица MAC-адресов

**Как коммутатор изучает адреса:**

```
Процесс обучения:

Шаг 1: Коммутатор получает кадр
┌─────────────────────────────────────────┐
│ От: 00:AA:BB:CC:DD:01 (Компьютер A)     │
│ Кому: 00:AA:BB:CC:DD:02 (Компьютер B)   │
│ Данные: "Привет!"                       │
└─────────────────────────────────────────┘
        ↑
   Порт 1 коммутатора

Шаг 2: Коммутатор добавляет в таблицу
┌─────────────┬──────────┬─────────────┐
│ MAC-адрес   │ Порт     │ Время       │
├─────────────┼──────────┼─────────────┤
│ AA:BB:CC:DD:01│ 1      │ 10:30:15    │
└─────────────┴──────────┴─────────────┘

Шаг 3: Поиск адреса получателя
- Ищет 00:AA:BB:CC:DD:02 в таблице
- Не найден → Flooding (отправка всем портам)

Шаг 4: Получение ответа
┌─────────────────────────────────────────┐
│ От: 00:AA:BB:CC:DD:02 (Компьютер B)     │
│ Кому: 00:AA:BB:CC:DD:01 (Компьютер A)   │
│ Данные: "Привет и тебе!"                │
└─────────────────────────────────────────┘
        ↑
   Порт 3 коммутатора

Шаг 5: Обновленная таблица
┌─────────────┬──────────┬─────────────┐
│ MAC-адрес   │ Порт     │ Время       │
├─────────────┼──────────┼─────────────┤
│ AA:BB:CC:DD:01│ 1      │ 10:30:15    │
├─────────────┼──────────┼─────────────┤
│ AA:BB:CC:DD:02│ 3      │ 10:30:18    │
└─────────────┴──────────┴─────────────┘
```

**Aging (устаревание записей):**

```
Жизненный цикл записи в таблице MAC:

00:00 ────── 05:00 ────── 10:00 ────── 15:00
  │           │           │           │
Добавлена   Обновлена   Обновлена   Удалена
в таблицу   активностью активностью (истек TTL)

Типичное время жизни: 300 секунд (5 минут)

Причины удаления:
✓ Истечение времени (aging)
✓ Переполнение таблицы
✓ Ручная очистка администратором
```

## 🔄 Коммутаторы vs Хабы

### Принципиальные различия

```
ХАБ (устаревший):                КОММУТАТОР (современный):

      Одна область коллизий            Каждый порт = своя область
           ┌─────────┐                       ┌─────────┐
    💻─────┤         ├─────💻         💻─────┤  Таблица├─────💻
           │   ХАБ   │                       │   MAC   │
    💻─────┤         ├─────💻         💻─────┤ адресов ├─────💻
           └─────────┘                       └─────────┘

Полудуплекс:                         Полнодуплекс:
(прием ИЛИ передача)                (прием И передача)

A→B: все получают кадр              A→B: только B получает
Скорость делится между портами      Каждый порт = полная скорость
```

### Процесс коммутации

**Три метода коммутации:**

```
1. Store-and-Forward (сохранить и переслать):
┌─────────────────────────────────────────────────────┐
│ Кадр ──→ │Буфер│ ──→ Проверка CRC ──→ Пересылка    │
│          └─────┘     ↓                              │
│                   Ошибка? → Отбросить кадр          │
└─────────────────────────────────────────────────────┘

Преимущества: ✓ Обнаруживает ошибки
              ✓ Не пересылает поврежденные кадры
Недостатки:   ✗ Большая задержка

2. Cut-Through (прямое переключение):
┌─────────────────────────────────────────────────────┐
│ Кадр ──→ Читает только заголовок ──→ Немедленная    │
│          (адрес получателя)          пересылка      │
└─────────────────────────────────────────────────────┘

Преимущества: ✓ Минимальная задержка
Недостатки:   ✗ Может пересылать поврежденные кадры

3. Fragment-Free (без фрагментов):
┌─────────────────────────────────────────────────────┐
│ Кадр ──→ Читает первые 64 байта ──→ Пересылка      │
│          (зона коллизий)                            │
└─────────────────────────────────────────────────────┘

Компромисс между скоростью и надежностью
```

## 🌐 VLAN - Виртуальные локальные сети

### Концепция VLAN

VLAN позволяет создавать логические сегменты сети, независимо от физического подключения.

```
Без VLAN:                           С VLAN:
Физическая сегментация              Логическая сегментация

┌─────────────┐ ┌─────────────┐      ┌─────────────────────────┐
│Коммутатор 1 │ │Коммутатор 2 │      │    Один коммутатор      │
│             │ │             │      │                         │
│ 💻─💻─💻   │ │   🖨️─📁─💻 │      │ 💻──💻 ┃ 🖨️──📁     │
│ Отдел A    │ │   Отдел B   │      │ VLAN 10┃ VLAN 20     │
└─────────────┘ └─────────────┘      │         ┃              │
                                     │ 💻      ┃ 💻───📁     │
Нужно 2 коммутатора                  │ VLAN 10 ┃ VLAN 20     │
                                     └─────────────────────────┘
```

### Типы VLAN

```
1. Data VLAN (пользовательские данные):
┌─────────────────────────────────────────┐
│ VLAN 10: Бухгалтерия                    │
│ VLAN 20: ИТ отдел                       │  
│ VLAN 30: Маркетинг                      │
└─────────────────────────────────────────┘

2. Voice VLAN (IP-телефония):
┌─────────────────────────────────────────┐
│ VLAN 100: Голосовой трафик              │
│ Приоритет QoS                           │
│ Отдельная адресация                     │
└─────────────────────────────────────────┘

3. Management VLAN (управление):
┌─────────────────────────────────────────┐
│ VLAN 1: Управление коммутаторами        │
│ Доступ только администраторам           │
│ Telnet, SSH, SNMP                       │
└─────────────────────────────────────────┘

4. Native VLAN (нативный):
┌─────────────────────────────────────────┐
│ VLAN для нетегированного трафика        │
│ По умолчанию VLAN 1                     │
│ Кадры без VLAN тегов                    │
└─────────────────────────────────────────┘
```

### VLAN Tagging (тегирование)

**802.1Q стандарт:**

```
Ethernet кадр с VLAN тегом:

┌────────┬─────────┬─────────┬───────┬─────────┬──────────┬─────┐
│Адрес   │ Адрес   │ 802.1Q  │ VLAN  │EtherType│ Данные   │ CRC │
│получ.  │ отправ. │ Tag     │ ID    │         │          │     │
└────────┴─────────┴─────────┴───────┴─────────┴──────────┴─────┘
    6B       6B      2B      2B       2B        46-1500B   4B
                     │        │
               0x8100 │    0-4095
            (VLAN протокол) (VLAN номер)

Структура VLAN тега:
┌─────┬─────┬─────┬─────────────┐
│ PCP │ DEI │CFI  │   VID       │
│ 3б  │ 1б  │ 1б  │   12б       │
└─────┴─────┴─────┴─────────────┘
  │     │           │
  │     │           └─ VLAN ID (0-4095)
  │     └─ Drop Eligible Indicator
  └─ Priority Code Point (QoS)
```

### Типы портов VLAN

```
Access Port (клиентский порт):
┌─────────────────────────────────────────┐
│ 💻 ──── Access Port ──── Коммутатор     │
│         VLAN 10          │              │
│                          │              │
│ Кадр без тегов          │ Добавляет     │
│ ────────────────────→   │ VLAN 10 тег   │
└─────────────────────────────────────────┘

Trunk Port (магистральный порт):
┌─────────────────────────────────────────┐
│ Коммутатор 1 ── Trunk Port ── Коммутатор 2 │
│ VLAN 10,20,30    ←─────→    VLAN 10,20,30 │
│                                            │
│ Кадры с тегами по магистральному каналу:   │
│ [VLAN 10][Данные] ─────────────────────→  │
│ [VLAN 20][Данные] ─────────────────────→  │
│ [VLAN 30][Данные] ─────────────────────→  │
└─────────────────────────────────────────┘

Hybrid Port (гибридный):
- Может работать как access для одних VLAN
- И как trunk для других VLAN
- Редко используется
```

### Маршрутизация между VLAN

```
Проблема: VLAN изолированы друг от друга

VLAN 10 (192.168.10.0/24)    VLAN 20 (192.168.20.0/24)
     💻─┐                          ┌─🖨️
        │         ┌─────────┐      │
        └─────────┤Коммутатор├──────┘
                  └─────────┘
                       │
            ❌ Прямая связь невозможна

Решение 1: Router-on-a-Stick
                    
┌─────────────────────────────────────────┐
│             Роутер                      │
│ ┌─────────┐ ┌─────────┐                │
│ │VLAN 10  │ │VLAN 20  │                │
│ │ .10.1   │ │ .20.1   │                │
│ └─────────┘ └─────────┘                │
└──────────┬──────────────────────────────┘
           │ Trunk (802.1Q)
           │
    ┌──────▼──────┐
    │ Коммутатор  │
    │             │
💻──┤ VLAN 10     ├──🖨️
    │ VLAN 20     │
    └─────────────┘

Решение 2: Layer 3 коммутатор (SVI)

┌─────────────────────────────────────────┐
│        L3 Коммутатор                    │
│                                         │
│ SVI VLAN 10: 192.168.10.1               │
│ SVI VLAN 20: 192.168.20.1               │
│                                         │
│ ┌─────────┐ ┌─────────┐                │
│ │ VLAN 10 │ │ VLAN 20 │                │
│ │         │ │         │                │
│ │   💻    │ │   🖨️   │                │
└─┴─────────┴─┴─────────┴─────────────────┘
```

## 🔄 Spanning Tree Protocol (STP)

### Проблема петель в сети

```
Проблема: Петли вызывают broadcast storm

      Коммутатор A
         ┌─────┐
      ┌──┤     ├──┐
      │  └─────┘  │
      │           │
┌─────▼─┐       ┌─▼─────┐
│       │       │       │
│ Комм. │───────│ Комм. │
│   B   │       │   C   │
└───────┘       └───────┘

Broadcast кадр от 💻:
💻 → B → A → C → B → A → C... (бесконечная петля)

Результат:
❌ Размножение кадров
❌ Перегрузка сети  
❌ Циклическое обновление MAC таблиц
❌ Полная неработоспособность сети
```

### Принцип работы STP

**Spanning Tree создает древовидную топологию без петель:**

```
Выбор Root Bridge (корневого коммутатора):

Bridge ID = Priority (2 байта) + MAC адрес (6 байт)

Коммутатор A: Priority 32768 + MAC 00:AA:BB:CC:DD:01 = 32768.00AA.BBCC.DD01
Коммутатор B: Priority 32768 + MAC 00:AA:BB:CC:DD:02 = 32768.00AA.BBCC.DD02  
Коммутатор C: Priority 32768 + MAC 00:AA:BB:CC:DD:03 = 32768.00AA.BBCC.DD03

Root Bridge = наименьший Bridge ID = Коммутатор A
```

**Состояния портов STP:**

```
Процесс конвергенции STP:

┌─────────────┬──────────────┬──────────────┬─────────────┐
│ Состояние   │ Длительность │ Функции      │ Трафик      │
├─────────────┼──────────────┼──────────────┼─────────────┤
│ Disabled    │ Постоянно    │ Выключен     │ Нет         │
├─────────────┼──────────────┼──────────────┼─────────────┤
│ Blocking    │ 20 сек       │ Слушает BPDU │ Нет         │
├─────────────┼──────────────┼──────────────┼─────────────┤
│ Listening   │ 15 сек       │ Отправляет   │ Нет         │
│             │              │ BPDU         │             │
├─────────────┼──────────────┼──────────────┼─────────────┤
│ Learning    │ 15 сек       │ Изучает MAC  │ Нет         │
├─────────────┼──────────────┼──────────────┼─────────────┤
│ Forwarding  │ Постоянно    │ Полная работа│ Да          │
└─────────────┴──────────────┴──────────────┴─────────────┘

Общее время конвергенции: 50 секунд (20+15+15)
```

**Результат работы STP:**

```
Логическая топология после STP:

      Root Bridge (A)
         ┌─────┐
      ┌──┤  DP ├──┐ DP = Designated Port
      │  └─────┘  │
      │           │
     RP           RP  RP = Root Port
┌─────▼─┐       ┌─▼─────┐
│    DP │       │  DP  │
│ Комм. │   X   │ Комм. │
│   B   │───────│   C   │
└───────┘  BP   └───────┘

BP = Blocked Port (заблокированный)

Путь трафика: B ↔ A ↔ C (петли нет)
```

### Улучшенные версии STP

```
Эволюция протоколов Spanning Tree:

STP (802.1D):
- Время конвергенции: 50 секунд
- Поддержка только одного VLAN
- Устаревший

RSTP (802.1w):
- Время конвергенции: 1-6 секунд  
- Обратная совместимость с STP
- Более быстрая конвергенция

MSTP (802.1s):
- Поддержка нескольких VLAN
- Отдельный STP для группы VLAN
- Оптимизация использования каналов

PVST+ (Per-VLAN STP):
- Отдельный STP для каждого VLAN
- Балансировка нагрузки
- Проприетарный протокол Cisco
```

**Rapid STP состояния портов:**

```
RSTP упрощенные состояния:

┌─────────────┬─────────────┬─────────────┐
│ STP         │ RSTP        │ Функция     │
├─────────────┼─────────────┼─────────────┤
│ Disabled    │ Discarding  │ Не работает │
├─────────────┼─────────────┼─────────────┤
│ Blocking    │ Discarding  │ Блокирован  │
├─────────────┼─────────────┼─────────────┤
│ Listening   │ Discarding  │ Слушает     │
├─────────────┼─────────────┼─────────────┤
│ Learning    │ Learning    │ Изучает     │
├─────────────┼─────────────┼─────────────┤
│ Forwarding  │ Forwarding  │ Передает    │
└─────────────┴─────────────┴─────────────┘

Быстрая конвергенция за счет:
✓ Proposal/Agreement механизма
✓ Edge портов (к конечным устройствам)
✓ Point-to-point соединений
```

## 🔗 Агрегация каналов (Link Aggregation)

### Концепция агрегации

```
Проблема: Недостаточная пропускная способность между коммутаторами

Коммутатор A ──── 1 Гбит/с ──── Коммутатор B
                      ↑
               Узкое место

Решение: Объединение нескольких портов

Коммутатор A ╔══════════════════╗ Коммутатор B
            ║ ──── 1 Гбит/с ──── ║
            ║ ──── 1 Гбит/с ──── ║
            ║ ──── 1 Гбит/с ──── ║
            ║ ──── 1 Гбит/с ──── ║
            ╚══════════════════╝
            4 Гбит/с агрегированный канал
```

### Стандарты агрегации

```
IEEE 802.3ad (LACP - Link Aggregation Control Protocol):

┌─────────────────────────────────────────┐
│ Автоматическое согласование             │
│ ┌─────────────┐     ┌─────────────┐     │
│ │Коммутатор A │ ←→  │Коммутатор B │     │
│ │             │LACP │             │     │
│ │Port1: Active│     │Port1: Active│     │
│ │Port2: Active│     │Port2: Active│     │
│ └─────────────┘     └─────────────┘     │
└─────────────────────────────────────────┘

Статическая агрегация (без протокола):
- Ручная настройка на обеих сторонах
- Нет автоматического определения проблем
- Риск петель при неправильной настройке
```

### Методы балансировки нагрузки

```
Алгоритмы распределения трафика:

1. Round-robin:
Кадр 1 → Порт 1
Кадр 2 → Порт 2  
Кадр 3 → Порт 3
Кадр 4 → Порт 1 (снова)

2. Source MAC:
Хеш(MAC источника) mod количество_портов
Один источник → всегда один порт

3. Destination MAC:  
Хеш(MAC получателя) mod количество_портов
Один получатель → всегда один порт

4. Source + Destination MAC:
Хеш(MAC источника + MAC получателя)
Лучшее распределение

5. Source + Destination IP:
Хеш(IP источника + IP получателя)
Работает на L3 коммутаторах
```

### Преимущества и ограничения

```
Преимущества Link Aggregation:

✓ Увеличение пропускной способности
  2×1Гб = 2Гб, 4×1Гб = 4Гб

✓ Избыточность (отказоустойчивость)
  Выход из строя одного порта не прерывает связь

✓ Прозрачность для верхних уровней
  Выглядит как один логический интерфейс

Ограничения:

✗ Одна conversation всегда идет по одному порту
  (нельзя разбить один поток между портами)

✗ Все порты должны иметь одинаковые настройки:
  - Скорость и дуплекс
  - VLAN настройки  
  - STP параметры

✗ Ограничения по количеству портов:
  - Обычно до 8 портов в одной группе
  - Зависит от модели коммутатора
```

## ✅ Контрольные вопросы

1. **Эволюция Ethernet:**
   - В чем основное отличие между хабом и коммутатором?
   - Какие преимущества дает переход от 10Base5 к 10Base-T?
   - Почему Gigabit Ethernet использует все 4 пары проводов?

2. **MAC-адреса:**
   - Как коммутатор изучает MAC-адреса?
   - Что происходит при flooding?
   - В чем разница между unicast, multicast и broadcast адресами?

3. **VLAN:**
   - Зачем нужны виртуальные локальные сети?
   - В чем разница между access и trunk портами?
   - Как организовать связь между разными VLAN?

4. **Spanning Tree:**
   - Какую проблему решает STP?
   - Как выбирается Root Bridge?
   - В чем преимущества RSTP перед обычным STP?

5. **Агрегация каналов:**
   - Какие задачи решает Link Aggregation?
   - Почему важен алгоритм балансировки нагрузки?
   - Какие ограничения имеет агрегация портов?

---

# 📖 Глава 2.2: Беспроводные сети

## 📡 Основы беспроводной связи

### Принципы радиосвязи

**Электромагнитные волны как среда передачи:**

```
Радиоволна в пространстве:

Антенна передатчика ~~~~~~~~~~~~~~~~~~~~► Антенна приемника
                    Электромагнитная волна

Характеристики волны:
- Частота (f): количество колебаний в секунду (Гц)
- Длина волны (λ): расстояние между пиками
- Амплитуда: "громкость" сигнала
- Фаза: положение волны во времени

Связь между частотой и длиной волны:
λ = c / f
где c = 300,000,000 м/с (скорость света)

Пример:
Wi-Fi 2.4 ГГц: λ = 300,000,000 / 2,400,000,000 = 12.5 см
Wi-Fi 5 ГГц:   λ = 300,000,000 / 5,000,000,000 = 6 см
```

### Распространение радиоволн

```
Факторы, влияющие на распространение:

1. Свободное пространство (Free Space Path Loss):
┌─────────────────────────────────────────┐
│ Мощность сигнала убывает с расстоянием: │
│                                         │
│ 1м: ████████████ (100%)                │
│ 2м: ████████     (25%)                 │
│ 4м: ████         (6.25%)               │
│ 8м: ██           (1.56%)               │
└─────────────────────────────────────────┘

2. Поглощение материалами:
┌─────────────────┬─────────────────┐
│ Материал        │ Затухание (дБ)  │
├─────────────────┼─────────────────┤
│ Воздух          │ 0               │
├─────────────────┼─────────────────┤
│ Окно            │ 2-3             │
├─────────────────┼─────────────────┤
│ Гипсокартон     │ 3-5             │
├─────────────────┼─────────────────┤
│ Кирпичная стена │ 10-15           │
├─────────────────┼─────────────────┤
│ Железобетон     │ 20-30           │
├─────────────────┼─────────────────┤
│ Металл          │ 40-90           │
└─────────────────┴─────────────────┘

3. Многолучевое распространение:
            Прямой путь
AP ─────────────────────→ Клиент
 │                          ↗
 └─ Отражение ──┘
    от стены
    
Результат: интерференция сигналов
```

### Частотные диапазоны

```
ISM диапазоны (Industrial, Scientific, Medical):

┌─────────────────┬─────────────────┬─────────────────┐
│ Диапазон        │ Частота         │ Применение      │
├─────────────────┼─────────────────┼─────────────────┤
│ 900 МГц         │ 902-928 МГц     │ Старые беспров. │
├─────────────────┼─────────────────┼─────────────────┤
│ 2.4 ГГц         │ 2.4-2.485 ГГц   │ Wi-Fi, Bluetooth│
├─────────────────┼─────────────────┼─────────────────┤
│ 5 ГГц           │ 5.15-5.85 ГГц   │ Wi-Fi           │
├─────────────────┼─────────────────┼─────────────────┤
│ 6 ГГц           │ 5.925-7.125 ГГц │ Wi-Fi 6E/7      │
├─────────────────┼─────────────────┼─────────────────┤
│ 60 ГГц          │ 57-71 ГГц       │ WiGig, 802.11ad │
└─────────────────┴─────────────────┴─────────────────┘

Лицензируемые vs нелицензируемые:

Лицензируемые (операторы сотовой связи):
- Эксклюзивное использование частот
- Высокая стоимость лицензии
- Защита от помех

Нелицензируемые (ISM):
- Свободное использование
- Возможны взаимные помехи
- Ограничения по мощности
```

## 📶 Стандарты Wi-Fi (802.11)

### Эволюция стандартов

```
История развития Wi-Fi:

1997 ──── 1999 ──── 2003 ──── 2009 ──── 2013 ──── 2019 ──── 2024
  │        │        │        │        │        │        │
802.11   802.11b  802.11g  802.11n  802.11ac 802.11ax 802.11be
2 Мбит/с 11 Мбит/с 54 Мбит/с 600 Мбит/с 6.9 Гбит/с 9.6 Гбит/с 46 Гбит/с
                            │        │        │        │
                         Wi-Fi 4  Wi-Fi 5  Wi-Fi 6  Wi-Fi 7
```

### Детальное сравнение стандартов

```
┌──────────┬───────┬─────────┬─────────┬─────────┬───────────┬──────────┐
│Стандарт  │Wi-Fi  │Частота  │Скорость │Модуляция│Каналы     │MIMO      │
│          │название│(ГГц)   │(Мбит/с) │         │           │          │
├──────────┼───────┼─────────┼─────────┼─────────┼───────────┼──────────┤
│802.11    │Wi-Fi 0│2.4      │2        │FHSS/DSSS│3          │Нет       │
├──────────┼───────┼─────────┼─────────┼─────────┼───────────┼──────────┤
│802.11b   │Wi-Fi 1│2.4      │11       │DSSS     │3          │Нет       │
├──────────┼───────┼─────────┼─────────┼─────────┼───────────┼──────────┤
│802.11a   │Wi-Fi 2│5        │54       │OFDM     │12         │Нет       │
├──────────┼───────┼─────────┼─────────┼─────────┼───────────┼──────────┤
│802.11g   │Wi-Fi 3│2.4      │54       │OFDM     │3          │Нет       │
├──────────┼───────┼─────────┼─────────┼─────────┼───────────┼──────────┤
│802.11n   │Wi-Fi 4│2.4/5    │600      │OFDM     │До 40 МГц  │4×4       │
├──────────┼───────┼─────────┼─────────┼─────────┼───────────┼──────────┤
│802.11ac  │Wi-Fi 5│5        │6933     │QAM      │До 160 МГц │8×8       │
├──────────┼───────┼─────────┼─────────┼─────────┼───────────┼──────────┤
│802.11ax  │Wi-Fi 6│2.4/5/6  │9608     │OFDMA    │До 160 МГц │8×8       │
├──────────┼───────┼─────────┼─────────┼─────────┼───────────┼──────────┤
│802.11be  │Wi-Fi 7│2.4/5/6  │46120    │OFDMA    │До 320 МГц │16×16     │
└──────────┴───────┴─────────┴─────────┴─────────┴───────────┴──────────┘
```

### Технологические улучшения

**802.11n (Wi-Fi 4) - первый "современный" стандарт:**

```
Ключевые нововведения:

1. MIMO (Multiple Input Multiple Output):
Одна антенна:     Несколько антенн:
     📡                📡📡📡
     │                  │││
  ~~~│~~~            ~~~│││~~~
     │               Пространственное
 Один поток          мультиплексирование
                     = больше данных

2. Ширина канала 40 МГц:
20 МГц канал:  ████████
40 МГц канал:  ████████████████
               ↑
            Удвоенная скорость

3. Агрегация кадров:
Старый способ:
[Заголовок][Данные] [Заголовок][Данные] [Заголовок][Данные]

Новый способ (A-MPDU):
[Заголовок][Данные+Данные+Данные]
           ↑
    Меньше накладных расходов
```

**802.11ac (Wi-Fi 5) - гигабитные скорости:**

```
Продвинутые технологии:

1. Только 5 ГГц:
- Меньше помех (нет Bluetooth, микроволновок)
- Больше каналов
- Более широкие каналы (80/160 МГц)

2. 256-QAM модуляция:
64-QAM:  6 бит на символ
256-QAM: 8 бит на символ
         ↑
    +33% скорость

3. Multi-User MIMO (MU-MIMO):
Старый MIMO:          Новый MU-MIMO:
AP → Клиент 1         AP → Клиент 1
   (ждет ответа)         → Клиент 2  ← Одновременно!
AP → Клиент 2            → Клиент 3

4. Beamforming (формирование луча):
Всенаправленная:      Направленная:
    📡                   📡
  ~~~│~~~              ╱│╲
 ~~~●│●~~~           ╱  │  ╲
  ~~~│~~~         ╱     │     ╲
    клиент           клиент
```

**802.11ax (Wi-Fi 6) - эффективность и плотность:**

```
Революционные улучшения:

1. OFDMA (Orthogonal Frequency Division Multiple Access):
Старый подход:        Новый OFDMA:
Клиент 1: ████████    Клиент 1: ██ ██ ██
Клиент 2: ████████    Клиент 2:   ██ ██
Клиент 3: ████████    Клиент 3:     ██ ██
          ↑                       ↑
    По очереди              Одновременно

2. BSS Coloring (раскраска сетей):
Без BSS Coloring:     С BSS Coloring:
AP1: Занято          AP1: Цвет Red (занято)
AP2: Ждет            AP2: Цвет Blue (может передавать)
     ↓                        ↓
Ложная занятость     Повторное использование частот

3. Target Wake Time (TWT):
IoT устройство говорит AP:
"Разбуди меня через 30 минут"
     ↓
Экономия батареи + меньше конкуренции

4. 1024-QAM:
256-QAM: 8 бит/символ
1024-QAM: 10 бит/символ
          ↑
      +25% скорость
```

### Каналы Wi-Fi

**2.4 ГГц диапазон:**

```
Каналы 2.4 ГГц (20 МГц каждый):

   2412  2437  2462 МГц
     │     │     │
┌────▼─┬──▼─┬───▼──┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐
│  1   │ 6  │  11  │ 2   │ 3   │ 4   │ 5   │ 7   │ 8   │ 9   │ 10  │ 12  │ 13  │
└──────┴────┴──────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘
   ↑     ↑     ↑
Не пересекающиеся каналы

Планирование сети:
AP1: Канал 1  ────── 25м ────── AP2: Канал 6 ────── 25м ────── AP3: Канал 11
```

**5 ГГц диапазон:**

```
5 ГГц - намного больше каналов:

┌─────────────────┬─────────────────┬─────────────────┐
│ Поддиапазон     │ Частоты         │ Каналы (20МГц)  │
├─────────────────┼─────────────────┼─────────────────┤
│ UNII-1          │ 5.15-5.25 ГГц   │ 36,40,44,48     │
├─────────────────┼─────────────────┼─────────────────┤
│ UNII-2A         │ 5.25-5.35 ГГц   │ 52,56,60,64     │
├─────────────────┼─────────────────┼─────────────────┤
│ UNII-2C         │ 5.47-5.725 ГГц  │ 100-144         │
├─────────────────┼─────────────────┼─────────────────┤
│ UNII-3          │ 5.725-5.875 ГГц │ 149,153,157,161 │
└─────────────────┴─────────────────┴─────────────────┘

Широкие каналы:
20 МГц:  [36]
40 МГц:  [36+40]
80 МГц:  [36+40+44+48]
160 МГц: [36+40+44+48+52+56+60+64]

DFS (Dynamic Frequency Selection):
- Каналы 52-144 требуют проверки радара
- При обнаружении радара → смена канала
- Задержка при включении AP (до 10 минут)
```

## 🔐 Безопасность беспроводных сетей

### Эволюция стандартов безопасности

```
Развитие Wi-Fi безопасности:

1997 ──── 2003 ──── 2004 ──── 2018 ──── 2020
  │        │        │        │        │
Открытые  WEP     WPA/WPA2   WPA3    WPA3-SAE
сети              │         │       Enhanced
                  │         │
              WEP взломан  │
              за 3 минуты  │
                          Современный
                          стандарт
```

### WEP (Wired Equivalent Privacy) - устаревший

```
Проблемы WEP:

1. Статический ключ:
┌─────────────────────────────────────────┐
│ Один ключ для всех пользователей        │
│ 40 или 104 бита (очень мало)            │
│ Ключ не изменяется автоматически        │
└─────────────────────────────────────────┘

2. Слабая криптография:
RC4 шифрование + повторяющиеся IV векторы
        ↓
Возможность взлома за несколько минут

3. Отсутствие аутентификации:
Любой с правильным ключом = полный доступ

Вывод: WEP НЕ обеспечивает безопасность!
```

### WPA/WPA2 (Wi-Fi Protected Access)

**WPA - переходное решение:**

```
Улучшения WPA над WEP:

1. TKIP (Temporal Key Integrity Protocol):
┌─────────────────────────────────────────┐
│ Динамические ключи                      │
│ Ключ изменяется каждые 10,000 пакетов   │
│ 128-битное шифрование                   │
└─────────────────────────────────────────┘

2. Message Integrity Check (MIC):
- Защита от подделки пакетов
- Обнаружение атак типа "человек посередине"

3. 802.1X аутентификация:
Клиент ← → AP ← → RADIUS сервер
       Authentication
```

**WPA2 - современный стандарт:**

```
Ключевые особенности WPA2:

1. AES-CCMP шифрование:
┌─────────────────────────────────────────┐
│ AES (Advanced Encryption Standard)      │
│ 128-битные ключи                        │
│ Военный стандарт криптографии           │
│ Практически невзламываемый              │
└─────────────────────────────────────────┘

2. Два режима аутентификации:

Personal (PSK - Pre-Shared Key):
┌─────────────────────────────────────────┐
│ Общий пароль для всех пользователей     │
│ 8-63 символа или 64 hex символа         │
│ Простота настройки                      │
│ Подходит для дома/малого офиса          │
└─────────────────────────────────────────┘

Enterprise (802.1X):
┌─────────────────────────────────────────┐
│ Индивидуальные учетные записи           │
│ Централизованная аутентификация         │
│ RADIUS/LDAP/Active Directory           │
│ Корпоративная безопасность              │
└─────────────────────────────────────────┘
```

**Процесс подключения WPA2-PSK:**

```
4-Way Handshake:

Клиент                           AP
  │                               │
  ├─── Authentication Request ──→ │ 1. Открытая аутентификация
  │ ←── Authentication Response ──┤
  │                               │
  ├─── Association Request ─────→ │ 2. Ассоциация
  │ ←── Association Response ─────┤
  │                               │
  │ ←───── ANonce ────────────────┤ 3. AP отправляет случайное число
  │                               │
  ├─── SNonce + MIC ──────────────→ │ 4. Клиент отвечает своим числом
  │                               │    + проверочная сумма
  │ ←───── GTK + MIC ─────────────┤ 5. AP отправляет групповой ключ
  │                               │
  ├─── ACK ───────────────────────→ │ 6. Клиент подтверждает
  │                               │
  │ ═══ Зашифрованный трафик ═══ │ 7. Связь установлена
```

### WPA3 - следующее поколение

```
Улучшения WPA3:

1. SAE (Simultaneous Authentication of Equals):
┌─────────────────────────────────────────┐
│ Защита от offline атак                  │
│ Даже при перехвате handshake невозможно │
│ подобрать пароль методом перебора       │
│ Forward Secrecy (ключи сеанса)          │
└─────────────────────────────────────────┘

2. Улучшенная криптография:
- 192-битные ключи для Enterprise
- Защита от квантовых атак
- Обязательное использование PMF

3. Wi-Fi Easy Connect:
QR-код → безопасное подключение IoT устройств

4. Enhanced Open:
Шифрование даже в открытых сетях
(OWE - Opportunistic Wireless Encryption)
```

### Enterprise безопасность

**802.1X архитектура:**

```
Компоненты Enterprise Wi-Fi:

┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  Supplicant │    │Authenticator│    │ Auth Server │
│  (Клиент)   │    │    (AP)     │    │   (RADIUS)  │
└──────┬──────┘    └──────┬──────┘    └──────┬──────┘
       │                  │                  │
       ├── EAP-Request ──→│                  │
       │ ←─ EAP-Identity ─┤                  │
       ├── EAP-Response ─→├── RADIUS-Req ──→│
       │                  │                  │
       │ ←─ EAP-Challenge ├←─ RADIUS-Resp ──┤
       ├── EAP-Response ─→├── RADIUS-Req ──→│
       │                  │                  │
       │ ←── EAP-Success ─├←─ RADIUS-Accept ┤
       │                  │                  │
       │ ═══ Encryption Keys Generated ═══  │
```

**Типы EAP протоколов:**

```
┌─────────────┬─────────────────┬─────────────────┬─────────────┐
│ EAP Тип     │ Аутентификация  │ Сертификаты     │ Сложность   │
├─────────────┼─────────────────┼─────────────────┼─────────────┤
│ EAP-TLS     │ Сертификаты     │ Клиент + Сервер │ Высокая     │
├─────────────┼─────────────────┼─────────────────┼─────────────┤
│ EAP-TTLS    │ Пароль          │ Только сервер   │ Средняя     │
├─────────────┼─────────────────┼─────────────────┼─────────────┤
│ PEAP        │ Пароль          │ Только сервер   │ Средняя     │
├─────────────┼─────────────────┼─────────────────┼─────────────┤
│ EAP-FAST    │ PAC файлы       │ Опционально     │ Низкая      │
└─────────────┴─────────────────┴─────────────────┴─────────────┘
```

## 📊 Планирование беспроводных сетей

### Анализ требований

**Факторы планирования:**

```
1. Плотность пользователей:
┌─────────────────────────────────────────┐
│ Тип помещения vs Количество устройств   │
│                                         │
│ Офис: 1 устройство на 10 м²            │
│ Конференц-зал: 3 устройства на 1 м²     │
│ Кафетерий: 2 устройства на 5 м²        │
│ Склад: 1 устройство на 100 м²          │
└─────────────────────────────────────────┘

2. Типы приложений:
┌─────────────────┬─────────────────┐
│ Приложение      │ Требования      │
├─────────────────┼─────────────────┤
│ Email, Web      │ 1-5 Мбит/с      │
├─────────────────┼─────────────────┤
│ Video streaming │ 5-25 Мбит/с     │
├─────────────────┼─────────────────┤
│ VoIP            │ 100 Кбит/с      │
│                 │ (низкая задержка)│
├─────────────────┼─────────────────┤
│ Video calls     │ 2-10 Мбит/с     │
│                 │ (низкий jitter) │
└─────────────────┴─────────────────┘

3. Покрытие vs Производительность:
Максимальное покрытие:  ████████████████████
Максимальная скорость:  ████

Оптимальный баланс:     ████████████
```

### Site Survey (обследование объекта)

**Этапы обследования:**

```
1. Предварительное обследование:
┌─────────────────────────────────────────┐
│ • Планы здания                          │
│ • Материалы стен                        │
│ • Источники помех                       │
│ • Требования к покрытию                 │
│ • Анализ существующих сетей             │
└─────────────────────────────────────────┘

2. Пассивное обследование:
┌─────────────────────────────────────────┐
│ • Анализ существующих Wi-Fi сетей       │
│ • Измерение фонового шума               │
│ • Карта помех                           │
│ • Анализ использования каналов          │
└─────────────────────────────────────────┘

3. Активное обследование:
┌─────────────────────────────────────────┐
│ • Установка временных AP                │
│ • Тестирование покрытия                 │
│ • Измерение скорости                    │
│ • Проверка роуминга                     │
└─────────────────────────────────────────┘

4. Постпроектное обследование:
┌─────────────────────────────────────────┐
│ • Валидация покрытия                    │
│ • Тестирование производительности       │
│ • Оптимизация настроек                  │
│ • Документирование результатов          │
└─────────────────────────────────────────┘
```

### Расчет покрытия

**Модель распространения сигнала:**

```
Free Space Path Loss:
FSPL = 20log₁₀(d) + 20log₁₀(f) + 32.44

где:
d = расстояние в км
f = частота в МГц

Пример расчета для 2.4 ГГц на 30 метров:
FSPL = 20log₁₀(0.03) + 20log₁₀(2400) + 32.44
     = 20×(-1.52) + 20×(3.38) + 32.44
     = -30.4 + 67.6 + 32.44
     = 69.64 дБ

Link Budget:
Мощность передатчика: +20 дБм
Потери в кабеле AP:   -1 дБ
Усиление антенны AP:  +2 дБи
Потери в пространстве: -70 дБ
Усиление антенны клиента: +2 дБи
Потери в кабеле клиента: -1 дБ
                        ________
Уровень сигнала:       -48 дБм
```

**Зоны покрытия:**

```
Концентрические зоны AP:

                AP (центр)
                   ●
    
         ┌─────────────────┐    -67 дБм
       ┌─────────────────────┐  -70 дБм  
     ┌─────────────────────────┐ -75 дБм
   ┌─────────────────────────────┐ -80 дБм

Характеристики зон:
-67 дБм: Высокие скорости (MCS 7-9)
-70 дБм: Средние скорости (MCS 4-6)  
-75 дБм: Низкие скорости (MCS 1-3)
-80 дБм: Минимальная связь (MCS 0)

Планирование перекрытия:
AP1 ◄──────── 15-20% ──────────► AP2
```

### Размещение точек доступа

**Принципы размещения:**

```
1. Высота установки:
┌─────────────────────────────────────────┐
│ Оптимальная высота: 3-4 метра           │
│                                         │
│ Слишком низко (<2.5м):                  │
│ • Блокировка людьми                     │
│ • Повышенные помехи                     │
│                                         │
│ Слишком высоко (>5м):                   │
│ • Плохое покрытие вниз                  │
│ • Сложность обслуживания                │
└─────────────────────────────────────────┘

2. Избегание препятствий:
         ❌               ✅
    ┌─────────┐      ┌─────────┐
    │  Металл │      │         │
AP──┤ шкаф    │  vs  │    AP   │──┐
    │         │      │         │  │
    └─────────┘      └─────────┘  │
    Экранирование    Открытое     │
                     размещение   ▼
                                клиенты

3. Учет интерференции:
┌─────────────────────────────────────────┐
│ Источники помех:                        │
│ • Микроволновые печи (2.4 ГГц)          │
│ • Bluetooth устройства                  │
│ • Беспроводные камеры                   │
│ • Двигатели и моторы                    │
│ • Флуоресцентные лампы                  │
└─────────────────────────────────────────┘
```

**Паттерны размещения:**

```
Квадратная сетка (офисы):
AP1 ────────── AP2
 │              │
 │              │  
 │              │
AP3 ────────── AP4

Гексагональная (оптимальная):
    AP1     AP2
       ╲   ╱
        ╲ ╱
    AP3─ ● ─AP4
        ╱ ╲
       ╱   ╲
    AP5     AP6

Линейная (коридоры):
AP1 ──── AP2 ──── AP3 ──── AP4
```

## 🔄 Роуминг и управление мобильностью

### Концепция роуминга

```
Проблема мобильности:

Клиент движется по зданию:
Зона AP1 → Переходная зона → Зона AP2
   ███████████████░░░░░░░░█████████████
   │               │               │
Сильный сигнал  Слабый сигнал  Сильный сигнал
   AP1             ?              AP2

Без роуминга:
• Разрыв соединения при перемещении
• Необходимость переподключения
• Потеря сеансов приложений

С роумингом:
• Бесшовное переключение между AP
• Сохранение IP адреса
• Непрерывность работы приложений
```

### Типы роуминга

```
1. Layer 2 Roaming (в пределах одной подсети):
┌─────────────────────────────────────────┐
│         Один коммутатор                 │
│                                         │
│  AP1 ───┬─── Коммутатор ───┬─── AP2     │
│         │                  │            │
│     VLAN 10             VLAN 10         │
│  192.168.10.0/24    192.168.10.0/24    │
│                                         │
│ Клиент сохраняет IP: 192.168.10.50     │
└─────────────────────────────────────────┘

2. Layer 3 Roaming (между подсетями):
┌─────────────────────────────────────────┐
│  AP1                           AP2      │
│  VLAN 10                     VLAN 20    │
│  192.168.10.0/24        192.168.20.0/24│
│       │                        │        │
│       └──── Контроллер ────────┘        │
│              (туннель)                  │
│                                         │
│ Клиент сохраняет IP и подсеть           │
└─────────────────────────────────────────┘
```

### Механизмы роуминга

**802.11r (Fast BSS Transition):**

```
Стандартный роуминг:           Fast BSS Transition:
1. Деассоциация с AP1         1. Предварительная аутентификация
2. Сканирование каналов       2. Быстрое переключение  
3. Аутентификация с AP2       3. Сохранение ключей
4. Ассоциация с AP2          4. Минимальные задержки
5. 4-way handshake

Время: 100-300 мс             Время: <50 мс

Критично для:
• VoIP (Voice over IP)
• Видеоконференции  
• Real-time приложения
```

**802.11k (Radio Resource Management):**

```
Neighbor Reports:
AP передает клиенту список соседних AP:

┌─────────────────────────────────────────┐
│ Neighbor Report от AP1:                 │
│                                         │
│ AP2: Канал 6, BSSID xx:xx:xx:xx:xx:xx  │
│ AP3: Канал 11, BSSID yy:yy:yy:yy:yy:yy │
│ AP4: Канал 1, BSSID zz:zz:zz:zz:zz:zz  │
└─────────────────────────────────────────┘

Преимущества:
✓ Клиент знает о соседних AP
✓ Нет необходимости сканировать все каналы
✓ Быстрое обнаружение AP для роуминга
```

**802.11v (Wireless Network Management):**

```
BSS Transition Management:
AP может "посоветовать" клиенту переключиться:

AP1 (перегружен): "Рекомендую переключиться на AP2"
                         ↓
Клиент: "Согласен" или "Остаюсь здесь"

Применение:
• Балансировка нагрузки
• Обслуживание оборудования
• Оптимизация производительности
```

## 📊 Анализ производительности

### Факторы, влияющие на скорость

```
Теоретическая vs Реальная скорость:

802.11ac Wave 2 (теоретически):
┌─────────────────────────────────────────┐
│ 3×3 MIMO, 80МГц, 256-QAM = 1300 Мбит/с │
└─────────────────────────────────────────┘

Реальная скорость (практически):
┌─────────────────────────────────────────┐
│ Накладные расходы протокола: -20%       │
│ Помехи и ретрансмиссии: -15%            │
│ Расстояние до AP: -30%                  │
│ Конкуренция за среду: -25%              │
│                            ____________ │
│ Итого: ~300-400 Мбит/с (30% от теории) │
└─────────────────────────────────────────┘
```

### Инструменты анализа

**Анализаторы спектра:**

```
Спектральный анализ 2.4 ГГц:

Мощность
    ▲
    │  ██
    │  ██  ██
    │  ██  ██    ██
    │  ██  ██ ██ ██
    └──────────────────────────→ Частота
    1   6   11  Bluetooth   Микроволновка

Интерпретация:
• Высокие пики = сильные сигналы  
• Широкие пики = помехи
• Движущиеся сигналы = Bluetooth/FHSS
```

**Wi-Fi анализаторы:**

```
Информация о сетях:

┌─────────────┬─────────┬───────┬─────────┬─────────┐
│ SSID        │ BSSID   │ Канал │ Сигнал  │ Безопасность│
├─────────────┼─────────┼───────┼─────────┼─────────┤
│ Office_WiFi │ 12:34:56│   6   │ -45 дБм │ WPA2    │
├─────────────┼─────────┼───────┼─────────┼─────────┤
│ Guest_Net   │ 12:34:57│   6   │ -47 дБм │ Открытая│
├─────────────┼─────────┼───────┼─────────┼─────────┤
│ Neighbor    │ AB:CD:EF│   6   │ -62 дБм │ WPA2    │
└─────────────┴─────────┴───────┴─────────┴─────────┘

Проблемы:
❌ Три сети на одном канале (6)
❌ Сильные соседние сигналы
❌ Необходимо изменить план каналов
```

### Оптимизация производительности

**Настройка мощности:**

```
Проблема высокой мощности:
    AP1 (100%)          AP2 (100%)
      ████████████████████
      │                  │
   Клиент              Клиент
      │                  │
   Видит оба AP,       Видит оба AP,
   плохо выбирает      плохо выбирает

Оптимизированная мощность:
    AP1 (60%)            AP2 (60%)
      ████████        ████████
      │                  │
   Клиент              Клиент  
      │                  │
   Четкие границы     Четкие границы
   покрытия           покрытия
```

**Управление каналами:**

```
Автоматический выбор каналов (DCA):

Контроллер мониторит:
• Загрузку каналов
• Уровень помех
• Соседние сети
• Производительность клиентов

Периодическая оптимизация:
00:00 → Анализ → Перестройка каналов → 24:00
```

## ✅ Контрольные вопросы

1. **Основы беспроводной связи:**
   - Почему 5 ГГц имеет меньшую дальность, чем 2.4 ГГц?
   - Какие факторы влияют на распространение радиоволн?
   - Чем отличается многолучевое распространение от прямого?

2. **Стандарты Wi-Fi:**
   - Какие ключевые технологии появились в 802.11n?
   - В чем преимущества OFDMA в Wi-Fi 6?
   - Почему 802.11ac работает только на 5 ГГц?

3. **Безопасность:**
   - Почему WEP считается небезопасным?
   - В чем разница между WPA2-PSK и WPA2-Enterprise?
   - Какие улучшения безопасности принес WPA3?

4. **Планирование сетей:**
   - Как рассчитать количество точек доступа?
   - Что такое Site Survey и зачем он нужен?
   - Какие факторы влияют на размещение AP?

5. **Роуминг:**
   - В чем разница между L2 и L3 роумингом?
   - Что дает стандарт 802.11r?
   - Как работает балансировка нагрузки?

---

# 📖 Глава 2.3: Протоколы канального уровня

## 🗺️ ARP - Address Resolution Protocol

### Проблема разрешения адресов

```
Проблема: Как найти MAC-адрес по IP-адресу?

Компьютер A знает:
• IP получателя: 192.168.1.100  
• Свой MAC: AA:BB:CC:DD:EE:01
• Свой IP: 192.168.1.50

Компьютер A НЕ знает:
• MAC адрес получателя: ??:??:??:??:??:??

Ethernet кадр требует MAC адресов:
┌─────────┬─────────┬─────────┐
│ MAC получ.│ MAC отпр.│ Данные  │
│ ????????│AA:BB:CC:DD:EE:01│      │
└─────────┴─────────┴─────────┘
     ↑
  Неизвестно!
```

### Процесс ARP

**ARP Request (запрос):**

```
1. A отправляет ARP Request всем в сети:

Ethernet заголовок:
┌─────────────────┬─────────────────┬──────┐
│ FF:FF:FF:FF:FF:FF│ AA:BB:CC:DD:EE:01│ ARP  │
│   (broadcast)   │    (A's MAC)    │      │
└─────────────────┴─────────────────┴──────┘

ARP заголовок:
┌──────────────┬──────────────┬──────────────┬──────────────┐
│ Sender MAC   │ Sender IP    │ Target MAC   │ Target IP    │
│AA:BB:CC:DD:EE:01│192.168.1.50│00:00:00:00:00:00│192.168.1.100│
└──────────────┴──────────────┴──────────────┴──────────────┘

Сообщение: "Кто имеет IP 192.168.1.100? Скажите AA:BB:CC:DD:EE:01"
```

**ARP Reply (ответ):**

```
2. Компьютер с IP 192.168.1.100 отвечает:

Ethernet заголовок:
┌─────────────────┬─────────────────┬──────┐
│ AA:BB:CC:DD:EE:01│ 11:22:33:44:55:66│ ARP  │
│    (A's MAC)    │    (B's MAC)    │      │
└─────────────────┴─────────────────┴──────┘

ARP заголовок:
┌──────────────┬──────────────┬──────────────┬──────────────┐
│ Sender MAC   │ Sender IP    │ Target MAC   │ Target IP    │
│11:22:33:44:55:66│192.168.1.100│AA:BB:CC:DD:EE:01│192.168.1.50│
└──────────────┴──────────────┴──────────────┴──────────────┘

Сообщение: "192.168.1.100 находится по адресу 11:22:33:44:55:66"
```

### ARP таблица

**Кэширование ARP записей:**

```
ARP таблица компьютера A:

┌─────────────┬─────────────────┬─────────────┬─────────────┐
│ IP адрес    │ MAC адрес       │ Тип         │ Время жизни │
├─────────────┼─────────────────┼─────────────┼─────────────┤
│192.168.1.1  │ 00:1A:2B:3C:4D:5E│ Динамический│ 120 сек     │
├─────────────┼─────────────────┼─────────────┼─────────────┤
│192.168.1.100│ 11:22:33:44:55:66│ Динамический│ 180 сек     │
├─────────────┼─────────────────┼─────────────┼─────────────┤
│192.168.1.10 │ FF:EE:DD:CC:BB:AA│ Статический │ Постоянно   │
└─────────────┴─────────────────┴─────────────┴─────────────┘

Команды для просмотра:
Windows: arp -a
Linux:   arp -n
macOS:   arp -a
```

**Жизненный цикл ARP записи:**

```
Создание записи → Использование → Устаревание → Удаление

00:00  ARP запрос/ответ
        ↓
00:05  Создана запись (TTL: 120 сек)
        ↓
01:30  Обновление при использовании
        ↓
02:05  Истечение времени жизни
        ↓  
02:06  Удаление из таблицы

При следующем обращении → новый ARP запрос
```

### Особые случаи ARP

**Proxy ARP:**

```
Сценарий: Устройство в другой подсети

Клиент ──── Роутер ──── Сервер
192.168.1.50  │     192.168.2.100
              │
        (Proxy ARP включен)

1. Клиент: ARP запрос для 192.168.2.100
2. Роутер: "Я знаю этот адрес" (отвечает своим MAC)
3. Клиент: Отправляет пакеты роутеру
4. Роутер: Пересылает пакеты серверу

Применение:
• Устаревшие сети без правильной маршрутизации
• Некорректно настроенные маски подсетей
• Обеспечение обратной совместимости
```

**Gratuitous ARP:**

```
Безвозмездный ARP - объявление о себе:

Компьютер отправляет:
┌──────────────┬──────────────┬──────────────┬──────────────┐
│ Sender MAC   │ Sender IP    │ Target MAC   │ Target IP    │
│AA:BB:CC:DD:EE:01│192.168.1.50│AA:BB:CC:DD:EE:01│192.168.1.50│
└──────────────┴──────────────┴──────────────┴──────────────┘

Цели:
✓ Обновление ARP таблиц соседей
✓ Обнаружение конфликтов IP адресов
✓ Объявление о смене MAC адреса
✓ Ускорение сетевого взаимодействия после загрузки
```

### Проблемы безопасности ARP

**ARP Spoofing (подделка):**

```
Атака "Человек посередине":

Нормальная ситуация:
Клиент ←─ ARP: 192.168.1.1 = AA:AA:AA:AA:AA:AA ─← Роутер

Атака:
Злоумышленник ─→ ARP: 192.168.1.1 = BB:BB:BB:BB:BB:BB
                      ↓
Клиент ────── Трафик ──────→ Злоумышленник ──→ Роутер
                                 ↑
                           Перехват данных

Защита:
• Статические ARP записи
• DAI (Dynamic ARP Inspection)
• ARP мониторинг
• Сетевая сегментация
```

## 📋 LLDP - Link Layer Discovery Protocol

### Назначение LLDP

```
Проблема: Как узнать топологию сети?

Администратор видит:
┌─────────────┐     кабель     ┌─────────────┐
│ Коммутатор A│ ──────────── │ Коммутатор B│
│ Порт 24     │               │ Порт 12     │
└─────────────┘               └─────────────┘

Вопросы:
• Какая модель коммутатора B?
• Какая версия ПО?
• Какие возможности порта?
• Какие VLAN настроены?

LLDP отвечает на эти вопросы автоматически!
```

### Принцип работы LLDP

**LLDP кадры:**

```
Структура LLDP кадра:

┌─────────────┬─────────────┬─────────────┬─────────────┐
│ Ethernet    │ LLDP        │ LLDP        │ End of      │
│ Header      │ Mandatory   │ Optional    │ LLDPDU      │
│             │ TLVs        │ TLVs        │             │
└─────────────┴─────────────┴─────────────┴─────────────┘

Обязательные TLV (Type-Length-Value):
• Chassis ID (идентификатор устройства)
• Port ID (идентификатор порта)
• Time to Live (время жизни информации)

Опциональные TLV:
• System Name (имя системы)
• System Description (описание)
• Port Description (описание порта)
• System Capabilities (возможности)
• Management Address (адрес управления)
```

**Обмен информацией:**

```
Периодическая отправка LLDP:

Коммутатор A                 Коммутатор B
     │                            │
     ├── LLDP (каждые 30 сек) ──→ │
     │ ←── LLDP (каждые 30 сек) ──┤
     │                            │

Информация в LLDP кадре от A:
┌─────────────────────────────────────────┐
│ Chassis ID: MAC 00:1A:2B:3C:4D:5E       │
│ Port ID: FastEthernet0/24               │
│ TTL: 120 секунд                         │
│ System Name: Switch-A-Floor2            │
│ System Desc: Cisco 2960, IOS 15.2      │
│ Port Desc: To-Switch-B-Port12           │
│ Capabilities: Bridge, Router            │
│ Mgmt Address: 192.168.1.10             │
└─────────────────────────────────────────┘
```

### LLDP vs CDP

**Сравнение протоколов обнаружения:**

```
┌─────────────────┬─────────────────┬─────────────────┐
│ Характеристика  │ LLDP            │ CDP             │
├─────────────────┼─────────────────┼─────────────────┤
│ Стандарт        │ IEEE 802.1AB    │ Проприетарный   │
│                 │ (открытый)      │ (Cisco)         │
├─────────────────┼─────────────────┼─────────────────┤
│ Поддержка       │ Все производители│ Только Cisco    │
├─────────────────┼─────────────────┼─────────────────┤
│ Интервал        │ 30 сек          │ 60 сек          │
├─────────────────┼─────────────────┼─────────────────┤
│ Время жизни     │ 120 сек         │ 180 сек         │
├─────────────────┼─────────────────┼─────────────────┤
│ Расширяемость   │ Стандартные TLV │ Cisco TLV       │
└─────────────────┴─────────────────┴─────────────────┘

Выбор протокола:
• Смешанная среда → LLDP
• Чисто Cisco → CDP (больше информации)
• Новые сети → LLDP (стандарт)
```

### Практическое применение

**Автоматическое обнаружение топологии:**

```
Сетевой менеджмент получает LLDP информацию:

┌─────────────────────────────────────────┐
│         Карта сети                      │
│                                         │
│  Switch-A ──── Port24/Port12 ──── Switch-B
│  (192.168.1.10)              (192.168.1.11)
│       │                           │      │
│    Port1-8                    Port1-16  │
│       │                           │      │
│  [Компьютеры]                [Серверы]  │
└─────────────────────────────────────────┘

Автоматически созданная документация:
• Соединения между устройствами
• Модели и версии ПО
• IP адреса управления
• Возможности портов
```

**LLDP-MED (Media Endpoint Discovery):**

```
Расширение для IP телефонов:

IP телефон ←─ LLDP-MED ─→ Коммутатор

Дополнительная информация:
┌─────────────────────────────────────────┐
│ • Сетевая политика (Voice VLAN)         │
│ • Требования к питанию (PoE)            │
│ • Местоположение (адрес, этаж)          │
│ • Медиа возможности (кодеки)            │
│ • Управление устройством                │
└─────────────────────────────────────────┘

Автоматическая настройка:
1. Телефон подключается к коммутатору
2. Получает LLDP-MED информацию  
3. Автоматически настраивается на Voice VLAN
4. Запрашивает необходимую мощность PoE
```

## 🔄 PPP - Point-to-Point Protocol

### Назначение PPP

```
Применение PPP:

Dial-up соединения:
Клиент ── Модем ── Телефонная линия ── Модем ── ISP

DSL соединения:
Клиент ── DSL модем ── PPPoE ── DSLAM ── ISP

VPN туннели:
Клиент ── Интернет ── PPTP/L2TP ── VPN сервер

Последовательные каналы:
Роутер A ── RS-232/WAN ── PPP ── Роутер B
```

### Компоненты PPP

**Архитектура протокола:**

```
Стек протоколов PPP:

┌─────────────────────────────────────────┐
│        Сетевые протоколы                │
│     (IP, IPX, AppleTalk)                │
├─────────────────────────────────────────┤
│     NCP (Network Control Protocol)     │
│   • IPCP (IP Control Protocol)         │
│   • IPXCP (IPX Control Protocol)       │
├─────────────────────────────────────────┤
│     LCP (Link Control Protocol)        │
│   • Установление соединения            │
│   • Аутентификация                     │
│   • Контроль качества                  │
├─────────────────────────────────────────┤
│         Физический уровень              │
│     (Serial, Ethernet, ATM)            │
└─────────────────────────────────────────┘
```

### Установление PPP соединения

**Фазы подключения:**

```
1. Link Dead (соединение мертво)
   ↓
2. Link Establishment (установление соединения)
   LCP Configure-Request ←→ LCP Configure-Request
   LCP Configure-Ack    ←→ LCP Configure-Ack
   ↓
3. Authentication (аутентификация) - опционально
   PAP/CHAP/EAP аутентификация
   ↓
4. Network Layer Protocol (настройка сетевого уровня)
   IPCP Configure-Request ←→ IPCP Configure-Request  
   IPCP Configure-Ack    ←→ IPCP Configure-Ack
   ↓
5. Link Open (соединение открыто)
   Передача IP пакетов
   ↓
6. Link Termination (разрыв соединения)
   LCP Terminate-Request ←→ LCP Terminate-Ack
```

### Методы аутентификации

**PAP (Password Authentication Protocol):**

```
Простая аутентификация паролем:

Клиент                     Сервер
  │                          │
  ├── Username + Password ──→│ 
  │                          │ Проверка в
  │                          │ базе данных
  │ ←── Authentication-Ack ──┤ (или Nak)
  │                          │

Недостатки:
❌ Пароль передается открытым текстом
❌ Нет защиты от перехвата
❌ Нет защиты от повторных атак

Применение: только в доверенных сетях
```

**CHAP (Challenge Handshake Authentication Protocol):**

```
Аутентификация с вызовом:

Клиент                     Сервер
  │                          │
  │ ←──── Challenge ─────────┤ (случайное число)
  │                          │
  ├── Response ─────────────→│ Hash(password + challenge)
  │                          │ Проверяет hash
  │ ←── Success/Failure ─────┤
  │                          │

Преимущества:
✓ Пароль не передается по сети
✓ Защита от атак перехвата
✓ Случайные вызовы (защита от повтора)
✓ Периодическая переаутентификация
```

### PPPoE (PPP over Ethernet)

**Зачем PPPoE нужен:**

```
Проблема DSL провайдеров:

Множество клиентов ── Ethernet ── DSLAM ── Провайдер

Требования:
• Аутентификация каждого клиента
• Контроль доступа и биллинг
• Динамическое выделение IP
• Сеансовая модель подключения

Решение: PPPoE = PPP + Ethernet
```

**Процесс подключения PPPoE:**

```
1. Discovery Phase (обнаружение):

Client ─── PADI (Initiation) ──→ Broadcast
       ←── PADO (Offer) ─────── Access Concentrator
       ─── PADR (Request) ────→ AC
       ←── PADS (Session) ───── AC

2. Session Phase (сеанс):
Обычный PPP через Ethernet кадры

Ethernet Header:
┌─────────────┬─────────────┬──────┬─────────┬─────────┐
│ Dest MAC    │ Src MAC     │ Type │Session ID│ PPP     │
│             │             │0x8864│         │ Payload │
└─────────────┴─────────────┴──────┴─────────┴─────────┘
```

## 🛠️ Диагностика канального уровня

### Типичные проблемы L2

**Петли в сети:**

```
Симптомы:
• Высокая загрузка CPU коммутаторов
• Broadcast storm
• Недоступность сетевых ресурсов
• Мигающие индикаторы портов

Диагностика:
1. Проверка STP состояний портов
2. Анализ MAC таблиц (дублирующиеся записи)
3. Мониторинг broadcast трафика
4. Проверка BPDU счетчиков

┌─────────────────────────────────────────┐
│ show spanning-tree                      │
│ show mac address-table                  │
│ show interfaces counters broadcast      │
└─────────────────────────────────────────┘
```

**Проблемы VLAN:**

```
Неправильная настройка VLAN:

Симптом: Устройства в одной подсети не видят друг друга

Проверка:
1. VLAN membership портов
┌─────────────────────────────────────────┐
│ show vlan brief                         │
│ Interface  VLAN   Mode                  │
│ Fa0/1      10     access                │
│ Fa0/2      20     access  ← Разные VLAN │
└─────────────────────────────────────────┘

2. Trunk настройки
┌─────────────────────────────────────────┐
│ show interfaces trunk                   │
│ Port      VLANs allowed                 │
│ Gi0/1     1,10,20  ← VLAN 30 отсутствует│
└─────────────────────────────────────────┘

3. Native VLAN совпадение
```

**Дуплексные несоответствия:**

```
Half/Full duplex mismatch:

Устройство A: Full duplex  ←─── кабель ───→ Устройство B: Half duplex

Симптомы:
• Коллизии на half-duplex стороне
• Низкая производительность
• Ошибки CRC и alignment

Диагностика:
┌─────────────────────────────────────────┐
│ show interfaces FastEthernet0/1         │
│   Full-duplex, 100Mb/s                  │
│   5 minutes input rate 1000 bits/sec    │
│   5 minutes output rate 50000 bits/sec  │ ← Асимметрия
│   123 input errors, 45 CRC errors       │
│   678 collisions, 234 late collisions   │ ← Коллизии
└─────────────────────────────────────────┘

Решение: Принудительная настройка или auto-negotiation
```

### Инструменты диагностики

**Анализ ARP таблиц:**

```
Команды для разных ОС:

Windows:
┌─────────────────────────────────────────┐
│ arp -a                 # Показать все   │
│ arp -d *               # Очистить все   │
│ arp -s IP MAC          # Добавить       │
│ netsh interface ip delete arpcache     │
└─────────────────────────────────────────┘

Linux/macOS:
┌─────────────────────────────────────────┐
│ arp -n                 # Показать числовые│
│ ip neighbor show       # Современный     │
│ ip neighbor flush all  # Очистить       │
│ arp -i eth0 -s IP MAC  # Добавить       │
└─────────────────────────────────────────┘

Cisco:
┌─────────────────────────────────────────┐
│ show arp                                │
│ show ip arp                             │
│ clear arp-cache                         │
└─────────────────────────────────────────┘
```

**Мониторинг LLDP соседей:**

```
Полезная информация из LLDP:

┌─────────────────────────────────────────┐
│ show lldp neighbors detail              │
│                                         │
│ Port: Gi1/0/24                          │
│ Neighbor: Switch-B.company.com          │
│ Chassis ID: 00:1A:2B:3C:4D:5E           │
│ Port ID: Gi1/0/12                       │
│ System Description: Cisco IOS 15.2     │
│ Management Address: 192.168.1.11        │
│                                         │
│ Capabilities:                           │
│   Bridge: Yes                           │
│   Router: Yes                           │
└─────────────────────────────────────────┘

Применение:
• Автоматическое составление карты сети
• Проверка правильности подключений
• Поиск неправильно подключенных кабелей
```

## ✅ Контрольные вопросы

1. **ARP протокол:**
   - Зачем нужен протокол ARP?
   - Что происходит при ARP Request?
   - Как долго хранятся записи в ARP таблице?
   - Что такое Gratuitous ARP и зачем он используется?

2. **LLDP:**
   - В чем разница между LLDP и CDP?
   - Какую информацию передает LLDP?
   - Как часто отправляются LLDP кадры?
   - Что такое LLDP-MED?

3. **PPP протокол:**
   - В каких сценариях используется PPP?
   - Какие фазы проходит установление PPP соединения?
   - В чем разница между PAP и CHAP аутентификацией?
   - Зачем нужен PPPoE?

4. **Диагностика:**
   - Как определить наличие петель в сети?
   - Какие симптомы указывают на проблемы с VLAN?
   - Как диагностировать дуплексные несоответствия?
   - Какие команды помогают анализировать L2 проблемы?

---

## 🏆 Итоги Блока 2

### 🎯 Что вы изучили

**Блок 2 дал глубокое понимание канального уровня:**

1. **Ethernet и коммутация**
   - Эволюция от коаксиала к современным стандартам
   - Принципы работы коммутаторов vs хабов
   - MAC-адреса и процесс изучения адресов
   - Методы коммутации и их особенности

2. **VLAN технологии**
   - Концепция виртуальных локальных сетей
   - 802.1Q тегирование и типы портов
   - Маршрутизация между VLAN
   - Практические применения сегментации

3. **Spanning Tree Protocol**
   - Проблема петель и их решение
   - Алгоритм STP и состояния портов
   - Эволюция: RSTP, MSTP, PVST+
   - Время конвергенции и оптимизация

4. **Агрегация каналов**
   - Link Aggregation для увеличения пропускной способности
   - LACP протокол и статическая агрегация
   - Алгоритмы балансировки нагрузки
   - Преимущества и ограничения

5. **Беспроводные сети**
   - Принципы радиосвязи и распространения волн
   - Эволюция Wi-Fi стандартов от 802.11 до Wi-Fi 7
   - Планирование сетей и Site Survey
   - Безопасность: от WEP до WPA3
   - Роуминг и управление мобильностью

6. **Протоколы канального уровня**
   - ARP для разрешения адресов
   - LLDP для обнаружения топологии
   - PPP для point-to-point соединений
   - Методы диагностики L2 проблем

### ✅ Ключевые навыки

После изучения Блока 2 вы можете:

- **Проектировать** современные локальные сети с VLAN
- **Настраивать** коммутаторы и их функции
- **Планировать** беспроводные сети с учетом покрытия и производительности
- **Диагностировать** проблемы канального уровня
- **Оптимизировать** производительность LAN
- **Обеспечивать** отказоустойчивость с помощью STP и агрегации

### 🔄 Связь с следующими блоками

**Блок 2 → Блок 3:**
- Канальный уровень → Сетевой уровень
- Локальные сети → Маршрутизация между сетями
- MAC-адреса → IP-адреса
- Коммутация → Маршрутизация

**Подготовка к Блоку 3:**
Теперь вы готовы изучать:
- IP-адресацию и подсети
- Протоколы маршрутизации
- Работу интернета
- NAT и сетевую безопасность

### 📚 Рекомендации для закрепления

1. **Лабораторные работы:**
   - Настройка VLAN в симуляторе
   - Эксперименты с STP
   - Планирование Wi-Fi сети
   - Диагностика L2 проблем

2. **Практические задания:**
   - Проектирование сети для офиса
   - Оптимизация беспроводного покрытия
   - Настройка агрегации каналов
   - Анализ сетевого трафика

3. **Дополнительное изучение:**
   - Стандарты IEEE 802
   - Документация производителей оборудования
   - Best practices для LAN дизайна

---

**🎯 Готовы к Блоку 3? Переходим к изучению маршрутизации и работы интернета!**