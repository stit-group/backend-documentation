# Техническое интервью: Backend разработчик - Мониторинг систем

**Стек:** Grafana, Loki, OpenTelemetry, OTEL Collector, VictoriaMetrics, Tempo  
**Формат:** 60-90 минут, 3 блока + практический кейс

---

## Блок 1: Основы Observability (20 мин)

### 1.1 Three Pillars of Observability
**Вопрос:** Объясните концепцию трех столпов observability и как каждый компонент нашего стека их реализует.

**Углубление:** Как обеспечить корреляцию между метриками из VictoriaMetrics, логами из Loki и трейсами из Tempo?

### 1.2 SLI/SLO/SLA практика
**Вопрос:** Напишите PromQL запрос для расчета 99.9% availability SLI веб-сервиса за последние 30 дней.

**Углубление:** Как настроить алерт в Grafana при нарушении SLO?

### 1.3 Cardinality и производительность
**Вопрос:** У вас метрика `http_requests_total{method, endpoint, user_id, session_id}`. Почему это проблема и как исправить?

**Углубление:** Какие стратегии в OTEL Collector помогают контролировать cardinality?

---

## Блок 2: Технические компоненты (30 мин)

### 2.1 VictoriaMetrics vs Prometheus
**Вопрос:** Назовите 3 ключевых преимущества VictoriaMetrics и объясните архитектуру кластера.

**Углубление:** Как оптимизировать ingestion rate для high-cardinality метрик?

### 2.2 Loki и структурирование логов
**Вопрос:** Почему Loki не индексирует содержимое логов? Как правильно структурировать лейблы?

**Практика:** Напишите LogQL запрос для поиска ошибок 5xx в сервисе "api" за последний час с группировкой по эндпойнтам.

### 2.3 OpenTelemetry инструментация
**Вопрос:** В чем разница между automatic и manual инструментацией? Когда использовать каждую?

**Углубление:** Как настроить sampling для снижения overhead без потери важных трейсов?

### 2.4 OTEL Collector pipeline
**Вопрос:** Объясните разницу между receivers, processors и exporters. Приведите пример pipeline.

**Практика:** Как настроить Collector для фильтрации debug логов и обогащения метрик environment labels?

### 2.5 Tempo и distributed tracing
**Вопрос:** Почему Tempo не индексирует трейсы по умолчанию? Как это влияет на поиск?

**Углубление:** Объясните TraceQL и приведите пример запроса для поиска медленных операций с базой данных.

### 2.6 Grafana интеграция
**Вопрос:** Как создать дашборд, показывающий корреляцию между метриками и логами?

**Углубление:** Настройте drill-down от метрики error rate к соответствующим логам и трейсам.

---

## Блок 3: Архитектура и Production (20 мин)

### 3.1 High Availability
**Вопрос:** Как обеспечить HA для каждого компонента стека? Какие точки отказа?

**Углубление:** Опишите стратегию disaster recovery для исторических данных.

### 3.2 Security
**Вопрос:** Какие security risks существуют в observability pipeline и как их минимизировать?

**Практика:** Как scrub PII данные из логов в OTEL Collector?

### 3.3 Cost Optimization
**Вопрос:** Observability costs растут на 200% в год. Назовите 5 стратегий оптимизации.

**Углубление:** Как implement intelligent sampling на основе business критичности?

### 3.4 Multi-tenancy
**Вопрос:** Как реализовать isolation между командами в shared observability infrastructure?

---

## Практический кейс (15-20 мин)

### Сценарий: Production Incident
**Ситуация:** Пользователи жалуются на медленную работу checkout процесса в e-commerce приложении. Error rate вырос с 0.1% до 2%. Latency увеличился с 200ms до 2s.

**Задача:** Опишите step-by-step процесс investigation:

1. **Первые 5 минут:** Какие дашборды/метрики проверить первыми?
2. **Анализ:** Какие PromQL/LogQL/TraceQL запросы использовать?
3. **Root cause:** Как перейти от симптомов к причине?
4. **Resolution:** Как подтвердить fix и prevent regression?

**Углубляющие вопросы:**
- Какие метрики указывают на database bottleneck vs application issue?
- Как use distributed tracing для identification медленного микросервиса?
- Какие автоматические алерты должны были сработать раньше?

---

## Критерии оценки

### Junior (2-3 года опыта)
- ✅ Понимает основы observability
- ✅ Знает базовые PromQL/LogQL запросы
- ✅ Умеет читать дашборды Grafana
- ✅ Понимает концепцию трейсинга

### Middle (3-5 лет опыта)
- ✅ Все из Junior +
- ✅ Проектирует эффективные дашборды
- ✅ Настраивает OTEL инструментацию
- ✅ Оптимизирует производительность компонентов
- ✅ Troubleshooting production issues

### Senior (5+ лет опыта)
- ✅ Все из Middle +
- ✅ Архитектурные решения для масштабирования
- ✅ Cost optimization стратегии
- ✅ Security и compliance considerations
- ✅ Mentoring команды по observability

---

## Бонусные вопросы (для Senior+)

### Архитектурный вызов
**Вопрос:** Компания планирует growth с 100M до 1B requests/day. Как эволюционировать observability architecture?

### Innovation
**Вопрос:** Как бы вы применили ML/AI для улучшения observability (anomaly detection, predictive alerting)?

### Business Impact
**Вопрос:** Как измерить ROI observability investments и justify budget команде executives?

---

## Практические задания (опционально)

### Live Coding (15 мин)
1. Написать PromQL для расчета 95th percentile latency по сервисам
2. Создать LogQL запрос для анализа error patterns
3. Настроить OTEL Collector processor для data enrichment

### Architecture Design (10 мин)
Нарисовать схему observability pipeline для multi-region deployment с учетом:
- Data locality requirements
- Cross-region correlation
- Cost optimization
- Disaster recovery

---

## Заключение

Данная структура интервью:
- **Сфокусирована** на практических навыках
- **Покрывает** все компоненты стека
- **Масштабируется** по уровню опыта
- **Включает** реальные production сценарии
- **Оценивает** problem-solving approach

**Время:** 60-90 минут в зависимости от уровня кандидата  
**Результат:** Четкое понимание expertise level и практических навыков