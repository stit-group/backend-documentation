# Техническое интервью: Backend разработчик - Брокеры сообщений

## Структура интервью
- **Время:** 60-90 минут
- **Формат:** Прогрессивная сложность (базовые → продвинутые → архитектурные)
- **Оценка:** По уровням понимания и практического опыта

---

## БЛОК 1: Базовые концепции (15-20 мин)

### 1. Основы брокеров сообщений
**Основной вопрос:** Объясните разницу между RabbitMQ, Kafka и NATS с точки зрения архитектуры и use cases.

**Углубляющие вопросы:**
- Когда выбрать каждый из брокеров?
- Какие гарантии доставки предоставляет каждый?

**Критерии оценки:**
- ✅ Понимает push vs pull модели
- ✅ Знает основные архитектурные различия
- ✅ Может объяснить trade-offs

### 2. Message delivery semantics
**Основной вопрос:** Как реализовать exactly-once delivery в distributed системе?

**Углубляющие вопросы:**
- В чем проблема exactly-once и как ее решают разные брокеры?
- Что такое idempotent consumers?

### 3. Паттерны messaging
**Основной вопрос:** Опишите реализацию pub-sub и request-reply паттернов.

**Углубляющие вопросы:**
- Как обеспечить load balancing consumers?
- Что происходит с undelivered messages?

---

## БЛОК 2: RabbitMQ (15-20 мин)

### 4. Архитектура RabbitMQ
**Основной вопрос:** Объясните путь сообщения от publisher до consumer через exchange и queue.

**Углубляющие вопросы:**
- Какие типы exchange и когда использовать каждый?
- Как работает Dead Letter Exchange?
- Что такое quorum queues vs classic queues?

**Практический сценарий:** "У вас есть microservices архитектура. Сервис заказов должен уведомлять сервисы оплаты, доставки и аналитики. Как спроектировать topology?"

### 5. Production issues
**Основной вопрос:** Как диагностировать и решить проблему медленной обработки сообщений?

**Углубляющие вопросы:**
- Какие метрики смотреть в первую очередь?
- Как настроить prefetch для оптимальной производительности?

---

## БЛОК 3: Apache Kafka (15-20 мин)

### 6. Kafka fundamentals
**Основной вопрос:** Объясните архитектуру Kafka: topics, partitions, replicas, ISR.

**Углубляющие вопросы:**
- Как обеспечивается ordering в Kafka?
- Что происходит при rebalancing consumer group?
- Как работает leader election?

**Практический сценарий:** "Нужно обрабатывать 100K events/sec с гарантией порядка для каждого пользователя. Как спроектировать Kafka topology?"

### 7. Kafka operations
**Основной вопрос:** Как обеспечить exactly-once processing в Kafka?

**Углубляющие вопросы:**
- Что такое transactional producer?
- Как работает idempotent producer?
- Какие ограничения у exactly-once semantics?

### 8. Performance & Monitoring
**Основной вопрос:** Какие key metrics мониторить в production Kafka?

**Углубляющие вопросы:**
- Как диагностировать consumer lag?
- Что влияет на end-to-end latency?

---

## БЛОК 4: NATS (10-15 мин)

### 9. NATS особенности
**Основной вопрос:** В чем принципиальные отличия NATS от традиционных брокеров?

**Углубляющие вопросы:**
- Что такое JetStream и чем отличается от core NATS?
- Как работает subject-based routing?

### 10. NATS use cases
**Основной вопрос:** Когда NATS предпочтительнее RabbitMQ или Kafka?

**Углубляющие вопросы:**
- Как обеспечить persistence в NATS?
- Что такое at-most-once delivery?

---

## БЛОК 5: Архитектурные решения (15-20 мин)

### 11. Сравнительный анализ
**Основной вопрос:** Проведите сравнение брокеров по критериям: throughput, latency, durability, operational complexity.

**Углубляющие вопросы:**
- Какие trade-offs между consistency и availability?
- Как CAP theorem применяется к каждому брокеру?

### 12. Real-world сценарии
**Кейс 1:** "E-commerce платформа с peak load 50K orders/min. Нужна гарантия обработки всех заказов и уведомлений. Какую архитектуру предложите?"

**Кейс 2:** "IoT система с миллионами устройств, отправляющих telemetry каждую секунду. Требования: low latency, high throughput, возможность replay данных."

**Кейс 3:** "Финансовая система с requirements: audit trail, exactly-once processing, encryption at rest and in transit."

### 13. Migration & Evolution
**Основной вопрос:** Как спланировать migration с RabbitMQ на Kafka без downtime?

**Углубляющие вопросы:**
- Какие challenges ожидать?
- Как обеспечить backward compatibility?
- Что с data consistency во время migration?

### 14. Troubleshooting
**Сценарий:** "Production alert: message processing latency выросла с 50ms до 5s. Как диагностировать проблему для каждого брокера?"

**Углубляющие вопросы:**
- Какие инструменты использовать?
- Как определить bottleneck?
- План восстановления performance?

### 15. Future-proofing
**Основной вопрос:** Как учесть cloud-native trends и serverless при выборе messaging solution?

**Углубляющие вопросы:**
- Что с managed services vs self-hosted?
- Как event-driven архитектура влияет на выбор?

---

## Дополнительные продвинутые вопросы (по времени)

### 16. Schema evolution
**Сценарий:** "Нужно изменить формат message без breaking existing consumers. Стратегия для каждого брокера?"

### 17. Security & Compliance
**Вопрос:** "Implement multi-tenant messaging system с data isolation и audit requirements."

### 18. Disaster Recovery
**Вопрос:** "Design cross-region disaster recovery strategy для critical messaging infrastructure."

---

## Критерии оценки

### Junior/Middle уровень
- ✅ Понимает базовые концепции messaging
- ✅ Знает основные отличия брокеров
- ✅ Может выбрать подходящий брокер для простых use cases
- ✅ Понимает delivery guarantees

### Senior уровень
- ✅ Глубокое понимание internals каждого брокера
- ✅ Может спроектировать complex messaging topology
- ✅ Знает production operational aspects
- ✅ Понимает performance implications и tuning

### Архитектурный уровень
- ✅ Может сравнивать и выбирать решения с учетом business requirements
- ✅ Понимает system design implications
- ✅ Может планировать migration strategies
- ✅ Знает emerging trends и future considerations

### Staff/Principal уровень
- ✅ Может влиять на organizational messaging strategy
- ✅ Понимает cross-cutting concerns (security, compliance, cost)
- ✅ Может проводить technical due diligence
- ✅ Способен к technical leadership в messaging domain

---

## Практические задания (опционально)

### Coding задача
"Implement idempotent message processor с exponential backoff retry logic"

### Design задача
"Спроектируйте messaging infrastructure для ride-sharing приложения (drivers, riders, pricing, notifications)"

### Troubleshooting симуляция
"Debug performance degradation в production Kafka cluster по предоставленным метрикам"

---

## Рекомендации по проведению

1. **Начинайте с базовых концепций** - оцените foundation знания
2. **Прогрессивно усложняйте** - адаптируйтесь к уровню кандидата
3. **Фокус на практику** - спрашивайте о real-world experience
4. **Проверяйте depth vs breadth** - лучше глубоко знать один брокер, чем поверхностно все
5. **Оценивайте problem-solving** - не только знания, но и способность применять их

Время распределения можно корректировать в зависимости от опыта кандидата и роли.