# Ğ‘Ğ›ĞĞš 5: ĞŸĞ ĞĞ˜Ğ—Ğ’ĞĞ”Ğ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞĞ¡Ğ¢Ğ¬ Ğ˜ ĞœĞĞ¡Ğ¨Ğ¢ĞĞ‘Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•
## ĞÑ‚ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ¾ enterprise-Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¾Ğ²

---

### ğŸ¯ **Ğ¦Ğ•Ğ›Ğ¬ Ğ‘Ğ›ĞĞšĞ**
ĞÑĞ²Ğ¾Ğ¸Ñ‚ÑŒ ÑĞºÑĞ¿ĞµÑ€Ñ‚Ğ½Ñ‹Ğµ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ÑĞ¼Ğ¸ Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ **Ğ¼Ğ¸Ğ»Ğ»Ğ¸Ğ¾Ğ½Ğ¾Ğ² ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ² ÑĞµĞºÑƒĞ½Ğ´Ñƒ** Ğ¿Ñ€Ğ¸ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞµ.

**ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:** 4-5 Ğ½ĞµĞ´ĞµĞ»ÑŒ  
**Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:** â­â­â­â­â­ (Ğ­ĞºÑĞ¿ĞµÑ€Ñ‚Ğ½Ñ‹Ğ¹)

---

## ğŸ“Š **Ğ“Ğ›ĞĞ’Ğ 5.1: ĞœĞĞĞ˜Ğ¢ĞĞ Ğ˜ĞĞ“ Ğ˜ ĞœĞ•Ğ¢Ğ Ğ˜ĞšĞ˜**
### Ğ’Ñ€ĞµĞ¼Ñ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ñ: 1 Ğ½ĞµĞ´ĞµĞ»Ñ

---

#### ğŸ” **Key Performance Indicators (KPI)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KAFKA METRICS HIERARCHY                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   BROKER      â”‚    â”‚    PRODUCER     â”‚    â”‚  CONSUMER  â”‚ â”‚
â”‚  â”‚   METRICS     â”‚    â”‚    METRICS      â”‚    â”‚  METRICS   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                       â”‚                     â”‚     â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â” â”‚
â”‚    â”‚Messages â”‚              â”‚Throughputâ”‚           â”‚Lag     â”‚ â”‚
â”‚    â”‚/sec     â”‚              â”‚(msg/sec) â”‚           â”‚(ms)    â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚CPU/Memoryâ”‚              â”‚Latency  â”‚           â”‚Offset  â”‚ â”‚
â”‚    â”‚Usage    â”‚              â”‚(ms)     â”‚           â”‚Commit  â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚Disk I/O â”‚              â”‚Error    â”‚           â”‚Rebalanceâ”‚ â”‚
â”‚    â”‚(MB/s)   â”‚              â”‚Rate     â”‚           â”‚Time    â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ“ˆ **ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°**

**Broker-ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ:**
```yaml
Critical_Metrics:
  Performance:
    - Messages_per_second: >100,000
    - Bytes_per_second: >100MB
    - Request_latency: <50ms
    - Network_utilization: <80%
  
  Resource_Usage:
    - CPU_utilization: <70%
    - Memory_usage: <80% 
    - Disk_usage: <85%
    - File_descriptors: <80% of limit
  
  Reliability:
    - Under_replicated_partitions: 0
    - Offline_partitions: 0
    - Leader_election_rate: <1/hour
    - ISR_shrink_rate: <1/hour
```

---

#### ğŸ”§ **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Prometheus + Grafana**

**1. Kafka JMX Exporter ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:**
```yaml
# kafka-jmx-exporter.yml
rules:
  # Broker metrics
  - pattern: kafka.server<type=BrokerTopicMetrics, name=MessagesInPerSec><>Count
    name: kafka_server_messages_in_total
    type: COUNTER
    
  - pattern: kafka.server<type=BrokerTopicMetrics, name=BytesInPerSec><>Count  
    name: kafka_server_bytes_in_total
    type: COUNTER
    
  - pattern: kafka.network<type=RequestMetrics, name=RequestsPerSec, request=(.+)><>Count
    name: kafka_network_requests_total
    labels:
      request: "$1"
    type: COUNTER
```

**2. Docker Compose Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ° ÑÑ‚ĞµĞºĞ°:**
```yaml
version: '3.8'
services:
  kafka:
    image: confluentinc/cp-kafka:latest
    environment:
      KAFKA_JMX_PORT: 9999
      KAFKA_JMX_HOSTNAME: localhost
    ports:
      - "9999:9999"
      
  jmx-exporter:
    image: sscaling/jmx-prometheus-exporter
    ports:
      - "8080:8080"
    volumes:
      - ./kafka-jmx-exporter.yml:/opt/jmx_exporter/config.yml
      
  prometheus:
    image: prom/prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
      
  grafana:
    image: grafana/grafana
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
```

---

#### ğŸ“Š **Dashboard Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ğ»ÑƒÑ‡ÑˆĞ¸Ñ… Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ğº**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   KAFKA CLUSTER OVERVIEW                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Throughput  â”‚ â”‚   Latency   â”‚ â”‚ Error Rate  â”‚ â”‚ Uptime  â”‚ â”‚
â”‚ â”‚ 2.3M msg/s  â”‚ â”‚    45ms     â”‚ â”‚   0.01%     â”‚ â”‚ 99.9%   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     BROKER HEALTH                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚        Broker-1    Broker-2    Broker-3                 â”‚ â”‚
â”‚ â”‚ CPU:     65%        72%         68%                     â”‚ â”‚
â”‚ â”‚ Memory:  78%        82%         75%                     â”‚ â”‚
â”‚ â”‚ Disk:    45%        52%         48%                     â”‚ â”‚
â”‚ â”‚ Status: [â—GREEN]   [â—GREEN]    [â—GREEN]                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    CONSUMER LAG                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ orders-service:     â–â–â–â–ƒâ–ƒâ–ƒâ–‡â–‡â–‡ 1.2K messages             â”‚ â”‚
â”‚ â”‚ payment-service:    â–â–â–â–â–â–â–ƒâ–ƒâ–ƒ 340 messages              â”‚ â”‚
â”‚ â”‚ analytics-service:  â–â–â–â–â–â–â–â–â– 0 messages                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Grafana Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°:**
```promql
# Throughput Ğ¿Ğ¾ Ñ‚Ğ¾Ğ¿Ğ¸ĞºĞ°Ğ¼
rate(kafka_server_messages_in_total[5m]) * 60

# Consumer lag
kafka_consumer_lag_sum by (consumergroup, topic)

# 99th percentile latency
histogram_quantile(0.99, 
  rate(kafka_network_request_time_99th_percentile[5m])
)
```

---

#### ğŸš¨ **Alerting ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸**

**ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹:**
```yaml
alerts:
  - alert: KafkaBrokerDown
    expr: up{job="kafka"} == 0
    for: 30s
    labels:
      severity: critical
    annotations:
      summary: "Kafka broker {{ $labels.instance }} is down"
      
  - alert: HighConsumerLag
    expr: kafka_consumer_lag > 10000
    for: 2m
    labels:
      severity: warning
    annotations:
      summary: "Consumer lag is high: {{ $value }} messages"
      
  - alert: DiskSpaceUsage
    expr: (1 - node_filesystem_avail_bytes / node_filesystem_size_bytes) > 0.85
    for: 1m
    labels:
      severity: critical
```

---

## âš–ï¸ **Ğ“Ğ›ĞĞ’Ğ 5.2: ĞŸĞĞ Ğ¢Ğ˜Ğ¦Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• Ğ˜ Ğ ĞĞ¡ĞŸĞ Ğ•Ğ”Ğ•Ğ›Ğ•ĞĞ˜Ğ• ĞĞĞ“Ğ Ğ£Ğ—ĞšĞ˜**
### Ğ’Ñ€ĞµĞ¼Ñ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ñ: 1.5 Ğ½ĞµĞ´ĞµĞ»Ğ¸

---

#### ğŸ”„ **Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Partition Key**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PARTITION KEY STRATEGIES                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Random    â”‚     â”‚ Round Robin â”‚     â”‚   Hashed    â”‚    â”‚
â”‚  â”‚             â”‚     â”‚             â”‚     â”‚             â”‚    â”‚
â”‚  â”‚ No Key      â”‚â”€â”€â”€â”€â–¶â”‚ Sequential  â”‚â”€â”€â”€â”€â–¶â”‚ Consistent  â”‚    â”‚
â”‚  â”‚ Distributionâ”‚     â”‚ Distributionâ”‚     â”‚ Distributionâ”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚        â”‚                     â”‚                     â”‚        â”‚
â”‚        â–¼                     â–¼                     â–¼        â”‚
â”‚  [â—â—â—â—â—â—â—â—]           [â—â—â—â—‹â—‹â—‹â—‹â—‹]           [â—â—â—‹â—â—â—‹â—â—‹]        â”‚
â”‚  Even Load            Uneven Load         Predictable      â”‚
â”‚  No Ordering          Some Ordering       Strong Ordering  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ¯ **ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ğ¿Ğ¾ use-case**

**E-commerce Orders:**
```java
// âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾: Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ hot partitions
String key = "order"; // Ğ²ÑĞµ Ğ² Ğ¾Ğ´Ğ½Ñƒ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ñ

// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾: Ñ€Ğ°Ğ²Ğ½Ğ¾Ğ¼ĞµÑ€Ğ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ
String key = customerId; // Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°Ğ¼

// âœ… ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾: ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ locality  
String key = customerId + "_" + region; // + Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ
```

**Financial Transactions:**
```java
// âœ… Ğ”Ğ»Ñ FIFO Ğ¿Ğ¾ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ñƒ
String key = accountId;

// âœ… Ğ”Ğ»Ñ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ FIFO
String key = null; // single partition (Ğ¾ÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ¾ Ñ throughput!)

// âœ… Ğ”Ğ»Ñ daily settlement
String key = accountId + "_" + dateStr;
```

---

#### ğŸ”¥ **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Hot Partitions**

**Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°:**
```bash
# ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸ÑĞ¼
kafka-consumer-groups.sh --bootstrap-server localhost:9092 \
  --describe --group analytics-group

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ¾Ğ² Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¹
kafka-log-dirs.sh --bootstrap-server localhost:9092 \
  --topic-list orders --describe
```

**Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ hot partition:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PARTITION LOAD DISTRIBUTION                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Partition 0: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 89% (HOT!) ğŸ”¥            â”‚
â”‚ Partition 1: â–ˆâ–ˆâ–ˆ 12%                                       â”‚
â”‚ Partition 2: â–ˆâ–ˆ 8%                                         â”‚
â”‚ Partition 3: â–ˆâ–ˆ 9%                                         â”‚
â”‚ Partition 4: â–ˆâ–ˆâ–ˆ 11%                                       â”‚
â”‚ Partition 5: â–ˆâ–ˆ 7%                                         â”‚
â”‚                                                             â”‚
â”‚ ğŸš¨ Problem: Single large customer dominates partition 0     â”‚
â”‚ ğŸ’¡ Solution: Use composite key or custom partitioner        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Custom Partitioner Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```java
public class BalancedPartitioner implements Partitioner {
    private final AtomicInteger counter = new AtomicInteger(0);
    
    @Override
    public int partition(String topic, Object key, byte[] keyBytes,
                        Object value, byte[] valueBytes, Cluster cluster) {
        
        List<PartitionInfo> partitions = cluster.partitionsForTopic(topic);
        int numPartitions = partitions.size();
        
        if (key == null) {
            return counter.getAndIncrement() % numPartitions;
        }
        
        // Ğ”Ğ»Ñ known hot keys Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ round-robin
        if (isHotKey(key.toString())) {
            return counter.getAndIncrement() % numPartitions;
        }
        
        // Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğ¹ hash Ğ´Ğ»Ñ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ñ…
        return Utils.toPositive(Utils.murmur2(keyBytes)) % numPartitions;
    }
    
    private boolean isHotKey(String key) {
        // Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ hot keys
        return KNOWN_HOT_CUSTOMERS.contains(key);
    }
}
```

---

#### âš–ï¸ **Load Balancing Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ñ‹**

**Consumer Group Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                CONSUMER GROUP REBALANCING                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ BEFORE REBALANCING:                                         â”‚
â”‚ Consumer-1: [P0, P1, P2, P3, P4, P5] â† Overloaded          â”‚
â”‚ Consumer-2: [] â† Idle                                       â”‚
â”‚ Consumer-3: [] â† Idle                                       â”‚
â”‚                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ REBALANCE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚                                                             â”‚
â”‚ AFTER REBALANCING:                                          â”‚
â”‚ Consumer-1: [P0, P1] â† Balanced                            â”‚
â”‚ Consumer-2: [P2, P3] â† Balanced                            â”‚  
â”‚ Consumer-3: [P4, P5] â† Balanced                            â”‚
â”‚                                                             â”‚
â”‚ âœ… Improved throughput: 3x                                  â”‚
â”‚ âœ… Reduced latency: ~70%                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Sticky Assignment ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ:**
```java
// Consumer configuration Ğ´Ğ»Ñ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ rebalancing
Properties props = new Properties();
props.put("partition.assignment.strategy", 
    "org.apache.kafka.clients.consumer.StickyAssignor");
props.put("session.timeout.ms", "30000");
props.put("heartbeat.interval.ms", "10000");
props.put("max.poll.interval.ms", "300000");
```

---

## ğŸš€ **Ğ“Ğ›ĞĞ’Ğ 5.3: THROUGHPUT Ğ˜ LATENCY ĞĞŸĞ¢Ğ˜ĞœĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯**
### Ğ’Ñ€ĞµĞ¼Ñ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ñ: 1.5 Ğ½ĞµĞ´ĞµĞ»Ğ¸

---

#### âš¡ **Batch Processing vs Real-time Trade-offs**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BATCH SIZE IMPACT ON PERFORMANCE              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Throughput (msg/sec)    Latency (ms)                       â”‚
â”‚     â–²                      â–²                               â”‚
â”‚ 1M  â”‚ â—                100  â”‚                               â”‚
â”‚     â”‚   â—â—               80  â”‚   â—                           â”‚
â”‚ 800Kâ”‚     â—â—â—            60  â”‚     â—â—                        â”‚
â”‚     â”‚        â—â—â—         40  â”‚       â—â—â—                     â”‚
â”‚ 600Kâ”‚           â—â—â—      20  â”‚          â—â—â—                  â”‚
â”‚     â”‚              â—â—â—    0  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â—â”€â”€â”€â”€â”€â”€â–¶        â”‚
â”‚ 400Kâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€     1   16   64  256  1024        â”‚
â”‚     1   16   64  256  1024          Batch Size              â”‚
â”‚           Batch Size                                        â”‚
â”‚                                                             â”‚
â”‚ ğŸ’¡ Sweet Spot: batch.size = 64-256 Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğ½ÑÑ‚Ğ²Ğ° ÑĞ»ÑƒÑ‡Ğ°ĞµĞ²  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ”§ **Producer Performance Tuning**

**Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹ Throughput ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:**
```java
Properties props = new Properties();

// ===== THROUGHPUT OPTIMIZATION =====
props.put("batch.size", 65536);           // 64KB batches
props.put("linger.ms", 10);              // Wait 10ms for batch
props.put("compression.type", "lz4");     // Fast compression
props.put("buffer.memory", 67108864);     // 64MB buffer
props.put("max.in.flight.requests.per.connection", 5);

// ===== NETWORK OPTIMIZATION =====
props.put("send.buffer.bytes", 131072);   // 128KB
props.put("receive.buffer.bytes", 65536); // 64KB

// ===== PARALLELISM =====
props.put("max.request.size", 1048576);   // 1MB max message
```

**ĞĞ¸Ğ·ĞºĞ°Ñ Latency ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:**
```java
Properties props = new Properties();

// ===== LATENCY OPTIMIZATION =====
props.put("batch.size", 1);              // No batching
props.put("linger.ms", 0);               // Send immediately
props.put("compression.type", "none");    // No compression overhead
props.put("acks", "1");                  // Don't wait for all replicas

// ===== QUICK FAILURES =====
props.put("request.timeout.ms", 1000);   // Fail fast
props.put("delivery.timeout.ms", 5000);  // Quick timeout
```

---

#### ğŸ›ï¸ **Consumer Performance Tuning**

**ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ throughput:**
```java
Properties props = new Properties();

// ===== FETCH OPTIMIZATION =====
props.put("fetch.min.bytes", 50000);     // Wait for 50KB
props.put("fetch.max.wait.ms", 500);     // Or 500ms max
props.put("max.partition.fetch.bytes", 1048576); // 1MB per partition
props.put("max.poll.records", 5000);     // Process 5K records/poll

// ===== MEMORY OPTIMIZATION =====
props.put("receive.buffer.bytes", 262144); // 256KB
props.put("send.buffer.bytes", 131072);    // 128KB

// ===== SESSION MANAGEMENT =====
props.put("session.timeout.ms", 30000);   // 30s session
props.put("heartbeat.interval.ms", 10000); // 10s heartbeat
```

**ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ² Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²:**
```java
public class MultiThreadConsumer {
    private final ExecutorService executor;
    private final int numThreads;
    
    public void start() {
        for (int i = 0; i < numThreads; i++) {
            executor.submit(() -> {
                try (KafkaConsumer<String, String> consumer = createConsumer()) {
                    while (!Thread.currentThread().isInterrupted()) {
                        ConsumerRecords<String, String> records = 
                            consumer.poll(Duration.ofMillis(1000));
                        
                        // ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ batch
                        records.forEach(record -> 
                            processAsync(record));
                    }
                }
            });
        }
    }
    
    private void processAsync(ConsumerRecord<String, String> record) {
        CompletableFuture.supplyAsync(() -> {
            // Ğ‘Ğ¸Ğ·Ğ½ĞµÑ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
            return processMessage(record.value());
        }).exceptionally(ex -> {
            log.error("Failed to process message", ex);
            return null;
        });
    }
}
```

---

#### ğŸ“Š **Benchmark Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹**

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¹:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                PERFORMANCE BENCHMARK RESULTS               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Configuration        Throughput    Latency     CPU Usage   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Default              100K msg/s    45ms        45%         â”‚
â”‚ High Throughput      850K msg/s    95ms        78%         â”‚
â”‚ Low Latency          320K msg/s    8ms         65%         â”‚
â”‚ Balanced             450K msg/s    25ms        58%         â”‚
â”‚ Compressed (LZ4)     720K msg/s    52ms        71%         â”‚
â”‚ Compressed (GZIP)    580K msg/s    78ms        82%         â”‚
â”‚                                                             â”‚
â”‚ ğŸ† Winner by use-case:                                      â”‚
â”‚ â€¢ Real-time trading: Low Latency config                    â”‚
â”‚ â€¢ Analytics pipeline: High Throughput config               â”‚
â”‚ â€¢ General purpose: Balanced config                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ğŸ” **Memory Management Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**

**JVM tuning Ğ´Ğ»Ñ Kafka:**
```bash
# Broker JVM settings
export KAFKA_HEAP_OPTS="-Xmx6g -Xms6g"
export KAFKA_JVM_PERFORMANCE_OPTS="
  -server 
  -XX:+UseG1GC 
  -XX:MaxGCPauseMillis=20 
  -XX:+DisableExplicitGC 
  -XX:+UseStringDeduplication
  -Djava.awt.headless=true"

# OS-level optimization  
echo 'vm.swappiness=1' >> /etc/sysctl.conf
echo 'vm.dirty_ratio=80' >> /etc/sysctl.conf
echo 'vm.dirty_background_ratio=5' >> /etc/sysctl.conf
```

**Page Cache Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  KAFKA MEMORY ARCHITECTURE                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ RAM (32GB) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚                                                   â”‚       â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚
â”‚ â”‚ â”‚    JVM     â”‚  â”‚         OS Page Cache           â”‚ â”‚     â”‚
â”‚ â”‚ â”‚   Heap     â”‚  â”‚                                 â”‚ â”‚     â”‚
â”‚ â”‚ â”‚   (6GB)    â”‚  â”‚    Kafka Log Segments          â”‚ â”‚     â”‚
â”‚ â”‚ â”‚            â”‚  â”‚         (24GB)                  â”‚ â”‚     â”‚
â”‚ â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”   â”‚  â”‚                                 â”‚ â”‚     â”‚
â”‚ â”‚ â”‚  â”‚Kafkaâ”‚   â”‚  â”‚ â”Œâ”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â” â”‚ â”‚     â”‚
â”‚ â”‚ â”‚  â”‚Objs â”‚   â”‚  â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚     â”‚
â”‚ â”‚ â”‚  â””â”€â”€â”€â”€â”€â”˜   â”‚  â”‚ â””â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”˜ â”‚ â”‚     â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                 â”‚
â”‚ ğŸ’¡ Key: Kafka leverages OS page cache for zero-copy reads  â”‚
â”‚ ğŸš€ Result: Reads serve directly from memory, not disk      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ **Ğ“Ğ›ĞĞ’Ğ 5.4: Ğ“ĞĞ Ğ˜Ğ—ĞĞĞ¢ĞĞ›Ğ¬ĞĞĞ• ĞœĞĞ¡Ğ¨Ğ¢ĞĞ‘Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•**
### Ğ’Ñ€ĞµĞ¼Ñ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ñ: 1 Ğ½ĞµĞ´ĞµĞ»Ñ

---

#### ğŸ—ï¸ **Cluster Expansion ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸**

**ĞŸĞ¾ÑÑ‚Ğ°Ğ¿Ğ½Ğ¾Ğµ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CLUSTER SCALING TIMELINE                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Phase 1: Initial Setup (3 brokers)                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”                              â”‚
â”‚ â”‚ B-1 â”‚â”€â”€â”€â”€â”‚ B-2 â”‚â”€â”€â”€â”€â”‚ B-3 â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚   RF=3       RF=3       RF=3                               â”‚
â”‚                                                             â”‚
â”‚ Phase 2: Load Growth â†’ Add Brokers (6 brokers)             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”                              â”‚
â”‚ â”‚ B-1 â”‚â”€â”€â”€â”€â”‚ B-2 â”‚â”€â”€â”€â”€â”‚ B-3 â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚    â”‚          â”‚          â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”                              â”‚
â”‚ â”‚ B-4 â”‚â”€â”€â”€â”€â”‚ B-5 â”‚â”€â”€â”€â”€â”‚ B-6 â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                             â”‚
â”‚ Phase 3: Partition Reassignment                            â”‚
â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% Complete               â”‚
â”‚                                                             â”‚
â”‚ âœ… Capacity: 2x                                             â”‚
â”‚ âœ… Fault tolerance: Improved                                â”‚
â”‚ âœ… Load distribution: Optimized                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞŸĞ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ±Ñ€Ğ¾ĞºĞµÑ€Ğ¾Ğ²:**

```bash
# 1. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ brokers Ğ² ĞºĞ»Ğ°ÑÑ‚ĞµÑ€
cat > server-4.properties << EOF
broker.id=4
listeners=PLAINTEXT://kafka-4:9092
log.dirs=/var/kafka-logs-4
zookeeper.connect=zk-1:2181,zk-2:2181,zk-3:2181
EOF

# 2. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ broker
kafka-server-start.sh server-4.properties

# 3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ»Ğ°Ğ½ Ñ€ĞµĞ°ÑÑignĞ¼ĞµĞ½Ñ‚Ğ°
cat > topics-to-move.json << EOF
{
  "topics": [
    {"topic": "orders"},
    {"topic": "payments"}, 
    {"topic": "analytics"}
  ],
  "version": 1
}
EOF

# 4. Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ»Ğ°Ğ½
kafka-reassign-partitions.sh --bootstrap-server localhost:9092 \
  --topics-to-move-json-file topics-to-move.json \
  --broker-list "1,2,3,4,5,6" \
  --generate

# 5. Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ°ÑÑignĞ¼ĞµĞ½Ñ‚
kafka-reassign-partitions.sh --bootstrap-server localhost:9092 \
  --reassignment-json-file reassignment.json \
  --execute

# 6. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
kafka-reassign-partitions.sh --bootstrap-server localhost:9092 \
  --reassignment-json-file reassignment.json \
  --verify
```

---

#### ğŸŒ **Multi-region Deployment**

**Cross-datacenter Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MULTI-REGION KAFKA ARCHITECTURE               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚     US-EAST-1                           EU-WEST-1          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚   DC-Primary    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   DC-Secondary  â”‚     â”‚
â”‚ â”‚                 â”‚  MirrorMaker 2.0â”‚                 â”‚     â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”‚                 â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”‚     â”‚
â”‚ â”‚ â”‚ B-1 â”‚ â”‚ B-2 â”‚ â”‚                 â”‚ â”‚ B-4 â”‚ â”‚ B-5 â”‚ â”‚     â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â”‚                 â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â”‚     â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”‚                 â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”‚     â”‚
â”‚ â”‚ â”‚ B-3 â”‚ â”‚ZK-1 â”‚ â”‚                 â”‚ â”‚ B-6 â”‚ â”‚ZK-2 â”‚ â”‚     â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â”‚                 â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                                   â”‚               â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”‚
â”‚    â”‚Local    â”‚                         â”‚Local    â”‚          â”‚
â”‚    â”‚Apps     â”‚                         â”‚Apps     â”‚          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                             â”‚
â”‚ ğŸ”„ Replication Lag: <100ms                                 â”‚
â”‚ ğŸŒ Network: Dedicated line 10Gbps                          â”‚
â”‚ ğŸ“Š Consistency: Eventual (async replication)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**MirrorMaker 2.0 ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:**
```properties
# mm2.properties
clusters = primary, secondary
primary.bootstrap.servers = us-east-1-kafka:9092
secondary.bootstrap.servers = eu-west-1-kafka:9092

# Replication flows
primary->secondary.enabled = true
secondary->primary.enabled = false

# Topics to replicate
primary->secondary.topics = orders.*, payments.*, analytics.*

# Replication settings
replication.factor = 3
sync.topic.acls.enabled = true
emit.checkpoints.interval.seconds = 5
emit.heartbeats.interval.seconds = 1

# Performance tuning
tasks.max = 10
primary->secondary.producer.batch.size = 65536
primary->secondary.producer.linger.ms = 10
```

---

#### ğŸ“Š **Capacity Planning**

**Ğ Ğ°ÑÑ‡ĞµÑ‚ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğº Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼:**

```python
# Kafka Capacity Calculator
class KafkaCapacityPlanner:
    def __init__(self):
        self.safety_factor = 1.5  # 50% Ğ·Ğ°Ğ¿Ğ°Ñ
        
    def calculate_requirements(self, 
                             messages_per_second: int,
                             avg_message_size_bytes: int,
                             retention_days: int,
                             replication_factor: int = 3):
        
        # Throughput calculations
        bytes_per_second = messages_per_second * avg_message_size_bytes
        bytes_per_day = bytes_per_second * 86400
        
        # Storage calculations  
        raw_storage_gb = (bytes_per_day * retention_days) / (1024**3)
        total_storage_gb = raw_storage_gb * replication_factor * self.safety_factor
        
        # Network calculations
        network_mbps = (bytes_per_second * 8) / (1024**2)
        
        # Memory calculations (page cache)
        memory_gb = min(total_storage_gb * 0.1, 64)  # 10% of data or 64GB max
        
        return {
            'throughput_mbps': round(network_mbps, 2),
            'storage_gb': round(total_storage_gb, 2),
            'memory_gb': round(memory_gb, 2),
            'recommended_brokers': max(3, int(total_storage_gb / 1000))
        }

# ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ°
planner = KafkaCapacityPlanner()
requirements = planner.calculate_requirements(
    messages_per_second=1_000_000,
    avg_message_size_bytes=1024,
    retention_days=7,
    replication_factor=3
)
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CAPACITY PLANNING RESULTS                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Input Parameters:                                           â”‚
â”‚ â€¢ Messages/sec: 1,000,000                                   â”‚
â”‚ â€¢ Message size: 1KB                                         â”‚
â”‚ â€¢ Retention: 7 days                                         â”‚
â”‚ â€¢ Replication: 3x                                           â”‚
â”‚                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                             â”‚
â”‚ Resource Requirements:                                      â”‚
â”‚ â€¢ Network: 7,813 Mbps (10 Gbps recommended)                â”‚
â”‚ â€¢ Storage: 31.5 TB (35 TB recommended)                     â”‚
â”‚ â€¢ Memory: 32 GB per broker                                  â”‚
â”‚ â€¢ Brokers: 6 minimum (9 recommended)                       â”‚
â”‚                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                             â”‚
â”‚ Scaling Timeline:                                           â”‚
â”‚ Phase 1 (0-6 months):   6 brokers                          â”‚
â”‚ Phase 2 (6-12 months):  9 brokers                          â”‚
â”‚ Phase 3 (12+ months):   12 brokers                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ **ĞŸĞ ĞĞšĞ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ• Ğ—ĞĞ”ĞĞĞ˜Ğ¯**

### **Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 1: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ¾Ğ³Ğ¾ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°**
**Ğ’Ñ€ĞµĞ¼Ñ:** 2 Ğ´Ğ½Ñ

1. Ğ Ğ°Ğ·Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Kafka ĞºĞ»Ğ°ÑÑ‚ĞµÑ€ Ğ¸Ğ· 3 Ğ±Ñ€Ğ¾ĞºĞµÑ€Ğ¾Ğ²
2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Prometheus + Grafana ÑÑ‚ĞµĞº
3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ comprehensive dashboard
4. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹
5. ĞŸÑ€Ğ¾Ğ²ĞµÑÑ‚Ğ¸ load testing Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ ÑƒÑĞ¿ĞµÑ…Ğ°:**
- âœ… Dashboard Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ²ÑĞµ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
- âœ… ĞĞ»ĞµÑ€Ñ‚Ñ‹ ÑÑ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾  
- âœ… ĞÑ‚Ñ‡ĞµÑ‚ Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ¼ bottlenecks

---

### **Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 2: ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ hot partition**
**Ğ’Ñ€ĞµĞ¼Ñ:** 1 Ğ´ĞµĞ½ÑŒ

1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¸Ğ½Ñ‚ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ hot partition ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹
2. Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ custom partitioner
3. ĞŸÑ€Ğ¾Ğ²ĞµÑÑ‚Ğ¸ A/B Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
4. Ğ˜Ğ·Ğ¼ĞµÑ€Ğ¸Ñ‚ÑŒ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸

**ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
- ğŸ“ˆ Ğ Ğ°Ğ²Ğ½Ğ¾Ğ¼ĞµÑ€Ğ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
- âš¡ Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ throughput Ğ½Ğ° 40%+

---

### **Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 3: Multi-region setup**
**Ğ’Ñ€ĞµĞ¼Ñ:** 2 Ğ´Ğ½Ñ

1. Ğ Ğ°Ğ·Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ñ‹ Ğ² Ğ´Ğ²ÑƒÑ… "Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ°Ñ…" (Docker networks)
2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ MirrorMaker 2.0 Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
3. ĞŸÑ€Ğ¾Ğ²ĞµÑÑ‚Ğ¸ failover Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
4. Ğ˜Ğ·Ğ¼ĞµÑ€Ğ¸Ñ‚ÑŒ replication lag

**Deliverables:**
- ğŸ“‹ Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ disaster recovery
- ğŸ“Š ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
- ğŸ”„ ĞŸÑ€Ğ¾Ñ†ĞµĞ´ÑƒÑ€Ñ‹ failover

---

## âœ… **Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢Ğ« Ğ‘Ğ›ĞĞšĞ**

ĞŸĞ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ Ğ±Ğ»Ğ¾ĞºĞ° Ğ²Ñ‹ Ğ±ÑƒĞ´ĞµÑ‚Ğµ ÑƒĞ¼ĞµÑ‚ÑŒ:

### **Ğ­ĞºÑĞ¿ĞµÑ€Ñ‚Ğ½Ñ‹Ğµ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸:**
- ğŸ” ĞŸÑ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ comprehensive Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ´Ğ»Ñ enterprise
- âš–ï¸ Ğ ĞµÑˆĞ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ½ĞµÑ€Ğ°Ğ²Ğ½Ğ¾Ğ¼ĞµÑ€Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸  
- ğŸš€ ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ´Ğ»Ñ Ğ¼Ğ¸Ğ»Ğ»Ğ¸Ğ¾Ğ½Ğ¾Ğ² ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹/ÑĞµĞº
- ğŸŒ ĞŸÑ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ multi-region deployment
- ğŸ“Š ĞŸÑ€Ğ¾Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑŒ capacity planning Ğ´Ğ»Ñ Ğ»ÑĞ±Ñ‹Ñ… Ğ½Ğ°Ğ³Ñ€ÑƒĞ·Ğ¾Ğº

### **Ğ˜Ğ·Ğ¼ĞµÑ€Ğ¸Ğ¼Ñ‹Ğµ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ:**
- **Throughput:** Ğ”Ğ¾ 10x improvement Ñ‡ĞµÑ€ĞµĞ· tuning
- **Latency:** Ğ¡Ğ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ñ 100ms Ğ´Ğ¾ <10ms Ğ´Ğ»Ñ critical Ğ¿ÑƒÑ‚ĞµĞ¹
- **Availability:** 99.99% uptime Ñ‡ĞµÑ€ĞµĞ· proper scaling
- **Cost:** 30-50% ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²

---

## ğŸ“š **Ğ”ĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• Ğ Ğ•Ğ¡Ğ£Ğ Ğ¡Ğ«**

### **ĞšĞ½Ğ¸Ğ³Ğ¸ Ğ¸ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸:**
- "Kafka: The Definitive Guide" - Chapter 7: Performance
- "Designing Data-Intensive Applications" - Chapter 11
- Confluent Performance Tuning Guide

### **Tools Ğ´Ğ»Ñ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸:**
- **kafka-perf-test.sh** - Ğ½Ğ°Ğ³Ñ€ÑƒĞ·Ğ¾Ñ‡Ğ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- **Kafka Manager** - UI Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
- **Cruise Control** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ°
- **Burrow** - Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ consumer lag

### **Community Ñ€ĞµÑÑƒÑ€ÑÑ‹:**
- Confluent Community Slack #performance
- Apache Kafka Users mailing list
- KafkaJS Performance Guide
- Kafka Streams Performance Tuning

---

**ğŸš€ Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ±Ğ»Ğ¾Ğº:** [Ğ‘Ğ»Ğ¾Ğº 6: Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ½Ğ°Ğ´ĞµĞ¶Ğ½Ğ¾ÑÑ‚ÑŒ â†’]()