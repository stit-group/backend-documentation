# Ğ‘Ğ»Ğ¾Ğº 4: Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ² Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…

```
â±ï¸ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ: 4-5 Ğ½ĞµĞ´ĞµĞ»ÑŒ
ğŸ¯ Ğ¦ĞµĞ»ÑŒ: ĞÑĞ²Ğ¾Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ² Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ
ğŸ“Š Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ: â˜…â˜…â˜…â˜…â˜†
```

---

## ğŸ¯ ĞĞ±Ğ·Ğ¾Ñ€ Ğ±Ğ»Ğ¾ĞºĞ°

Ğ’ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ¸Ğ· ÑĞ°Ğ¼Ñ‹Ñ… ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡. Ğ’ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ¾Ñ‚ Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹, Ğ³Ğ´Ğµ Ğ²ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ½Ğ°Ñ…Ğ¾Ğ´ÑÑ‚ÑÑ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¾Ğ² Ğº Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸, Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹ Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ….

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ« Ğ”ĞĞĞĞ«Ğ¥                          â”‚
â”‚                                                             â”‚
â”‚  ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚                    â†’    ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”         â”‚
â”‚  â”‚ ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ  â”‚                 â”‚ S1â”‚ â”‚ S2â”‚ â”‚ S3â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”         â”‚
â”‚  â”‚ ĞĞ´Ğ½Ğ° Ğ‘Ğ”     â”‚                 â”‚DB1â”‚ â”‚DB2â”‚ â”‚DB3â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â”‚  âœ… ACID Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸             âŒ Distributed transactions  â”‚
â”‚  âœ… ĞŸÑ€Ğ¾ÑÑ‚Ñ‹Ğµ JOIN'Ñ‹              âŒ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ°Ñ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ        â”‚
â”‚  âœ… ĞšĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ             âŒ Eventual consistency     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Ğ“Ğ»Ğ°Ğ²Ğ° 1: Database per Service Pattern

### ğŸ”‘ ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹

**Database per Service** - Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ³Ğ»Ğ°ÑĞ¸Ñ‚: ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸Ñ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ²Ğ»Ğ°Ğ´ĞµÑ‚ÑŒ ÑĞ²Ğ¾Ğ¸Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 DATA OWNERSHIP PRINCIPLE                    â”‚
â”‚                                                             â”‚
â”‚  Service A          Service B          Service C            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Orders  â”‚        â”‚ Users   â”‚        â”‚ Catalog â”‚          â”‚
â”‚  â”‚ Service â”‚        â”‚ Service â”‚        â”‚ Service â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚       â”‚                   â”‚                   â”‚             â”‚
â”‚       â–¼                   â–¼                   â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Orders  â”‚        â”‚ Users   â”‚        â”‚ Product â”‚          â”‚
â”‚  â”‚   DB    â”‚        â”‚   DB    â”‚        â”‚   DB    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                             â”‚
â”‚  âŒ ĞĞ• Ğ ĞĞ—Ğ Ğ•Ğ¨Ğ•ĞĞ: ĞŸÑ€ÑĞ¼Ğ¾Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ñ‡ÑƒĞ¶Ğ¾Ğ¹ Ğ‘Ğ”                  â”‚
â”‚  âœ… Ğ ĞĞ—Ğ Ğ•Ğ¨Ğ•ĞĞ: Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡ĞµÑ€ĞµĞ· API ÑĞµÑ€Ğ²Ğ¸ÑĞ°                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ—„ï¸ Polyglot Persistence

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ°Ğ¸Ğ±Ğ¾Ğ»ĞµĞµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‰ÑƒÑ Ğ´Ğ»Ñ ĞµĞ³Ğ¾ Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   POLYGLOT PERSISTENCE                      â”‚
â”‚                                                             â”‚
â”‚  User Service              Order Service         Analytics  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚PostgreSQL â”‚             â”‚ MongoDB   â”‚         â”‚ Redis  â”‚ â”‚
â”‚  â”‚           â”‚             â”‚           â”‚         â”‚        â”‚ â”‚
â”‚  â”‚â€¢ ACID     â”‚             â”‚â€¢ Flexible â”‚         â”‚â€¢ Cache â”‚ â”‚
â”‚  â”‚â€¢ Relationsâ”‚             â”‚â€¢ Documentsâ”‚         â”‚â€¢ Speed â”‚ â”‚
â”‚  â”‚â€¢ Queries  â”‚             â”‚â€¢ Scaling  â”‚         â”‚â€¢ Memoryâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Notification              Logging Service       Search     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ RabbitMQ  â”‚             â”‚Elasticsearchâ”‚        â”‚Elastic â”‚ â”‚
â”‚  â”‚           â”‚             â”‚           â”‚         â”‚ Search â”‚ â”‚
â”‚  â”‚â€¢ Messages â”‚             â”‚â€¢ Log Data â”‚         â”‚â€¢ Index â”‚ â”‚
â”‚  â”‚â€¢ Queues   â”‚             â”‚â€¢ Analysis â”‚         â”‚â€¢ Query â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âš ï¸ ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½: Shared Database

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    âŒ SHARED DATABASE                        â”‚
â”‚                                                             â”‚
â”‚  Service A          Service B          Service C            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Orders  â”‚        â”‚ Users   â”‚        â”‚ Catalog â”‚          â”‚
â”‚  â”‚ Service â”‚        â”‚ Service â”‚        â”‚ Service â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚       â”‚                   â”‚                   â”‚             â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                           â–¼                                 â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                   â”‚  Shared DB  â”‚                           â”‚
â”‚                   â”‚             â”‚                           â”‚
â”‚                   â”‚ âŒ Coupling â”‚                           â”‚
â”‚                   â”‚ âŒ Scaling  â”‚                           â”‚
â”‚                   â”‚ âŒ Changes  â”‚                           â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                             â”‚
â”‚  ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ«:                                                  â”‚
â”‚  â€¢ Ğ¡Ğ¸Ğ»ÑŒĞ½Ğ°Ñ ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²                            â”‚
â”‚  â€¢ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ Ñ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğ¼ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼                   â”‚
â”‚  â€¢ Bottleneck Ğ¿Ñ€Ğ¸ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸                           â”‚
â”‚  â€¢ Ğ¡Ñ…ĞµĞ¼Ğ° Ğ‘Ğ” ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğ¹                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’¡ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** Ğ”ĞµĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ğ¾Ğ¹ Ğ‘Ğ” Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ°

```sql
-- Ğ˜Ğ¡Ğ¥ĞĞ”ĞĞĞ¯ ĞœĞĞĞĞ›Ğ˜Ğ¢ĞĞĞ¯ Ğ¡Ğ¥Ğ•ĞœĞ
CREATE TABLE users (
    id INT PRIMARY KEY,
    email VARCHAR(255),
    password_hash VARCHAR(255),
    name VARCHAR(255),
    address TEXT
);

CREATE TABLE products (
    id INT PRIMARY KEY,
    name VARCHAR(255),
    description TEXT,
    price DECIMAL(10,2),
    stock_quantity INT
);

CREATE TABLE orders (
    id INT PRIMARY KEY,
    user_id INT REFERENCES users(id),
    total_amount DECIMAL(10,2),
    status VARCHAR(50),
    created_at TIMESTAMP
);

CREATE TABLE order_items (
    id INT PRIMARY KEY,
    order_id INT REFERENCES orders(id),
    product_id INT REFERENCES products(id),
    quantity INT,
    price DECIMAL(10,2)
);
```

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ - Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ bounded contexts:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ğ”Ğ•ĞšĞĞœĞŸĞĞ—Ğ˜Ğ¦Ğ˜Ğ¯ Ğ‘Ğ”                          â”‚
â”‚                                                             â”‚
â”‚  User Service DB        Product Service DB    Order Service â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â”‚ users           â”‚    â”‚ products        â”‚   â”‚ orders      â”‚
â”‚  â”‚ â”œâ”€ id          â”‚    â”‚ â”œâ”€ id          â”‚   â”‚ â”œâ”€ id       â”‚
â”‚  â”‚ â”œâ”€ email       â”‚    â”‚ â”œâ”€ name        â”‚   â”‚ â”œâ”€ user_id  â”‚
â”‚  â”‚ â”œâ”€ password    â”‚    â”‚ â”œâ”€ description â”‚   â”‚ â”œâ”€ total    â”‚
â”‚  â”‚ â”œâ”€ name        â”‚    â”‚ â”œâ”€ price       â”‚   â”‚ â”œâ”€ status   â”‚
â”‚  â”‚ â””â”€ address     â”‚    â”‚ â””â”€ stock       â”‚   â”‚ â””â”€ created  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚             â”‚
â”‚                                               â”‚ order_items â”‚
â”‚                                               â”‚ â”œâ”€ id       â”‚
â”‚                                               â”‚ â”œâ”€ order_id â”‚
â”‚                                               â”‚ â”œâ”€ prod_id  â”‚
â”‚                                               â”‚ â”œâ”€ quantity â”‚
â”‚                                               â”‚ â””â”€ price    â”‚
â”‚                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Ğ“Ğ»Ğ°Ğ²Ğ° 2: Distributed Transactions Ğ¸ Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ñ‹

### ğŸ¤” ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ñ… Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹

Ğ’ Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ ACID Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ Ñ€ĞµÑˆĞ°ÑÑ‚ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñƒ ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ACID Ğ¢Ğ ĞĞĞ—ĞĞšĞ¦Ğ˜Ğ˜                          â”‚
â”‚                                                             â”‚
â”‚  BEGIN TRANSACTION;                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. UPDATE accounts SET balance = balance - 100         â”‚ â”‚
â”‚  â”‚    WHERE user_id = 1;                                  â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ 2. UPDATE accounts SET balance = balance + 100         â”‚ â”‚
â”‚  â”‚    WHERE user_id = 2;                                  â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ 3. INSERT INTO transactions (from_user, to_user, ...)  â”‚ â”‚
â”‚  â”‚    VALUES (1, 2, ...);                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  COMMIT; -- Ğ’ÑĞµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ÑÑ Ğ°Ñ‚Ğ¾Ğ¼Ğ°Ñ€Ğ½Ğ¾               â”‚
â”‚                                                             â”‚
â”‚  âœ… Ğ›Ğ¸Ğ±Ğ¾ Ğ²ÑĞµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ÑÑ                           â”‚
â”‚  âœ… Ğ›Ğ¸Ğ±Ğ¾ Ğ½Ğ¸ Ğ¾Ğ´Ğ½Ğ° Ğ½Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Ğ’ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ ÑÑ‚Ğ¾ ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ¾Ğ¹:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                DISTRIBUTED TRANSACTION                      â”‚
â”‚                                                             â”‚
â”‚  Account Service        Payment Service      Audit Service  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â”‚ UPDATE      â”‚   1    â”‚ INSERT      â”‚  2   â”‚ LOG         â”‚
â”‚  â”‚ balance     â”‚ -----> â”‚ payment     â”‚ ---> â”‚ transaction â”‚
â”‚  â”‚ WHERE...    â”‚        â”‚ record      â”‚      â”‚ WHERE...    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                             â”‚
â”‚  â“ Ğ§Ñ‚Ğ¾ ĞµÑĞ»Ğ¸ Payment Service Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½?                    â”‚
â”‚  â“ Ğ§Ñ‚Ğ¾ ĞµÑĞ»Ğ¸ Audit Service ÑƒĞ¿Ğ°Ğ»?                            â”‚
â”‚  â“ ĞšĞ°Ğº Ğ¾Ñ‚ĞºĞ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ² Account Service?               â”‚
â”‚                                                             â”‚
â”‚  Two-Phase Commit (2PC) - ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸ Ğ½ĞµĞ½Ğ°Ğ´ĞµĞ¶Ğ½Ğ¾               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Phase 1: PREPARE (Ğ²ÑĞµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹?)                         â”‚ â”‚
â”‚  â”‚ Phase 2: COMMIT (Ğ²ÑĞµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚)                        â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:                                              â”‚ â”‚
â”‚  â”‚ â€¢ Blocking protocol                                    â”‚ â”‚
â”‚  â”‚ â€¢ Single point of failure (ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ¾Ñ€)               â”‚ â”‚
â”‚  â”‚ â€¢ ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ CAP Ñ‚ĞµĞ¾Ñ€ĞµĞ¼Ğ° Ğ½Ğ° Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAP Ğ¢Ğ•ĞĞ Ğ•ĞœĞ                            â”‚
â”‚                                                             â”‚
â”‚                    Consistency                              â”‚
â”‚                        â–²                                   â”‚
â”‚                       /â”‚\                                  â”‚
â”‚                      / â”‚ \                                 â”‚
â”‚                     /  â”‚  \                                â”‚
â”‚                    /   â”‚   \                               â”‚
â”‚                   /    â”‚    \                              â”‚
â”‚                  /     â”‚     \                             â”‚
â”‚                 /      â”‚      \                            â”‚
â”‚                /       â”‚       \                           â”‚
â”‚               /        â”‚        \                          â”‚
â”‚              /         â”‚         \                         â”‚
â”‚             /          â”‚          \                        â”‚
â”‚    Availability â—„â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â–º Partition                  â”‚
â”‚                        â”‚        Tolerance                  â”‚
â”‚                                                             â”‚
â”‚  Ğ’ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ 2 Ğ¸Ğ· 3:     â”‚
â”‚                                                             â”‚
â”‚  ğŸ”´ CP (Consistency + Partition Tolerance)                  â”‚
â”‚      Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾ÑÑ‚Ğ°ĞµÑ‚ÑÑ ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾Ğ¹, Ğ½Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ         â”‚
â”‚      Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğ¸ ÑĞµÑ‚Ğ¸                       â”‚
â”‚                                                             â”‚
â”‚  ğŸŸ¡ AP (Availability + Partition Tolerance)                 â”‚
â”‚      Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾ÑÑ‚Ğ°ĞµÑ‚ÑÑ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾Ğ¹, Ğ½Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ             â”‚
â”‚      Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ Ğ½ĞµĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾Ğ¹                              â”‚
â”‚                                                             â”‚
â”‚  ğŸ”µ CA (Consistency + Availability)                         â”‚
â”‚      Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ñ ÑĞµÑ‚Ğ¸          â”‚
â”‚      (Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ´Ğ°Ñ‚Ğ°-Ñ†ĞµĞ½Ñ‚Ñ€Ğµ)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ BASE vs ACID

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ACID vs BASE                            â”‚
â”‚                                                             â”‚
â”‚  ACID (Traditional)              BASE (Microservices)       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ A - Atomicity       â”‚         â”‚ BA - Basically      â”‚     â”‚
â”‚  â”‚     Ğ’ÑĞµ Ğ¸Ğ»Ğ¸ Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾  â”‚         â”‚      Available      â”‚     â”‚
â”‚  â”‚                     â”‚         â”‚      Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ²ÑĞµĞ³Ğ´Ğ° â”‚     â”‚
â”‚  â”‚ C - Consistency     â”‚         â”‚      Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ°       â”‚     â”‚
â”‚  â”‚     Ğ’ÑĞµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°     â”‚         â”‚                     â”‚     â”‚
â”‚  â”‚     ÑĞ¾Ğ±Ğ»ÑĞ´ĞµĞ½Ñ‹       â”‚         â”‚ S - Soft state      â”‚     â”‚
â”‚  â”‚                     â”‚         â”‚     Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ â”‚     â”‚
â”‚  â”‚ I - Isolation       â”‚         â”‚     Ğ¸Ğ·Ğ¼ĞµĞ½ÑÑ‚ÑŒÑÑ      â”‚     â”‚
â”‚  â”‚     Ğ¢Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸      â”‚         â”‚                     â”‚     â”‚
â”‚  â”‚     Ğ¸Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹     â”‚         â”‚ E - Eventual        â”‚     â”‚
â”‚  â”‚                     â”‚         â”‚     consistency     â”‚     â”‚
â”‚  â”‚ D - Durability      â”‚         â”‚     ĞšĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ â”‚     â”‚
â”‚  â”‚     Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹â”‚         â”‚     ÑĞ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½ĞµĞ¼     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â”‚  ĞŸĞ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ:                   ĞŸĞ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ:              â”‚
â”‚  â€¢ Ğ‘Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹            â€¢ Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑĞµÑ‚Ğ¸          â”‚
â”‚  â€¢ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸            â€¢ E-commerce               â”‚
â”‚  â€¢ ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ         â€¢ ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°                â”‚
â”‚                                  â€¢ ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’¡ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğº ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ e-commerce ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

**Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹:** ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° Ğ² Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ĞĞĞĞ›Ğ˜Ğ— ĞšĞĞĞ¡Ğ˜Ğ¡Ğ¢Ğ•ĞĞ¢ĞĞĞ¡Ğ¢Ğ˜                   â”‚
â”‚                                                             â”‚
â”‚  ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ: ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°                                   â”‚
â”‚                                                             â”‚
â”‚  1. Order Service: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·                            â”‚
â”‚  2. Inventory Service: Ğ ĞµĞ·ĞµÑ€Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ²Ğ°Ñ€                  â”‚
â”‚  3. Payment Service: Ğ¡Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ´ĞµĞ½ÑŒĞ³Ğ¸                        â”‚
â”‚  4. Shipping Service: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ğ½Ğ° Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºÑƒ           â”‚
â”‚  5. Notification Service: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ            â”‚
â”‚                                                             â”‚
â”‚  ĞĞĞĞ›Ğ˜Ğ— Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ™:                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ°Ñ ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ (Strong):                    â”‚ â”‚
â”‚  â”‚ â€¢ Payment â†” Inventory (Ğ´ĞµĞ½ÑŒĞ³Ğ¸ ÑĞ¿Ğ¸ÑĞ°Ğ½Ñ‹ = Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ·Ğ°Ñ€ĞµĞ·ĞµÑ€Ğ²)â”‚ â”‚
â”‚  â”‚ â€¢ ĞĞµ Ğ¼Ğ¾Ğ¶ĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ñ‚ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ, Ñ‡ĞµĞ¼ ĞµÑÑ‚ÑŒ Ğ½Ğ° ÑĞºĞ»Ğ°Ğ´Ğµ          â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ Eventual consistency (Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ğ¾):                      â”‚ â”‚
â”‚  â”‚ â€¢ Notification Service (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ·Ğ¶Ğµ)         â”‚ â”‚
â”‚  â”‚ â€¢ Analytics Service (ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ñ‚ÑÑ‚Ğ°Ğ²Ğ°Ñ‚ÑŒ)      â”‚ â”‚
â”‚  â”‚ â€¢ Shipping Service (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ñ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ•: Hybrid Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´                                     â”‚
â”‚  â€¢ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ - Ñ‡ĞµÑ€ĞµĞ· Saga                         â”‚
â”‚  â€¢ ĞĞµĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ - Ñ‡ĞµÑ€ĞµĞ· Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Ğ“Ğ»Ğ°Ğ²Ğ° 3: Saga Pattern Ğ½Ğ° Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ

### ğŸ­ Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Saga Pattern

Saga - ÑÑ‚Ğ¾ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ long-running transactions Ğ² Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ñ…, Ğ³Ğ´Ğµ ĞºĞ°Ğ¶Ğ´Ğ°Ñ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ ÑĞ¾ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ¸Ğ· Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SAGA PATTERN                           â”‚
â”‚                                                             â”‚
â”‚  ĞĞ±Ñ‹Ñ‡Ğ½Ğ°Ñ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ              Saga Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ BEGIN           â”‚             â”‚ Step 1: Local TX        â”‚ â”‚
â”‚  â”‚ â”œâ”€ Operation 1  â”‚             â”‚ â”œâ”€ Success â†’ Step 2     â”‚ â”‚
â”‚  â”‚ â”œâ”€ Operation 2  â”‚    vs       â”‚ â”œâ”€ Fail â†’ Compensate   â”‚ â”‚
â”‚  â”‚ â”œâ”€ Operation 3  â”‚             â”‚                        â”‚ â”‚
â”‚  â”‚ COMMIT/ROLLBACK â”‚             â”‚ Step 2: Local TX        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”œâ”€ Success â†’ Step 3     â”‚ â”‚
â”‚                                  â”‚ â”œâ”€ Fail â†’ Compensate    â”‚ â”‚
â”‚  âœ… ĞÑ‚Ğ¾Ğ¼Ğ°Ñ€Ğ½Ğ¾ÑÑ‚ÑŒ                   â”‚ 1 + 2                  â”‚ â”‚
â”‚  âŒ ĞĞµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚                   â”‚                        â”‚ â”‚
â”‚     Ğ² Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…               â”‚ Step 3: Local TX        â”‚ â”‚
â”‚                                  â”‚ â”œâ”€ Success â†’ Complete   â”‚ â”‚
â”‚                                  â”‚ â”œâ”€ Fail â†’ Compensate    â”‚ â”‚
â”‚                                  â”‚ 1 + 2 + 3              â”‚ â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚                  ğŸ”„ ĞšĞ¾Ğ¼Ğ¿ĞµĞ½ÑĞ¸Ñ€ÑƒÑÑ‰Ğ¸Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ                 â”‚
â”‚                     Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ROLLBACK                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¼ Choreography-based Saga

Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ¸Ñ€ÑƒÑÑ‚ ÑĞµĞ±Ñ ÑĞ°Ğ¼Ğ¸ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CHOREOGRAPHY SAGA                          â”‚
â”‚                                                             â”‚
â”‚  Order Service    Payment Service    Inventory    Shipping  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚1. Create  â”‚    â”‚             â”‚    â”‚         â”‚  â”‚       â”‚ â”‚
â”‚  â”‚   Order   â”‚    â”‚             â”‚    â”‚         â”‚  â”‚       â”‚ â”‚
â”‚  â”‚           â”‚    â”‚             â”‚    â”‚         â”‚  â”‚       â”‚ â”‚
â”‚  â”‚     â–¼     â”‚    â”‚             â”‚    â”‚         â”‚  â”‚       â”‚ â”‚
â”‚  â”‚2. Publish â”‚â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    â”‚         â”‚  â”‚       â”‚ â”‚
â”‚  â”‚OrderCreated    â”‚             â”‚    â”‚         â”‚  â”‚       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚3. Process   â”‚    â”‚         â”‚  â”‚       â”‚ â”‚
â”‚                   â”‚   Payment   â”‚    â”‚         â”‚  â”‚       â”‚ â”‚
â”‚                   â”‚      â–¼      â”‚    â”‚         â”‚  â”‚       â”‚ â”‚
â”‚                   â”‚4. Publish   â”‚â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚       â”‚ â”‚
â”‚                   â”‚PaymentSuccess    â”‚         â”‚  â”‚       â”‚ â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚5.Reserveâ”‚  â”‚       â”‚ â”‚
â”‚                                      â”‚ Inventoryâ”‚  â”‚       â”‚ â”‚
â”‚                                      â”‚    â–¼     â”‚  â”‚       â”‚ â”‚
â”‚                                      â”‚6.Publish â”‚â”€â”€â”¼â”€â”€â”€â”€â”€â”€â–¶â”‚ â”‚
â”‚                                      â”‚ItemReserved â”‚       â”‚ â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚7.Ship â”‚ â”‚
â”‚                                                   â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  âœ… ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ñ‚Ğ°                                                â”‚
â”‚  âœ… ĞĞ¸Ğ·ĞºĞ°Ñ ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ                                      â”‚
â”‚  âŒ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ flow                                 â”‚
â”‚  âŒ Ğ¦Ğ¸ĞºĞ»Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ Orchestration-based Saga

Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ¾Ñ€ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ¼:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ORCHESTRATION SAGA                         â”‚
â”‚                                                             â”‚
â”‚                    Saga Orchestrator                        â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                    â”‚                 â”‚                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€ 1. Start â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚     â”‚              â”‚     Saga        â”‚              â”‚       â”‚
â”‚     â–¼              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â–¼       â”‚
â”‚  Order Service                                 Payment      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               Service        â”‚
â”‚  â”‚2. Create  â”‚â—„â”€â”€â”€â”€â”€â”€ 3. Payment â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Order   â”‚        Success              â”‚ â”‚4.Processâ”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚ â”‚ Payment â”‚   â”‚
â”‚                                            â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                            â”‚               â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚               â”‚
â”‚                â”‚ 5. Continue     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                â”‚    Saga         â”‚                         â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                         â”‚                                  â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚               â–¼                   â–¼                        â”‚
â”‚        Inventory Service     Shipping Service              â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚        â”‚6. Reserve   â”‚       â”‚8. Create    â”‚               â”‚
â”‚        â”‚   Items     â”‚       â”‚   Shipment  â”‚               â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                             â”‚
â”‚  âœ… Centralized control                                     â”‚
â”‚  âœ… Easy to monitor                                         â”‚
â”‚  âœ… Clear transaction boundaries                            â”‚
â”‚  âŒ Single point of failure                                 â”‚
â”‚  âŒ Higher coupling                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ Compensation Actions

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ĞºĞ¾Ğ¼Ğ¿ĞµĞ½ÑĞ¸Ñ€ÑƒÑÑ‰Ğ¸Ñ… Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ°:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  COMPENSATION ACTIONS                       â”‚
â”‚                                                             â”‚
â”‚  SUCCESS FLOW:                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Create Order    â†’ Order ID: #12345                  â”‚ â”‚
â”‚  â”‚ 2. Reserve Items   â†’ 5 units of Product A reserved     â”‚ â”‚
â”‚  â”‚ 3. Process Payment â†’ $100 charged to card *1234        â”‚ â”‚
â”‚  â”‚ 4. Ship Items      â†’ Tracking #ABC123                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  FAILURE SCENARIO (Payment fails):                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Create Order    â†’ âœ… Order ID: #12345               â”‚ â”‚
â”‚  â”‚ 2. Reserve Items   â†’ âœ… 5 units reserved               â”‚ â”‚
â”‚  â”‚ 3. Process Payment â†’ âŒ Card declined                  â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ COMPENSATION FLOW:                                     â”‚ â”‚
â”‚  â”‚ 3. Cancel Payment  â†’ âœ… No action needed              â”‚ â”‚
â”‚  â”‚ 2. Release Items   â†’ âœ… 5 units back to inventory     â”‚ â”‚
â”‚  â”‚ 1. Cancel Order    â†’ âœ… Order status = CANCELLED      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  COMPENSATION RULES:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ Idempotent: Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ€Ğ°Ğ·            â”‚ â”‚
â”‚  â”‚ â€¢ Semantic compensation: Ğ½Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ undo                â”‚ â”‚
â”‚  â”‚ â€¢ Business logic aware: ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°       â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ semantic compensation:                          â”‚ â”‚
â”‚  â”‚ Ğ’Ğ¼ĞµÑÑ‚Ğ¾: DELETE FROM accounts WHERE...                  â”‚ â”‚
â”‚  â”‚ Ğ”ĞµĞ»Ğ°ĞµĞ¼: INSERT INTO accounts (type='REFUND')...        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’¡ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Saga Ğ´Ğ»Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¾Ñ‚ĞµĞ»Ñ

**Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹:** ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¾Ñ‚ĞµĞ»ÑŒ Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»ĞµĞ¼

```python
# Orchestration-based Saga implementation

class HotelBookingSaga:
    def __init__(self):
        self.state = "STARTED"
        self.booking_id = None
        self.hotel_reservation_id = None
        self.car_reservation_id = None
        self.payment_id = None
    
    async def execute(self, booking_request):
        try:
            # Step 1: Create booking
            self.booking_id = await self.booking_service.create_booking(
                booking_request
            )
            self.state = "BOOKING_CREATED"
            
            # Step 2: Reserve hotel room
            self.hotel_reservation_id = await self.hotel_service.reserve_room(
                booking_request.hotel_id,
                booking_request.check_in,
                booking_request.check_out
            )
            self.state = "HOTEL_RESERVED"
            
            # Step 3: Reserve car (if requested)
            if booking_request.car_required:
                self.car_reservation_id = await self.car_service.reserve_car(
                    booking_request.car_type,
                    booking_request.pickup_date
                )
                self.state = "CAR_RESERVED"
            
            # Step 4: Process payment
            self.payment_id = await self.payment_service.charge_card(
                booking_request.card_details,
                booking_request.total_amount
            )
            self.state = "PAYMENT_PROCESSED"
            
            # Step 5: Confirm all reservations
            await self.hotel_service.confirm_reservation(
                self.hotel_reservation_id
            )
            if self.car_reservation_id:
                await self.car_service.confirm_reservation(
                    self.car_reservation_id
                )
            
            self.state = "COMPLETED"
            return {"status": "success", "booking_id": self.booking_id}
            
        except Exception as e:
            await self.compensate()
            raise
    
    async def compensate(self):
        """Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼ ĞºĞ¾Ğ¼Ğ¿ĞµĞ½ÑĞ¸Ñ€ÑƒÑÑ‰Ğ¸Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ² Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¼ Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞµ"""
        if self.state == "PAYMENT_PROCESSED":
            await self.payment_service.refund(self.payment_id)
        
        if self.state in ["PAYMENT_PROCESSED", "CAR_RESERVED"]:
            if self.car_reservation_id:
                await self.car_service.cancel_reservation(
                    self.car_reservation_id
                )
        
        if self.state in ["PAYMENT_PROCESSED", "CAR_RESERVED", "HOTEL_RESERVED"]:
            if self.hotel_reservation_id:
                await self.hotel_service.cancel_reservation(
                    self.hotel_reservation_id
                )
        
        if self.booking_id:
            await self.booking_service.cancel_booking(self.booking_id)
        
        self.state = "COMPENSATED"
```

**Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ğ¢Ğ•Ğ¡Ğ¢ĞĞ’Ğ«Ğ• Ğ¡Ğ¦Ğ•ĞĞĞ Ğ˜Ğ˜                        â”‚
â”‚                                                             â”‚
â”‚  Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 1: Happy Path                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ                               â”‚ â”‚
â”‚  â”‚ âœ… Ğ ĞµĞ·ĞµÑ€Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚ĞµĞ»Ñ                                â”‚ â”‚
â”‚  â”‚ âœ… Ğ ĞµĞ·ĞµÑ€Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»Ñ                           â”‚ â”‚
â”‚  â”‚ âœ… Ğ£ÑĞ¿ĞµÑˆĞ½Ğ°Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ°                                     â”‚ â”‚
â”‚  â”‚ âœ… ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ°Ñ†Ğ¸Ğ¹                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 2: ĞÑ‚ĞµĞ»ÑŒ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ                               â”‚ â”‚
â”‚  â”‚ âŒ Ğ ĞµĞ·ĞµÑ€Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚ĞµĞ»Ñ (Ğ½ĞµÑ‚ ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ½Ğ¾Ğ¼ĞµÑ€Ğ¾Ğ²)        â”‚ â”‚
â”‚  â”‚ ğŸ”„ ĞšĞ¾Ğ¼Ğ¿ĞµĞ½ÑĞ°Ñ†Ğ¸Ñ: Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ° Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 3: ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ                               â”‚ â”‚
â”‚  â”‚ âœ… Ğ ĞµĞ·ĞµÑ€Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚ĞµĞ»Ñ                                â”‚ â”‚
â”‚  â”‚ âœ… Ğ ĞµĞ·ĞµÑ€Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»Ñ                           â”‚ â”‚
â”‚  â”‚ âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ (Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ ÑÑ€ĞµĞ´ÑÑ‚Ğ²)               â”‚ â”‚
â”‚  â”‚ ğŸ”„ ĞšĞ¾Ğ¼Ğ¿ĞµĞ½ÑĞ°Ñ†Ğ¸Ñ: Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»Ñ                     â”‚ â”‚
â”‚  â”‚ ğŸ”„ ĞšĞ¾Ğ¼Ğ¿ĞµĞ½ÑĞ°Ñ†Ğ¸Ñ: Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ° Ğ¾Ñ‚ĞµĞ»Ñ                          â”‚ â”‚
â”‚  â”‚ ğŸ”„ ĞšĞ¾Ğ¼Ğ¿ĞµĞ½ÑĞ°Ñ†Ğ¸Ñ: Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ° Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Ğ“Ğ»Ğ°Ğ²Ğ° 4: Event Sourcing Ğ¸ CQRS

### ğŸ¬ Event Sourcing ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ

Event Sourcing - Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Ğ²Ğ¸Ğ´Ğµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRADITIONAL vs EVENT SOURCING            â”‚
â”‚                                                             â”‚
â”‚  Traditional Storage          Event Sourcing                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Current State   â”‚         â”‚ Event Store                 â”‚ â”‚
â”‚  â”‚                 â”‚         â”‚                             â”‚ â”‚
â”‚  â”‚ Account: {      â”‚         â”‚ 1. AccountCreated           â”‚ â”‚
â”‚  â”‚   id: 123,      â”‚   vs    â”‚    {id: 123, balance: 0}    â”‚ â”‚
â”‚  â”‚   balance: 250, â”‚         â”‚                             â”‚ â”‚
â”‚  â”‚   owner: "John" â”‚         â”‚ 2. MoneyDeposited           â”‚ â”‚
â”‚  â”‚ }               â”‚         â”‚    {amount: 100}            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                             â”‚ â”‚
â”‚                              â”‚ 3. MoneyDeposited           â”‚ â”‚
â”‚  âŒ ĞŸĞ¾Ñ‚ĞµÑ€Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸            â”‚    {amount: 200}            â”‚ â”‚
â”‚  âŒ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ       â”‚                             â”‚ â”‚
â”‚      Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ       â”‚ 4. MoneyWithdrawn           â”‚ â”‚
â”‚  âŒ Audit trail Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾      â”‚    {amount: 50}             â”‚ â”‚
â”‚                              â”‚                             â”‚ â”‚
â”‚                              â”‚ Current State = replay      â”‚ â”‚
â”‚                              â”‚ events 1-4 = balance: 250   â”‚ â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚                              âœ… ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ              â”‚
â”‚                              âœ… Audit trail Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½         â”‚
â”‚                              âœ… Temporal queries            â”‚
â”‚                              âœ… Ğ›ĞµĞ³ĞºĞ¾ Ğ´ĞµĞ±Ğ°Ğ¶Ğ¸Ñ‚ÑŒ              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š CQRS (Command Query Responsibility Segregation)

CQRS Ñ€Ğ°Ğ·Ğ´ĞµĞ»ÑĞµÑ‚ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CQRS PATTERN                         â”‚
â”‚                                                             â”‚
â”‚                      Client Application                     â”‚
â”‚                           â”‚                                 â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚               â–¼                       â–¼                     â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚        â”‚  Commands   â”‚          â”‚   Queries   â”‚             â”‚
â”‚        â”‚             â”‚          â”‚             â”‚             â”‚
â”‚        â”‚ â€¢ Create    â”‚          â”‚ â€¢ Get user  â”‚             â”‚
â”‚        â”‚ â€¢ Update    â”‚          â”‚ â€¢ List      â”‚             â”‚
â”‚        â”‚ â€¢ Delete    â”‚          â”‚ â€¢ Search    â”‚             â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚               â”‚                       â”‚                     â”‚
â”‚               â–¼                       â–¼                     â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚        â”‚Write Model  â”‚          â”‚ Read Model  â”‚             â”‚
â”‚        â”‚             â”‚          â”‚             â”‚             â”‚
â”‚        â”‚Event Store  â”‚          â”‚ Projections â”‚             â”‚
â”‚        â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚    sync  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚             â”‚
â”‚        â”‚â”‚ Events    â”‚â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚â”‚ Views     â”‚â”‚             â”‚
â”‚        â”‚â”‚ Stream    â”‚â”‚          â”‚â”‚ Denorm    â”‚â”‚             â”‚
â”‚        â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚          â”‚â”‚ Tables    â”‚â”‚             â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚             â”‚
â”‚                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                             â”‚
â”‚  Write Side:                    Read Side:                  â”‚
â”‚  â€¢ Optimized Ğ´Ğ»Ñ consistency    â€¢ Optimized Ğ´Ğ»Ñ queries     â”‚
â”‚  â€¢ Complex business logic       â€¢ Simple, fast reads       â”‚
â”‚  â€¢ Normalized                   â€¢ Denormalized             â”‚
â”‚  â€¢ ACID transactions            â€¢ Eventually consistent     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ—„ï¸ Event Store Implementation

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ Event Store:

```sql
-- Event Store Schema
CREATE TABLE event_store (
    event_id UUID PRIMARY KEY,
    aggregate_id VARCHAR(255) NOT NULL,
    aggregate_type VARCHAR(100) NOT NULL,
    event_type VARCHAR(100) NOT NULL,
    event_data JSONB NOT NULL,
    event_version INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    
    -- Optimistic concurrency control
    UNIQUE(aggregate_id, event_version)
);

-- Snapshots Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
CREATE TABLE snapshots (
    aggregate_id VARCHAR(255) PRIMARY KEY,
    aggregate_type VARCHAR(100) NOT NULL,
    snapshot_data JSONB NOT NULL,
    version INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
CREATE INDEX idx_events_aggregate ON event_store(aggregate_id);
CREATE INDEX idx_events_type ON event_store(aggregate_type);
CREATE INDEX idx_events_created ON event_store(created_at);
```

### ğŸ“ˆ Projections Ğ¸ Read Models

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PROJECTIONS                            â”‚
â”‚                                                             â”‚
â”‚  Event Stream                  Projections                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ UserCreated     â”‚          â”‚ Users View                  â”‚ â”‚
â”‚  â”‚ {id, name, ...} â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚ â”‚ SELECT * FROM users     â”‚ â”‚ â”‚
â”‚  â”‚ EmailChanged    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ â”‚ WHERE status='active'   â”‚ â”‚ â”‚
â”‚  â”‚ {id, newEmail}  â”‚          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ UserDeactivated â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ {id, reason}    â”‚          â”‚ User Statistics             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ OrderPlaced     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ â”‚ Total Users: 1,250      â”‚ â”‚ â”‚
â”‚  â”‚ {userId, ...}   â”‚          â”‚ â”‚ Active: 1,180           â”‚ â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚ â”‚ Deactivated: 70         â”‚ â”‚ â”‚
â”‚  â”‚ PaymentMade     â”‚          â”‚ â”‚ Orders this month: 450  â”‚ â”‚ â”‚
â”‚  â”‚ {userId, ...}   â”‚          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Ğ¢Ğ˜ĞŸĞ« PROJECTIONS:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Simple Views                                         â”‚ â”‚
â”‚  â”‚    â€¢ ĞŸÑ€ÑĞ¼Ğ°Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ†Ğ¸Ñ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹                  â”‚ â”‚
â”‚  â”‚    â€¢ Users, Products, Orders                            â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ 2. Aggregated Views                                     â”‚ â”‚
â”‚  â”‚    â€¢ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸                               â”‚ â”‚
â”‚  â”‚    â€¢ Daily sales, User counts                           â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ 3. Complex Joins                                        â”‚ â”‚
â”‚  â”‚    â€¢ Ğ”ĞµĞ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ                           â”‚ â”‚
â”‚  â”‚    â€¢ Order with Customer and Product details            â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ 4. Search Indexes                                       â”‚ â”‚
â”‚  â”‚    â€¢ Elasticsearch, Solr                                â”‚ â”‚
â”‚  â”‚    â€¢ Full-text search, faceting                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ Event Versioning

Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ñ€Ğ°Ğ·Ğ²Ğ¸Ğ²Ğ°Ñ‚ÑŒÑÑ ÑĞ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½ĞµĞ¼:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EVENT VERSIONING                         â”‚
â”‚                                                             â”‚
â”‚  Version 1 (Initial)           Version 2 (Added fields)     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ UserCreated v1      â”‚       â”‚ UserCreated v2          â”‚   â”‚
â”‚  â”‚ {                   â”‚  â†’    â”‚ {                       â”‚   â”‚
â”‚  â”‚   "id": "123",      â”‚       â”‚   "id": "123",          â”‚   â”‚
â”‚  â”‚   "name": "John",   â”‚       â”‚   "name": "John",       â”‚   â”‚
â”‚  â”‚   "email": "..."    â”‚       â”‚   "email": "...",       â”‚   â”‚
â”‚  â”‚ }                   â”‚       â”‚   "age": 30,            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   "preferences": {...}  â”‚   â”‚
â”‚                                â”‚ }                       â”‚   â”‚
â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Ğ¡Ğ¢Ğ ĞĞ¢Ğ•Ğ“Ğ˜Ğ˜ Ğ’Ğ•Ğ Ğ¡Ğ˜ĞĞĞ˜Ğ ĞĞ’ĞĞĞ˜Ğ¯:                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Weak Schema (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ)                         â”‚ â”‚
â”‚  â”‚    â€¢ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ½Ğµ Ğ»Ğ¾Ğ¼Ğ°ĞµÑ‚ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ           â”‚ â”‚
â”‚  â”‚    â€¢ Optional fields Ñ default values                  â”‚ â”‚
â”‚  â”‚    â€¢ Graceful degradation                              â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ 2. Event Upcasting                                     â”‚ â”‚
â”‚  â”‚    â€¢ ĞŸÑ€Ğ¸ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‹Ñ… ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ ĞºĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¸Ñ…          â”‚ â”‚
â”‚  â”‚    â€¢ V1 â†’ V2 migration on-the-fly                     â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ 3. Multiple Event Handlers                             â”‚ â”‚
â”‚  â”‚    â€¢ Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ²ĞµÑ€ÑĞ¸Ğ¹              â”‚ â”‚
â”‚  â”‚    â€¢ ĞŸĞ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´                               â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ 4. Copy and Replace                                    â”‚ â”‚
â”‚  â”‚    â€¢ ĞĞ¾Ğ²Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ´Ğ»Ñ breaking changes           â”‚ â”‚ â”‚
â”‚  â”‚    â€¢ UserCreated â†’ UserCreatedV2                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’¡ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Event Store Ğ´Ğ»Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ¼Ğ¸

```python
# Event Store Implementation

from dataclasses import dataclass
from typing import List, Optional, Any
from datetime import datetime
import json
import uuid

@dataclass
class Event:
    event_id: str
    aggregate_id: str
    aggregate_type: str
    event_type: str
    event_data: dict
    event_version: int
    created_at: datetime

class EventStore:
    def __init__(self):
        self.events: List[Event] = []
        self.snapshots: dict = {}
    
    def append_events(self, aggregate_id: str, aggregate_type: str, 
                     events: List[dict], expected_version: int):
        """Append events to stream with optimistic concurrency control"""
        
        # Check current version
        current_version = self.get_current_version(aggregate_id)
        if current_version != expected_version:
            raise ConcurrencyException(
                f"Expected version {expected_version}, "
                f"but current is {current_version}"
            )
        
        # Append new events
        for i, event_data in enumerate(events):
            event = Event(
                event_id=str(uuid.uuid4()),
                aggregate_id=aggregate_id,
                aggregate_type=aggregate_type,
                event_type=event_data['type'],
                event_data=event_data['data'],
                event_version=current_version + i + 1,
                created_at=datetime.now()
            )
            self.events.append(event)
    
    def get_events(self, aggregate_id: str, 
                   from_version: int = 0) -> List[Event]:
        """Get events for aggregate from specific version"""
        return [
            event for event in self.events
            if event.aggregate_id == aggregate_id 
            and event.event_version > from_version
        ]
    
    def get_current_version(self, aggregate_id: str) -> int:
        """Get current version of aggregate"""
        events = [
            event for event in self.events
            if event.aggregate_id == aggregate_id
        ]
        return max([event.event_version for event in events], default=0)

# Order Aggregate Example
class Order:
    def __init__(self, order_id: str):
        self.order_id = order_id
        self.items = []
        self.status = "CREATED"
        self.total_amount = 0.0
        self.version = 0
        self.uncommitted_events = []
    
    def add_item(self, product_id: str, quantity: int, price: float):
        """Add item to order"""
        if self.status != "CREATED":
            raise Exception("Cannot add items to processed order")
        
        event_data = {
            'type': 'ItemAdded',
            'data': {
                'product_id': product_id,
                'quantity': quantity,
                'price': price
            }
        }
        self.apply_event(event_data)
        self.uncommitted_events.append(event_data)
    
    def confirm_order(self):
        """Confirm order for processing"""
        if self.status != "CREATED":
            raise Exception("Order already processed")
        
        if not self.items:
            raise Exception("Cannot confirm empty order")
        
        event_data = {
            'type': 'OrderConfirmed',
            'data': {
                'total_amount': self.total_amount
            }
        }
        self.apply_event(event_data)
        self.uncommitted_events.append(event_data)
    
    def apply_event(self, event_data: dict):
        """Apply event to aggregate state"""
        event_type = event_data['type']
        data = event_data['data']
        
        if event_type == 'ItemAdded':
            self.items.append({
                'product_id': data['product_id'],
                'quantity': data['quantity'],
                'price': data['price']
            })
            self.total_amount += data['quantity'] * data['price']
        
        elif event_type == 'OrderConfirmed':
            self.status = "CONFIRMED"
        
        self.version += 1
    
    @classmethod
    def from_events(cls, order_id: str, events: List[Event]):
        """Rebuild aggregate from events"""
        order = cls(order_id)
        for event in events:
            event_data = {
                'type': event.event_type,
                'data': event.event_data
            }
            order.apply_event(event_data)
        return order

# Read Model Projections
class OrderProjection:
    def __init__(self):
        self.orders_view = {}  # Simple in-memory view
        self.order_statistics = {
            'total_orders': 0,
            'confirmed_orders': 0,
            'total_revenue': 0.0
        }
    
    def handle_event(self, event: Event):
        """Handle events and update read models"""
        if event.event_type == 'ItemAdded':
            # Update orders view
            if event.aggregate_id not in self.orders_view:
                self.orders_view[event.aggregate_id] = {
                    'order_id': event.aggregate_id,
                    'items': [],
                    'total_amount': 0.0,
                    'status': 'CREATED'
                }
            
            self.orders_view[event.aggregate_id]['items'].append(
                event.event_data
            )
            self.orders_view[event.aggregate_id]['total_amount'] += (
                event.event_data['quantity'] * event.event_data['price']
            )
        
        elif event.event_type == 'OrderConfirmed':
            # Update order status
            self.orders_view[event.aggregate_id]['status'] = 'CONFIRMED'
            
            # Update statistics
            self.order_statistics['confirmed_orders'] += 1
            self.order_statistics['total_revenue'] += (
                event.event_data['total_amount']
            )
    
    def get_order(self, order_id: str) -> Optional[dict]:
        """Get order view"""
        return self.orders_view.get(order_id)
    
    def get_statistics(self) -> dict:
        """Get order statistics"""
        return self.order_statistics

# Usage Example
def example_usage():
    event_store = EventStore()
    projection = OrderProjection()
    
    # Create and modify order
    order = Order("order-123")
    order.add_item("product-1", 2, 50.0)
    order.add_item("product-2", 1, 30.0)
    order.confirm_order()
    
    # Save events
    event_store.append_events(
        aggregate_id=order.order_id,
        aggregate_type="Order",
        events=order.uncommitted_events,
        expected_version=0
    )
    
    # Update projections
    events = event_store.get_events(order.order_id)
    for event in events:
        projection.handle_event(event)
    
    # Query read model
    order_view = projection.get_order("order-123")
    print(f"Order view: {order_view}")
    
    stats = projection.get_statistics()
    print(f"Statistics: {stats}")
    
    # Rebuild aggregate from events (for command side)
    rebuilt_order = Order.from_events("order-123", events)
    print(f"Rebuilt order status: {rebuilt_order.status}")
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢ Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ˜Ğ¯                     â”‚
â”‚                                                             â”‚
â”‚  Event Store ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚:                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. ItemAdded: {product_id: "product-1", quantity: 2}   â”‚ â”‚
â”‚  â”‚ 2. ItemAdded: {product_id: "product-2", quantity: 1}   â”‚ â”‚
â”‚  â”‚ 3. OrderConfirmed: {total_amount: 130.0}               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Order View (Read Model):                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ {                                                       â”‚ â”‚
â”‚  â”‚   "order_id": "order-123",                              â”‚ â”‚
â”‚  â”‚   "items": [                                            â”‚ â”‚
â”‚  â”‚     {"product_id": "product-1", "quantity": 2},        â”‚ â”‚
â”‚  â”‚     {"product_id": "product-2", "quantity": 1}         â”‚ â”‚
â”‚  â”‚   ],                                                    â”‚ â”‚
â”‚  â”‚   "total_amount": 130.0,                                â”‚ â”‚
â”‚  â”‚   "status": "CONFIRMED"                                 â”‚ â”‚
â”‚  â”‚ }                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Statistics:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ Total orders: 1                                       â”‚ â”‚
â”‚  â”‚ â€¢ Confirmed orders: 1                                   â”‚ â”‚
â”‚  â”‚ â€¢ Total revenue: $130.00                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ±Ğ»Ğ¾ĞºĞ°

### ğŸ¯ ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ: Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ÑĞ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ¼ĞµÑ€Ñ†Ğ¸Ğ¸

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚:

1. **Database per Service pattern**
2. **Saga Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²**
3. **Event Sourcing Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹**
4. **CQRS Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ**

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ«                      â”‚
â”‚                                                             â”‚
â”‚  Services:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. User Service                                         â”‚ â”‚
â”‚  â”‚    â€¢ PostgreSQL Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ĞµĞ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹              â”‚ â”‚
â”‚  â”‚    â€¢ CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸                                      â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ 2. Catalog Service                                      â”‚ â”‚
â”‚  â”‚    â€¢ MongoDB Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ² Ğ¸ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹                  â”‚ â”‚
â”‚  â”‚    â€¢ Elasticsearch Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°                           â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ 3. Inventory Service                                    â”‚ â”‚
â”‚  â”‚    â€¢ Redis Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº Ğ¾ÑÑ‚Ğ°Ñ‚ĞºĞ°Ğ¼              â”‚ â”‚
â”‚  â”‚    â€¢ PostgreSQL Ğ´Ğ»Ñ audit trail                        â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ 4. Order Service                                        â”‚ â”‚
â”‚  â”‚    â€¢ Event Store Ğ´Ğ»Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²                            â”‚ â”‚
â”‚  â”‚    â€¢ CQRS pattern                                       â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ 5. Payment Service                                      â”‚ â”‚
â”‚  â”‚    â€¢ PostgreSQL Ğ´Ğ»Ñ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹                          â”‚ â”‚
â”‚  â”‚    â€¢ Event Sourcing Ğ´Ğ»Ñ audit                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Saga Flows:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Order Processing Saga:                                  â”‚ â”‚
â”‚  â”‚ 1. Create Order â†’ 2. Reserve Inventory â†’               â”‚ â”‚
â”‚  â”‚ 3. Process Payment â†’ 4. Confirm Order                  â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ Compensation Actions:                                   â”‚ â”‚
â”‚  â”‚ â€¢ Release inventory if payment fails                    â”‚ â”‚
â”‚  â”‚ â€¢ Refund payment if shipping fails                      â”‚ â”‚
â”‚  â”‚ â€¢ Cancel order if any step fails                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“‹ ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ¾Ñ†ĞµĞ½ĞºĞ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ĞšĞ Ğ˜Ğ¢Ğ•Ğ Ğ˜Ğ˜ ĞĞ¦Ğ•ĞĞšĞ˜                          â”‚
â”‚                                                             â”‚
â”‚  âœ… Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ (50 Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ²):                            â”‚
â”‚  â€¢ ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ¸Ğ¼ĞµĞµÑ‚ ÑĞ²Ğ¾Ñ Ğ‘Ğ”                              â”‚
â”‚  â€¢ Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Saga pattern                          â”‚
â”‚  â€¢ ĞĞµÑ‚ Ğ¿Ñ€ÑĞ¼Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ‘Ğ” ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²                    â”‚
â”‚                                                             â”‚
â”‚  âœ… ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ (75 Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ²):                        â”‚
â”‚  â€¢ Event Sourcing Ğ´Ğ»Ñ Order Service                         â”‚
â”‚  â€¢ CQRS Ñ read models                                       â”‚
â”‚  â€¢ Proper compensation actions                              â”‚
â”‚  â€¢ Optimistic concurrency control                          â”‚
â”‚                                                             â”‚
â”‚  âœ… Ğ­ĞºÑĞ¿ĞµÑ€Ñ‚Ğ½Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ (100 Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ²):                        â”‚
â”‚  â€¢ Event versioning strategy                                â”‚
â”‚  â€¢ Multiple projections                                     â”‚
â”‚  â€¢ Performance optimization                                 â”‚
â”‚  â€¢ Monitoring Ğ¸ observability                               â”‚
â”‚  â€¢ Complete error handling                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸš€ Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸

ĞŸĞ¾ÑĞ»Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ±Ğ»Ğ¾ĞºĞ° Ğ²Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹:

- âœ… ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ² Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…
- âœ… Ğ£Ğ¼ĞµÑ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Saga Ğ´Ğ»Ñ complex workflows
- âœ… ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑÑ‚ÑŒ Event Sourcing Ğ¸ CQRS Ğ³Ğ´Ğµ ÑÑ‚Ğ¾ Ğ¾Ğ¿Ñ€Ğ°Ğ²Ğ´Ğ°Ğ½Ğ¾
- âœ… ĞĞ±ĞµÑĞ¿ĞµÑ‡Ğ¸Ğ²Ğ°Ñ‚ÑŒ eventual consistency

**Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ±Ğ»Ğ¾Ğº:** Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ production-ready Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ