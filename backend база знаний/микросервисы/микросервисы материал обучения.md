# ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹: ĞÑ‚ Ğ½Ğ¾Ğ²Ğ¸Ñ‡ĞºĞ° Ğ´Ğ¾ ÑĞºÑĞ¿ĞµÑ€Ñ‚Ğ°

## ğŸ¯ Ğ§Ñ‚Ğ¾ Ğ²Ñ‹ Ğ¸Ğ·ÑƒÑ‡Ğ¸Ñ‚Ğµ

Ğ­Ñ‚Ğ¾Ñ‚ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ» Ğ¿Ñ€Ğ¾Ğ²ĞµĞ´ĞµÑ‚ Ğ²Ğ°Ñ Ğ¾Ñ‚ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼ Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ¾ ÑĞºÑĞ¿ĞµÑ€Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ñ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹. Ğ¤Ğ¾ĞºÑƒÑ Ğ½Ğ° ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸ÑÑ…, Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ°Ñ… Ğ¸ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¼ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸.

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 1: Ğ—Ğ°Ñ‡ĞµĞ¼ Ğ½ÑƒĞ¶Ğ½Ñ‹ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹?

### Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€

**1990-Ğµ: ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ĞĞ”Ğ˜Ğ Ğ‘ĞĞ›Ğ¬Ğ¨ĞĞ™ WAR          â”‚
â”‚                                     â”‚
â”‚  UI + Business Logic + Data Access  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚ Database  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2000-Ğµ: Service-Oriented Architecture (SOA)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Service Aâ”‚â—„â”€â”€â–ºâ”‚Service Bâ”‚â—„â”€â”€â–ºâ”‚Service Câ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚
     â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DB    â”‚    â”‚   DB    â”‚    â”‚   DB    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2010-Ğµ: ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹**
```
     API Gateway
          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â–¼         â”‚
â”‚ â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”‚
â”‚ â”‚ A â”‚ â”‚ B â”‚ â”‚ C â”‚ â”‚
â”‚ â””â”€â”¬â”€â”˜ â””â”€â”¬â”€â”˜ â””â”€â”¬â”€â”˜ â”‚
â”‚   â”‚     â”‚     â”‚   â”‚
â”‚ â”Œâ”€â–¼â”€â” â”Œâ”€â–¼â”€â” â”Œâ”€â–¼â”€â” â”‚
â”‚ â”‚DB â”‚ â”‚DB â”‚ â”‚DB â”‚ â”‚
â”‚ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Ğ­Ğ²Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ°

**Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ°Ğ¿ (ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              E-SHOP v1.0                    â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚  Web UI â”‚ â”‚ Admin   â”‚ â”‚ Mobile  â”‚         â”‚
â”‚ â”‚         â”‚ â”‚ Panel   â”‚ â”‚   API   â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â”‚
â”‚      â”‚           â”‚           â”‚             â”‚
â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”‚
â”‚ â”‚        Business Logic           â”‚        â”‚
â”‚ â”‚ â€¢ ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²               â”‚        â”‚
â”‚ â”‚ â€¢ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸     â”‚        â”‚
â”‚ â”‚ â€¢ ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ° Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹              â”‚        â”‚
â”‚ â”‚ â€¢ ĞŸĞ»Ğ°Ñ‚ĞµĞ¶Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°             â”‚        â”‚
â”‚ â”‚ â€¢ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞºĞ»Ğ°Ğ´Ğ¾Ğ¼            â”‚        â”‚
â”‚ â”‚ â€¢ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸              â”‚        â”‚
â”‚ â”‚ â€¢ ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ¸ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ñ‹            â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚              â”‚                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚          MySQL Database         â”‚        â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”‚        â”‚
â”‚ â”‚ â”‚Usersâ”‚ â”‚Itemsâ”‚ â”‚Orderâ”‚ â”‚ ... â”‚ â”‚        â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¿Ñ€Ğ¸ Ñ€Ğ¾ÑÑ‚Ğµ:**

1. **ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ²Ñ‹Ñ€Ğ¾ÑĞ»Ğ° Ğ´Ğ¾ 50 Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº**
```
Developer 1 â”€â”€â”€â”€â”
Developer 2 â”€â”€â”€â”€â”¤
    ...         â”œâ”€â”€â–º ĞĞ”Ğ˜Ğ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
Developer 49 â”€â”€â”€â”¤
Developer 50 â”€â”€â”€â”˜

Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
â€¢ ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ñ‹ Ğ² Git
â€¢ Ğ”Ğ¾Ğ»Ğ³Ğ¸Ğµ code review  
â€¢ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ Ñ‡ÑƒĞ¶Ğ¾Ğ¹ ĞºĞ¾Ğ´
â€¢ Ğ‘Ğ¾ÑĞ·Ğ½ÑŒ Ñ‡Ñ‚Ğ¾-Ñ‚Ğ¾ ÑĞ»Ğ¾Ğ¼Ğ°Ñ‚ÑŒ
```

2. **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ**
```
Black Friday: 10x Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ½Ğ° ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³

Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ Ğ² Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğµ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ E-SHOP v1.0 â”‚  â”‚ E-SHOP v1.0 â”‚  â”‚ E-SHOP v1.0 â”‚
â”‚ (Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ     â”‚  â”‚ (Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ     â”‚  â”‚ (Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ     â”‚
â”‚  ĞºĞ¾Ğ¿Ğ¸Ñ)     â”‚  â”‚  ĞºĞ¾Ğ¿Ğ¸Ñ)     â”‚  â”‚  ĞºĞ¾Ğ¿Ğ¸Ñ)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼ Ğ’Ğ¡Ğ•, Ğ´Ğ°Ğ¶Ğµ Ñ‚Ğ¾ Ñ‡Ñ‚Ğ¾ Ğ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾
```

3. **Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ**
```
Ğ¥Ğ¾Ñ‚Ğ¸Ğ¼ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
â€¢ Python Ğ´Ğ»Ñ ML Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¹
â€¢ Go Ğ´Ğ»Ñ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ½Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ API
â€¢ React Ğ´Ğ»Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞ¸

ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚: "ĞĞ•Ğ¢! Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Java Ğ²ĞµĞ·Ğ´Ğµ"
```

4. **Ğ Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ**
```
ĞÑˆĞ¸Ğ±ĞºĞ° Ğ² Ğ¼Ğ¾Ğ´ÑƒĞ»Ğµ "ĞÑ‚Ğ·Ñ‹Ğ²Ñ‹":
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              E-SHOP                 â”‚
â”‚ ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ âœ“â”‚ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ° âœ“â”‚Ğ—Ğ°ĞºĞ°Ğ·Ñ‹ âœ“â”‚ĞÑ‚Ğ·Ñ‹Ğ²Ñ‹ âœ—â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼
    Ğ’Ğ¡Ğ• ĞŸĞ Ğ˜Ğ›ĞĞ–Ğ•ĞĞ˜Ğ• ĞĞ• Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢
```

### Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ API Gateway â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Catalog    â”‚    â”‚   Orders    â”‚    â”‚  Payments   â”‚
â”‚  Service    â”‚    â”‚   Service   â”‚    â”‚   Service   â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ â€¢ Products  â”‚    â”‚ â€¢ Cart      â”‚    â”‚ â€¢ Billing   â”‚
â”‚ â€¢ Search    â”‚    â”‚ â€¢ Checkout  â”‚    â”‚ â€¢ Refunds   â”‚
â”‚ â€¢ Reviews   â”‚    â”‚ â€¢ History   â”‚    â”‚ â€¢ Wallet    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL  â”‚    â”‚   MongoDB   â”‚    â”‚    Redis    â”‚
â”‚ (Products)  â”‚    â”‚  (Orders)   â”‚    â”‚ (Sessions)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Users    â”‚    â”‚ Inventory   â”‚    â”‚ Delivery    â”‚
â”‚   Service   â”‚    â”‚  Service    â”‚    â”‚  Service    â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ â€¢ Auth      â”‚    â”‚ â€¢ Stock     â”‚    â”‚ â€¢ Tracking  â”‚
â”‚ â€¢ Profile   â”‚    â”‚ â€¢ Warehouse â”‚    â”‚ â€¢ Routes    â”‚
â”‚ â€¢ Preferencesâ”‚   â”‚ â€¢ Suppliers â”‚    â”‚ â€¢ Logistics â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚    MySQL    â”‚    â”‚ PostgreSQL  â”‚    â”‚   MongoDB   â”‚
â”‚   (Users)   â”‚    â”‚(Inventory)  â”‚    â”‚ (Delivery)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ°:**

1. **ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹**
```
Team Catalog â”€â”€â–º Catalog Service
Team Orders  â”€â”€â–º Orders Service  
Team Paymentsâ”€â”€â–º Payments Service
Team Users   â”€â”€â–º Users Service
```

2. **Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¸Ğµ**
```
Catalog Service  â”€â”€â–º Python + Django + PostgreSQL
Orders Service   â”€â”€â–º Node.js + Express + MongoDB
Payments Service â”€â”€â–º Java + Spring + MySQL
Users Service    â”€â”€â–º Go + Gin + Redis
```

3. **ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**
```
Black Friday Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°:

Catalog: 10x â”€â”€â–º Scale to 10 instances
Orders:  5x  â”€â”€â–º Scale to 5 instances  
Payments: 3x â”€â”€â–º Scale to 3 instances
Users:   2x  â”€â”€â–º Scale to 2 instances
```

4. **Ğ˜Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ±Ğ¾Ğ¸**
```
Payments Service â”€â”€â–º Down âœ—
    â”‚
    â–¼
Orders Service â”€â”€â–º Works âœ“ (degraded mode)
Catalog Service â”€â”€â–º Works âœ“
Users Service â”€â”€â–º Works âœ“

ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¸ÑĞºĞ°Ñ‚ÑŒ Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ,
Ğ½Ğ¾ Ğ½Ğµ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¾Ğ¿Ğ»Ğ°Ñ‡Ğ¸Ğ²Ğ°Ñ‚ÑŒ (Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ)
```

### ĞšĞ¾Ğ¼Ğ¿Ñ€Ğ¾Ğ¼Ğ¸ÑÑÑ‹ Ğ¸ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

**Ğ§Ñ‚Ğ¾ ÑƒÑĞ»Ğ¾Ğ¶Ğ½ÑĞµÑ‚ÑÑ:**

1. **Ğ¡ĞµÑ‚ĞµĞ²Ñ‹Ğµ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ñ‹**
```
ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚: method_call() // 1ns
ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹: HTTP_request() // 100ms
```

2. **Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸**
```
ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚:
BEGIN TRANSACTION
  UPDATE orders SET status='paid'
  UPDATE inventory SET quantity=quantity-1
  INSERT INTO payments ...
COMMIT

ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹:
Orders Service â”€â”€â–º "How to coordinate?"
Inventory Service â”€â”€â–º "What if one fails?"
Payments Service â”€â”€â–º "How to rollback?"
```

3. **ĞÑ‚Ğ»Ğ°Ğ´ĞºĞ°**
```
ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚:
Error in line 42 of OrderService.java

ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹:
Error somewhere in:
Orders Service â”€â”€â–º Inventory Service â”€â”€â–º Payments Service
     â†“                    â†“                    â†“
   Log A              Log B                 Log C
```

4. **Ğ Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ**
```
ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚: 1 deployment unit
ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹: N deployment units

N services Ã— M environments = Complexity
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 2: ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ 1: Ğ•Ğ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ (Single Responsibility)

**ĞŸĞ»Ğ¾Ñ…Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ - "God Service":**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              User Management                â”‚
â”‚                                             â”‚
â”‚ ğŸ“ Registration & Authentication            â”‚
â”‚ ğŸ“§ Email notifications                      â”‚
â”‚ ğŸ“Š User analytics & reporting               â”‚
â”‚ ğŸ’° Discount management                      â”‚
â”‚ ğŸ“± SMS notifications                        â”‚
â”‚ ğŸ”’ Security & permissions                   â”‚
â”‚ ğŸ“ˆ A/B testing for users                    â”‚
â”‚ ğŸ¯ Marketing campaigns                      â”‚
â”‚ ğŸ’³ User billing & subscriptions            â”‚
â”‚ ğŸ“ Geolocation & preferences               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:
â€¢ Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½ Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
â€¢ Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ñ…Ğ¾Ñ‚ÑÑ‚ Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¾Ğ´Ğ¸Ğ½ ÑĞµÑ€Ğ²Ğ¸Ñ
â€¢ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
â€¢ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
```

**Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¸Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ - Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Users    â”‚  â”‚Notificationsâ”‚  â”‚  Analytics  â”‚
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â”‚ â€¢ Register  â”‚  â”‚ â€¢ Email     â”‚  â”‚ â€¢ Reports   â”‚
â”‚ â€¢ Login     â”‚  â”‚ â€¢ SMS       â”‚  â”‚ â€¢ Metrics   â”‚
â”‚ â€¢ Profile   â”‚  â”‚ â€¢ Push      â”‚  â”‚ â€¢ Insights  â”‚
â”‚ â€¢ Auth      â”‚  â”‚ â€¢ Templates â”‚  â”‚ â€¢ Export    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Billing    â”‚  â”‚  Marketing  â”‚  â”‚   Security  â”‚
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â”‚ â€¢ Payments  â”‚  â”‚ â€¢ Campaigns â”‚  â”‚ â€¢ Auth      â”‚
â”‚ â€¢ Invoices  â”‚  â”‚ â€¢ A/B Tests â”‚  â”‚ â€¢ Permissionsâ”‚
â”‚ â€¢ Refunds   â”‚  â”‚ â€¢ Targeting â”‚  â”‚ â€¢ Audit     â”‚
â”‚ â€¢ Plans     â”‚  â”‚ â€¢ Analytics â”‚  â”‚ â€¢ Complianceâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ 2: ĞĞ²Ñ‚Ğ¾Ğ½Ğ¾Ğ¼Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

**ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½:**

1. **Ğ˜Ğ¼ĞµÑ‚ÑŒ ÑĞ²Ğ¾Ñ Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…**
```
âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾:
Service A â”€â”€â”
            â”œâ”€â”€â–º Shared Database
Service B â”€â”€â”˜

Problems:
â€¢ Ğ¡Ñ…ĞµĞ¼Ğ° DB ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ God Object
â€¢ Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ²Ğ»Ğ¸ÑÑÑ‚ Ğ½Ğ° Ğ²ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹  
â€¢ Bottleneck Ğ¿Ñ€Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğµ Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼
â€¢ ĞĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½ÑƒÑ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ

âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾:
Service A â”€â”€â–º Database A (PostgreSQL)
Service B â”€â”€â–º Database B (MongoDB)  
Service C â”€â”€â–º Database C (Redis)

Benefits:
â€¢ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
â€¢ ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ°Ñ ÑĞ²Ğ¾Ğ»ÑÑ†Ğ¸Ñ ÑÑ…ĞµĞ¼Ñ‹
â€¢ Ğ˜Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
```

2. **Ğ‘Ñ‹Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°ĞµĞ¼Ñ‹Ğ¼ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service A   â”‚    â”‚ Service B   â”‚    â”‚ Service C   â”‚
â”‚ v1.2.3      â”‚    â”‚ v2.1.0      â”‚    â”‚ v1.0.5      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚
       â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Container A â”‚    â”‚ Container B â”‚    â”‚ Container C â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑ‚ÑŒÑÑ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾
```

3. **Ğ˜Ğ¼ĞµÑ‚ÑŒ Ñ‡ĞµÑ‚ĞºĞ¾ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ API**
```
Service A API:
â”œâ”€â”€ GET /users/{id}
â”œâ”€â”€ POST /users
â”œâ”€â”€ PUT /users/{id}  
â”œâ”€â”€ DELETE /users/{id}
â””â”€â”€ GET /users/{id}/preferences

Service B Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚:
â€¢ ĞĞ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Service A
â€¢ Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ internal Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Service A
â€¢ Ğ—Ğ°Ğ²Ğ¸ÑĞµÑ‚ÑŒ Ğ¾Ñ‚ implementation details Service A
```

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ 3: Ğ”ĞµÑ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

**Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ (SOA):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Enterprise Bus  â”‚ â—„â”€â”€ Ğ’ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹
â”‚                 â”‚     Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¾Ñ‚ bus
â”‚ â€¢ Routing       â”‚
â”‚ â€¢ Transformationâ”‚ â—„â”€â”€ Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ² bus
â”‚ â€¢ Orchestration â”‚
â”‚ â€¢ Security      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
    â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”
    â”‚    â”‚    â”‚
    â–¼    â–¼    â–¼
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚Srv Aâ”‚ â”‚Srv Bâ”‚ â”‚Srv Câ”‚ â—„â”€â”€ "Ğ¢ÑƒĞ¿Ñ‹Ğµ" ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
```

**Ğ”ĞµÑ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ (ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service A  â”‚    â”‚  Service B  â”‚    â”‚  Service C  â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ â€¢ Business  â”‚    â”‚ â€¢ Business  â”‚    â”‚ â€¢ Business  â”‚
â”‚   Logic     â”‚    â”‚   Logic     â”‚    â”‚   Logic     â”‚
â”‚ â€¢ Data      â”‚    â”‚ â€¢ Data      â”‚    â”‚ â€¢ Data      â”‚
â”‚ â€¢ Security  â”‚    â”‚ â€¢ Security  â”‚    â”‚ â€¢ Security  â”‚
â”‚ â€¢ Monitoringâ”‚    â”‚ â€¢ Monitoringâ”‚    â”‚ â€¢ Monitoringâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
              Simple Communication
              (HTTP, Messages)
```

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ 4: ĞÑ‚ĞºĞ°Ğ·Ğ¾ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ

**Bulkhead Pattern:**
```
                Ship Compartments
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚  A  â”‚ â”‚  B  â”‚ â”‚  C  â”‚ â”‚  D  â”‚ â”‚  E  â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                    â”‚ â—„â”€â”€ Ğ’Ğ¾Ğ´Ğ°              â”‚
â”‚                    â–¼                        â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”                     â”‚
â”‚                 â”‚  ğŸ’§ â”‚ â—„â”€â”€ Ğ˜Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾     â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Application Bulkheads:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service A   â”‚ â”‚ Service B   â”‚ â”‚ Service C   â”‚
â”‚             â”‚ â”‚     âŒ      â”‚ â”‚             â”‚
â”‚ Running âœ“   â”‚ â”‚   Failed    â”‚ â”‚ Running âœ“   â”‚
â”‚             â”‚ â”‚             â”‚ â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²               â–²               â–²
       â”‚               â”‚               â”‚
   Isolated        Isolated        Isolated
   Resources       Resources       Resources
```

**Timeout Pattern:**
```
Service A â”€â”€requestâ”€â”€â–º Service B
          â—„â”€â”€timeout(5s)â”€â”˜

if (response_time > 5s) {
  return "Service temporarily unavailable";
}

Ğ‘ĞµĞ· timeout:
Service A â”€â”€requestâ”€â”€â–º Service B (Ğ·Ğ°Ğ²Ğ¸ÑĞ»Ğ¾)
          â”€â”€waitingâ”€â”€â–º âˆ
          â”€â”€waitingâ”€â”€â–º âˆ 
          â”€â”€waitingâ”€â”€â–º âˆ â—„â”€â”€ Ğ’ÑĞµ Ñ€ĞµÑÑƒÑ€ÑÑ‹ Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹
```

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ 5: ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´

**Conway's Law:**
> "ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸, Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ÑÑ‰Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹, ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒÑÑ‚ ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¾Ğ½Ğ½ÑƒÑ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ ÑÑ‚Ğ¸Ñ… Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¹"

**ĞŸĞ»Ğ¾Ñ…Ğ¾ - ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ¿Ğ¾ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼ Ñ€Ğ¾Ğ»ÑĞ¼:**
```
Frontend Team â”€â”€â”€â”€â”
Backend Team  â”€â”€â”€â”€â”¼â”€â”€â–º ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°
DBA Team      â”€â”€â”€â”€â”¤    (Ğ²ÑĞµ Ğ·Ğ°Ğ²Ğ¸ÑÑÑ‚ Ğ´Ñ€ÑƒĞ³ Ğ¾Ñ‚ Ğ´Ñ€ÑƒĞ³Ğ°)
DevOps Team   â”€â”€â”€â”€â”˜

Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
â€¢ ĞœĞ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°Ğ¼Ğ¸
â€¢ ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ğ°Ñ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ° Ñ„Ğ¸Ñ‡
â€¢ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ
```

**Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾ - ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ¿Ğ¾ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ´Ğ¾Ğ¼ĞµĞ½Ğ°Ğ¼:**
```
User Management Team â”€â”€â–º User Service
â”œâ”€â”€ Frontend Developer
â”œâ”€â”€ Backend Developer  
â”œâ”€â”€ DevOps Engineer
â””â”€â”€ Product Owner

Order Management Team â”€â”€â–º Order Service
â”œâ”€â”€ Frontend Developer
â”œâ”€â”€ Backend Developer
â”œâ”€â”€ DevOps Engineer  
â””â”€â”€ Product Owner

Payment Team â”€â”€â–º Payment Service
â”œâ”€â”€ Frontend Developer
â”œâ”€â”€ Backend Developer
â”œâ”€â”€ DevOps Engineer
â””â”€â”€ Product Owner
```

**Team Topology Ğ´Ğ»Ñ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²:**
```
                Stream-Aligned Teams
                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚                 â”‚
    â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Team A  â”‚     â”‚ Team B  â”‚     â”‚ Team C  â”‚
â”‚ Product â”‚     â”‚ Product â”‚     â”‚ Product â”‚
â”‚ Feature â”‚     â”‚ Feature â”‚     â”‚ Feature â”‚
â”‚Ownershipâ”‚     â”‚Ownershipâ”‚     â”‚Ownershipâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚
     â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Service Aâ”‚     â”‚Service Bâ”‚     â”‚Service Câ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Platform Team (enabling):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ CI/CD pipeline                        â”‚
â”‚ â€¢ Monitoring & Logging                  â”‚
â”‚ â€¢ Service mesh                          â”‚
â”‚ â€¢ Developer tools                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 3: Ğ”ĞµĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

### Domain-Driven Design (DDD) Ğ¾ÑĞ½Ğ¾Ğ²Ñ‹

**Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Ğ´Ğ¾Ğ¼ĞµĞ½:**
```
E-commerce Ğ´Ğ¾Ğ¼ĞµĞ½:
â”œâ”€â”€ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°Ğ¼Ğ¸
â”œâ”€â”€ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ¼Ğ¸
â”œâ”€â”€ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸  
â”œâ”€â”€ ĞŸĞ»Ğ°Ñ‚ĞµĞ¶Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°
â”œâ”€â”€ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸
â”œâ”€â”€ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞºĞ»Ğ°Ğ´Ğ¾Ğ¼
â”œâ”€â”€ ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ¸ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ñ‹
â””â”€â”€ ĞœĞ°Ñ€ĞºĞµÑ‚Ğ¸Ğ½Ğ³ Ğ¸ Ğ¿Ñ€Ğ¾Ğ¼Ğ¾
```

**Bounded Context:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Catalog Context      â”‚  â”‚    Order Context        â”‚
â”‚                         â”‚  â”‚                         â”‚
â”‚ Product {               â”‚  â”‚ Product {               â”‚
â”‚   id: string           â”‚  â”‚   id: string           â”‚
â”‚   name: string         â”‚  â”‚   price: money         â”‚
â”‚   description: text    â”‚  â”‚   quantity: int        â”‚
â”‚   images: [url]        â”‚  â”‚ }                      â”‚
â”‚   categories: [id]     â”‚  â”‚                        â”‚
â”‚   attributes: json     â”‚  â”‚ Order {                â”‚
â”‚ }                      â”‚  â”‚   id: string           â”‚
â”‚                        â”‚  â”‚   products: [Product]  â”‚
â”‚                        â”‚  â”‚   total: money         â”‚
â”‚                        â”‚  â”‚   status: enum         â”‚
â”‚                        â”‚  â”‚ }                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞĞ´Ğ½Ğ° ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ÑŒ "Product" Ğ¸Ğ¼ĞµĞµÑ‚ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ 
Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ² Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°Ñ…
```

**Ubiquitous Language:**
```
âŒ Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº:
"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ entity ProductRecord Ñ Ğ¿Ğ¾Ğ»ÑĞ¼Ğ¸ productId, 
productName Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ products_table"

âœ… Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-ÑĞ·Ñ‹Ğº:
"Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ Ğ² ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ñ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ¸ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸ĞµĞ¼"

Ğ’ ĞºĞ¾Ğ´Ğµ:
class CatalogService {
  addProductToCatalog(product: Product): void
  removeProductFromCatalog(productId: string): void
  updateProductInformation(product: Product): void
}
```

### Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ğ´ĞµĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸

**1. ĞŸĞ¾ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑĞ¼ (Business Capability)**
```
E-commerce capabilities:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Product Catalog â”‚ â”€â”€â–º Catalog Service
â”‚ â€¢ Browse        â”‚
â”‚ â€¢ Search        â”‚  
â”‚ â€¢ Reviews       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Order Managementâ”‚ â”€â”€â–º Order Service  
â”‚ â€¢ Cart          â”‚
â”‚ â€¢ Checkout      â”‚
â”‚ â€¢ Fulfillment   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Management â”‚ â”€â”€â–º User Service
â”‚ â€¢ Registration  â”‚
â”‚ â€¢ Authenticationâ”‚
â”‚ â€¢ Profile       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2. ĞŸĞ¾ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼ (Data)**
```
User Data:
â”œâ”€â”€ Personal Info (name, email, phone)
â”œâ”€â”€ Authentication (passwords, tokens)  
â”œâ”€â”€ Preferences (language, notifications)
â””â”€â”€ Address Book (shipping addresses)
         â–¼
    User Service

Product Data:  
â”œâ”€â”€ Basic Info (name, description, price)
â”œâ”€â”€ Inventory (stock, reservations)
â”œâ”€â”€ Media (images, videos)
â””â”€â”€ Categories (taxonomy, attributes)
         â–¼
    Product Service
```

**3. ĞŸĞ¾ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ (Scalability)**
```
High Load:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Product     â”‚     â”‚ Search      â”‚
â”‚ Catalog     â”‚     â”‚ Service     â”‚ â—„â”€â”€ Read-heavy
â”‚ Service     â”‚ â”€â”€â–º â”‚             â”‚     Scale separately
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Medium Load:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Order       â”‚ â—„â”€â”€ Moderate traffic
â”‚ Service     â”‚     Standard scaling
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Low Load:  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin       â”‚ â—„â”€â”€ Low traffic
â”‚ Service     â”‚     Minimal resources
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°

**Two Pizza Rule:**
```
Team Size = Max 8 people (Ñ‡Ñ‚Ğ¾ Ğ½Ğ°ĞºĞ¾Ñ€Ğ¼ÑÑ‚ 2 Ğ¿Ğ¸Ñ†Ñ†Ñ‹)
Service Size = Ğ¢Ğ¾, Ñ‡Ñ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ğ°ĞºĞ°Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°

ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸:
â€¢ 100-1000 ÑÑ‚Ñ€Ğ¾Ğº ĞºĞ¾Ğ´Ğ°  
â€¢ 1-2 Ğ½ĞµĞ´ĞµĞ»Ğ¸ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿Ğ¸ÑĞ¸
â€¢ 1-3 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ² Ğ‘Ğ”
â€¢ 1-10 API endpoints
â€¢ 1 Ñ‡ĞµÑ‚ĞºĞ¾ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ğ°Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ
```

**Single Purpose Test:**
```
ĞœĞ¾Ğ¶ĞµÑ‚Ğµ Ğ»Ğ¸ Ğ²Ñ‹ Ğ¾Ğ±ÑŠÑÑĞ½Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑĞ° Ğ¾Ğ´Ğ½Ğ¸Ğ¼ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸ĞµĞ¼?

âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾:
"User Service ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¸ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸ĞµĞ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹"

âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾:  
"User Service ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸, Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ, 
Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ñ‹, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞºĞ¸Ğ´ĞºĞ°Ğ¼Ğ¸ Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸"
```

### Ğ’Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² Ğ¸Ğ· Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ°

**Strangler Fig Pattern (Ğ¿Ğ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ğ°Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ):**

**Ğ¨Ğ°Ğ³ 1: Proxy Layer**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Client      â”‚â”€â”€â”€â”€â–ºâ”‚  Proxy/Router   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚     Monolith    â”‚
                        â”‚                 â”‚
                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                        â”‚ â”‚ User Module â”‚ â”‚
                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                        â”‚ â”‚Order Module â”‚ â”‚
                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ¨Ğ°Ğ³ 2: Extract First Service**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Client      â”‚â”€â”€â”€â”€â–ºâ”‚  Proxy/Router   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚            â”‚            â”‚
                     â–¼            â–¼            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
            â”‚ User Serviceâ”‚ â”‚    Monolith     â”‚ â”‚
            â”‚             â”‚ â”‚                 â”‚ â”‚
            â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
            â”‚ â”‚User Dataâ”‚ â”‚ â”‚ â”‚Order Module â”‚ â”‚ â”‚
            â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                     â”‚                          â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ¨Ğ°Ğ³ 3: Continue Extraction**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Client      â”‚â”€â”€â”€â”€â–ºâ”‚  API Gateway    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚            â”‚            â”‚
                     â–¼            â–¼            â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ User Serviceâ”‚ â”‚Order Serviceâ”‚ â”‚   Legacy    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  Monolith   â”‚
                                            â”‚ (remaining) â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Database Decomposition:**

**Ğ¨Ğ°Ğ³ 1: Shared Database (Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾)**
```
User Service â”€â”€â”
               â”œâ”€â”€â–º Shared Database
Monolith â”€â”€â”€â”€â”€â”€â”˜

Pros: ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ
Cons: Coupling Ñ‡ĞµÑ€ĞµĞ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
```

**Ğ¨Ğ°Ğ³ 2: Database Splitting**
```
User Service â”€â”€â–º User DB â”€â”€syncâ”€â”€â–º Legacy DB
Monolith â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Legacy DB

Pros: ĞŸĞ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ğ°Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ
Cons: Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
```

**Ğ¨Ğ°Ğ³ 3: Independent Databases**
```
User Service â”€â”€â–º User DB
Order Service â”€â”€â–º Order DB
Legacy Service â”€â”€â–º Legacy DB

Pros: ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ  
Cons: ĞÑƒĞ¶Ğ½Ğ¾ Ñ€ĞµÑˆĞ°Ñ‚ÑŒ ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 4: ĞœĞµĞ¶ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğµ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ

### Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğµ vs ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğµ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ

**Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğµ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ (Request-Response):**
```
Client â”€â”€1. Get Order Infoâ”€â”€â–º Order Service
       â—„â”€4. Order Responseâ”€â”˜        â”‚
                                    â”‚
                           2. Get User Info
                                    â–¼
                              User Service
                                    â”‚
                           3. User Response
                                    â–¼
                              Order Service

Timeline:
â”œâ”€ 0ms â”€ Client Request
â”œâ”€ 10ms â”€ Order Service processes
â”œâ”€ 20ms â”€ Call to User Service  
â”œâ”€ 50ms â”€ User Service responds
â”œâ”€ 60ms â”€ Order Service responds
â””â”€ 60ms â”€ Client receives response

Total: 60ms
```

**ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğµ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ (Event-Driven):**
```
Order Service â”€â”€"Order Created"â”€â”€â–º Message Queue
                                        â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚              â”‚              â”‚
                         â–¼              â–¼              â–¼
                 User Service   Inventory Service  Email Service
                      â”‚              â”‚              â”‚
                      â–¼              â–¼              â–¼
              "Update Stats"  "Reserve Items"  "Send Confirmation"

Timeline:
â”œâ”€ 0ms â”€ Order Created Event
â”œâ”€ 1ms â”€ Event published
â”œâ”€ 2ms â”€ All services receive event
â”œâ”€ 5ms â”€ Services process in parallel
â””â”€ Done

Total: 5ms + Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
```

### REST API Ğ´Ğ»Ñ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

**API Design Principles:**

1. **Resource-based URLs**
```javascript
// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾
GET /users/123
GET /users/123/orders
POST /users/123/orders
PUT /orders/456
DELETE /orders/456

// âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾  
GET /getUser?id=123
POST /createOrderForUser?userId=123&productId=456
```

2. **HTTP Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Ğ¿Ğ¾ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ**
```javascript
GET    /products     // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº
GET    /products/123 // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹
POST   /products     // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹
PUT    /products/123 // ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ
PATCH  /products/123 // ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ‡Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾  
DELETE /products/123 // Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
```

3. **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ĞºĞ¾Ğ´Ñ‹**
```javascript
200 OK           // Ğ£ÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
201 Created      // Ğ ĞµÑÑƒÑ€Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½
400 Bad Request  // ĞÑˆĞ¸Ğ±ĞºĞ° Ğ² Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞµ
401 Unauthorized // ĞĞµ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½
404 Not Found    // Ğ ĞµÑÑƒÑ€Ñ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½
500 Server Error // ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°
```

4. **Ğ’ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ API**
```javascript
// Ğ§ĞµÑ€ĞµĞ· URL
GET /v1/users/123
GET /v2/users/123

// Ğ§ĞµÑ€ĞµĞ· Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¸
GET /users/123
Accept: application/vnd.api.v1+json

// Ğ§ĞµÑ€ĞµĞ· Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹
GET /users/123?version=1
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ API ĞºĞ¾Ğ½Ñ‚Ñ€Ğ°ĞºÑ‚Ğ°:**
```javascript
// User Service API
{
  "openapi": "3.0.0",
  "info": {
    "title": "User Service API",
    "version": "1.0.0"
  },
  "paths": {
    "/users/{id}": {
      "get": {
        "summary": "Get user by ID",
        "parameters": [
          {
            "name": "id",
            "in": "path", 
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "User": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "email": {"type": "string"},
        "name": {"type": "string"}
      }
    }
  }
}
```

### Event-Driven Architecture

**Ğ¢Ğ¸Ğ¿Ñ‹ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹:**

1. **Domain Events (Ğ±Ğ¸Ğ·Ğ½ĞµÑ-ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ)**
```javascript
{
  "eventType": "UserRegistered",
  "aggregateId": "user-123",
  "userId": "user-123", 
  "email": "john@example.com",
  "timestamp": "2025-07-01T10:00:00Z",
  "version": 1
}

{
  "eventType": "OrderCompleted",
  "aggregateId": "order-456",
  "orderId": "order-456",
  "userId": "user-123",
  "total": 99.99,
  "items": [
    {"productId": "prod-789", "quantity": 2}
  ],
  "timestamp": "2025-07-01T10:05:00Z", 
  "version": 1
}
```

2. **Integration Events (Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ)**
```javascript
{
  "eventType": "PaymentProcessed",
  "paymentId": "payment-789",
  "orderId": "order-456", 
  "amount": 99.99,
  "status": "completed",
  "timestamp": "2025-07-01T10:03:00Z"
}
```

**Event Sourcing:**
```
Traditional State:
User { id: 123, name: "John", email: "john@new.com" }

Event Sourcing:
Events:
1. UserCreated { id: 123, name: "John", email: "john@old.com" }
2. EmailChanged { id: 123, email: "john@new.com" }

Current State = apply(Events[1..N])
```

**CQRS (Command Query Responsibility Segregation):**
```
Commands (Write):          Queries (Read):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Write Model     â”‚       â”‚ Read Model      â”‚
â”‚                 â”‚       â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Normalized  â”‚ â”‚ â”€â”€eventsâ”€â–º â”‚ Denormalizedâ”‚ â”‚
â”‚ â”‚ Write DB    â”‚ â”‚       â”‚ â”‚ Read DB     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Commands:                 Queries:
â€¢ CreateOrder             â€¢ GetOrderHistory
â€¢ UpdateOrder             â€¢ GetOrdersByUser  
â€¢ CancelOrder             â€¢ GetOrderStatistics
```

### Message Patterns

**1. Point-to-Point (Queue)**
```
Producer â”€â”€messageâ”€â”€â–º Queue â”€â”€messageâ”€â”€â–º Consumer
                        â”‚
                        â””â”€â”€messageâ”€â”€â–º Consumer (if available)

Use case: Task processing, load balancing
```

**2. Publish-Subscribe (Topic)**
```
Producer â”€â”€messageâ”€â”€â–º Topic â”€â”€messageâ”€â”€â–º Consumer A
                        â”‚
                        â”œâ”€â”€messageâ”€â”€â–º Consumer B  
                        â”‚
                        â””â”€â”€messageâ”€â”€â–º Consumer C

Use case: Event broadcasting, notifications
```

**3. Request-Reply**
```
Client â”€â”€requestâ”€â”€â–º Queue A â”€â”€requestâ”€â”€â–º Service
       â—„â”€responseâ”€ Queue B â—„â”€responseâ”€â”€

Use case: Async RPC, long-running operations
```

**Delivery Guarantees:**

1. **At-most-once (ìµœëŒ€ í•œ ë²ˆ)**
```
Producer â”€â”€messageâ”€â”€â–º Queue â”€â”€?â”€â”€â–º Consumer
                              Lost OK

Use case: Metrics, logging (loss acceptable)
```

2. **At-least-once (ìµœì†Œ í•œ ë²ˆ)**  
```
Producer â”€â”€messageâ”€â”€â–º Queue â”€â”€messageâ”€â”€â–º Consumer
                        â”‚         â”‚
                        â””â”€retryâ”€â–ºConsumer
                              Duplicate OK

Use case: Notifications, emails
```

3. **Exactly-once (ì •í™•íˆ í•œ ë²ˆ)**
```
Producer â”€â”€messageâ”€â”€â–º Queue â”€â”€messageâ”€â”€â–º Consumer
                   Idempotent     Idempotent
                   
Use case: Payments, orders (no loss, no duplicates)
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 5: ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ½Ğ°Ğ´ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ğ¸

### API Gateway Pattern

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ±ĞµĞ· API Gateway:**
```
Mobile App â”€â”€â”€â”€â”€â”€â”€â”€â–º User Service (auth)
     â”‚              â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Order Service  
     â”‚              â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Product Service
     â”‚              â”‚  
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Payment Service

Problems:
â€¢ Client Ğ·Ğ½Ğ°ĞµÑ‚ Ğ¾Ğ±Ğ¾ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…
â€¢ ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ network calls
â€¢ Ğ”ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ auth Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸
â€¢ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ API
â€¢ CORS problems
```

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ Ñ API Gateway:**
```
Mobile App â”€â”€â”€â”€â–º API Gateway â”€â”€â”€â”€â–º User Service
Web App    â”€â”€â”€â”€â–º      â”‚      â”€â”€â”€â”€â–º Order Service
3rd Party  â”€â”€â”€â”€â–º      â”‚      â”€â”€â”€â”€â–º Product Service
                      â”‚      â”€â”€â”€â”€â–º Payment Service
                      â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Gateway Features  â”‚
            â”‚ â€¢ Authentication  â”‚ 
            â”‚ â€¢ Rate Limiting   â”‚
            â”‚ â€¢ Load Balancing  â”‚
            â”‚ â€¢ Request Routing â”‚
            â”‚ â€¢ Response Cachingâ”‚
            â”‚ â€¢ API Composition â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**API Gateway Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**

1. **Request Routing**
```javascript
// Routes configuration
{
  "/api/v1/users/*": "user-service:8080",
  "/api/v1/orders/*": "order-service:8081", 
  "/api/v1/products/*": "product-service:8082"
}

// Request
GET /api/v1/users/123 â”€â”€â–º user-service:8080/users/123
```

2. **Authentication & Authorization**
```javascript
// Gateway auth flow
1. Client â”€â”€request + JWTâ”€â”€â–º Gateway
2. Gateway validates JWT
3. If valid â”€â”€â–º forward to service
4. If invalid â”€â”€â–º return 401

// Service receives authenticated request with user context
Headers: {
  "X-User-ID": "123",
  "X-User-Role": "customer",
  "Authorization": "Bearer ..."
}
```

3. **Rate Limiting**
```javascript
// Per user rate limiting
const rateLimiter = {
  "user-123": {
    requests: 98,     // Current count
    window: "10:00",  // Current minute
    limit: 100        // Max per minute
  }
}

if (requests >= limit) {
  return 429; // Too Many Requests
}
```

4. **API Composition**
```javascript
// Single endpoint, multiple services
GET /api/v1/orders/123/details

Gateway:
1. Get order â”€â”€â–º Order Service
2. Get user  â”€â”€â–º User Service (parallel)
3. Get products â”€â”€â–º Product Service (parallel)
4. Combine response

Response: {
  order: {...},
  user: {...}, 
  products: [...]
}
```

### Circuit Breaker Pattern

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° cascading failures:**
```
Order Service â”€â”€â–º Payment Service (down)
      â”‚                  â–¼
      â”‚            Timeout (30s)
      â”‚                  â–¼  
      â–¼            Thread pool exhausted
Order Service            â–¼
becomes slow       Order Service fails
      â–¼                  â–¼
All clients        Entire system down
affected
```

**Circuit Breaker Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```
Order Service â”€â”€â–º Circuit Breaker â”€â”€â–º Payment Service
                       â”‚
                  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                  â”‚ States: â”‚
                  â”‚ CLOSED  â”‚ â—„â”€â”€ Normal operation
                  â”‚ OPEN    â”‚ â—„â”€â”€ Fast fail
                  â”‚HALF_OPENâ”‚ â—„â”€â”€ Testing recovery
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Circuit Breaker:**

1. **CLOSED (Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°)**
```
Requests â”€â”€â–º Circuit Breaker â”€â”€â–º Service
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Success: 95%  â”‚
            â”‚ Failures: 5%  â”‚ â—„â”€â”€ Below threshold
            â”‚ Status: CLOSEDâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

If failure_rate > threshold â”€â”€â–º OPEN
```

2. **OPEN (Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ°Ğ·)**
```
Requests â”€â”€â–º Circuit Breaker â”€â”€Xâ”€â”€â–º Service
                    â”‚               (Ğ½Ğµ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼)
                    â–¼
            Return cached response
            or error immediately

After timeout â”€â”€â–º HALF_OPEN
```

3. **HALF_OPEN (Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ)**
```
Limited requests â”€â”€â–º Circuit Breaker â”€â”€â–º Service
                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                    â”‚ Test with â”‚
                    â”‚ 1-2 calls â”‚
                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                          â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                       â–¼
         If success              If failure  
         â”€â”€â–º CLOSED              â”€â”€â–º OPEN
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**
```javascript
class CircuitBreaker {
  constructor(threshold = 5, timeout = 60000) {
    this.failureThreshold = threshold;
    this.timeout = timeout;
    this.failureCount = 0;
    this.state = 'CLOSED';
    this.nextAttempt = Date.now();
  }
  
  async call(service) {
    if (this.state === 'OPEN') {
      if (Date.now() < this.nextAttempt) {
        throw new Error('Circuit breaker is OPEN');
      }
      this.state = 'HALF_OPEN';
    }
    
    try {
      const result = await service();
      this.onSuccess();
      return result;
    } catch (error) {
      this.onFailure();
      throw error;
    }
  }
  
  onSuccess() {
    this.failureCount = 0;
    this.state = 'CLOSED';
  }
  
  onFailure() {
    this.failureCount++;
    if (this.failureCount >= this.failureThreshold) {
      this.state = 'OPEN'; 
      this.nextAttempt = Date.now() + this.timeout;
    }
  }
}
```

### Service Discovery Pattern

**Static Configuration Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:**
```javascript
// Hardcoded service locations
const config = {
  userService: 'http://192.168.1.10:8080',
  orderService: 'http://192.168.1.11:8081',
  paymentService: 'http://192.168.1.12:8082'
}

Problems:
â€¢ IP addresses change
â€¢ Services scale up/down
â€¢ Health status unknown
â€¢ Load balancing needed
```

**Service Registry Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```
Service Registry (Consul, Eureka, etc.)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Services:                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ user-service                    â”‚ â”‚
â”‚ â”‚ â”œâ”€ instance-1: 192.168.1.10:80 â”‚ â”‚
â”‚ â”‚ â”œâ”€ instance-2: 192.168.1.11:80 â”‚ â”‚
â”‚ â”‚ â””â”€ instance-3: 192.168.1.12:80 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ order-service                   â”‚ â”‚
â”‚ â”‚ â”œâ”€ instance-1: 192.168.1.20:81 â”‚ â”‚
â”‚ â”‚ â””â”€ instance-2: 192.168.1.21:81 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–²                    â–²
          â”‚                    â”‚
     Registration          Discovery
          â”‚                    â”‚
          â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Service   â”‚      â”‚   Client    â”‚
â”‚  Instance   â”‚      â”‚  (Consumer) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Client-Side Discovery:**
```
1. Client â”€â”€queryâ”€â”€â–º Service Registry
2. Service Registry â”€â”€listâ”€â”€â–º Client
3. Client â”€â”€requestâ”€â”€â–º Service Instance (chosen by client)

Pros: Simple, no additional network hop
Cons: Client logic complexity
```

**Server-Side Discovery:**
```
1. Client â”€â”€requestâ”€â”€â–º Load Balancer
2. Load Balancer â”€â”€queryâ”€â”€â–º Service Registry  
3. Load Balancer â”€â”€requestâ”€â”€â–º Service Instance

Pros: Simple client, centralized logic
Cons: Load balancer can be bottleneck
```

**Health Checks:**
```javascript
// Service health endpoint
GET /health

Response:
{
  "status": "UP",      // UP, DOWN, OUT_OF_SERVICE
  "timestamp": "2025-07-01T10:00:00Z",
  "dependencies": {
    "database": {
      "status": "UP",
      "responseTime": "10ms"
    },
    "cache": {
      "status": "UP", 
      "responseTime": "1ms"
    },
    "external-api": {
      "status": "DOWN",
      "error": "Connection timeout"
    }
  },
  "metrics": {
    "cpu": "45%",
    "memory": "60%",
    "disk": "30%"
  }
}
```

### Bulkhead Pattern

**Shared Resource Pool Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Thread Pool (10)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚ â—„â”€â”€ All threads
â”‚ Critical API    â”‚ Batch Jobs    â”‚     used by 
â”‚ (8 threads)     â”‚ (2 threads)   â”‚     batch jobs
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²               â–²
         â”‚               â”‚
    Fast response   Slow processing
    required        (not critical)

Result: Critical API becomes slow
```

**Bulkhead Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Thread Pool A  â”‚    â”‚  Thread Pool B  â”‚  
â”‚     (6 threads) â”‚    â”‚     (4 threads) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚    â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
â”‚ Critical API    â”‚    â”‚   Batch Jobs    â”‚
â”‚                 â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Result: Critical API always has resources
```

**Types of Bulkheads:**

1. **Thread Pool Isolation**
```javascript
// Separate thread pools
const criticalPool = new ThreadPool(10);
const batchPool = new ThreadPool(5);  
const reportPool = new ThreadPool(2);

// Route requests to appropriate pools
if (request.type === 'critical') {
  criticalPool.execute(request);
} else if (request.type === 'batch') {
  batchPool.execute(request);
}
```

2. **Connection Pool Isolation**
```javascript
// Separate DB connection pools
const userDbPool = new ConnectionPool('user-db', 10);
const analyticsDbPool = new ConnectionPool('analytics-db', 5);
const logsDbPool = new ConnectionPool('logs-db', 2);
```

3. **Service Instance Isolation**
```
High Priority Requests:
Client â”€â”€â–º Load Balancer â”€â”€â–º Service Instance Pool A
                              â”œâ”€ Instance A1  
                              â”œâ”€ Instance A2
                              â””â”€ Instance A3

Low Priority Requests:
Client â”€â”€â–º Load Balancer â”€â”€â–º Service Instance Pool B
                              â”œâ”€ Instance B1
                              â””â”€ Instance B2
```

### Retry Pattern

**Simple Retry:**
```javascript
async function callServiceWithRetry(service, maxRetries = 3) {
  let attempts = 0;
  
  while (attempts < maxRetries) {
    try {
      return await service();
    } catch (error) {
      attempts++;
      
      if (attempts >= maxRetries) {
        throw error; // Final failure
      }
      
      // Fixed delay
      await sleep(1000); // 1 second
    }
  }
}
```

**Exponential Backoff:**
```javascript
async function callServiceWithBackoff(service, maxRetries = 3) {
  let attempts = 0;
  
  while (attempts < maxRetries) {
    try {
      return await service();
    } catch (error) {
      attempts++;
      
      if (attempts >= maxRetries) {
        throw error;
      }
      
      // Exponential backoff: 1s, 2s, 4s, 8s...
      const delay = Math.pow(2, attempts) * 1000;
      await sleep(delay);
    }
  }
}
```

**Jittered Exponential Backoff:**
```javascript
async function callServiceWithJitter(service, maxRetries = 3) {
  let attempts = 0;
  
  while (attempts < maxRetries) {
    try {
      return await service();
    } catch (error) {
      attempts++;
      
      if (attempts >= maxRetries) {
        throw error;
      }
      
      // Add randomness to prevent thundering herd
      const baseDelay = Math.pow(2, attempts) * 1000;
      const jitter = Math.random() * 0.1 * baseDelay;
      const delay = baseDelay + jitter;
      
      await sleep(delay);
    }
  }
}
```

**Retry with Conditions:**
```javascript
function isRetriableError(error) {
  // Retry on temporary failures
  const retriableCodes = [500, 502, 503, 504, 429];
  return retriableCodes.includes(error.status);
}

async function smartRetry(service, maxRetries = 3) {
  let attempts = 0;
  
  while (attempts < maxRetries) {
    try {
      return await service();
    } catch (error) {
      attempts++;
      
      // Don't retry on client errors (4xx)
      if (!isRetriableError(error) || attempts >= maxRetries) {
        throw error;
      }
      
      await sleep(Math.pow(2, attempts) * 1000);
    }
  }
}
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 6: Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸ÑĞ¼Ğ¸

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ñ… Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹

**ACID Ğ² Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğµ:**
```javascript
// ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ğ°Ñ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ
BEGIN TRANSACTION
  INSERT INTO orders (user_id, total) VALUES (123, 99.99);
  UPDATE inventory SET quantity = quantity - 1 WHERE product_id = 456;
  INSERT INTO payments (order_id, amount) VALUES (789, 99.99);
COMMIT

Ğ’ÑĞµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ»Ğ¸Ğ±Ğ¾ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑÑÑ‚ÑÑ, Ğ»Ğ¸Ğ±Ğ¾ Ğ¾Ñ‚ĞºĞ°Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ
```

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° Ğ² Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…:**
```
Order Service â”€â”€â–º Order DB (âœ“ Committed)
     â”‚
     â”œâ”€â”€â–º Inventory Service â”€â”€â–º Inventory DB (âœ“ Committed)  
     â”‚
     â””â”€â”€â–º Payment Service â”€â”€â–º Payment DB (âœ— Failed)

Result: Inconsistent state!
Order created, inventory updated, but payment failed
```

### Two-Phase Commit (2PC) Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

**2PC Protocol:**
```
Phase 1 - Prepare:
Coordinator â”€â”€â–º Service A: "Can you commit?"
            â”€â”€â–º Service B: "Can you commit?"
            â”€â”€â–º Service C: "Can you commit?"

Service A â”€â”€â–º "Yes, ready"
Service B â”€â”€â–º "Yes, ready"  
Service C â”€â”€â–º "No, failure"

Phase 2 - Commit/Abort:
Coordinator â”€â”€â–º Service A: "Abort"
            â”€â”€â–º Service B: "Abort"
            â”€â”€â–º Service C: "Abort"
```

**2PC Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:**
```
1. Blocking Protocol:
   Services wait for coordinator decision
   
2. Single Point of Failure:
   If coordinator crashes, all services block
   
3. Performance Impact:
   Multiple network rounds required
   
4. Doesn't work well with microservices:
   Tight coupling, reduces autonomy
```

### Saga Pattern

**Choreography Saga:**
```
Saga Steps:
1. Create Order
2. Reserve Inventory  
3. Process Payment
4. Confirm Order

Success Flow:
Order Service â”€â”€"OrderCreated"â”€â”€â–º Event Bus
                                     â”‚
Inventory Service â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   "InventoryReserved"
                   â”‚
                   â–¼
Payment Service â—„â”€â”€â”€â”€â”€Event Bus
                   â”‚
                   "PaymentProcessed"  
                   â”‚
                   â–¼
Order Service â—„â”€â”€â”€â”€Event Bus
                   â”‚
                   "OrderConfirmed"
```

**Compensation Flow:**
```
Failure at Payment:
Order Service â”€â”€"OrderCreated"â”€â”€â–º âœ“
Inventory Service â”€â”€"InventoryReserved"â”€â”€â–º âœ“
Payment Service â”€â”€"PaymentFailed"â”€â”€â–º âœ—

Compensation:
Payment Service â”€â”€"PaymentFailed"â”€â”€â–º Event Bus
                                        â”‚
Inventory Service â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   "InventoryReleased" (compensate)
                   â”‚
                   â–¼
Order Service â—„â”€â”€â”€â”€Event Bus  
                   â”‚
                   "OrderCancelled" (compensate)
```

**Orchestration Saga:**
```
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Saga Coordinatorâ”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Order Serviceâ”‚    â”‚Inventory    â”‚    â”‚Payment      â”‚
â”‚             â”‚    â”‚Service      â”‚    â”‚Service      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Saga Coordinator controls the flow:
1. Call Order Service
2. If success, call Inventory Service
3. If success, call Payment Service  
4. If any failure, execute compensations
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Saga Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**
```javascript
class OrderSaga {
  async execute(orderData) {
    const sagaState = {
      steps: [],
      compensations: []
    };
    
    try {
      // Step 1: Create Order
      const order = await this.createOrder(orderData);
      sagaState.steps.push({step: 'CreateOrder', data: order});
      sagaState.compensations.push(() => this.cancelOrder(order.id));
      
      // Step 2: Reserve Inventory
      const reservation = await this.reserveInventory(order.items);
      sagaState.steps.push({step: 'ReserveInventory', data: reservation});
      sagaState.compensations.push(() => this.releaseInventory(reservation.id));
      
      // Step 3: Process Payment
      const payment = await this.processPayment(order.total);
      sagaState.steps.push({step: 'ProcessPayment', data: payment});
      sagaState.compensations.push(() => this.refundPayment(payment.id));
      
      // Step 4: Confirm Order
      await this.confirmOrder(order.id);
      
      return order;
      
    } catch (error) {
      // Execute compensations in reverse order
      await this.compensate(sagaState.compensations.reverse());
      throw error;
    }
  }
  
  async compensate(compensations) {
    for (const compensation of compensations) {
      try {
        await compensation();
      } catch (error) {
        // Log compensation failure, but continue
        console.error('Compensation failed:', error);
      }
    }
  }
}
```

### Eventual Consistency

**Strong Consistency (traditional):**
```
Time: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º

Database: [Data v1] â”€â”€updateâ”€â”€â–º [Data v2]
                               
All reads after update return v2
```

**Eventual Consistency:**
```
Time: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º

Service A: [Data v1] â”€â”€updateâ”€â”€â–º [Data v2]
Service B: [Data v1] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º [Data v2]
Service C: [Data v1] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º [Data v2]

Different services see updates at different times,
but eventually converge to the same state
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ eventual consistency:**
```
User updates profile in User Service:
User Service â”€â”€â–º User DB: {name: "John Smith"} (immediately)
                    â”‚
                    "UserUpdated" event
                    â”‚
                    â–¼
Email Service â”€â”€â–º Email Templates: {name: "John Doe"} (5 seconds later)
Analytics Service â”€â”€â–º Analytics DB: {name: "John Doe"} (10 seconds later)
Cache Service â”€â”€â–º Cache: {name: "John Doe"} (30 seconds later)

Period of inconsistency: 0-30 seconds
```

**Dealing with Eventual Consistency:**

1. **Read Your Own Writes**
```javascript
// After updating profile, show updated data immediately
async function updateUserProfile(userId, newData) {
  // Update in write database
  await userWriteDb.update(userId, newData);
  
  // Immediately update local cache
  cache.set(userId, newData);
  
  // Return updated data to user
  return newData;
}
```

2. **Conflict Resolution**
```javascript
// Last Writer Wins
function resolveConflict(version1, version2) {
  return version1.timestamp > version2.timestamp ? version1 : version2;
}

// Application-specific rules
function resolveUserConflict(version1, version2) {
  return {
    name: version1.name, // Prefer first version
    email: version2.email, // Prefer second version  
    timestamp: Math.max(version1.timestamp, version2.timestamp)
  };
}
```

3. **Versioning**
```javascript
// Vector clocks for conflict detection
{
  data: {name: "John"},
  version: {
    "user-service": 3,
    "profile-service": 1,
    "cache-service": 2
  }
}
```

### Outbox Pattern

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Dual Writes**
```javascript
// âŒ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾Ğ¹Ñ‚Ğ¸ partial failure
async function createOrder(orderData) {
  // 1. Save to database
  await database.save(order);
  
  // 2. Publish event - Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑƒĞ¿Ğ°ÑÑ‚ÑŒ
  await eventBus.publish('OrderCreated', order);
}

Scenarios:
â€¢ Database save âœ“, Event publish âœ— â†’ Inconsistent state
â€¢ Database save âœ—, Event publish âœ“ â†’ Event without data
â€¢ Database save âœ“, Event publish âœ“ â†’ Success
```

**Outbox Pattern Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Database                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   Orders    â”‚ â”‚     Outbox      â”‚ â”‚
â”‚ â”‚             â”‚ â”‚                 â”‚ â”‚
â”‚ â”‚ order_id    â”‚ â”‚ id              â”‚ â”‚
â”‚ â”‚ user_id     â”‚ â”‚ event_type      â”‚ â”‚
â”‚ â”‚ total       â”‚ â”‚ event_data      â”‚ â”‚
â”‚ â”‚ status      â”‚ â”‚ processed       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ created_at      â”‚ â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â–¼                    â–¼
  Business Data         Event Queue
```

**Outbox Pattern Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
```javascript
async function createOrder(orderData) {
  const transaction = await database.beginTransaction();
  
  try {
    // 1. Save business data
    const order = await transaction.orders.create(orderData);
    
    // 2. Save event to outbox (same transaction)
    await transaction.outbox.create({
      eventType: 'OrderCreated',
      eventData: JSON.stringify(order),
      processed: false,
      createdAt: new Date()
    });
    
    // 3. Commit both changes atomically
    await transaction.commit();
    
    return order;
  } catch (error) {
    await transaction.rollback();
    throw error;
  }
}

// Separate process publishes events
async function publishOutboxEvents() {
  const events = await database.outbox.findUnprocessed();
  
  for (const event of events) {
    try {
      await eventBus.publish(event.eventType, JSON.parse(event.eventData));
      await database.outbox.markProcessed(event.id);
    } catch (error) {
      console.error('Failed to publish event:', error);
      // Will retry in next cycle
    }
  }
}

// Run publisher periodically
setInterval(publishOutboxEvents, 5000);
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 7: ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ½Ğ°Ğ±Ğ»ÑĞ´Ğ°ĞµĞ¼Ğ¾ÑÑ‚ÑŒ

### Ğ¢Ñ€Ğ¸ ÑÑ‚Ğ¾Ğ»Ğ¿Ğ° Ğ½Ğ°Ğ±Ğ»ÑĞ´Ğ°ĞµĞ¼Ğ¾ÑÑ‚Ğ¸

**1. Ğ›Ğ¾Ğ³Ğ¸ (Logs)**
```
Application logs Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ Ñ‡Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ¾:

[2025-07-01 10:00:01.123] INFO  OrderService - Order 12345 created for user 789
[2025-07-01 10:00:02.456] DEBUG PaymentService - Processing payment for order 12345
[2025-07-01 10:00:03.789] ERROR PaymentService - Payment failed: Invalid card number
[2025-07-01 10:00:04.012] WARN  OrderService - Order 12345 payment failed, cancelling order
[2025-07-01 10:00:04.345] INFO  NotificationService - Sending cancellation email to user 789
```

**Structured Logging:**
```javascript
// âŒ Unstructured logs
console.log('User 123 ordered product 456 for $99.99');

// âœ… Structured logs  
logger.info('Order created', {
  userId: '123',
  productId: '456', 
  orderId: '789',
  amount: 99.99,
  timestamp: '2025-07-01T10:00:00Z',
  traceId: 'abc-123-def'
});
```

**Centralized Logging:**
```
Service A â”€â”€logsâ”€â”€â–º Log Aggregator â”€â”€â–º Search & Analytics
Service B â”€â”€logsâ”€â”€â–º       â”‚
Service C â”€â”€logsâ”€â”€â–º       â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Log Storage â”‚
                   â”‚ (ELK Stack) â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2. ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (Metrics)**
```
System metrics Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ ĞºĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°:

order_service_requests_total{method="POST",status="200"} 1523
order_service_requests_total{method="POST",status="500"} 12
order_service_response_time_seconds{quantile="0.95"} 0.234
order_service_active_connections 45
order_service_memory_usage_bytes 524288000
```

**Ğ¢Ğ¸Ğ¿Ñ‹ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº:**

**Counters (ÑÑ‡ĞµÑ‚Ñ‡Ğ¸ĞºĞ¸):**
```javascript
// Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ¼Ğ¾Ğ½Ğ¾Ñ‚Ğ¾Ğ½Ğ½Ğ¾
requestsTotal.inc({method: 'GET', endpoint: '/users'});
errorsTotal.inc({service: 'payment', error_type: 'timeout'});
```

**Gauges (Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹):**
```javascript
// Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
activeConnections.set(42);
memoryUsage.set(process.memoryUsage().heapUsed);
queueSize.set(messageQueue.length);
```

**Histograms (Ğ³Ğ¸ÑÑ‚Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹):**
```javascript
// Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹
responseTime.observe(0.234); // 234ms
requestSize.observe(1024);   // 1KB request
```

**Summaries (ÑĞ²Ğ¾Ğ´ĞºĞ¸):**
```javascript
// ĞšĞ²Ğ°Ğ½Ñ‚Ğ¸Ğ»Ğ¸ Ğ¸ ÑÑƒĞ¼Ğ¼Ñ‹
responseDuration.observe(0.1);   // Adds to summary
// ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ percentiles: 50%, 90%, 95%, 99%
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº:**
```javascript
const prometheus = require('prom-client');

// Create metrics
const httpRequests = new prometheus.Counter({
  name: 'http_requests_total',
  help: 'Total HTTP requests',
  labelNames: ['method', 'route', 'status']
});

const httpDuration = new prometheus.Histogram({
  name: 'http_request_duration_seconds',
  help: 'HTTP request duration',
  labelNames: ['method', 'route'],
  buckets: [0.1, 0.3, 0.5, 0.7, 1, 3, 5, 7, 10]
});

// Middleware to track metrics
function metricsMiddleware(req, res, next) {
  const start = Date.now();
  
  res.on('finish', () => {
    const duration = (Date.now() - start) / 1000;
    
    httpRequests.inc({
      method: req.method,
      route: req.route.path,
      status: res.statusCode
    });
    
    httpDuration.observe({
      method: req.method,
      route: req.route.path
    }, duration);
  });
  
  next();
}
```

**3. Ğ¢Ñ€Ğ°ÑÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ° (Tracing)**
```
Distributed traces Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ Ğ¿ÑƒÑ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ñ‡ĞµÑ€ĞµĞ· ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ:

Trace ID: abc-123-def-456
â”‚
â”œâ”€ Span 1: API Gateway (10ms)
â”‚  â”‚
â”‚  â”œâ”€ Span 2: Order Service (50ms)
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ Span 3: Database Query (30ms)
â”‚  â”‚  â””â”€ Span 4: Cache Lookup (5ms)
â”‚  â”‚
â”‚  â””â”€ Span 5: Payment Service (200ms)
â”‚     â”‚
â”‚     â”œâ”€ Span 6: External API Call (180ms)
â”‚     â””â”€ Span 7: Database Update (15ms)
```

**Trace Context Propagation:**
```javascript
// Request headers
{
  "X-Trace-ID": "abc-123-def-456",
  "X-Span-ID": "span-789",
  "X-Parent-Span-ID": "span-456"
}

// Service A calls Service B
async function callServiceB(data) {
  const headers = {
    'Content-Type': 'application/json',
    'X-Trace-ID': getCurrentTraceId(),
    'X-Span-ID': generateNewSpanId(),
    'X-Parent-Span-ID': getCurrentSpanId()
  };
  
  return await fetch('http://service-b/api', {
    method: 'POST',
    headers,
    body: JSON.stringify(data)
  });
}
```

### Correlation IDs

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: ĞºĞ°Ğº ÑĞ²ÑĞ·Ğ°Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²?**
```
Service A: [10:00:01] Processing user request
Service B: [10:00:02] Database query executed  
Service C: [10:00:03] Email sent
Service A: [10:00:04] Request completed

Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ: ĞºĞ°ĞºĞ¸Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ¾Ñ‚Ğ½Ğ¾ÑÑÑ‚ÑÑ Ğº Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ?
```

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: Correlation ID**
```
Service A: [10:00:01] [correlationId=req-123] Processing user request
Service B: [10:00:02] [correlationId=req-123] Database query executed
Service C: [10:00:03] [correlationId=req-123] Email sent  
Service A: [10:00:04] [correlationId=req-123] Request completed

Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ²ÑĞµ Ğ»Ğ¾Ğ³Ğ¸ Ğ¿Ğ¾ correlationId=req-123
```

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Correlation ID:**
```javascript
// Middleware Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸/Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ correlation ID
function correlationMiddleware(req, res, next) {
  // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ correlation ID Ğ¸Ğ· Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ° Ğ¸Ğ»Ğ¸ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼ Ğ½Ğ¾Ğ²Ñ‹Ğ¹
  const correlationId = req.headers['x-correlation-id'] || 
                        generateUUID();
  
  // Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°
  req.correlationId = correlationId;
  
  // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² response headers
  res.setHeader('X-Correlation-ID', correlationId);
  
  next();
}

// Logger Ñ correlation ID
function createLogger(correlationId) {
  return {
    info: (message, ...args) => {
      console.log(`[${new Date().toISOString()}] [correlationId=${correlationId}] INFO: ${message}`, ...args);
    },
    error: (message, ...args) => {
      console.log(`[${new Date().toISOString()}] [correlationId=${correlationId}] ERROR: ${message}`, ...args);
    }
  };
}

// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
app.get('/orders/:id', correlationMiddleware, async (req, res) => {
  const logger = createLogger(req.correlationId);
  
  logger.info('Fetching order', { orderId: req.params.id });
  
  try {
    const order = await orderService.getOrder(req.params.id, req.correlationId);
    logger.info('Order fetched successfully');
    res.json(order);
  } catch (error) {
    logger.error('Failed to fetch order', { error: error.message });
    res.status(500).json({ error: 'Internal server error' });
  }
});
```

### Health Checks

**Simple Health Check:**
```javascript
// Basic health endpoint
app.get('/health', (req, res) => {
  res.json({
    status: 'UP',
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});
```

**Detailed Health Check:**
```javascript
class HealthChecker {
  constructor() {
    this.dependencies = [
      { name: 'database', checker: this.checkDatabase },
      { name: 'redis', checker: this.checkRedis },
      { name: 'external-api', checker: this.checkExternalAPI }
    ];
  }
  
  async checkHealth() {
    const results = {
      status: 'UP',
      timestamp: new Date().toISOString(),
      dependencies: {}
    };
    
    let overallStatus = 'UP';
    
    for (const dep of this.dependencies) {
      try {
        const start = Date.now();
        await dep.checker();
        
        results.dependencies[dep.name] = {
          status: 'UP',
          responseTime: `${Date.now() - start}ms`
        };
      } catch (error) {
        results.dependencies[dep.name] = {
          status: 'DOWN',
          error: error.message
        };
        overallStatus = 'DOWN';
      }
    }
    
    results.status = overallStatus;
    return results;
  }
  
  async checkDatabase() {
    await database.query('SELECT 1');
  }
  
  async checkRedis() {
    await redis.ping();
  }
  
  async checkExternalAPI() {
    const response = await fetch('https://api.external.com/health', {
      timeout: 5000
    });
    
    if (!response.ok) {
      throw new Error(`External API returned ${response.status}`);
    }
  }
}

app.get('/health', async (req, res) => {
  try {
    const health = await healthChecker.checkHealth();
    const statusCode = health.status === 'UP' ? 200 : 503;
    res.status(statusCode).json(health);
  } catch (error) {
    res.status(503).json({
      status: 'DOWN',
      error: error.message,
      timestamp: new Date().toISOString()
    });
  }
});
```

**Health Check Types:**

1. **Shallow Health Check**
```javascript
// Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (< 1 ÑĞµĞºÑƒĞ½Ğ´Ğ°)
GET /health/live

// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ñ‚Ğ¾ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½
{
  "status": "UP",
  "checks": ["process-running", "port-listening"]
}
```

2. **Deep Health Check**
```javascript
// ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (< 30 ÑĞµĞºÑƒĞ½Ğ´)
GET /health/ready

// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğº Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
{
  "status": "UP", 
  "checks": {
    "database": "UP",
    "cache": "UP",
    "dependencies": "UP"
  }
}
```

### Alerting ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸

**Alert Pyramid:**
```
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ Pages   â”‚ â—„â”€â”€ Critical alerts (wake up engineer)
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Tickets     â”‚ â—„â”€â”€ Important alerts (investigate today)
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ Notifications     â”‚ â—„â”€â”€ Warning alerts (check tomorrow)
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Dashboards & Logs         â”‚ â—„â”€â”€ Info (visible in dashboards)
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Alert Rules Examples:**
```yaml
# Critical: Service completely down
- alert: ServiceDown
  expr: up{job="order-service"} == 0
  for: 1m
  labels:
    severity: critical
  annotations:
    summary: "Order Service is down"
    action: "Page oncall engineer immediately"

# High: Error rate spike  
- alert: HighErrorRate
  expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.1
  for: 5m
  labels:
    severity: high
  annotations:
    summary: "High error rate detected"
    action: "Create incident ticket"

# Warning: Response time degradation
- alert: SlowResponses
  expr: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) > 1
  for: 10m
  labels:
    severity: warning
  annotations:
    summary: "95th percentile response time > 1s"
    action: "Investigate performance"
```

**Alert Fatigue Prevention:**
```
ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¸Ñ… Ğ°Ğ»ĞµÑ€Ñ‚Ğ¾Ğ²:

1. Alert Ğ½Ğ° symptoms, Ğ½Ğµ Ğ½Ğ° causes
   âœ… "Users can't place orders" 
   âŒ "CPU usage is high"

2. Alert Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ° actionable Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹
   âœ… "Payment service error rate > 5%"
   âŒ "Someone deployed new version"

3. Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ğ°Ğ»ĞµÑ€Ñ‚Ğ¾Ğ²
   âœ… "Multiple services down in region A"
   âŒ "Service A down", "Service B down", "Service C down"

4. ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ñ€Ğ¾Ğ³Ğ¸ Ğ¸ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºĞ½Ğ°
   âœ… Error rate > 5% for 5 minutes
   âŒ Error rate > 0.1% for 30 seconds
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 8: Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

### Ğ£Ğ³Ñ€Ğ¾Ğ·Ñ‹ Ğ² Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ

**Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚ÑŒ Ğ°Ñ‚Ğ°ĞºĞ¸:**
```
ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Application   â”‚ â—„â”€â”€ 1 Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Database     â”‚ â—„â”€â”€ 1 Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹:
â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”
â”‚Srv Aâ”‚  â”‚Srv Bâ”‚  â”‚Srv Câ”‚ â—„â”€â”€ N Ñ‚Ğ¾Ñ‡ĞµĞº Ğ²Ñ…Ğ¾Ğ´Ğ°
â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜
   â”‚        â”‚        â”‚
â”Œâ”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”
â”‚DB A â”‚  â”‚DB B â”‚  â”‚DB C â”‚ â—„â”€â”€ N Ğ±Ğ°Ğ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ = Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ°Ñ‚Ğ°ĞºĞ¸
```

**Ğ¡ĞµÑ‚ĞµĞ²Ñ‹Ğµ ÑƒĞ³Ñ€Ğ¾Ğ·Ñ‹:**
```
Ğ’Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ°:
Service A â”€â”€method_call()â”€â”€â–º Service B
           (memory access)

ĞœĞµĞ¶Ğ´Ñƒ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸:  
Service A â”€â”€HTTP requestâ”€â”€â–º Service B
           (network call)
           
Ğ Ğ¸ÑĞºĞ¸:
â€¢ Man-in-the-middle attacks
â€¢ Eavesdropping 
â€¢ Network hijacking
â€¢ Replay attacks
```

### Zero Trust Architecture

**Traditional Perimeter Security:**
```
                     Firewall
                        â”‚
    Internet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Trusted Network
    (Untrusted)         â”‚           â”‚
                        â”‚           â”œâ”€ Service A
                        â”‚           â”œâ”€ Service B  
                        â”‚           â””â”€ Service C
                        â”‚           
            "Trust but don't verify inside"
```

**Zero Trust Model:**
```
                "Never trust, always verify"
                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚                   â”‚
    â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Service Aâ”‚â—„â”€â”€â”€mTLSâ”€â–ºâ”‚Service Bâ”‚â—„â”€â”€â”€mTLSâ”€â–ºâ”‚Service Câ”‚
â”‚+ Auth   â”‚         â”‚+ Auth   â”‚         â”‚+ Auth   â”‚
â”‚+ AuthZ  â”‚         â”‚+ AuthZ  â”‚         â”‚+ AuthZ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·ÑƒĞµÑ‚ÑÑ
```

### Authentication Ğ² Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…

**JWT (JSON Web Tokens):**
```
JWT Structure:
header.payload.signature

Header:
{
  "alg": "RS256",
  "typ": "JWT"
}

Payload:
{
  "sub": "user-123",
  "iss": "auth-service",
  "exp": 1625097600,
  "iat": 1625094000,
  "scope": ["read:orders", "write:orders"]
}

Signature:
RSASHA256(
  base64UrlEncode(header) + "." + base64UrlEncode(payload),
  private_key
)
```

**Authentication Flow:**
```
1. User â”€â”€login credentialsâ”€â”€â–º Auth Service
2. Auth Service validates credentials
3. Auth Service â”€â”€JWT tokenâ”€â”€â–º User
4. User â”€â”€request + JWTâ”€â”€â–º API Gateway
5. API Gateway validates JWT signature
6. API Gateway â”€â”€request + user contextâ”€â”€â–º Service
```

**Token Validation:**
```javascript
const jwt = require('jsonwebtoken');

function authenticateToken(req, res, next) {
  const authHeader = req.headers['authorization'];
  const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN
  
  if (!token) {
    return res.status(401).json({ error: 'Access token required' });
  }
  
  try {
    const payload = jwt.verify(token, process.env.JWT_PUBLIC_KEY, {
      algorithms: ['RS256'],
      issuer: 'auth-service',
      maxAge: '1h'
    });
    
    req.user = {
      id: payload.sub,
      scope: payload.scope
    };
    
    next();
  } catch (error) {
    return res.status(403).json({ error: 'Invalid token' });
  }
}
```

### Authorization (RBAC & ABAC)

**Role-Based Access Control (RBAC):**
```
Users â”€â”€belong toâ”€â”€â–º Roles â”€â”€haveâ”€â”€â–º Permissions

Examples:
User "john@company.com" 
â”œâ”€ Role: "customer"
â”‚  â”œâ”€ Permission: "read:own-orders"
â”‚  â””â”€ Permission: "create:orders"
â””â”€ Role: "premium-customer"  
   â”œâ”€ Permission: "read:own-orders"
   â”œâ”€ Permission: "create:orders"
   â””â”€ Permission: "access:priority-support"

User "admin@company.com"
â””â”€ Role: "admin"
   â”œâ”€ Permission: "read:all-orders"
   â”œâ”€ Permission: "update:orders"
   â””â”€ Permission: "delete:orders"
```

**Attribute-Based Access Control (ABAC):**
```javascript
// Policy: Users can read their own orders
function canReadOrder(user, order, context) {
  return user.id === order.userId || 
         user.role === 'admin' ||
         (user.role === 'support' && context.region === user.region);
}

// Policy: Orders can be cancelled within 24 hours
function canCancelOrder(user, order, context) {
  const hoursSinceCreated = (Date.now() - order.createdAt) / (1000 * 60 * 60);
  
  return (user.id === order.userId && hoursSinceCreated < 24) ||
         user.role === 'admin';
}
```

**Authorization in Services:**
```javascript
async function getOrder(req, res) {
  const orderId = req.params.id;
  const user = req.user; // From JWT
  
  try {
    const order = await orderService.findById(orderId);
    
    if (!order) {
      return res.status(404).json({ error: 'Order not found' });
    }
    
    // Check authorization
    if (!canReadOrder(user, order)) {
      return res.status(403).json({ error: 'Access denied' });
    }
    
    res.json(order);
  } catch (error) {
    res.status(500).json({ error: 'Internal server error' });
  }
}

function canReadOrder(user, order) {
  // User can read their own orders
  if (user.id === order.userId) {
    return true;
  }
  
  // Admins can read all orders
  if (user.scope && user.scope.includes('admin:read:orders')) {
    return true;
  }
  
  return false;
}
```

### Service-to-Service Security

**Mutual TLS (mTLS):**
```
Service A â—„â”€â”€â”€â”€ mTLS â”€â”€â”€â”€â–º Service B
    â”‚                        â”‚
    â”œâ”€ Client Certificate    â”œâ”€ Server Certificate
    â”œâ”€ Private Key          â”œâ”€ Private Key  
    â””â”€ Trusted CA           â””â”€ Trusted CA

Both services authenticate each other
```

**Service Tokens:**
```javascript
// Service A calls Service B
async function callServiceB(data) {
  const serviceToken = await getServiceToken('service-a', 'service-b');
  
  const response = await fetch('https://service-b/api/data', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${serviceToken}`,
      'X-Service-ID': 'service-a'
    },
    body: JSON.stringify(data)
  });
  
  return response.json();
}

// Service B validates service token
function validateServiceToken(req, res, next) {
  const token = req.headers.authorization?.split(' ')[1];
  const serviceId = req.headers['x-service-id'];
  
  if (!isValidServiceToken(token, serviceId)) {
    return res.status(403).json({ error: 'Invalid service token' });
  }
  
  req.callingService = serviceId;
  next();
}
```

**API Keys for External Services:**
```javascript
// Different API keys for different clients
const apiKeys = {
  'mobile-app': {
    key: 'ak_mobile_12345',
    permissions: ['read:products', 'create:orders'],
    rateLimit: 1000 // requests per hour
  },
  'partner-integration': {
    key: 'ak_partner_67890', 
    permissions: ['read:orders', 'update:orders'],
    rateLimit: 10000
  }
};

function validateApiKey(req, res, next) {
  const apiKey = req.headers['x-api-key'];
  
  const client = Object.values(apiKeys).find(c => c.key === apiKey);
  
  if (!client) {
    return res.status(401).json({ error: 'Invalid API key' });
  }
  
  req.client = client;
  next();
}

function checkPermissions(permission) {
  return (req, res, next) => {
    if (!req.client.permissions.includes(permission)) {
      return res.status(403).json({ error: 'Insufficient permissions' });
    }
    next();
  };
}

// Usage
app.get('/orders', 
  validateApiKey, 
  checkPermissions('read:orders'), 
  getOrders
);
```

### Data Security

**Encryption at Rest:**
```
Database Level Encryption:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Database              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ users_table                 â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ id: 123                 â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ email: encrypted_blob_1 â”‚ â”‚ â”‚ â—„â”€â”€ AES-256 encrypted
â”‚ â”‚ â”‚ phone: encrypted_blob_2 â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Application Level Encryption:
const crypto = require('crypto');

function encryptPII(data, key) {
  const cipher = crypto.createCipher('aes-256-gcm', key);
  let encrypted = cipher.update(data, 'utf8', 'hex');
  encrypted += cipher.final('hex');
  return encrypted;
}

function decryptPII(encryptedData, key) {
  const decipher = crypto.createDecipher('aes-256-gcm', key);
  let decrypted = decipher.update(encryptedData, 'hex', 'utf8');
  decrypted += decipher.final('utf8');
  return decrypted;
}
```

**Encryption in Transit:**
```
All communication must use TLS 1.3:

HTTP â”€â”€â–º HTTPS (TLS 1.3)
Database connections â”€â”€â–º TLS/SSL
Message queues â”€â”€â–º TLS
Service mesh â”€â”€â–º mTLS

Configuration:
server {
  listen 443 ssl http2;
  ssl_certificate /path/to/cert.pem;
  ssl_certificate_key /path/to/key.pem;
  ssl_protocols TLSv1.3;
  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;
}
```

**Secrets Management:**
```
âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾ - secrets Ğ² ĞºĞ¾Ğ´Ğµ:
const config = {
  dbPassword: 'super-secret-password',
  apiKey: 'sk-1234567890abcdef'
};

âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾ - secrets Ğ² environment variables:
DATABASE_PASSWORD=super-secret-password
API_KEY=sk-1234567890abcdef

âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾ - secrets Ğ² Vault:
const vault = require('node-vault');

async function getSecrets() {
  const vaultClient = vault({
    endpoint: 'https://vault.company.com',
    token: process.env.VAULT_TOKEN
  });
  
  const dbSecret = await vaultClient.read('secret/database');
  const apiSecret = await vaultClient.read('secret/external-api');
  
  return {
    dbPassword: dbSecret.data.password,
    apiKey: apiSecret.data.key
  };
}
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 9: DevOps Ğ¸ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

### Containerization

**Dockerfile Ğ´Ğ»Ñ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°:**
```dockerfile
# Multi-stage build Ğ´Ğ»Ñ ÑƒĞ¼ĞµĞ½ÑŒÑˆĞµĞ½Ğ¸Ñ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ°
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

FROM node:18-alpine AS runtime

# Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ non-root Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ´Ğ»Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸
RUN addgroup -g 1001 -S nodejs && \
    adduser -S nextjs -u 1001

WORKDIR /app

# ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾Ğµ
COPY --from=builder /app/node_modules ./node_modules
COPY --chown=nextjs:nodejs . .

USER nextjs

EXPOSE 3000

# Health check
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:3000/health || exit 1

CMD ["npm", "start"]
```

**Container Best Practices:**
```
1. ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ°:
   âœ… Use Alpine Linux (5MB) vs Ubuntu (70MB)
   âœ… Multi-stage builds
   âœ… .dockerignore file

2. Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ:
   âœ… Non-root user
   âœ… Read-only file system  
   âœ… No secrets in image
   âœ… Scan for vulnerabilities

3. ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:
   âœ… Layer caching
   âœ… Dependency pre-install
   âœ… Health checks
```

### Deployment Strategies

**Rolling Deployment:**
```
Step 1: Deploy to 1 instance
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚v1.0 â”‚ â”‚v2.0 â”‚ â”‚v1.0 â”‚
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜

Step 2: Deploy to 2nd instance  
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚v1.0 â”‚ â”‚v2.0 â”‚ â”‚v2.0 â”‚
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜

Step 3: Deploy to 3rd instance
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚v2.0 â”‚ â”‚v2.0 â”‚ â”‚v2.0 â”‚
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜

Pros: Zero downtime, gradual rollout
Cons: Mixed versions during deployment
```

**Blue-Green Deployment:**
```
Current (Blue):
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚v1.0 â”‚ â”‚v1.0 â”‚ â”‚v1.0 â”‚ â—„â”€â”€ Production traffic
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜

Prepare (Green):
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  
â”‚v2.0 â”‚ â”‚v2.0 â”‚ â”‚v2.0 â”‚ â—„â”€â”€ Testing
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜

Switch traffic:
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚v1.0 â”‚ â”‚v1.0 â”‚ â”‚v1.0 â”‚ â—„â”€â”€ Standby
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚v2.0 â”‚ â”‚v2.0 â”‚ â”‚v2.0 â”‚ â—„â”€â”€ Production traffic
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜

Pros: Instant rollback, full testing
Cons: Double infrastructure cost
```

**Canary Deployment:**
```
Stage 1: 5% traffic to new version
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”
â”‚    95%      â”‚     â”‚ 5% â”‚
â”‚    v1.0     â”‚     â”‚v2.0â”‚
â”‚             â”‚     â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜

Stage 2: 50% traffic if metrics good
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   50%   â”‚     â”‚   50%   â”‚
â”‚  v1.0   â”‚     â”‚  v2.0   â”‚
â”‚         â”‚     â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Stage 3: 100% traffic if no issues
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚    100%     â”‚
                â”‚    v2.0     â”‚
                â”‚             â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pros: Gradual risk mitigation, real user feedback
Cons: Complex traffic management
```

### CI/CD Pipeline

**Pipeline for Microservice:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Code   â”‚â”€â”€â”€â–ºâ”‚  Build  â”‚â”€â”€â”€â–ºâ”‚  Test   â”‚â”€â”€â”€â–ºâ”‚ Deploy  â”‚
â”‚ Commit  â”‚    â”‚         â”‚    â”‚         â”‚    â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚              â”‚
     â–¼              â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Git Push â”‚    â”‚Docker   â”‚    â”‚Unit     â”‚    â”‚Staging  â”‚
â”‚         â”‚    â”‚Build    â”‚    â”‚Tests    â”‚    â”‚Deploy   â”‚
â”‚Triggers â”‚    â”‚         â”‚    â”‚         â”‚    â”‚         â”‚
â”‚Pipeline â”‚    â”‚Lint     â”‚    â”‚Integrationâ”‚    â”‚Smoke    â”‚
â”‚         â”‚    â”‚         â”‚    â”‚Tests    â”‚    â”‚Tests    â”‚
â”‚         â”‚    â”‚Security â”‚    â”‚         â”‚    â”‚         â”‚
â”‚         â”‚    â”‚Scan     â”‚    â”‚Contract â”‚    â”‚Productionâ”‚
â”‚         â”‚    â”‚         â”‚    â”‚Tests    â”‚    â”‚Deploy   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pipeline Configuration (GitHub Actions):**
```yaml
name: Deploy Microservice

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run linter
        run: npm run lint
      
      - name: Run unit tests
        run: npm run test:unit
        
      - name: Run integration tests
        run: npm run test:integration
        
      - name: Security audit
        run: npm audit --audit-level=high

  build:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Build Docker image
        run: |
          docker build -t ${{ secrets.REGISTRY_URL }}/order-service:${{ github.sha }} .
          
      - name: Security scan
        run: |
          docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \
            aquasec/trivy image ${{ secrets.REGISTRY_URL }}/order-service:${{ github.sha }}
            
      - name: Push to registry
        run: |
          echo ${{ secrets.REGISTRY_TOKEN }} | docker login ${{ secrets.REGISTRY_URL }} -u ${{ secrets.REGISTRY_USER }} --password-stdin
          docker push ${{ secrets.REGISTRY_URL }}/order-service:${{ github.sha }}

  deploy:
    needs: build
    runs-on: ubuntu-latest
    environment: production
    
    steps:
      - name: Deploy to Kubernetes
        run: |
          kubectl set image deployment/order-service \
            order-service=${{ secrets.REGISTRY_URL }}/order-service:${{ github.sha }}
          kubectl rollout status deployment/order-service
```

### Infrastructure as Code

**Kubernetes Deployment:**
```yaml
# deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: order-service
  labels:
    app: order-service
spec:
  replicas: 3
  selector:
    matchLabels:
      app: order-service
  template:
    metadata:
      labels:
        app: order-service
    spec:
      containers:
      - name: order-service
        image: registry.company.com/order-service:latest
        ports:
        - containerPort: 3000
        env:
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: order-service-secrets
              key: database-url
        - name: REDIS_URL
          valueFrom:
            configMapKeyRef:
              name: order-service-config
              key: redis-url
        livenessProbe:
          httpGet:
            path: /health
            port: 3000
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /health/ready
            port: 3000
          initialDelaySeconds: 5
          periodSeconds: 5
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi" 
            cpu: "500m"

---
# service.yaml
apiVersion: v1
kind: Service
metadata:
  name: order-service
spec:
  selector:
    app: order-service
  ports:
  - protocol: TCP
    port: 80
    targetPort: 3000
  type: ClusterIP

---
# hpa.yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: order-service-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: order-service
  minReplicas: 3
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
```

**Terraform for Infrastructure:**
```hcl
# main.tf
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

provider "aws" {
  region = var.aws_region
}

# EKS Cluster
module "eks" {
  source = "terraform-aws-modules/eks/aws"
  
  cluster_name    = "microservices-cluster"
  cluster_version = "1.28"
  
  vpc_id     = module.vpc.vpc_id
  subnet_ids = module.vpc.private_subnets
  
  node_groups = {
    main = {
      desired_capacity = 3
      max_capacity     = 10
      min_capacity     = 3
      
      instance_types = ["t3.medium"]
      
      k8s_labels = {
        Environment = var.environment
        Application = "microservices"
      }
    }
  }
}

# RDS for databases
resource "aws_db_instance" "microservices_db" {
  allocated_storage    = 100
  max_allocated_storage = 1000
  storage_type         = "gp2"
  engine              = "postgres"
  engine_version      = "15.4"
  instance_class      = "db.t3.micro"
  identifier          = "microservices-db"
  
  db_name  = "microservices"
  username = "admin"
  password = var.db_password
  
  vpc_security_group_ids = [aws_security_group.rds.id]
  db_subnet_group_name   = aws_db_subnet_group.main.name
  
  backup_retention_period = 7
  backup_window          = "03:00-04:00"
  maintenance_window     = "sun:04:00-sun:05:00"
  
  skip_final_snapshot = true
  deletion_protection = false
  
  tags = {
    Name = "microservices-db"
    Environment = var.environment
  }
}

# ElastiCache for Redis
resource "aws_elasticache_cluster" "redis" {
  cluster_id           = "microservices-redis"
  engine              = "redis"
  node_type           = "cache.t3.micro"
  num_cache_nodes     = 1
  parameter_group_name = "default.redis7"
  port                = 6379
  subnet_group_name   = aws_elasticache_subnet_group.main.name
  security_group_ids  = [aws_security_group.elasticache.id]
  
  tags = {
    Name = "microservices-redis"
    Environment = var.environment
  }
}
```

### Monitoring Ğ¸ Alerting Ğ² Production

**Prometheus Configuration:**
```yaml
# prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "alert_rules.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093

scrape_configs:
  - job_name: 'order-service'
    static_configs:
      - targets: ['order-service:3000']
    metrics_path: /metrics
    scrape_interval: 30s
    
  - job_name: 'user-service'
    static_configs:
      - targets: ['user-service:3001']
    metrics_path: /metrics
    scrape_interval: 30s
    
  - job_name: 'payment-service'
    static_configs:
      - targets: ['payment-service:3002']
    metrics_path: /metrics
    scrape_interval: 30s

  - job_name: 'kubernetes-pods'
    kubernetes_sd_configs:
      - role: pod
    relabel_configs:
      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]
        action: keep
        regex: true
```

**Alert Rules:**
```yaml
# alert_rules.yml
groups:
  - name: microservices.rules
    rules:
    # Service down
    - alert: ServiceDown
      expr: up == 0
      for: 1m
      labels:
        severity: critical
      annotations:
        summary: "Service {{ $labels.job }} is down"
        description: "{{ $labels.job }} has been down for more than 1 minute"
        runbook_url: "https://runbooks.company.com/service-down"
        
    # High error rate
    - alert: HighErrorRate
      expr: |
        (
          rate(http_requests_total{status=~"5.."}[5m]) /
          rate(http_requests_total[5m])
        ) * 100 > 5
      for: 5m
      labels:
        severity: warning
      annotations:
        summary: "High error rate for {{ $labels.job }}"
        description: "Error rate is {{ $value }}% for {{ $labels.job }}"
        
    # High response time
    - alert: HighResponseTime
      expr: |
        histogram_quantile(0.95, 
          rate(http_request_duration_seconds_bucket[5m])
        ) > 1
      for: 10m
      labels:
        severity: warning
      annotations:
        summary: "High response time for {{ $labels.job }}"
        description: "95th percentile response time is {{ $value }}s"
        
    # High memory usage
    - alert: HighMemoryUsage
      expr: |
        (
          process_resident_memory_bytes / 
          (1024 * 1024 * 1024)
        ) > 0.8
      for: 5m
      labels:
        severity: warning
      annotations:
        summary: "High memory usage for {{ $labels.job }}"
        description: "Memory usage is {{ $value }}GB"
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 10: ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚ Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ°

### Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

**Big Bang vs Incremental:**
```
Big Bang (Ğ½Ğµ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â”
â”‚   Monolith  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚S1â”‚ â”‚S2â”‚ â”‚S3â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜
     
ĞĞ´Ğ½Ğ¾Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ½Ğ°Ñ Ğ·Ğ°Ğ¼ĞµĞ½Ğ° Ğ²ÑĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

Incremental (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â”
â”‚   Monolith  â”‚â”€â”€â”€â–ºâ”‚ Hybrid      â”‚â”€â”€â”€â–ºâ”‚S1â”‚ â”‚S2â”‚ â”‚S3â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ Architectureâ”‚    â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     
ĞŸĞ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ğ°Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ñ‡Ğ°ÑÑ‚ÑĞ¼
```

### Strangler Fig Pattern (Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾)

**Ğ­Ñ‚Ğ°Ğ¿ 1: ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¸ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**
```
ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               E-SHOP                    â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚    Users    â”‚ â”‚      Products       â”‚ â”‚
â”‚ â”‚ â€¢ Register  â”‚ â”‚ â€¢ Catalog           â”‚ â”‚
â”‚ â”‚ â€¢ Login     â”‚ â”‚ â€¢ Search            â”‚ â”‚
â”‚ â”‚ â€¢ Profile   â”‚ â”‚ â€¢ Reviews           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â€¢ Inventory         â”‚ â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   Orders    â”‚ â”‚     Payments        â”‚ â”‚
â”‚ â”‚ â€¢ Cart      â”‚ â”‚ â€¢ Billing           â”‚ â”‚
â”‚ â”‚ â€¢ Checkout  â”‚ â”‚ â€¢ Refunds           â”‚ â”‚
â”‚ â”‚ â€¢ History   â”‚ â”‚ â€¢ Invoices          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Migration Priority:
1. Users (low risk, well-defined boundaries)
2. Products (high value, independent) 
3. Orders (complex, many dependencies)
4. Payments (critical, regulatory requirements)
```

**Ğ­Ñ‚Ğ°Ğ¿ 2: Proxy Layer**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client  â”‚ â”€â”€â”€â”€â–ºâ”‚  Routing Proxy  â”‚ â”€â”€â”€â”€â–ºâ”‚    Monolith     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                 â”‚      â”‚                 â”‚
                 â”‚ Rules:          â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                 â”‚ /users/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ â”‚Users Module â”‚ â”‚
                 â”‚ /products/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â”‚Products Mod â”‚ â”‚
                 â”‚ /orders/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â”‚Orders Moduleâ”‚ â”‚
                 â”‚ /payments/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â”‚Payments Mod â”‚ â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ­Ñ‚Ğ°Ğ¿ 3: Extract User Service**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      
â”‚ Client  â”‚ â”€â”€â”€â”€â–ºâ”‚  Routing Proxy  â”‚      
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                 â”‚      
                 â”‚ Rules:          â”‚      
                 â”‚ /users/* â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”
                 â”‚ /products/* â”€â”€â”€â”€â”¼â”€â”€â”€â” â”‚
                 â”‚ /orders/* â”€â”€â”€â”€â”€â”€â”¼â”€â” â”‚ â”‚
                 â”‚ /payments/* â”€â”€â”€â”€â”¼â”â”‚ â”‚ â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚â”‚ â”‚ â”‚
                                   â”‚â”‚â”‚ â”‚ â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”‚â”‚ â”‚ â”‚
                        â”‚User Serviceâ”‚â”‚ â”‚ â”‚
                        â”‚            â”‚â”‚ â”‚ â”‚
                        â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚ â”‚ â”‚
                        â”‚â”‚ User DB  â”‚â”‚â”‚ â”‚ â”‚
                        â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚ â”‚ â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚ â”‚
                                      â”‚ â”‚ â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”´â”€â–¼â”€â”
                        â”‚    Monolith      â”‚
                        â”‚ (remaining)      â”‚
                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                        â”‚ â”‚Products Mod â”‚  â”‚
                        â”‚ â”‚Orders Moduleâ”‚  â”‚
                        â”‚ â”‚Payments Mod â”‚  â”‚
                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ­Ñ‚Ğ°Ğ¿ 4: Data Migration Strategies**

**Strategy 1: Database View (for reads)**
```javascript
// Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ view Ğ² Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ‘Ğ”, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ Ğ¸Ğ· User Service
CREATE VIEW users_view AS 
SELECT * FROM user_service_db.users;

// ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµÑ‚ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· view
const users = await db.query('SELECT * FROM users_view WHERE active = true');

// User Service Ğ¿Ğ¸ÑˆĞµÑ‚ Ğ² ÑĞ²Ğ¾Ñ Ğ‘Ğ”
const newUser = await userDb.users.create(userData);
```

**Strategy 2: Dual Writes (Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾)**
```javascript
// Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ Ğ¿Ğ¸ÑˆĞµĞ¼ Ğ² Ğ¾Ğ±Ğµ Ğ‘Ğ”
async function createUser(userData) {
  const transaction = await mainDb.beginTransaction();
  
  try {
    // ĞŸĞ¸ÑˆĞµĞ¼ Ğ² Ğ¾ÑĞ½Ğ¾Ğ²Ğ½ÑƒÑ Ğ‘Ğ” (Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ°)
    const legacyUser = await transaction.users.create(userData);
    
    // ĞŸĞ¸ÑˆĞµĞ¼ Ğ² Ğ½Ğ¾Ğ²ÑƒÑ Ğ‘Ğ” (Ğ´Ğ»Ñ User Service)  
    const newUser = await userServiceDb.users.create(userData);
    
    await transaction.commit();
    return newUser;
  } catch (error) {
    await transaction.rollback();
    throw error;
  }
}
```

**Strategy 3: Event-Based Sync**
```javascript
// User Service Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºÑƒĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
async function createUser(userData) {
  const user = await userDb.users.create(userData);
  
  // ĞŸÑƒĞ±Ğ»Ğ¸ĞºÑƒĞµĞ¼ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ´Ğ»Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
  await eventBus.publish('UserCreated', {
    userId: user.id,
    email: user.email,
    name: user.name,
    createdAt: user.createdAt
  });
  
  return user;
}

// ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚ ÑĞ»ÑƒÑˆĞ°ĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ÑĞ²Ğ¾Ñ Ğ‘Ğ”
eventBus.subscribe('UserCreated', async (event) => {
  await legacyDb.users.upsert({
    id: event.userId,
    email: event.email,
    name: event.name,
    created_at: event.createdAt,
    migrated: true
  });
});
```

### Incremental Data Migration

**Migration Timeline:**
```
Week 1-2: Setup Infrastructure
â”œâ”€â”€ Deploy User Service (read-only mode)
â”œâ”€â”€ Setup data replication
â”œâ”€â”€ Implement dual reads
â””â”€â”€ Test data consistency

Week 3-4: Gradual Write Migration  
â”œâ”€â”€ 10% of writes go to User Service
â”œâ”€â”€ Monitor data consistency
â”œâ”€â”€ Fix any sync issues
â””â”€â”€ Increase to 50% writes

Week 5-6: Full Write Migration
â”œâ”€â”€ 100% writes go to User Service
â”œâ”€â”€ Legacy database becomes read-only
â”œâ”€â”€ Start deprecation of legacy reads
â””â”€â”€ Monitor for issues

Week 7-8: Read Migration
â”œâ”€â”€ 10% of reads from User Service
â”œâ”€â”€ Monitor performance
â”œâ”€â”€ Increase to 100% reads
â””â”€â”€ Decommission legacy user tables
```

**Feature Toggles Ğ´Ğ»Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸:**
```javascript
const FeatureFlags = {
  USER_SERVICE_WRITES: {
    enabled: true,
    percentage: 100  // 100% of writes go to new service
  },
  USER_SERVICE_READS: {
    enabled: true, 
    percentage: 50   // 50% of reads from new service
  },
  LEGACY_USER_CLEANUP: {
    enabled: false   // Not ready to cleanup legacy data
  }
};

async function getUser(userId) {
  if (FeatureFlags.USER_SERVICE_READS.enabled && 
      Math.random() * 100 < FeatureFlags.USER_SERVICE_READS.percentage) {
    // Read from new User Service
    return await userService.getUser(userId);
  } else {
    // Read from legacy database
    return await legacyDb.users.findById(userId);
  }
}

async function createUser(userData) {
  if (FeatureFlags.USER_SERVICE_WRITES.enabled &&
      Math.random() * 100 < FeatureFlags.USER_SERVICE_WRITES.percentage) {
    return await userService.createUser(userData);
  } else {
    return await legacyDb.users.create(userData);
  }
}
```

### Dealing with Shared Dependencies

**Problem: Shared Utilities**
```
Monolith structure:
â”œâ”€â”€ users/
â”œâ”€â”€ orders/
â”œâ”€â”€ payments/
â””â”€â”€ shared/
    â”œâ”€â”€ validation.js     â—„â”€â”€ Used by all modules
    â”œâ”€â”€ email.js         â—„â”€â”€ Used by all modules  
    â”œâ”€â”€ logging.js       â—„â”€â”€ Used by all modules
    â””â”€â”€ crypto.js        â—„â”€â”€ Used by all modules
    
How to extract services without breaking shared code?
```

**Solution 1: Duplicate Code (initially)**
```
User Service:
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ services/
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ validation.js  â—„â”€â”€ Copied from shared
â”‚       â”œâ”€â”€ email.js       â—„â”€â”€ Copied from shared
â”‚       â””â”€â”€ logging.js     â—„â”€â”€ Copied from shared

Order Service:  
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ services/
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ validation.js  â—„â”€â”€ Copied from shared
â”‚       â”œâ”€â”€ email.js       â—„â”€â”€ Copied from shared  
â”‚       â””â”€â”€ logging.js     â—„â”€â”€ Copied from shared

Pros: Fast migration, no dependencies
Cons: Code duplication, maintenance overhead
```

**Solution 2: Shared Libraries (later)**
```
NPM Private Registry:
â”œâ”€â”€ @company/validation@1.0.0
â”œâ”€â”€ @company/email@1.0.0
â”œâ”€â”€ @company/logging@1.0.0
â””â”€â”€ @company/crypto@1.0.0

User Service package.json:
{
  "dependencies": {
    "@company/validation": "^1.0.0",
    "@company/email": "^1.0.0",
    "@company/logging": "^1.0.0"
  }
}

Order Service package.json:
{
  "dependencies": {
    "@company/validation": "^1.0.0", 
    "@company/email": "^1.0.0",
    "@company/logging": "^1.0.0"
  }
}

Pros: DRY principle, centralized updates
Cons: Dependency coupling, versioning complexity
```

**Solution 3: Extract as Services**
```
                    Shared Services
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Email Serviceâ”‚    â”‚ Log Service â”‚    â”‚Auth Service â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                   â–²                   â–²
       â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”
â”‚      â”‚                   â”‚                   â”‚      â”‚
â”‚      â–¼                   â–¼                   â–¼      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  User   â”‚         â”‚ Order   â”‚         â”‚Payment  â”‚ â”‚
â”‚ â”‚ Service â”‚         â”‚ Service â”‚         â”‚ Service â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pros: Single responsibility, reusable
Cons: Network latency, more complex
```

### Testing Strategy during Migration

**Test Pyramid for Migration:**
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   E2E Tests â”‚ â—„â”€â”€ Critical user flows
                    â”‚    (few)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Integration     â”‚ â—„â”€â”€ Service boundaries
                  â”‚ Tests (some)    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Unit Tests (many)     â”‚ â—„â”€â”€ Business logic
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Shadow/Parallel Tests         â”‚ â—„â”€â”€ Data consistency
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Shadow Testing:**
```javascript
// During migration, run both old and new code
async function getUser(userId) {
  // Primary call (current implementation)
  const primaryResult = await legacyDb.users.findById(userId);
  
  // Shadow call (new implementation) - don't affect response
  if (FeatureFlags.SHADOW_USER_SERVICE) {
    setImmediate(async () => {
      try {
        const shadowResult = await userService.getUser(userId);
        
        // Compare results and log differences
        if (!deepEqual(primaryResult, shadowResult)) {
          logger.warn('Shadow test discrepancy', {
            userId,
            primary: primaryResult,
            shadow: shadowResult
          });
        }
      } catch (error) {
        logger.error('Shadow test failed', { userId, error });
      }
    });
  }
  
  return primaryResult;
}
```

**Contract Testing:**
```javascript
// User Service contract
const userServiceContract = {
  getUser: {
    request: {
      userId: 'string'
    },
    response: {
      id: 'string',
      email: 'string', 
      name: 'string',
      createdAt: 'date'
    }
  }
};

// Test that monolith expectations match service contract
describe('User Service Contract', () => {
  it('should return user data in expected format', async () => {
    const userId = 'test-user-123';
    const user = await userService.getUser(userId);
    
    expect(user).toMatchSchema(userServiceContract.getUser.response);
  });
  
  it('should handle missing users consistently', async () => {
    const response = await userService.getUser('non-existent');
    expect(response).toBeNull();
  });
});
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 11: ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ñ‹Ğµ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹

### Event Sourcing (Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾)

**Traditional State vs Event Sourcing:**
```
Traditional CRUD:
User Table:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID â”‚    Name     â”‚       Email         â”‚   Status    â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 123â”‚ John Smith  â”‚ john@new-email.com  â”‚   Active    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Lost History: ĞšÑ‚Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ» email? ĞšĞ¾Ğ³Ğ´Ğ°? ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ?

Event Sourcing:
Events Stream:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID â”‚   Event Type    â”‚           Event Data                â”‚ Timestamp   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ UserCreated     â”‚ {id:123, name:"John", email:"john@old.com"} â”‚ 10:00:00    â”‚
â”‚ 2  â”‚ EmailChanged    â”‚ {id:123, newEmail:"john@new.com"}   â”‚ 10:30:00    â”‚
â”‚ 3  â”‚ NameChanged     â”‚ {id:123, newName:"John Smith"}      â”‚ 11:00:00    â”‚
â”‚ 4  â”‚ UserActivated   â”‚ {id:123, activatedBy:"admin"}       â”‚ 11:15:00    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Full History: Ğ’ÑĞµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹ Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼
```

**Event Sourcing Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
```javascript
// Event Store
class EventStore {
  constructor(database) {
    this.db = database;
  }
  
  async appendEvent(streamId, event) {
    const eventData = {
      streamId,
      eventType: event.type,
      eventData: JSON.stringify(event.data),
      eventVersion: await this.getNextVersion(streamId),
      timestamp: new Date()
    };
    
    return await this.db.events.create(eventData);
  }
  
  async getEvents(streamId, fromVersion = 0) {
    return await this.db.events.findAll({
      where: {
        streamId,
        eventVersion: { $gte: fromVersion }
      },
      order: [['eventVersion', 'ASC']]
    });
  }
}

// Aggregate Root
class User {
  constructor() {
    this.id = null;
    this.name = null;
    this.email = null;
    this.status = 'inactive';
    this.version = 0;
    this.uncommittedEvents = [];
  }
  
  // Command handlers
  static create(userId, name, email) {
    const user = new User();
    user.applyEvent({
      type: 'UserCreated',
      data: { userId, name, email }
    });
    return user;
  }
  
  changeEmail(newEmail) {
    if (this.email === newEmail) {
      throw new Error('Email is the same');
    }
    
    this.applyEvent({
      type: 'EmailChanged',
      data: { userId: this.id, newEmail }
    });
  }
  
  activate() {
    if (this.status === 'active') {
      throw new Error('User already active');
    }
    
    this.applyEvent({
      type: 'UserActivated',
      data: { userId: this.id }
    });
  }
  
  // Event application
  applyEvent(event) {
    // Apply to current state
    this.when(event);
    
    // Track for persistence
    this.uncommittedEvents.push(event);
    this.version++;
  }
  
  when(event) {
    switch (event.type) {
      case 'UserCreated':
        this.id = event.data.userId;
        this.name = event.data.name;
        this.email = event.data.email;
        break;
        
      case 'EmailChanged':
        this.email = event.data.newEmail;
        break;
        
      case 'UserActivated':
        this.status = 'active';
        break;
    }
  }
  
  // Restore from events
  static fromEvents(events) {
    const user = new User();
    events.forEach(event => user.when(event));
    user.version = events.length;
    return user;
  }
  
  getUncommittedEvents() {
    return this.uncommittedEvents;
  }
  
  markEventsAsCommitted() {
    this.uncommittedEvents = [];
  }
}

// Repository
class UserRepository {
  constructor(eventStore) {
    this.eventStore = eventStore;
  }
  
  async save(user) {
    const events = user.getUncommittedEvents();
    
    for (const event of events) {
      await this.eventStore.appendEvent(user.id, event);
    }
    
    user.markEventsAsCommitted();
  }
  
  async getById(userId) {
    const events = await this.eventStore.getEvents(userId);
    
    if (events.length === 0) {
      return null;
    }
    
    const eventObjects = events.map(e => ({
      type: e.eventType,
      data: JSON.parse(e.eventData)
    }));
    
    return User.fromEvents(eventObjects);
  }
}
```

**Event Sourcing Ğ¿Ñ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° Ğ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚ĞºĞ¸:**
```
âœ… ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:
â€¢ ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ (audit trail)
â€¢ Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ»ÑĞ±Ğ¾Ğ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
â€¢ Temporal queries ("ĞºĞ°Ğº Ğ²Ñ‹Ğ³Ğ»ÑĞ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ²Ñ‡ĞµÑ€Ğ°?")
â€¢ Natural fit Ğ´Ğ»Ñ event-driven Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹
â€¢ Debugging Ğ¸ troubleshooting
â€¢ Analytics Ğ¸ ML Ğ½Ğ° historical data

âŒ ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚ĞºĞ¸:
â€¢ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² (Ğ½ÑƒĞ¶Ğ½Ñ‹ projections)
â€¢ Ğ Ğ°ÑÑ‚ÑƒÑ‰Ğ¸Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â€¢ Eventual consistency
â€¢ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ² Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ğ¸ Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞµ
â€¢ Snapshot needed Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
```

### CQRS (Command Query Responsibility Segregation)

**Traditional Architecture:**
```
Controller â”€â”€â–º Service â”€â”€â–º Repository â”€â”€â–º Database
     â”‚             â”‚           â”‚            â”‚
     â”œâ”€ Read       â”œâ”€ Read     â”œâ”€ Read      â”œâ”€ Read
     â””â”€ Write      â””â”€ Write    â””â”€ Write     â””â”€ Write

ĞĞ´Ğ½Ğ° Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ´Ğ»Ñ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
```

**CQRS Architecture:**
```
Commands (Write Side):          Queries (Read Side):
Controller â”€â”€â–º Command Handler   Controller â”€â”€â–º Query Handler
     â”‚              â”‚                â”‚              â”‚
     â–¼              â–¼                â–¼              â–¼
Write Model â”€â”€â–º Write Database   Read Model â”€â”€â–º Read Database
     â”‚                              â–²               â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€ Events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â–¼
                                            Optimized for reads
```

**CQRS Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
```javascript
// Command Side
class CreateUserCommand {
  constructor(userId, name, email) {
    this.userId = userId;
    this.name = name;
    this.email = email;
  }
}

class ChangeEmailCommand {
  constructor(userId, newEmail) {
    this.userId = userId;
    this.newEmail = newEmail;
  }
}

// Command Handlers
class UserCommandHandler {
  constructor(userRepository, eventBus) {
    this.userRepository = userRepository;
    this.eventBus = eventBus;
  }
  
  async handle(command) {
    switch (command.constructor.name) {
      case 'CreateUserCommand':
        return await this.createUser(command);
      case 'ChangeEmailCommand':
        return await this.changeEmail(command);
    }
  }
  
  async createUser(command) {
    const user = User.create(command.userId, command.name, command.email);
    await this.userRepository.save(user);
    
    // Publish events for read side
    const events = user.getUncommittedEvents();
    for (const event of events) {
      await this.eventBus.publish(event);
    }
  }
  
  async changeEmail(command) {
    const user = await this.userRepository.getById(command.userId);
    user.changeEmail(command.newEmail);
    await this.userRepository.save(user);
    
    const events = user.getUncommittedEvents();
    for (const event of events) {
      await this.eventBus.publish(event);
    }
  }
}

// Query Side
class UserReadModel {
  constructor() {
    this.id = null;
    this.name = null;
    this.email = null;
    this.status = null;
    this.createdAt = null;
    this.lastModified = null;
    this.totalOrders = 0;
    this.totalSpent = 0;
  }
}

class UserQueryHandler {
  constructor(readDatabase) {
    this.readDb = readDatabase;
  }
  
  async getUserById(userId) {
    return await this.readDb.users.findById(userId);
  }
  
  async getUsersByStatus(status) {
    return await this.readDb.users.findAll({
      where: { status },
      order: [['lastModified', 'DESC']]
    });
  }
  
  async getUsersWithHighSpending(minAmount) {
    return await this.readDb.users.findAll({
      where: { totalSpent: { $gte: minAmount } },
      order: [['totalSpent', 'DESC']]
    });
  }
}

// Event Handlers Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Read Model
class UserReadModelUpdater {
  constructor(readDatabase) {
    this.readDb = readDatabase;
  }
  
  async on(event) {
    switch (event.type) {
      case 'UserCreated':
        await this.createUserReadModel(event);
        break;
      case 'EmailChanged':
        await this.updateUserEmail(event);
        break;
      case 'UserActivated':
        await this.updateUserStatus(event);
        break;
    }
  }
  
  async createUserReadModel(event) {
    await this.readDb.users.create({
      id: event.data.userId,
      name: event.data.name,
      email: event.data.email,
      status: 'inactive',
      createdAt: new Date(),
      lastModified: new Date(),
      totalOrders: 0,
      totalSpent: 0
    });
  }
  
  async updateUserEmail(event) {
    await this.readDb.users.update(
      { 
        email: event.data.newEmail,
        lastModified: new Date()
      },
      { where: { id: event.data.userId } }
    );
  }
  
  async updateUserStatus(event) {
    await this.readDb.users.update(
      { 
        status: 'active',
        lastModified: new Date()
      },
      { where: { id: event.data.userId } }
    );
  }
}
```

**Multiple Read Models:**
```
Single Write Model â†’ Multiple Read Models Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… use cases

Write Model:               Read Models:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User     â”‚ â”€eventsâ”€â–º â”‚ User Summary    â”‚ â—„â”€â”€ For user list
â”‚ Aggregate   â”‚           â”‚ â€¢ id, name,     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   email, status â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ User Analytics  â”‚ â—„â”€â”€ For reports
                          â”‚ â€¢ id, orders,   â”‚
                          â”‚   revenue, etc  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ User Search     â”‚ â—„â”€â”€ For search
                          â”‚ â€¢ indexed text  â”‚
                          â”‚ â€¢ elasticsearch â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Distributed Data Management Patterns

**Shared Data Anti-Pattern:**
```
âŒ ĞĞ• Ğ´ĞµĞ»Ğ°Ğ¹Ñ‚Ğµ Ñ‚Ğ°Ğº:
Service A â”€â”€â”
            â”œâ”€â”€â–º Shared Database
Service B â”€â”€â”˜
            
Problems:
â€¢ Tight coupling Ñ‡ĞµÑ€ĞµĞ· schema
â€¢ ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ service autonomy
â€¢ Bottleneck Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸ÑÑ… schema
â€¢ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
```

**Database per Service:**
```
âœ… ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾:
Service A â”€â”€â–º Database A
Service B â”€â”€â–º Database B
Service C â”€â”€â–º Database C

Benefits:
â€¢ Service autonomy
â€¢ Technology diversity
â€¢ Independent scaling
â€¢ Failure isolation
```

**Data Synchronization Patterns:**

**1. Shared Database View (read-only)**
```javascript
// Service A Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğ¼Ğ¸ Ñ‡ĞµÑ€ĞµĞ· read-only view
CREATE VIEW public_users AS 
SELECT id, name, email, status 
FROM users 
WHERE status = 'active';

// Service B Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· view
const activeUsers = await database.query('SELECT * FROM public_users');
```

**2. Data Replication**
```javascript
// Master-Slave replication
Service A (Master) â”€â”€â–º Database A (Master)
                            â”‚
                      Replication
                            â–¼
Service B (Slave)  â”€â”€â–º Database A (Replica) â—„â”€â”€ Read-only
```

**3. Event-Driven Data Sync**
```javascript
// Service A Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºÑƒĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¾Ğ± Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸ÑÑ…
class UserService {
  async updateUser(userId, userData) {
    const user = await this.userRepository.update(userId, userData);
    
    // ĞŸÑƒĞ±Ğ»Ğ¸ĞºÑƒĞµĞ¼ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ´Ğ»Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
    await this.eventBus.publish('UserUpdated', {
      userId: user.id,
      name: user.name,
      email: user.email,
      updatedAt: new Date()
    });
    
    return user;
  }
}

// Service B ÑĞ»ÑƒÑˆĞ°ĞµÑ‚ Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ÑĞ²Ğ¾Ñ ĞºĞ¾Ğ¿Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
class OrderService {
  constructor(eventBus) {
    eventBus.subscribe('UserUpdated', this.onUserUpdated.bind(this));
  }
  
  async onUserUpdated(event) {
    // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ denormalized Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ² Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ñ…
    await this.orderRepository.updateUserInfo(
      event.userId,
      {
        userName: event.name,
        userEmail: event.email
      }
    );
  }
}
```

**4. API-Based Data Sharing**
```javascript
// Service B Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñƒ Service A Ñ‡ĞµÑ€ĞµĞ· API
class OrderService {
  constructor(userServiceClient) {
    this.userServiceClient = userServiceClient;
  }
  
  async createOrder(orderData) {
    // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    const user = await this.userServiceClient.getUser(orderData.userId);
    
    if (!user || user.status !== 'active') {
      throw new Error('User not found or inactive');
    }
    
    const order = await this.orderRepository.create({
      ...orderData,
      userName: user.name,
      userEmail: user.email
    });
    
    return order;
  }
}
```

### Federated Data Queries

**Problem: Cross-Service Queries**
```
Query: "ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ²ÑĞµ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ·Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¼ĞµÑÑÑ†"

Data location:
â€¢ Users â†’ User Service Database
â€¢ Orders â†’ Order Service Database  
â€¢ Status â†’ Order Service Database

Traditional SQL:
SELECT o.* FROM orders o
JOIN users u ON o.user_id = u.id  
WHERE u.status = 'active' 
AND o.created_at >= DATE_SUB(NOW(), INTERVAL 1 MONTH)

Problem: Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…!
```

**Solution 1: API Composition**
```javascript
class OrderQueryService {
  constructor(userService, orderService) {
    this.userService = userService;
    this.orderService = orderService;
  }
  
  async getOrdersForActiveUsers(fromDate) {
    // Step 1: Get active users
    const activeUsers = await this.userService.getActiveUsers();
    const userIds = activeUsers.map(u => u.id);
    
    // Step 2: Get orders for these users
    const orders = await this.orderService.getOrdersByUsers(userIds, fromDate);
    
    // Step 3: Combine data
    return orders.map(order => ({
      ...order,
      user: activeUsers.find(u => u.id === order.userId)
    }));
  }
}
```

**Solution 2: CQRS Read Model**
```javascript
// Dedicated read model Ñ denormalized Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
class OrderSummaryReadModel {
  // Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· User Service Ğ¸ Order Service
  schema: {
    orderId: String,
    userId: String,
    userName: String,     // â† from User Service
    userEmail: String,    // â† from User Service  
    userStatus: String,   // â† from User Service
    orderTotal: Number,   // â† from Order Service
    orderStatus: String,  // â† from Order Service
    createdAt: Date
  }
}

// Event handlers Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑÑ‚ read model
class OrderSummaryUpdater {
  async onUserStatusChanged(event) {
    await this.readModel.updateMany(
      { userId: event.userId },
      { userStatus: event.newStatus }
    );
  }
  
  async onOrderCreated(event) {
    const user = await this.userService.getUser(event.userId);
    
    await this.readModel.create({
      orderId: event.orderId,
      userId: event.userId,
      userName: user.name,
      userEmail: user.email,
      userStatus: user.status,
      orderTotal: event.total,
      orderStatus: event.status,
      createdAt: event.createdAt
    });
  }
}

// Query ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ğ¼
async function getOrdersForActiveUsers(fromDate) {
  return await orderSummaryReadModel.find({
    userStatus: 'active',
    createdAt: { $gte: fromDate }
  });
}
```

**Solution 3: GraphQL Federation**
```javascript
// User Service GraphQL Schema
const userTypeDefs = `
  type User {
    id: ID!
    name: String!
    email: String!
    status: String!
  }
  
  extend type Query {
    user(id: ID!): User
    activeUsers: [User!]!
  }
`;

// Order Service GraphQL Schema  
const orderTypeDefs = `
  type Order {
    id: ID!
    userId: ID!
    user: User! # Resolved by User Service
    total: Float!
    status: String!
    createdAt: String!
  }
  
  extend type Query {
    order(id: ID!): Order
    ordersByDateRange(from: String!, to: String!): [Order!]!
  }
`;

// Federated query
const query = `
  query GetOrdersForActiveUsers($fromDate: String!) {
    ordersByDateRange(from: $fromDate, to: "2025-07-01") {
      id
      total
      status
      createdAt
      user {
        id
        name
        status
      }
    }
  }
`;
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 12: Performance Ğ¸ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Caching ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸

**Cache Patterns:**

**1. Cache-Aside (Lazy Loading)**
```javascript
async function getUser(userId) {
  // 1. Check cache first
  let user = await cache.get(`user:${userId}`);
  
  if (user) {
    return JSON.parse(user); // Cache hit
  }
  
  // 2. Cache miss - load from database
  user = await database.users.findById(userId);
  
  if (user) {
    // 3. Store in cache
    await cache.set(`user:${userId}`, JSON.stringify(user), 3600); // 1 hour TTL
  }
  
  return user;
}

async function updateUser(userId, userData) {
  // 1. Update database
  const user = await database.users.update(userId, userData);
  
  // 2. Invalidate cache
  await cache.del(`user:${userId}`);
  
  return user;
}
```

**2. Write-Through Cache**
```javascript
async function updateUser(userId, userData) {
  // 1. Update database
  const user = await database.users.update(userId, userData);
  
  // 2. Update cache immediately
  await cache.set(`user:${userId}`, JSON.stringify(user), 3600);
  
  return user;
}
```

**3. Write-Behind Cache**
```javascript
class WriteBehindCache {
  constructor() {
    this.writeQueue = [];
    this.processing = false;
  }
  
  async updateUser(userId, userData) {
    // 1. Update cache immediately
    const user = { id: userId, ...userData, updatedAt: new Date() };
    await cache.set(`user:${userId}`, JSON.stringify(user), 3600);
    
    // 2. Queue database write
    this.writeQueue.push({ userId, userData, timestamp: Date.now() });
    
    // 3. Process queue async
    this.processWriteQueue();
    
    return user;
  }
  
  async processWriteQueue() {
    if (this.processing) return;
    this.processing = true;
    
    while (this.writeQueue.length > 0) {
      const batch = this.writeQueue.splice(0, 100); // Process in batches
      
      await Promise.all(
        batch.map(item => 
          database.users.update(item.userId, item.userData)
        )
      );
    }
    
    this.processing = false;
  }
}
```

**Cache Levels Ğ² Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…:**
```
Client â”€â”€â–º CDN â”€â”€â–º API Gateway â”€â”€â–º Service Cache â”€â”€â–º Database
  â”‚         â”‚          â”‚              â”‚              â”‚
  â”‚         â”‚          â”‚              â”‚              â”‚
Browser  Content   Gateway Cache   Redis/         PostgreSQL
Cache    Cache     (Rate limiting)  Memcached      
```

**Distributed Caching:**
```javascript
// Redis Cluster Ğ´Ğ»Ñ horizontal scaling
const Redis = require('ioredis');

const cluster = new Redis.Cluster([
  { host: 'redis-node1', port: 6379 },
  { host: 'redis-node2', port: 6379 }, 
  { host: 'redis-node3', port: 6379 }
]);

// Consistent hashing Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ ĞºĞ»ÑÑ‡Ğ¸
await cluster.set('user:123', JSON.stringify(user));
const cachedUser = await cluster.get('user:123');
```

### Database Scaling Patterns

**Read Replicas:**
```
Write Operations:
Application â”€â”€â–º Master Database
                      â”‚
                 Replication
                      â–¼
Read Operations:       Replica 1
Application â”€â”€â”€â”€â”€â”€â–º Replica 2
                   Replica 3

Benefits:
â€¢ Distributed read load
â€¢ Geographic distribution
â€¢ High availability
```

**Database Sharding:**
```
Horizontal Partitioning Ğ¿Ğ¾ user_id:

Shard 1 (user_id 1-1000):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Users: 1-1000          â”‚
â”‚ Orders: user_id 1-1000 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Shard 2 (user_id 1001-2000):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Users: 1001-2000       â”‚
â”‚ Orders: user_id 1001-2000â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Shard 3 (user_id 2001-3000):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Users: 2001-3000       â”‚
â”‚ Orders: user_id 2001-3000â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Sharding Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
```javascript
class ShardedDatabase {
  constructor(shards) {
    this.shards = shards; // [db1, db2, db3]
  }
  
  getShardForUser(userId) {
    const hash = this.hashFunction(userId);
    const shardIndex = hash % this.shards.length;
    return this.shards[shardIndex];
  }
  
  hashFunction(key) {
    // Simple hash function (use better one in production)
    let hash = 0;
    for (let i = 0; i < key.length; i++) {
      hash = ((hash << 5) - hash + key.charCodeAt(i)) & 0xffffffff;
    }
    return Math.abs(hash);
  }
  
  async getUser(userId) {
    const shard = this.getShardForUser(userId);
    return await shard.users.findById(userId);
  }
  
  async createOrder(orderData) {
    const shard = this.getShardForUser(orderData.userId);
    return await shard.orders.create(orderData);
  }
  
  // Cross-shard queries are complex
  async getAllOrdersForUser(userId) {
    const shard = this.getShardForUser(userId);
    return await shard.orders.findAll({ where: { userId } });
  }
}
```

**CQRS Ğ´Ğ»Ñ Query Scaling:**
```
Write Side (Normalized):           Read Side (Denormalized):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Users Table         â”‚           â”‚ Order Summary View      â”‚
â”‚ â€¢ id               â”‚           â”‚ â€¢ order_id             â”‚
â”‚ â€¢ name             â”‚  â”€eventsâ”€â–º â”‚ â€¢ user_name            â”‚
â”‚ â€¢ email            â”‚           â”‚ â€¢ user_email           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ â€¢ order_total          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ â€¢ order_status         â”‚
â”‚ Orders Table        â”‚           â”‚ â€¢ created_at           â”‚
â”‚ â€¢ id               â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ user_id          â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ total            â”‚           â”‚ User Stats View        â”‚
â”‚ â€¢ status           â”‚           â”‚ â€¢ user_id              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ â€¢ total_orders         â”‚
                                  â”‚ â€¢ total_spent          â”‚
                                  â”‚ â€¢ last_order_date      â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Query Performance: O(1) vs O(n) joins
```

### Service Mesh Ğ¸ Performance

**Without Service Mesh:**
```
Service A â”€â”€HTTPâ”€â”€â–º Service B
    â”‚                   â”‚
    â”œâ”€ Retry logic      â”œâ”€ Auth logic
    â”œâ”€ Circuit breaker  â”œâ”€ Metrics
    â”œâ”€ Load balancing   â”œâ”€ Tracing
    â”œâ”€ TLS             â”œâ”€ Logging
    â””â”€ Monitoring      â””â”€ Rate limiting

Each service implements cross-cutting concerns
```

**With Service Mesh (Istio, Linkerd):**
```
Service A â”€â”€â–º Sidecar Proxy â”€â”€mTLSâ”€â”€â–º Sidecar Proxy â”€â”€â–º Service B
              (Envoy)                  (Envoy)
                 â”‚                        â”‚
                 â–¼                        â–¼
            Control Plane          Control Plane
            â€¢ Config               â€¢ Config
            â€¢ Metrics              â€¢ Metrics  
            â€¢ Policies             â€¢ Policies

Cross-cutting concerns handled by infrastructure
```

**Service Mesh Benefits:**
```
âœ… Performance Benefits:
â€¢ Automatic load balancing
â€¢ Connection pooling
â€¢ Retries and circuit breaking
â€¢ Traffic splitting (canary deployments)
â€¢ Intelligent routing

âœ… Observability:
â€¢ Automatic metrics collection
â€¢ Distributed tracing
â€¢ Traffic flow visualization

âœ… Security:
â€¢ Automatic mTLS
â€¢ Policy enforcement
â€¢ Zero-trust networking
```

### Async Processing Ğ´Ğ»Ñ Performance

**Background Jobs:**
```javascript
// Immediate response to user
app.post('/orders', async (req, res) => {
  const order = await orderService.createOrder(req.body);
  
  // Queue expensive operations
  await jobQueue.add('process-payment', { orderId: order.id });
  await jobQueue.add('update-inventory', { orderId: order.id });
  await jobQueue.add('send-confirmation', { orderId: order.id });
  
  // Return immediately
  res.json({ orderId: order.id, status: 'processing' });
});

// Background workers
const processPaymentWorker = async (job) => {
  const { orderId } = job.data;
  
  try {
    const payment = await paymentService.processPayment(orderId);
    await orderService.updatePaymentStatus(orderId, payment.status);
    
    if (payment.status === 'completed') {
      await jobQueue.add('fulfill-order', { orderId });
    }
  } catch (error) {
    // Retry or move to failed queue
    throw error;
  }
};

jobQueue.process('process-payment', processPaymentWorker);
```

**Event Streaming Ğ´Ğ»Ñ Real-time Performance:**
```javascript
// Kafka Ğ´Ğ»Ñ high-throughput event streaming
const kafka = require('kafkajs');

const client = kafka({
  clientId: 'order-service',
  brokers: ['kafka1:9092', 'kafka2:9092', 'kafka3:9092']
});

const producer = client.producer();

// Publish events asynchronously
async function createOrder(orderData) {
  const order = await orderRepository.create(orderData);
  
  // Fire-and-forget event publishing
  producer.send({
    topic: 'order-events',
    messages: [{
      key: order.id,
      value: JSON.stringify({
        eventType: 'OrderCreated',
        orderId: order.id,
        userId: order.userId,
        total: order.total,
        timestamp: new Date()
      })
    }]
  });
  
  return order;
}

// Multiple consumers process events in parallel
const consumer = client.consumer({ groupId: 'inventory-service' });

await consumer.subscribe({ topic: 'order-events' });

await consumer.run({
  eachMessage: async ({ message }) => {
    const event = JSON.parse(message.value.toString());
    
    if (event.eventType === 'OrderCreated') {
      await inventoryService.reserveItems(event.orderId);
    }
  }
});
```

---

## Ğ“Ğ»Ğ°Ğ²Ğ° 13: ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ°ÑĞ¿ĞµĞºÑ‚Ñ‹

### Conway's Law Ğ² Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¸

**Conway's Law:**
> "Organizations design systems that mirror their own communication structure"

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ñ Ğ½Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ:**

**Traditional Organization:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            CTO                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚         â”‚
    â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Frontend â”‚ â”‚Backend  â”‚ â”‚   DBA   â”‚
â”‚  Team   â”‚ â”‚  Team   â”‚ â”‚  Team   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Resulting Architecture:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ API calls
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend   â”‚ â—„â”€â”€ Monolithic layer
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ SQL
      â–¼  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database   â”‚ â—„â”€â”€ Single shared DB
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Microservices Organization:**
```
                    CTO
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚
        â–¼            â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Team A    â”‚ â”‚   Team B    â”‚ â”‚   Team C    â”‚
â”‚ (Product)   â”‚ â”‚ (Order)     â”‚ â”‚ (User)      â”‚
â”‚             â”‚ â”‚             â”‚ â”‚             â”‚
â”‚ â€¢ Frontend  â”‚ â”‚ â€¢ Frontend  â”‚ â”‚ â€¢ Frontend  â”‚
â”‚ â€¢ Backend   â”‚ â”‚ â€¢ Backend   â”‚ â”‚ â€¢ Backend   â”‚
â”‚ â€¢ Database  â”‚ â”‚ â€¢ Database  â”‚ â”‚ â€¢ Database  â”‚
â”‚ â€¢ DevOps    â”‚ â”‚ â€¢ DevOps    â”‚ â”‚ â€¢ DevOps    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Resulting Architecture:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Product     â”‚    â”‚ Order       â”‚    â”‚ User        â”‚
â”‚ Service     â”‚â—„â”€â”€â–ºâ”‚ Service     â”‚â—„â”€â”€â–ºâ”‚ Service     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Team Topologies

**Stream-Aligned Teams:**
```
Team Mission: End-to-end delivery of business value

Team Composition:
â”œâ”€â”€ Product Owner (business domain expert)
â”œâ”€â”€ Tech Lead (architecture decisions)
â”œâ”€â”€ Backend Developers (2-3)
â”œâ”€â”€ Frontend Developer (1)
â”œâ”€â”€ DevOps Engineer (shared or embedded)
â””â”€â”€ QA Engineer (embedded testing)

Responsibilities:
â€¢ Full product feature lifecycle
â€¢ Service ownership (build, run, maintain)
â€¢ Customer feedback loop
â€¢ Performance and reliability

Example: "Shopping Cart Team"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Shopping Cart Team                  â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Services Owned:                 â”‚ â”‚
â”‚ â”‚ â€¢ Cart Service                  â”‚ â”‚
â”‚ â”‚ â€¢ Wishlist Service              â”‚ â”‚
â”‚ â”‚ â€¢ Recommendation Service        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Business Metrics:               â”‚ â”‚
â”‚ â”‚ â€¢ Cart abandonment rate         â”‚ â”‚
â”‚ â”‚ â€¢ Add-to-cart conversion        â”‚ â”‚
â”‚ â”‚ â€¢ Cross-sell effectiveness      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Platform Teams:**
```
Mission: Enable stream-aligned teams to deliver faster

Platform as a Product:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Platform Team                       â”‚
â”‚                                     â”‚
â”‚ Products:                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â€¢ CI/CD Pipeline                â”‚ â”‚
â”‚ â”‚ â€¢ Container Registry            â”‚ â”‚
â”‚ â”‚ â€¢ Monitoring Stack              â”‚ â”‚
â”‚ â”‚ â€¢ Service Mesh                  â”‚ â”‚
â”‚ â”‚ â€¢ Database Templates            â”‚ â”‚
â”‚ â”‚ â€¢ Security Scanning             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ SLA to Product Teams:               â”‚
â”‚ â€¢ 99.9% uptime for build pipeline  â”‚
â”‚ â€¢ < 30 min to provision new serviceâ”‚
â”‚ â€¢ 24/7 support for critical issues â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Enabling Teams:**
```
Mission: Build capabilities in other teams

Temporary Engagement Model:
Week 1-2: Assessment
â”œâ”€â”€ Understand team's current state
â”œâ”€â”€ Identify capability gaps  
â”œâ”€â”€ Design learning program
â””â”€â”€ Set success metrics

Week 3-8: Embedded Learning
â”œâ”€â”€ Pair programming
â”œâ”€â”€ Architecture reviews
â”œâ”€â”€ Code reviews
â”œâ”€â”€ Knowledge transfer sessions
â””â”€â”€ Hands-on workshops

Week 9-10: Graduation
â”œâ”€â”€ Team demonstrates capability
â”œâ”€â”€ Documentation handover
â”œâ”€â”€ Support model defined
â””â”€â”€ Success metrics reviewed

Example: "Microservices Enablement"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend Team (monolith)             â”‚
â”‚                                     â”‚
â”‚ Current State:                      â”‚
â”‚ â€¢ Monolithic application            â”‚
â”‚ â€¢ Shared database                   â”‚
â”‚ â€¢ No containerization               â”‚
â”‚ â€¢ Manual deployments               â”‚
â”‚                                     â”‚
â”‚ Target State:                       â”‚
â”‚ â€¢ 3 extracted microservices         â”‚
â”‚ â€¢ Independent databases             â”‚
â”‚ â€¢ Kubernetes deployment             â”‚
â”‚ â€¢ Automated CI/CD                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cognitive Load Management

**Cognitive Load Types:**

**1. Intrinsic Load (domain complexity)**
```
Example: E-commerce Domain
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Essential Complexity:               â”‚
â”‚                                     â”‚
â”‚ â€¢ Product catalog management        â”‚
â”‚ â€¢ Inventory tracking                â”‚
â”‚ â€¢ Order processing workflow         â”‚
â”‚ â€¢ Payment processing rules          â”‚
â”‚ â€¢ Tax calculation logic             â”‚
â”‚ â€¢ Shipping cost calculation         â”‚
â”‚                                     â”‚
â”‚ Cannot be reduced - it's the        â”‚
â”‚ essential business complexity       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2. Extraneous Load (tooling complexity)**
```
Example: Development Environment
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Accidental Complexity:              â”‚
â”‚                                     â”‚
â”‚ â€¢ 15 different config files         â”‚
â”‚ â€¢ 3 different deployment methods    â”‚
â”‚ â€¢ 5 different testing frameworks    â”‚
â”‚ â€¢ 8 different monitoring tools      â”‚
â”‚ â€¢ Custom build scripts             â”‚
â”‚ â€¢ Multiple authentication systems  â”‚
â”‚                                     â”‚
â”‚ Can be reduced through              â”‚
â”‚ standardization and automation      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**3. Germane Load (learning and pattern recognition)**
```
Example: Team Learning Investment
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Learning Investment:                â”‚
â”‚                                     â”‚
â”‚ â€¢ New programming language          â”‚
â”‚ â€¢ Architecture patterns             â”‚
â”‚ â€¢ Domain knowledge                  â”‚
â”‚ â€¢ Team collaboration skills         â”‚
â”‚                                     â”‚
â”‚ Builds long-term capability         â”‚
â”‚ Should be managed carefully         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Reducing Cognitive Load:**

**Platform Standardization:**
```javascript
// Instead of each team figuring out deployment
// Platform team provides standard template

// Dockerfile template
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
EXPOSE 3000
HEALTHCHECK --interval=30s CMD curl -f http://localhost:3000/health
CMD ["npm", "start"]

// Kubernetes deployment template
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{SERVICE_NAME}}
spec:
  replicas: {{REPLICA_COUNT}}
  template:
    spec:
      containers:
      - name: {{SERVICE_NAME}}
        image: {{IMAGE_URL}}
        ports:
        - containerPort: 3000
        livenessProbe:
          httpGet:
            path: /health
            port: 3000

// Teams just fill in variables:
SERVICE_NAME=user-service
REPLICA_COUNT=3
IMAGE_URL=registry.company.com/user-service:v1.2.3
```

**Sensible Defaults:**
```yaml
# Platform provides pre-configured observability
# Teams get monitoring, logging, tracing out of the box

version: '3'
services:
  app:
    build: .
    environment:
      - METRICS_ENABLED=true
      - LOG_LEVEL=info
      - TRACING_ENABLED=true
      - HEALTH_CHECK_PATH=/health
    logging:
      driver: "fluentd"
      options:
        fluentd-address: "fluentd:24224"
        tag: "{{.Name}}"

  # Automatically included sidecar containers
  metrics-exporter:
    image: prom/node-exporter
    
  jaeger-agent:
    image: jaegertracing/jaeger-agent
```

### Team Communication Patterns

**API-First Development:**
```
Traditional:
Team A â”€â”€â–º Implements feature
Team B â”€â”€â–º Waits for Team A
Team B â”€â”€â–º Integrates with Team A's code

API-First:
1. Teams agree on API contract
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Service API Contract           â”‚
â”‚                                     â”‚
â”‚ GET /users/{id}                     â”‚
â”‚ Response: {                         â”‚
â”‚   id: string,                       â”‚
â”‚   name: string,                     â”‚
â”‚   email: string,                    â”‚
â”‚   status: "active" | "inactive"     â”‚
â”‚ }                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. Teams develop in parallel
Team A â”€â”€â–º Implements User Service
Team B â”€â”€â–º Uses mock/stub of API

3. Integration happens seamlessly
```

**Contract Testing:**
```javascript
// Consumer team defines expectations
describe('User Service Contract', () => {
  it('should return user data', async () => {
    const userResponse = await userService.getUser('123');
    
    expect(userResponse).toMatchSchema({
      type: 'object',
      properties: {
        id: { type: 'string' },
        name: { type: 'string' },
        email: { type: 'string', format: 'email' },
        status: { enum: ['active', 'inactive'] }
      },
      required: ['id', 'name', 'email', 'status']
    });
  });
});

// Provider team ensures they meet contract
describe('User Service Provider', () => {
  it('should meet consumer expectations', async () => {
    const user = await userRepository.findById('123');
    const response = formatUserResponse(user);
    
    // Contract test passes if schema matches
    expect(response).toMatchConsumerExpectations();
  });
});
```

**Documentation as Code:**
```yaml
# OpenAPI specification in version control
openapi: 3.0.0
info:
  title: User Service API
  version: 1.0.0
  description: |
    Manages user accounts and authentication
    
    ## Usage Examples
    
    ### Get user profile
    ```
    GET /users/123
    Authorization: Bearer {jwt_token}
    ```
    
    ### Update user profile  
    ```
    PUT /users/123
    Content-Type: application/json
    
    {
      "name": "John Smith",
      "email": "john@example.com"
    }
    ```
    
paths:
  /users/{id}:
    get:
      summary: Get user by ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "123"
      responses:
        200:
          description: User found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        404:
          description: User not found

components:
  schemas:
    User:
      type: object
      required: [id, name, email, status]
      properties:
        id:
          type: string
          example: "123"
        name:
          type: string
          example: "John Smith"
        email:
          type: string
          format: email
          example: "john@example.com"
        status:
          type: string
          enum: [active, inactive]
          example: "active"
```

---

## ğŸ† Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° ÑĞºÑĞ¿ĞµÑ€Ñ‚Ğ°

### Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 1: ĞĞ¾Ğ²Ğ¸Ñ‡Ğ¾Ğº (1-2 Ğ¼ĞµÑÑÑ†Ğ°)
```
Ğ¦ĞµĞ»ÑŒ: ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ¾ÑĞ½Ğ¾Ğ² Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

âœ… Ğ¢ĞµĞ¾Ñ€ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ±Ğ°Ğ·Ğ°:
â–¡ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹
â–¡ ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²  
â–¡ ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¼ĞµĞ¶ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ³Ğ¾ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ
â–¡ REST API design
â–¡ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Docker

âœ… ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸:
â–¡ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°
â–¡ HTTP API Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸
â–¡ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
â–¡ ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

âœ… ĞŸÑ€Ğ¾ĞµĞºÑ‚:
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ 2-3 Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ° (Users, Products, Orders)
Ñ REST API Ğ¸ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¼ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸ĞµĞ¼
```

### Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 2: ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ğº (2-4 Ğ¼ĞµÑÑÑ†Ğ°)
```
Ğ¦ĞµĞ»ÑŒ: ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²

âœ… ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹:
â–¡ API Gateway implementation
â–¡ Service Discovery (Consul/Eureka)
â–¡ Circuit Breaker pattern
â–¡ Retry and timeout strategies
â–¡ Health checks

âœ… Data Management:
â–¡ Database per service
â–¡ Event-driven architecture basics
â–¡ Eventual consistency
â–¡ Simple Saga pattern

âœ… Observability:
â–¡ Centralized logging (ELK)
â–¡ Metrics collection (Prometheus)
â–¡ Distributed tracing basics
â–¡ Correlation IDs

âœ… ĞŸÑ€Ğ¾ĞµĞºÑ‚:
E-commerce ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ñ 5-7 ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸,
API Gateway, Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ¾Ğ¼ Ğ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹Ğ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹
```

### Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 3: ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚Ğ¾Ñ€ (4-6 Ğ¼ĞµÑÑÑ†ĞµĞ²)
```
Ğ¦ĞµĞ»ÑŒ: ĞŸÑ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼

âœ… Advanced Patterns:
â–¡ CQRS implementation
â–¡ Event Sourcing
â–¡ Sophisticated Saga orchestration
â–¡ Advanced caching strategies
â–¡ Database sharding

âœ… Security:
â–¡ JWT Ğ¸ OAuth 2.0
â–¡ Service-to-service authentication
â–¡ mTLS implementation
â–¡ Zero Trust principles

âœ… Performance:
â–¡ Service mesh (Istio/Linkerd)
â–¡ Advanced caching patterns
â–¡ Database optimization
â–¡ Async processing

âœ… Migration:
â–¡ Strangler Fig pattern
â–¡ Legacy system integration
â–¡ Data migration strategies
â–¡ Feature toggles

âœ… ĞŸÑ€Ğ¾ĞµĞºÑ‚:
ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ° Ğ² Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸ĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ğ½Ğ°Ğ´ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ğ¸
```

### Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 4: Ğ­ĞºÑĞ¿ĞµÑ€Ñ‚ (6+ Ğ¼ĞµÑÑÑ†ĞµĞ²)
```
Ğ¦ĞµĞ»ÑŒ: ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğµ Ğ¸ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ»Ğ¸Ğ´ĞµÑ€ÑÑ‚Ğ²Ğ¾

âœ… Organizational Design:
â–¡ Conway's Law application
â–¡ Team Topologies
â–¡ Cognitive load management
â–¡ Platform team strategy

âœ… Advanced Architecture:
â–¡ Multi-region deployments
â–¡ Cross-cutting concerns design
â–¡ Technology diversity management
â–¡ Evolutionary architecture

âœ… Business Alignment:
â–¡ Domain-Driven Design mastery
â–¡ Strategic vs tactical patterns
â–¡ Cost optimization
â–¡ Risk management

âœ… Leadership Skills:
â–¡ Architecture decision records
â–¡ Technical strategy
â–¡ Team enablement
â–¡ Knowledge sharing

âœ… ĞŸÑ€Ğ¾ĞµĞºÑ‚:
Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° enterprise-ÑƒÑ€Ğ¾Ğ²Ğ½Ñ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
Ğ´Ğ»Ñ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ğ¼Ğ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°Ğ¼Ğ¸
```

---

## ğŸ“‹ Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸

### ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹

**âœ… ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‚ ĞºĞ¾Ğ³Ğ´Ğ°:**
```
Organizational:
â€¢ ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ±Ğ¾Ğ»ÑŒÑˆĞµ 10-15 Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº
â€¢ ĞĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²Ñ‹Ñ… ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´
â€¢ Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚Ğ¸ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
â€¢ ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ñ… Ñ€ĞµĞ»Ğ¸Ğ·Ğ¾Ğ²

Technical:
â€¢ Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğº Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
â€¢ Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑÑ‚ĞµĞºĞ¸
â€¢ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ°Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ñ Ñ‡ĞµÑ‚ĞºĞ¸Ğ¼Ğ¸ Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°Ğ¼Ğ¸
â€¢ Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğº Ğ¾Ñ‚ĞºĞ°Ğ·Ğ¾ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚Ğ¸

Business:
â€¢ Ğ‘Ñ‹ÑÑ‚Ñ€Ğ¾Ñ€Ğ°ÑÑ‚ÑƒÑ‰Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚
â€¢ ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
â€¢ Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ SLA Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
â€¢ ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ ÑĞºÑĞ¿ĞµÑ€Ğ¸Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ²
```

**âŒ ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ ĞĞ• Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‚ ĞºĞ¾Ğ³Ğ´Ğ°:**
```
Organizational:
â€¢ ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ¼ĞµĞ½ÑŒÑˆĞµ 5-8 Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº
â€¢ ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ DevOps ĞºÑƒĞ»ÑŒÑ‚ÑƒÑ€Ñ‹
â€¢ ĞĞµÑ‚ Ğ¾Ğ¿Ñ‹Ñ‚Ğ° Ñ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ğ¼Ğ¸
â€¢ ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹ Ğ½Ğ° Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ

Technical:
â€¢ ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ CRUD-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â€¢ Ğ¢ĞµÑĞ½Ğ¾ ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ
â€¢ ĞĞ¸Ğ·ĞºĞ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğº Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
â€¢ ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾

Business:
â€¢ MVP Ğ¸Ğ»Ğ¸ proof of concept
â€¢ ĞĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
â€¢ ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ±ÑĞ´Ğ¶ĞµÑ‚
â€¢ ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğµ ÑÑ€Ğ¾ĞºĞ¸ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ° Ğ½Ğ° Ñ€Ñ‹Ğ½Ğ¾Ğº
```

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ ÑƒÑĞ¿ĞµÑ…Ğ°

**1. Start Small, Think Big**
```
â€¢ ĞĞ°Ñ‡Ğ¸Ğ½Ğ°Ğ¹Ñ‚Ğµ Ñ 2-3 ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
â€¢ Ğ˜Ğ·ÑƒÑ‡Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ½Ğ° Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°Ñ…
â€¢ ĞŸĞ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞ¹Ñ‚Ğµ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ
â€¢ Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ² Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ ÑĞ°Ğ¼Ğ¾Ğ³Ğ¾ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°
```

**2. Automate Everything**
```
â€¢ CI/CD pipeline Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ°
â€¢ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
â€¢ Infrastructure as Code
â€¢ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹
```

**3. Monitor and Measure**
```
â€¢ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ business metrics
â€¢ Observability (logs, metrics, traces)
â€¢ SLA Ğ¸ SLO Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ°
â€¢ ĞŸĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğµ Ğ¸Ğ·Ğ¼ĞµÑ€ĞµĞ½Ğ¸Ğµ Ğ¸ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ
```

**4. Embrace Failure**
```
â€¢ ĞŸÑ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ´Ğ»Ñ failure scenarios
â€¢ Chaos engineering
â€¢ Circuit breakers Ğ¸ retries
â€¢ Graceful degradation
```

**5. Foster Team Autonomy**
```
â€¢ Teams own services end-to-end
â€¢ Clear service boundaries
â€¢ API-first development
â€¢ Platform teams enable product teams
```

### Ğ­Ğ²Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ¿ÑƒÑ‚Ğ¸

**Ğ­Ñ‚Ğ°Ğ¿ 1: ĞĞ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ (0-6 Ğ¼ĞµÑÑÑ†ĞµĞ²)**
- Ğ˜Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞ¾Ñ€Ğ¸Ğ¸ Ğ¸ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ pet projects
- Ğ£Ñ‡Ğ°ÑÑ‚Ğ¸Ğµ Ğ² opensource Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°Ñ…
- Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¸Ğ³ Ğ¸ ÑÑ‚Ğ°Ñ‚ĞµĞ¹

**Ğ­Ñ‚Ğ°Ğ¿ 2: ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ (6-18 Ğ¼ĞµÑÑÑ†ĞµĞ²)**
- Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°Ñ…
- Ğ˜Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ğµ production challenges
- Ğ’Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ğµ best practices
- ĞĞ°ÑÑ‚Ğ°Ğ²Ğ½Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¼Ğ»Ğ°Ğ´ÑˆĞ¸Ñ… Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ²

**Ğ­Ñ‚Ğ°Ğ¿ 3: ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (1.5-3 Ğ³Ğ¾Ğ´Ğ°)**
- ĞŸÑ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼ Ñ Ğ½ÑƒĞ»Ñ
- ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ legacy ÑĞ¸ÑÑ‚ĞµĞ¼
- Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ»Ğ¸Ğ´ĞµÑ€ÑÑ‚Ğ²Ğ¾
- Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

**Ğ­Ñ‚Ğ°Ğ¿ 4: Ğ­ĞºÑĞ¿ĞµÑ€Ñ‚Ğ¸Ğ·Ğ° (3+ Ğ³Ğ¾Ğ´Ğ°)**
- ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğµ Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ğµ
- Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ Ğ¸ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ¾Ğ²
- ĞšĞ¾Ğ½Ñ„ĞµÑ€ĞµĞ½Ñ†Ğ¸Ğ¸ Ğ¸ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
- ĞšĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ¼ĞµĞ½Ñ‚Ğ¾Ñ€ÑÑ‚Ğ²Ğ¾

---

**ĞŸĞ¾Ğ¼Ğ½Ğ¸Ñ‚Ğµ:** ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ - ÑÑ‚Ğ¾ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼, Ğ° Ğ½Ğµ ÑĞµÑ€ĞµĞ±Ñ€ÑĞ½Ğ°Ñ Ğ¿ÑƒĞ»Ñ. Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ - Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ, ĞºĞ¾Ğ³Ğ´Ğ° Ğ¸Ñ… Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¸ ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾.

**Ğ£Ğ´Ğ°Ñ‡Ğ¸ Ğ² Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ğ¸ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹! ğŸš€**