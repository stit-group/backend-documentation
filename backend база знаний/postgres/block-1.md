# 📚 Блок 1: Основы баз данных и SQL

---

## 🎯 **ЦЕЛЬ БЛОКА**
Понять фундаментальные концепции баз данных и освоить базовый SQL

**⏱️ Продолжительность:** 3-4 недели  
**📊 Сложность:** Начинающий  
**🏆 Результат:** Умение выполнять простые запросы, понимание структуры БД, базовое владение psql

---

## 📋 **СОДЕРЖАНИЕ БЛОКА**

```
Блок 1: Основы баз данных и SQL
├── 1.1 Введение в базы данных (3-4 дня)
├── 1.2 Установка и настройка PostgreSQL (2-3 дня)
├── 1.3 Основы SQL: SELECT запросы (5-7 дней)
├── 1.4 Типы данных PostgreSQL (3-4 дня)
└── 1.5 Базовые функции и операторы (4-5 дней)
```

---

## 🔥 **ГЛАВА 1.1: ВВЕДЕНИЕ В БАЗЫ ДАННЫХ**
*Продолжительность: 3-4 дня*

### 🤔 **Что такое база данных?**

```
┌─────────────────────────────────────────────────────────┐
│                    БЕЗ БАЗ ДАННЫХ                      │
├─────────────────────────────────────────────────────────┤
│  📁 Файл Excel с клиентами                             │
│  📁 Word документ с заказами                           │
│  📁 Блокнот с товарами                                 │
│  📁 Еще один Excel с поставщиками                      │
│                                                         │
│  ❌ Дублирование данных                                │
│  ❌ Сложно найти информацию                            │
│  ❌ Нет связей между данными                           │
│  ❌ Легко потерять или повредить                       │
└─────────────────────────────────────────────────────────┘

                          ⬇️

┌─────────────────────────────────────────────────────────┐
│                    С БАЗОЙ ДАННЫХ                      │
├─────────────────────────────────────────────────────────┤
│                    🗄️ PostgreSQL                       │
│  ┌─────────────┬─────────────┬─────────────────────┐   │
│  │   КЛИЕНТЫ   │   ЗАКАЗЫ    │      ТОВАРЫ         │   │
│  │             │             │                     │   │
│  │ ID | Имя    │ ID | Клиент │ ID | Название       │   │
│  │ 1  | Иван   │ 1  │   1    │ 1  │ Ноутбук        │   │
│  │ 2  | Мария  │ 2  │   2    │ 2  │ Мышь           │   │
│  └─────────────┴─────────────┴─────────────────────┘   │
│                                                         │
│  ✅ Структурированные данные                           │
│  ✅ Быстрый поиск                                      │
│  ✅ Связи между таблицами                              │
│  ✅ Безопасность и резервное копирование               │
└─────────────────────────────────────────────────────────┘
```

### 📊 **Типы баз данных**

```
                        ТИПЫ БАЗ ДАННЫХ
                              │
        ┌─────────────────────┼─────────────────────┐
        │                     │                     │
   РЕЛЯЦИОННЫЕ         НЕРЕЛЯЦИОННЫЕ           ДРУГИЕ
   (SQL базы)            (NoSQL)
        │                     │                     │
┌───────────────┐    ┌─────────────────┐    ┌─────────────┐
│ PostgreSQL    │    │ MongoDB         │    │ Redis       │
│ MySQL         │    │ (документы)     │    │ (ключ-знач.)│
│ Oracle        │    │                 │    │             │
│ SQL Server    │    │ Cassandra       │    │ Neo4j       │
│               │    │ (колоночные)    │    │ (графовые)  │
└───────────────┘    └─────────────────┘    └─────────────┘

      Таблицы              JSON/XML           Специфичные
    со связями             документы           структуры
```

### 🐘 **Почему PostgreSQL?**

```
┌─────────────────────────────────────────────────────────┐
│              ПРЕИМУЩЕСТВА POSTGRESQL                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🆓 БЕСПЛАТНЫЙ И ОТКРЫТЫЙ                              │
│     • Никаких лицензионных сборов                      │
│     • Активное сообщество разработчиков                │
│                                                         │
│  🔧 ВЫСОКАЯ ПРОИЗВОДИТЕЛЬНОСТЬ                         │
│     • Поддержка сложных запросов                       │
│     • Эффективные индексы                              │
│                                                         │
│  📈 МАСШТАБИРУЕМОСТЬ                                   │
│     • Работа с большими объемами данных                │
│     • Репликация и кластеризация                       │
│                                                         │
│  🛡️ НАДЕЖНОСТЬ                                         │
│     • ACID транзакции                                  │
│     • Проверенное временем решение                     │
│                                                         │
│  🔍 РАСШИРЕННЫЕ ВОЗМОЖНОСТИ                            │
│     • JSON/JSONB поддержка                             │
│     • Полнотекстовый поиск                             │
│     • Геоданные (PostGIS)                              │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 🏢 **Сравнение с другими СУБД**

```
┌──────────────┬──────────────┬──────────────┬──────────────┐
│              │ PostgreSQL   │    MySQL     │ SQL Server   │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ Стоимость    │ Бесплатно    │ Бесплатно*   │ Платно       │
│              │              │ (ограничено) │              │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ Сложность    │ ⭐⭐⭐        │ ⭐⭐          │ ⭐⭐⭐⭐      │
│ изучения     │              │              │              │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ Производи-   │ Высокая      │ Хорошая      │ Очень высокая│
│ тельность    │              │              │              │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ Соответствие │ Отличное     │ Хорошее      │ Отличное     │
│ SQL стандарту│              │              │              │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ Расширения   │ Много        │ Средне       │ Много        │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ Популярность │ Растет       │ Очень высокая│ Высокая      │
└──────────────┴──────────────┴──────────────┴──────────────┘
```

---

## ⚙️ **ГЛАВА 1.2: УСТАНОВКА И НАСТРОЙКА POSTGRESQL**
*Продолжительность: 2-3 дня*

### 💻 **Установка на разных ОС**

```
┌─────────────────────────────────────────────────────────┐
│                    WINDOWS                              │
├─────────────────────────────────────────────────────────┤
│  1. Скачать с postgresql.org                           │
│  2. Запустить .exe файл                                │
│  3. Следовать мастеру установки                        │
│  4. Запомнить пароль для пользователя postgres!        │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│                      LINUX                             │
├─────────────────────────────────────────────────────────┤
│  Ubuntu/Debian:                                        │
│  $ sudo apt update                                     │
│  $ sudo apt install postgresql postgresql-contrib     │
│                                                        │
│  CentOS/RHEL:                                          │
│  $ sudo yum install postgresql-server postgresql-contrib│
│  $ sudo postgresql-setup initdb                       │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│                      macOS                             │
├─────────────────────────────────────────────────────────┤
│  Homebrew:                                             │
│  $ brew install postgresql                             │
│  $ brew services start postgresql                     │
│                                                        │
│  Или скачать с postgresql.org                         │
└─────────────────────────────────────────────────────────┘
```

### 🛠️ **Знакомство с инструментами**

```
                     ИНСТРУМЕНТЫ POSTGRESQL
                              │
        ┌─────────────────────┼─────────────────────┐
        │                     │                     │
      psql                pgAdmin               DBeaver
 (командная строка)    (веб-интерфейс)     (универсальный)
        │                     │                     │
┌───────────────┐    ┌─────────────────┐    ┌─────────────┐
│ • Быстрый     │    │ • Удобный GUI   │    │ • Много СУБД│
│ • Мощный      │    │ • Визуализация  │    │ • Бесплатный│
│ • Везде есть  │    │ • Отчеты        │    │ • Простой   │
│ • Автодополн. │    │ • Мониторинг    │    │ • Красивый  │
└───────────────┘    └─────────────────┘    └─────────────┘
```

### 🔧 **Первое подключение**

```
┌─────────────────────────────────────────────────────────┐
│                 ПОДКЛЮЧЕНИЕ К POSTGRESQL                │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  Через psql:                                           │
│  ┌─────────────────────────────────────────────────┐   │
│  │ $ psql -U postgres -h localhost -p 5432        │   │
│  │ Password for user postgres: [ваш_пароль]       │   │
│  │ postgres=#                                      │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  Параметры подключения:                                │
│  • -U : имя пользователя                               │
│  • -h : хост (адрес сервера)                           │
│  • -p : порт (по умолчанию 5432)                       │
│  • -d : имя базы данных                                │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 🏗️ **Создание первой базы данных**

```sql
-- Создаем базу данных
CREATE DATABASE my_first_db;

-- Подключаемся к созданной БД
\c my_first_db

-- Проверяем подключение
SELECT current_database();
```

```
┌─────────────────────────────────────────────────────────┐
│                ПОЛЕЗНЫЕ КОМАНДЫ PSQL                   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  \l          - список всех баз данных                  │
│  \c [db]     - подключиться к базе [db]                │
│  \dt         - список таблиц в текущей БД              │
│  \d [table]  - описание таблицы [table]                │
│  \du         - список пользователей                    │
│  \q          - выход из psql                           │
│  \?          - справка по командам                     │
│  \h [cmd]    - справка по SQL команде [cmd]            │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 🔍 **ГЛАВА 1.3: ОСНОВЫ SQL: SELECT ЗАПРОСЫ**
*Продолжительность: 5-7 дней*

### 📝 **Синтаксис SELECT**

```sql
-- Базовая структура SELECT запроса
SELECT column1, column2, ...
FROM table_name;
```

```
┌─────────────────────────────────────────────────────────┐
│                 АНАТОМИЯ SELECT ЗАПРОСА                 │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  SELECT column1, column2          ← ЧТО выбираем       │
│  FROM table_name                  ← ОТКУДА             │
│  WHERE condition                  ← УСЛОВИЕ (опц.)     │
│  ORDER BY column                  ← СОРТИРОВКА (опц.)  │
│  LIMIT number;                    ← ОГРАНИЧЕНИЕ (опц.) │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 📚 **Создаем тестовую таблицу**

```sql
-- Создаем таблицу книг для примеров
CREATE TABLE books (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    author VARCHAR(255) NOT NULL,
    price DECIMAL(10,2),
    pages INTEGER,
    publication_year INTEGER,
    genre VARCHAR(100)
);

-- Заполняем тестовыми данными
INSERT INTO books (title, author, price, pages, publication_year, genre) VALUES
('Война и мир', 'Толстой Л.Н.', 599.99, 1300, 1869, 'Роман'),
('Преступление и наказание', 'Достоевский Ф.М.', 450.00, 671, 1866, 'Роман'),
('Мастер и Маргарита', 'Булгаков М.А.', 520.50, 504, 1967, 'Фантастика'),
('1984', 'Оруэлл Д.', 380.00, 328, 1949, 'Антиутопия'),
('Гарри Поттер', 'Роулинг Д.', 750.00, 443, 1997, 'Фэнтези');
```

### 🎯 **Примеры SELECT запросов**

```sql
-- 1. Выбрать ВСЕ столбцы и строки
SELECT * FROM books;
```

```
┌────┬─────────────────────────┬─────────────────┬────────┬───────┬─────────────────┬─────────────┐
│ id │          title          │     author      │ price  │ pages │ publication_year│    genre    │
├────┼─────────────────────────┼─────────────────┼────────┼───────┼─────────────────┼─────────────┤
│  1 │ Война и мир             │ Толстой Л.Н.    │ 599.99 │  1300 │            1869 │ Роман       │
│  2 │ Преступление и наказание│ Достоевский Ф.М.│ 450.00 │   671 │            1866 │ Роман       │
│  3 │ Мастер и Маргарита      │ Булгаков М.А.   │ 520.50 │   504 │            1967 │ Фантастика  │
│  4 │ 1984                    │ Оруэлл Д.       │ 380.00 │   328 │            1949 │ Антиутопия  │
│  5 │ Гарри Поттер            │ Роулинг Д.      │ 750.00 │   443 │            1997 │ Фэнтези     │
└────┴─────────────────────────┴─────────────────┴────────┴───────┴─────────────────┴─────────────┘
```

```sql
-- 2. Выбрать КОНКРЕТНЫЕ столбцы
SELECT title, author, price FROM books;
```

```
┌─────────────────────────┬─────────────────┬────────┐
│          title          │     author      │ price  │
├─────────────────────────┼─────────────────┼────────┤
│ Война и мир             │ Толстой Л.Н.    │ 599.99 │
│ Преступление и наказание│ Достоевский Ф.М.│ 450.00 │
│ Мастер и Маргарита      │ Булгаков М.А.   │ 520.50 │
│ 1984                    │ Оруэлл Д.       │ 380.00 │
│ Гарри Поттер            │ Роулинг Д.      │ 750.00 │
└─────────────────────────┴─────────────────┴────────┘
```

### 🔽 **Фильтрация с WHERE**

```sql
-- Книги дороже 500 рублей
SELECT title, author, price 
FROM books 
WHERE price > 500;
```

```
┌─────────────────────┬──────────────┬────────┐
│        title        │   author     │ price  │
├─────────────────────┼──────────────┼────────┤
│ Война и мир         │ Толстой Л.Н. │ 599.99 │
│ Мастер и Маргарита  │ Булгаков М.А.│ 520.50 │
│ Гарри Поттер        │ Роулинг Д.   │ 750.00 │
└─────────────────────┴──────────────┴────────┘
```

```sql
-- Романы (точное совпадение)
SELECT title, author, genre 
FROM books 
WHERE genre = 'Роман';
```

```sql
-- Книги, содержащие слово "и" в названии
SELECT title, author 
FROM books 
WHERE title LIKE '%и%';
```

```sql
-- Книги 20-го века (между годами)
SELECT title, author, publication_year 
FROM books 
WHERE publication_year BETWEEN 1900 AND 1999;
```

### 📊 **Сортировка с ORDER BY**

```sql
-- Сортировка по цене (по возрастанию)
SELECT title, author, price 
FROM books 
ORDER BY price;
```

```
┌─────────────────────────┬─────────────────┬────────┐
│          title          │     author      │ price  │
├─────────────────────────┼─────────────────┼────────┤
│ 1984                    │ Оруэлл Д.       │ 380.00 │ ← самая дешевая
│ Преступление и наказание│ Достоевский Ф.М.│ 450.00 │
│ Мастер и Маргарита      │ Булгаков М.А.   │ 520.50 │
│ Война и мир             │ Толстой Л.Н.    │ 599.99 │
│ Гарри Поттер            │ Роулинг Д.      │ 750.00 │ ← самая дорогая
└─────────────────────────┴─────────────────┴────────┘
```

```sql
-- Сортировка по цене (по убыванию)
SELECT title, author, price 
FROM books 
ORDER BY price DESC;

-- Сортировка по нескольким полям
SELECT title, author, genre, price 
FROM books 
ORDER BY genre, price DESC;
```

### 🔢 **Ограничение результатов с LIMIT**

```sql
-- Показать только 3 самые дорогие книги
SELECT title, author, price 
FROM books 
ORDER BY price DESC 
LIMIT 3;
```

```
┌─────────────────────┬──────────────┬────────┐
│        title        │   author     │ price  │
├─────────────────────┼──────────────┼────────┤
│ Гарри Поттер        │ Роулинг Д.   │ 750.00 │ ← 1-я самая дорогая
│ Война и мир         │ Толстой Л.Н. │ 599.99 │ ← 2-я самая дорогая  
│ Мастер и Маргарита  │ Булгаков М.А.│ 520.50 │ ← 3-я самая дорогая
└─────────────────────┴──────────────┴────────┘
```

### ❓ **Работа с NULL значениями**

```sql
-- Добавим книгу без указания цены
INSERT INTO books (title, author, pages, publication_year, genre) 
VALUES ('Тестовая книга', 'Неизвестный автор', 200, 2023, 'Тест');

-- Найти книги БЕЗ цены
SELECT title, author, price 
FROM books 
WHERE price IS NULL;

-- Найти книги С ценой
SELECT title, author, price 
FROM books 
WHERE price IS NOT NULL;
```

```
┌─────────────────────────────────────────────────────────┐
│                   ВАЖНО О NULL                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ❌ НЕПРАВИЛЬНО:                                       │
│     WHERE price = NULL                                 │
│     WHERE price != NULL                                │
│                                                         │
│  ✅ ПРАВИЛЬНО:                                         │
│     WHERE price IS NULL                                │
│     WHERE price IS NOT NULL                            │
│                                                         │
│  NULL означает "неизвестное значение",                 │
│  а не пустую строку или ноль!                          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 📊 **ГЛАВА 1.4: ТИПЫ ДАННЫХ POSTGRESQL**
*Продолжительность: 3-4 дня*

### 🔢 **Числовые типы**

```
┌─────────────────────────────────────────────────────────┐
│                   ЧИСЛОВЫЕ ТИПЫ                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ЦЕЛЫЕ ЧИСЛА:                                          │
│  ┌───────────┬─────────────┬─────────────────────────┐  │
│  │   Тип     │   Размер    │        Диапазон        │  │
│  ├───────────┼─────────────┼─────────────────────────┤  │
│  │ SMALLINT  │  2 байта    │   -32,768 .. 32,767    │  │
│  │ INTEGER   │  4 байта    │ -2млрд .. 2млрд         │  │
│  │ BIGINT    │  8 байт     │ очень большие числа     │  │
│  │ SERIAL    │  4 байта    │ автоинкремент 1,2,3...  │  │
│  └───────────┴─────────────┴─────────────────────────┘  │
│                                                         │
│  ДЕСЯТИЧНЫЕ ЧИСЛА:                                     │
│  ┌───────────┬─────────────┬─────────────────────────┐  │
│  │   Тип     │  Точность   │      Применение         │  │
│  ├───────────┼─────────────┼─────────────────────────┤  │
│  │ REAL      │ 6 знаков    │ научные расчеты         │  │
│  │ DOUBLE    │ 15 знаков   │ точные вычисления       │  │
│  │ NUMERIC   │ до 1000     │ деньги, точные расчеты  │  │
│  │ DECIMAL   │ до 1000     │ то же что NUMERIC       │  │
│  └───────────┴─────────────┴─────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 📝 **Строковые типы**

```
┌─────────────────────────────────────────────────────────┐
│                   СТРОКОВЫЕ ТИПЫ                       │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌────────────────┬─────────────┬─────────────────────┐ │
│  │      Тип       │   Размер    │    Особенности      │ │
│  ├────────────────┼─────────────┼─────────────────────┤ │
│  │ CHAR(n)        │ фиксированн.│ дополняется пробел. │ │
│  │ VARCHAR(n)     │ до n симв.  │ переменная длина    │ │
│  │ TEXT           │ неограничен │ для длинных текстов │ │
│  └────────────────┴─────────────┴─────────────────────┘ │
│                                                         │
│  ПРИМЕРЫ:                                              │
│  • CHAR(3):     'ABC'  → сохранится как 'ABC'         │
│  • CHAR(3):     'AB'   → сохранится как 'AB '         │
│  • VARCHAR(10): 'Hello' → сохранится как 'Hello'      │
│  • TEXT:        'Очень длинный текст...'              │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 📅 **Дата и время**

```
┌─────────────────────────────────────────────────────────┐
│                  ДАТА И ВРЕМЯ                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────┬─────────────────┬─────────────────────┐│
│  │    Тип      │     Пример      │     Описание        ││
│  ├─────────────┼─────────────────┼─────────────────────┤│
│  │ DATE        │ '2023-12-25'    │ только дата         ││
│  │ TIME        │ '14:30:00'      │ только время        ││
│  │ TIMESTAMP   │ '2023-12-25     │ дата + время        ││
│  │             │  14:30:00'      │                     ││
│  │ TIMESTAMPTZ │ '2023-12-25     │ дата + время +      ││
│  │             │  14:30:00+03'   │ часовой пояс        ││
│  │ INTERVAL    │ '2 days'        │ интервал времени    ││
│  │             │ '3 hours'       │                     ││
│  └─────────────┴─────────────────┴─────────────────────┘│
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### ✅ **Логический тип**

```sql
-- Создаем таблицу с логическим типом
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    is_active BOOLEAN DEFAULT TRUE,
    is_admin BOOLEAN DEFAULT FALSE
);

-- Примеры вставки
INSERT INTO users (name, is_active, is_admin) VALUES
('Иван', TRUE, FALSE),
('Мария', 't', 'f'),           -- можно так
('Петр', 1, 0),                -- и так
('Анна', 'yes', 'no');         -- и даже так!
```

### 🎯 **Специальные типы PostgreSQL**

```
┌─────────────────────────────────────────────────────────┐
│              СПЕЦИАЛЬНЫЕ ТИПЫ POSTGRESQL               │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  JSON/JSONB   → для хранения JSON документов           │
│  UUID         → уникальные идентификаторы              │
│  ARRAY        → массивы значений                       │
│  HSTORE       → ключ-значение структуры                │
│  INET         → IP адреса                              │
│  MACADDR      → MAC адреса                             │
│  MONEY        → денежные значения                      │
│  GEOMETRY     → геометрические данные (PostGIS)        │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## ⚡ **ГЛАВА 1.5: БАЗОВЫЕ ФУНКЦИИ И ОПЕРАТОРЫ**
*Продолжительность: 4-5 дня*

### 🔢 **Арифметические операторы**

```sql
-- Создаем таблицу заказов для примеров
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    product_name VARCHAR(255),
    quantity INTEGER,
    unit_price DECIMAL(10,2),
    discount_percent INTEGER DEFAULT 0
);

INSERT INTO orders (product_name, quantity, unit_price, discount_percent) VALUES
('Ноутбук', 2, 50000.00, 10),
('Мышь', 5, 1500.00, 0),
('Клавиатура', 3, 3000.00, 5);
```

```sql
-- Арифметические операции
SELECT 
    product_name,
    quantity,
    unit_price,
    quantity * unit_price AS total_before_discount,
    (quantity * unit_price) * (discount_percent / 100.0) AS discount_amount,
    (quantity * unit_price) - ((quantity * unit_price) * (discount_percent / 100.0)) AS final_total
FROM orders;
```

```
┌─────────────────────────────────────────────────────────┐
│              АРИФМЕТИЧЕСКИЕ ОПЕРАТОРЫ                   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  +    сложение       5 + 3 = 8                         │
│  -    вычитание      5 - 3 = 2                         │
│  *    умножение      5 * 3 = 15                        │
│  /    деление        5 / 3 = 1.666...                  │
│  %    остаток        5 % 3 = 2                         │
│  ^    возведение     5 ^ 3 = 125                       │
│  |/   квадратный     |/ 9 = 3                          │
│       корень                                            │
│  ||/  кубический     ||/ 8 = 2                         │
│       корень                                            │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 📝 **Строковые функции**

```sql
-- Примеры строковых функций
SELECT 
    'Привет' || ' ' || 'Мир' AS concatenation,           -- Привет Мир
    UPPER('привет мир') AS upper_case,                   -- ПРИВЕТ МИР
    LOWER('ПРИВЕТ МИР') AS lower_case,                   -- привет мир
    LENGTH('Привет') AS string_length,                   -- 6
    SUBSTRING('PostgreSQL', 1, 8) AS substring_example,  -- Postgres
    REPLACE('Привет мир', 'мир', 'PostgreSQL') AS replace_example, -- Привет PostgreSQL
    TRIM('  пробелы  ') AS trim_example,                 -- пробелы
    LEFT('PostgreSQL', 4) AS left_part,                  -- Post
    RIGHT('PostgreSQL', 3) AS right_part;                -- SQL
```

```
┌─────────────────────────────────────────────────────────┐
│                СТРОКОВЫЕ ФУНКЦИИ                       │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  CONCAT() / ||    → соединение строк                   │
│  UPPER()          → верхний регистр                    │
│  LOWER()          → нижний регистр                     │
│  LENGTH()         → длина строки                       │
│  SUBSTRING()      → подстрока                          │
│  REPLACE()        → замена символов                    │
│  TRIM()           → удаление пробелов                  │
│  LEFT() / RIGHT() → символы слева/справа               │
│  POSITION()       → позиция подстроки                  │
│  SPLIT_PART()     → разделение строки                  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 📅 **Функции для работы с датами**

```sql
-- Создаем таблицу событий
CREATE TABLE events (
    id SERIAL PRIMARY KEY,
    event_name VARCHAR(255),
    event_date DATE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO events (event_name, event_date) VALUES
('Новый год', '2024-01-01'),
('День программиста', '2024-09-13'),
('Конференция PostgreSQL', '2024-11-15');
```

```sql
-- Примеры функций дат
SELECT 
    event_name,
    event_date,
    CURRENT_DATE AS today,
    event_date - CURRENT_DATE AS days_until_event,
    EXTRACT(YEAR FROM event_date) AS event_year,
    EXTRACT(MONTH FROM event_date) AS event_month,
    TO_CHAR(event_date, 'DD.MM.YYYY') AS formatted_date,
    AGE(event_date, CURRENT_DATE) AS age_interval
FROM events;
```

```
┌─────────────────────────────────────────────────────────┐
│               ФУНКЦИИ ДАТ И ВРЕМЕНИ                     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  CURRENT_DATE      → текущая дата                      │
│  CURRENT_TIME      → текущее время                     │
│  CURRENT_TIMESTAMP → текущие дата и время              │
│  NOW()             → то же что CURRENT_TIMESTAMP       │
│  EXTRACT()         → извлечь часть даты                │
│  DATE_PART()       → то же что EXTRACT                 │
│  TO_CHAR()         → форматирование даты               │
│  TO_DATE()         → преобразование в дату             │
│  AGE()             → вычисление возраста               │
│  DATE_TRUNC()      → округление даты                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 🔀 **Условные выражения (CASE WHEN)**

```sql
-- Создаем систему оценок
SELECT 
    product_name,
    unit_price,
    CASE 
        WHEN unit_price < 2000 THEN 'Дешевый'
        WHEN unit_price BETWEEN 2000 AND 10000 THEN 'Средний'
        WHEN unit_price > 10000 THEN 'Дорогой'
        ELSE 'Неопределено'
    END AS price_category,
    
    CASE 
        WHEN discount_percent > 0 THEN 'Есть скидка'
        ELSE 'Без скидки'
    END AS discount_status
FROM orders;
```

```
┌─────────────────────────────────────────────────────────┐
│                 CASE ВЫРАЖЕНИЯ                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  Простая форма:                                        │
│  CASE column_name                                      │
│      WHEN value1 THEN result1                          │
│      WHEN value2 THEN result2                          │
│      ELSE default_result                               │
│  END                                                   │
│                                                         │
│  Поисковая форма:                                      │
│  CASE                                                  │
│      WHEN condition1 THEN result1                      │
│      WHEN condition2 THEN result2                      │
│      ELSE default_result                               │
│  END                                                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 🔄 **Функции преобразования типов**

```sql
-- Примеры преобразования типов
SELECT 
    '123'::INTEGER AS string_to_int,              -- 123
    123::VARCHAR AS int_to_string,                -- '123'
    '123.45'::DECIMAL AS string_to_decimal,       -- 123.45
    '2023-12-25'::DATE AS string_to_date,         -- 2023-12-25
    CAST('123' AS INTEGER) AS cast_example,       -- 123
    COALESCE(NULL, 'default') AS null_handling;   -- 'default'
```

```
┌─────────────────────────────────────────────────────────┐
│             ФУНКЦИИ ПРЕОБРАЗОВАНИЯ                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ::              → краткий синтаксис                   │
│  CAST()          → полный синтаксис                    │
│  TO_CHAR()       → в строку                            │
│  TO_NUMBER()     → в число                             │
│  TO_DATE()       → в дату                              │
│  COALESCE()      → первое не-NULL значение             │
│  NULLIF()        → NULL если значения равны            │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 🏁 **ПРАКТИЧЕСКИЕ ЗАДАНИЯ БЛОКА 1**

### 📚 **Задание 1: База данных "Библиотека"**

```sql
-- Создайте базу данных библиотеки со следующими таблицами:

-- 1. Таблица авторов
CREATE TABLE authors (
    id SERIAL PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    birth_year INTEGER,
    country VARCHAR(100)
);

-- 2. Таблица жанров  
CREATE TABLE genres (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) UNIQUE NOT NULL,
    description TEXT
);

-- 3. Таблица книг
CREATE TABLE books (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    author_id INTEGER REFERENCES authors(id),
    genre_id INTEGER REFERENCES genres(id),
    publication_year INTEGER,
    pages INTEGER,
    price DECIMAL(10,2),
    in_stock INTEGER DEFAULT 0
);
```

### 📊 **Задание 2: 20 различных SELECT запросов**

```sql
-- Выполните следующие запросы:

-- 1. Все книги с их авторами
-- 2. Книги дороже 500 рублей
-- 3. Авторы из России
-- 4. 5 самых дорогих книг
-- 5. Книги, опубликованные после 2000 года
-- 6. Авторы, родившиеся в 20 веке
-- 7. Жанры, содержащие слово "фантастика"
-- 8. Книги объемом более 500 страниц
-- 9. Средняя цена книг по жанрам
-- 10. Количество книг каждого автора
-- ... и так далее
```

### 📈 **Задание 3: Отчет по продажам**

```sql
-- Создайте таблицу продаж и напишите запросы для отчета:

CREATE TABLE sales (
    id SERIAL PRIMARY KEY,
    book_id INTEGER REFERENCES books(id),
    sale_date DATE,
    quantity INTEGER,
    unit_price DECIMAL(10,2)
);

-- Требуемые отчеты:
-- 1. Продажи за текущий месяц
-- 2. Самые продаваемые книги
-- 3. Выручка по дням
-- 4. Средняя цена продажи vs базовая цена
```

---

## ✅ **РЕЗУЛЬТАТ БЛОКА 1**

После изучения этого блока вы умеете:

```
┌─────────────────────────────────────────────────────────┐
│                     ВЫ ИЗУЧИЛИ                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ✅ Основы баз данных и их назначение                  │
│  ✅ Особенности и преимущества PostgreSQL              │
│  ✅ Установку и настройку PostgreSQL                   │
│  ✅ Работу с psql и создание БД                        │
│  ✅ Основной синтаксис SELECT запросов                 │
│  ✅ Фильтрацию данных с WHERE                          │
│  ✅ Сортировку и ограничение результатов               │
│  ✅ Все основные типы данных PostgreSQL                │
│  ✅ Работу с NULL значениями                           │
│  ✅ Арифметические и строковые функции                 │
│  ✅ Функции для работы с датами                        │
│  ✅ Условные выражения CASE                            │
│  ✅ Преобразование типов данных                        │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 🎯 **СЛЕДУЮЩИЙ БЛОК**

Блок 2: **Структура данных и модификация**
- Создание и изменение таблиц
- Ограничения целостности  
- Индексы
- Модификация данных (INSERT, UPDATE, DELETE)
- Основы нормализации

---

**🎉 Поздравляем! Вы завершили Блок 1 и готовы к изучению более сложных тем PostgreSQL!**