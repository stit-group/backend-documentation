# Детальный план изучения PostgreSQL и SQL для Backend разработчика

## Фаза 1: Основы SQL и PostgreSQL (2-3 недели)

### Неделя 1: Фундаментальные концепции
- **Понимание реляционных баз данных**
  - Что такое СУБД и зачем она нужна
  - Концепция таблиц, строк, столбцов
  - Первичные и внешние ключи
  - Нормализация данных (1NF, 2NF, 3NF)

- **Установка и первоначальная настройка PostgreSQL**
  - Установка PostgreSQL на рабочую машину
  - Настройка подключения
  - Знакомство с psql
  - Создание первой базы данных

- **Основы DDL (Data Definition Language)**
  - CREATE DATABASE
  - CREATE TABLE с различными типами данных
  - ALTER TABLE (добавление/удаление столбцов)
  - DROP операции
  - Ограничения (CONSTRAINTS): NOT NULL, UNIQUE, CHECK

### Неделя 2: Основные SQL операции
- **DML (Data Manipulation Language)**
  - INSERT: одиночные и множественные вставки
  - SELECT: базовые запросы, фильтрация с WHERE
  - UPDATE: обновление данных с условиями
  - DELETE: удаление данных

- **Работа с типами данных PostgreSQL**
  - Числовые типы (INTEGER, BIGINT, DECIMAL, NUMERIC)
  - Строковые типы (VARCHAR, TEXT, CHAR)
  - Дата и время (DATE, TIME, TIMESTAMP, TIMESTAMPTZ)
  - Булевый тип (BOOLEAN)
  - JSON и JSONB (базовое понимание)

### Неделя 3: Расширенные SELECT запросы
- **Сортировка и ограничения**
  - ORDER BY (ASC, DESC)
  - LIMIT и OFFSET
  - DISTINCT

- **Агрегатные функции**
  - COUNT, SUM, AVG, MIN, MAX
  - GROUP BY и HAVING
  - Группировка по нескольким полям

- **Фильтрация и условия**
  - Операторы сравнения
  - LIKE, ILIKE для поиска по шаблону
  - IN, NOT IN
  - BETWEEN
  - IS NULL, IS NOT NULL

## Фаза 2: Продвинутый SQL (3-4 недели)

### Неделя 4-5: Объединения таблиц (JOINs)
- **Типы JOIN операций**
  - INNER JOIN: понимание принципа работы
  - LEFT JOIN и RIGHT JOIN
  - FULL OUTER JOIN
  - CROSS JOIN и когда его использовать

- **Продвинутые техники JOIN**
  - Самообъединения (Self JOIN)
  - Множественные JOIN в одном запросе
  - JOIN с условиями в ON vs WHERE

- **Подзапросы (Subqueries)**
  - Скалярные подзапросы
  - Подзапросы в WHERE (EXISTS, NOT EXISTS)
  - Подзапросы в FROM (производные таблицы)
  - Коррелированные подзапросы

### Неделя 6: Функции окна (Window Functions)
- **Основы оконных функций**
  - Концепция окна (OVER clause)
  - PARTITION BY и ORDER BY в контексте окон
  - ROW_NUMBER(), RANK(), DENSE_RANK()

- **Агрегатные функции как оконные**
  - SUM() OVER, COUNT() OVER
  - Скользящие окна (ROWS BETWEEN)
  - Накопительные суммы

- **Специальные оконные функции**
  - LAG() и LEAD()
  - FIRST_VALUE() и LAST_VALUE()
  - NTILE() для процентилей

### Неделя 7: Общие табличные выражения (CTE)
- **Простые CTE**
  - Синтаксис WITH
  - Когда использовать CTE вместо подзапросов
  - Множественные CTE в одном запросе

- **Рекурсивные CTE**
  - Понимание рекурсии в SQL
  - Структура рекурсивных CTE
  - Практические применения (иерархии, графы)

## Фаза 3: PostgreSQL-специфичные возможности (2-3 недели)

### Неделя 8: Индексы и производительность
- **Типы индексов в PostgreSQL**
  - B-tree индексы (по умолчанию)
  - Hash индексы
  - GIN и GiST индексы
  - Частичные индексы

- **Стратегии индексирования**
  - Когда создавать индексы
  - Композитные индексы
  - Уникальные индексы
  - Мониторинг использования индексов

- **Анализ производительности запросов**
  - EXPLAIN и EXPLAIN ANALYZE
  - Чтение планов выполнения
  - Выявление узких мест
  - pg_stat_statements для мониторинга

### Неделя 9: Работа с JSON в PostgreSQL
- **JSON vs JSONB**
  - Различия в хранении и производительности
  - Когда использовать каждый тип

- **Запросы к JSON данным**
  - Операторы -> и ->>
  - Функции для работы с JSON
  - Индексирование JSON полей (GIN индексы)
  - jsonb_path_query для сложных запросов

### Неделя 10: Продвинутые типы данных
- **Массивы (Arrays)**
  - Создание и хранение массивов
  - Операции с массивами
  - Индексирование массивов

- **Составные типы (Composite Types)**
  - Создание пользовательских типов
  - Использование в таблицах

- **Перечисления (ENUMs)**
  - Создание ENUM типов
  - Преимущества и ограничения

## Фаза 4: Backend-ориентированные темы (3-4 недели)

### Неделя 11-12: Транзакции и блокировки
- **ACID свойства**
  - Понимание Atomicity, Consistency, Isolation, Durability
  - Применение в реальных приложениях

- **Уровни изоляции транзакций**
  - Read Uncommitted, Read Committed, Repeatable Read, Serializable
  - Проблемы параллельности: Dirty Read, Non-repeatable Read, Phantom Read
  - Выбор подходящего уровня изоляции

- **Управление транзакциями**
  - BEGIN, COMMIT, ROLLBACK
  - SAVEPOINT для частичных откатов
  - Автокоммит vs явные транзакции

- **Блокировки и конкурентность**
  - Типы блокировок в PostgreSQL
  - Deadlock'и и их предотвращение
  - Мониторинг блокировок

### Неделя 13: Хранимые процедуры и функции
- **Создание функций**
  - PL/pgSQL как основной язык
  - Параметры и возвращаемые значения
  - Функции vs процедуры

- **Триггеры**
  - BEFORE и AFTER триггеры
  - Триггеры на INSERT, UPDATE, DELETE
  - Практические применения (аудит, валидация)

- **Представления (Views)**
  - Простые представления
  - Материализованные представления
  - Обновляемые представления

### Неделя 14: Безопасность и права доступа
- **Управление пользователями и ролями**
  - Создание пользователей и ролей
  - Наследование ролей
  - Принцип минимальных привилегий

- **Права доступа на объекты**
  - GRANT и REVOKE
  - Права на таблицы, схемы, базы данных
  - Row Level Security (RLS)

- **Безопасность подключений**
  - pg_hba.conf настройка
  - SSL подключения
  - Аутентификация и авторизация

## Фаза 5: Оптимизация и мониторинг (2 недели)

### Неделя 15: Настройка производительности
- **Конфигурация PostgreSQL**
  - Ключевые параметры postgresql.conf
  - shared_buffers, work_mem, maintenance_work_mem
  - checkpoint_segments, wal_buffers

- **Мониторинг производительности**
  - pg_stat_* системные представления
  - Анализ медленных запросов
  - Инструменты мониторинга (pg_stat_statements, pgBadger)

- **Партиционирование**
  - Декларативное партиционирование
  - Стратегии партиционирования (по диапазону, списку, хешу)
  - Pruning и Constraint Exclusion

### Неделя 16: Репликация и резервное копирование
- **Типы репликации**
  - Streaming Replication
  - Logical Replication
  - Настройка master-slave конфигурации

- **Резервное копирование**
  - pg_dump и pg_restore
  - Непрерывное архивирование (WAL архивы)
  - Point-in-time Recovery (PITR)

- **Высокая доступность**
  - Автоматический failover
  - Мониторинг состояния репликации

## Практические проекты для закрепления

### Проект 1: E-commerce база данных
- Проектирование схемы для интернет-магазина
- Реализация сложных запросов для отчетности
- Оптимизация производительности

### Проект 2: Система аналитики
- Работа с большими объемами данных
- Агрегация и группировка данных
- Использование оконных функций для трендов

### Проект 3: Система пользователей с правами доступа
- Многоуровневая система ролей
- Row Level Security
- Аудит действий пользователей

## Ресурсы для изучения

### Документация и книги
- Официальная документация PostgreSQL
- "PostgreSQL: Up and Running" by Regina Ose
- "Learning SQL" by Alan Beaulieu

### Практические платформы
- PostgreSQL Tutorial
- SQLBolt для интерактивной практики
- HackerRank SQL challenges

### Инструменты
- pgAdmin для визуального управления
- DataGrip или DBeaver как IDE
- Docker для быстрого развертывания PostgreSQL

## График изучения: 16 недель (4 месяца)

**Время в день:** 1-2 часа в будние дни, 3-4 часа в выходные  
**Еженедельный объем:** 10-15 часов  
**Общий объем:** 160-240 часов

Этот план обеспечивает глубокое понимание PostgreSQL и SQL, необходимое для эффективной работы backend разработчика.