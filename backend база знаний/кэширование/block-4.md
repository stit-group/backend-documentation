# üóÑÔ∏è –ë–ª–æ–∫ 4: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

```
‚è±Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 2-3 –Ω–µ–¥–µ–ª–∏
üéØ –¶–µ–ª—å: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
üìä –£—Ä–æ–≤–µ–Ω—å: –°—Ä–µ–¥–Ω–∏–π ‚Üí –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π
```

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –±–ª–æ–∫–∞

```
‚îå‚îÄ –ì–ª–∞–≤–∞ 1: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îú‚îÄ –ì–ª–∞–≤–∞ 2: In-memory –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  
‚îú‚îÄ –ì–ª–∞–≤–∞ 3: –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –∫—ç—à–µ–º ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îú‚îÄ –ì–ª–∞–≤–∞ 4: –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îî‚îÄ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è + –ü—Ä–æ–µ–∫—Ç ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ –í–≤–µ–¥–µ–Ω–∏–µ –≤ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞—á–µ–º –Ω—É–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î?

```
–ë–µ–∑ –∫—ç—à–∞:                    –° –∫—ç—à–µ–º:
                            
App ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 App ‚îÄ‚îÄ‚îê
          ‚îú‚îÄ 500ms             ‚îú‚îÄ 2ms (cache hit)
Database ‚îÄ‚îò                      ‚îú‚îÄ 500ms (cache miss)
                            Cache ‚î¥‚îÄ Database
```

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î
- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

---

## üìö –ì–ª–∞–≤–∞ 1: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

### 1.1 Query Result –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
```
SELECT * FROM users WHERE age > 25
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Query Cache      ‚îÇ
‚îÇ Key: hash(query)    ‚îÇ
‚îÇ Value: result_set   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ Python:**

```python
import hashlib
import json
from typing import Any, Optional

class QueryCache:
    def __init__(self):
        self.cache = {}
    
    def _generate_key(self, query: str, params: tuple = ()) -> str:
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞"""
        query_data = f"{query}:{params}"
        return hashlib.md5(query_data.encode()).hexdigest()
    
    def get(self, query: str, params: tuple = ()) -> Optional[Any]:
        """–ü–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ –∫—ç—à–∞"""
        key = self._generate_key(query, params)
        return self.cache.get(key)
    
    def set(self, query: str, params: tuple, result: Any, ttl: int = 3600):
        """–°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫—ç—à"""
        key = self._generate_key(query, params)
        self.cache[key] = {
            'result': result,
            'expires': time.time() + ttl
        }

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
cache = QueryCache()
query = "SELECT * FROM products WHERE category = %s"
params = ('electronics',)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
result = cache.get(query, params)
if result is None:
    # –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ –ë–î
    result = database.execute(query, params)
    cache.set(query, params, result)
```

### 1.2 Prepared Statements –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ö–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 Application                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Prepared Statement Cache                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Query Plan  ‚îÇ  ‚îÇ Query Plan  ‚îÇ  ‚îÇ Query    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Hash: abc   ‚îÇ  ‚îÇ Hash: def   ‚îÇ  ‚îÇ Plan...  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                  Database                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.3 ORM-—É—Ä–æ–≤–µ–Ω—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä —Å Django ORM:**

```python
from django.core.cache import cache
from django.db import models

class ProductManager(models.Manager):
    def get_by_category_cached(self, category):
        cache_key = f"products_category_{category}"
        products = cache.get(cache_key)
        
        if products is None:
            products = list(self.filter(category=category))
            cache.set(cache_key, products, timeout=3600)
        
        return products

class Product(models.Model):
    name = models.CharField(max_length=100)
    category = models.CharField(max_length=50)
    price = models.DecimalField(max_digits=10, decimal_places=2)
    
    objects = ProductManager()
```

---

## üè™ –ì–ª–∞–≤–∞ 2: In-memory –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 2.1 Redis: –ú–æ—â–Ω—ã–π –∫—ç—à —Å –±–æ–≥–∞—Ç—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Redis:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Redis                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Data Types:                                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Strings ‚îÇ ‚îÇ  Lists  ‚îÇ ‚îÇ  Sets   ‚îÇ ‚îÇ Hashes ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Sorted  ‚îÇ ‚îÇ Bitmaps ‚îÇ ‚îÇ HyperLL ‚îÇ ‚îÇ Streams‚îÇ ‚îÇ
‚îÇ  ‚îÇ  Sets   ‚îÇ ‚îÇ         ‚îÇ ‚îÇ   ogs   ‚îÇ ‚îÇ        ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Persistence: RDB + AOF                         ‚îÇ
‚îÇ  Replication: Master-Slave                      ‚îÇ
‚îÇ  Clustering: Redis Cluster                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã Redis:**

```python
import redis
import json
from datetime import datetime, timedelta

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
r = redis.Redis(host='localhost', port=6379, db=0)

# 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–µ—Å—Å–∏–π
def cache_user_session(user_id: int, session_data: dict):
    key = f"user_session:{user_id}"
    r.hset(key, mapping=session_data)
    r.expire(key, 3600)  # TTL 1 —á–∞—Å

# 2. –°—á–µ—Ç—á–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
def increment_page_views(page_id: str):
    key = f"page_views:{page_id}"
    r.incr(key)
    
    # –°—á–µ—Ç—á–∏–∫ –∑–∞ –¥–µ–Ω—å
    today = datetime.now().strftime("%Y-%m-%d")
    daily_key = f"page_views:{page_id}:{today}"
    r.incr(daily_key)
    r.expire(daily_key, 86400)  # TTL 24 —á–∞—Å–∞

# 3. Leaderboard —Å Sorted Sets
def add_to_leaderboard(user_id: int, score: int):
    r.zadd("game_leaderboard", {f"user:{user_id}": score})

def get_top_players(limit: int = 10):
    return r.zrevrange("game_leaderboard", 0, limit-1, withscores=True)

# 4. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ API
def cache_api_response(endpoint: str, params: dict, response: dict):
    key = f"api_cache:{endpoint}:{hash(str(params))}"
    r.setex(key, 300, json.dumps(response))  # TTL 5 –º–∏–Ω—É—Ç

def get_cached_api_response(endpoint: str, params: dict):
    key = f"api_cache:{endpoint}:{hash(str(params))}"
    cached = r.get(key)
    return json.loads(cached) if cached else None
```

### 2.2 Memcached: –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Memcached:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ               Memcached Cluster                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Node 1        Node 2        Node 3             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ  Slab   ‚îÇ   ‚îÇ  Slab   ‚îÇ   ‚îÇ  Slab   ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ Class 1 ‚îÇ   ‚îÇ Class 1 ‚îÇ   ‚îÇ Class 1 ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ  Slab   ‚îÇ   ‚îÇ  Slab   ‚îÇ   ‚îÇ  Slab   ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ Class 2 ‚îÇ   ‚îÇ Class 2 ‚îÇ   ‚îÇ Class 2 ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ          Consistent Hashing                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Memcached:**

```python
import memcache
import pickle

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Memcached
mc = memcache.Client(['127.0.0.1:11211'], debug=0)

class MemcachedCache:
    def __init__(self):
        self.mc = memcache.Client(['127.0.0.1:11211'])
    
    def get(self, key: str):
        return self.mc.get(key)
    
    def set(self, key: str, value, time: int = 3600):
        return self.mc.set(key, value, time)
    
    def delete(self, key: str):
        return self.mc.delete(key)
    
    def get_multi(self, keys: list):
        return self.mc.get_multi(keys)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
def get_user_profile(user_id: int):
    cache_key = f"user_profile:{user_id}"
    profile = mc.get(cache_key)
    
    if profile is None:
        # –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ –ë–î
        profile = database.get_user_profile(user_id)
        mc.set(cache_key, profile, time=3600)
    
    return profile
```

### 2.3 –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Redis vs Memcached

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞  ‚îÇ      Redis       ‚îÇ   Memcached     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö   ‚îÇ   –ë–æ–≥–∞—Ç—ã–µ —Ç–∏–ø—ã   ‚îÇ  –¢–æ–ª—å–∫–æ K-V     ‚îÇ
‚îÇ  –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å    ‚îÇ   RDB + AOF      ‚îÇ      –ù–µ—Ç        ‚îÇ
‚îÇ  –†–µ–ø–ª–∏–∫–∞—Ü–∏—è         ‚îÇ      –ï—Å—Ç—å        ‚îÇ      –ù–µ—Ç        ‚îÇ
‚îÇ  –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è      ‚îÇ  Redis Cluster   ‚îÇ –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è      ‚îÇ
‚îÇ  –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å    ‚îÇ –û–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–∞—è     ‚îÇ –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è   ‚îÇ
‚îÇ  –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚îÇ    –í—ã—Å–æ–∫–∞—è       ‚îÇ   –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è ‚îÇ
‚îÇ  –°–ª–æ–∂–Ω–æ—Å—Ç—å          ‚îÇ    –°—Ä–µ–¥–Ω—è—è       ‚îÇ     –ù–∏–∑–∫–∞—è      ‚îÇ
‚îÇ  –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å   ‚îÇ    –ë–æ–≥–∞—Ç–∞—è       ‚îÇ    –ë–∞–∑–æ–≤–∞—è      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ –ì–ª–∞–≤–∞ 3: –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –∫—ç—à–µ–º

### 3.1 Cache-aside (Lazy Loading)

**–°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã:**

```
Application Request
        ‚îÇ
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    Cache Hit     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Check Cache  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ   Return    ‚îÇ
‚îÇ               ‚îÇ                  ‚îÇ    Data     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚îÇ Cache Miss
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Query Database‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ  Store in   ‚îÇ
‚îÇ               ‚îÇ                  ‚îÇ    Cache    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Return Data  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Cache-aside:**

```python
class CacheAsidePattern:
    def __init__(self, cache, database):
        self.cache = cache
        self.database = database
    
    def get_user(self, user_id: int):
        # 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
        cache_key = f"user:{user_id}"
        user = self.cache.get(cache_key)
        
        if user is not None:
            print("Cache HIT")
            return user
        
        # 2. Cache miss - –∏–¥–µ–º –≤ –±–∞–∑—É
        print("Cache MISS")
        user = self.database.get_user(user_id)
        
        if user is not None:
            # 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à
            self.cache.set(cache_key, user, ttl=3600)
        
        return user
    
    def update_user(self, user_id: int, user_data: dict):
        # 1. –û–±–Ω–æ–≤–ª—è–µ–º –≤ –±–∞–∑–µ
        self.database.update_user(user_id, user_data)
        
        # 2. –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º –∫—ç—à
        cache_key = f"user:{user_id}"
        self.cache.delete(cache_key)
```

### 3.2 Write-through –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã:**

```
Write Request
        ‚îÇ
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Update Cache ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ   Update    ‚îÇ
‚îÇ               ‚îÇ                  ‚îÇ  Database   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                                  ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Both Success ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Success    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Write-through:**

```python
class WriteThroughCache:
    def __init__(self, cache, database):
        self.cache = cache
        self.database = database
    
    def get_product(self, product_id: int):
        cache_key = f"product:{product_id}"
        product = self.cache.get(cache_key)
        
        if product is None:
            product = self.database.get_product(product_id)
            if product:
                self.cache.set(cache_key, product)
        
        return product
    
    def update_product(self, product_id: int, product_data: dict):
        cache_key = f"product:{product_id}"
        
        try:
            # 1. –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à
            self.cache.set(cache_key, product_data)
            
            # 2. –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
            self.database.update_product(product_id, product_data)
            
            return True
        except Exception as e:
            # –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫—ç—à–µ
            self.cache.delete(cache_key)
            raise e
```

### 3.3 Write-behind (Write-back)

**–°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã:**

```
Write Request
        ‚îÇ
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Update Cache ‚îÇ                  ‚îÇ   Queue     ‚îÇ
‚îÇ               ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ  Write Job  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                                  ‚îÇ
        ‚ñº                                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              Async      ‚îÇ
‚îÇ Return Success‚îÇ              Update     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ      ‚îÇ
                                   ‚ñº      ‚ñº
                           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                           ‚îÇ  Update Database‚îÇ
                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Write-behind:**

```python
import queue
import threading
import time

class WriteBehindCache:
    def __init__(self, cache, database):
        self.cache = cache
        self.database = database
        self.write_queue = queue.Queue()
        self.dirty_keys = set()
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø–∏—Å–∏
        self.writer_thread = threading.Thread(target=self._background_writer)
        self.writer_thread.daemon = True
        self.writer_thread.start()
    
    def get(self, key: str):
        return self.cache.get(key)
    
    def set(self, key: str, value, write_to_db: bool = True):
        # 1. –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –∫—ç—à
        self.cache.set(key, value)
        
        if write_to_db:
            # 2. –î–æ–±–∞–≤–ª—è–µ–º –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –ë–î
            self.write_queue.put((key, value))
            self.dirty_keys.add(key)
    
    def _background_writer(self):
        """–§–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø–∏—Å–∏ –≤ –ë–î"""
        while True:
            try:
                # –ó–∞–±–∏—Ä–∞–µ–º –∏–∑ –æ—á–µ—Ä–µ–¥–∏ —Å —Ç–∞–π–º–∞—É—Ç–æ–º
                key, value = self.write_queue.get(timeout=1)
                
                # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ë–î
                self.database.set(key, value)
                
                # –£–±–∏—Ä–∞–µ–º –∏–∑ dirty keys
                self.dirty_keys.discard(key)
                
                self.write_queue.task_done()
            except queue.Empty:
                continue
            except Exception as e:
                print(f"Error writing to database: {e}")
                # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É
```

### 3.4 Refresh-ahead

**–°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã:**

```
Cache Entry Timeline:
‚îÇ
‚îú‚îÄ TTL: 60s ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ               ‚îÇ
‚îú‚îÄ Refresh: 50s ‚îÇ ‚óÑ‚îÄ‚îÄ Refresh-ahead trigger
‚îÇ               ‚îÇ
‚îú‚îÄ Expire: 60s ‚îÄ‚îò
‚îÇ
‚ñº
Background refresh starts before expiration
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Refresh-ahead:**

```python
import time
import threading
from typing import Callable, Any

class RefreshAheadCache:
    def __init__(self, cache, refresh_function: Callable, 
                 ttl: int = 3600, refresh_ahead_factor: float = 0.8):
        self.cache = cache
        self.refresh_function = refresh_function
        self.ttl = ttl
        self.refresh_ahead_time = ttl * refresh_ahead_factor
        self.refresh_in_progress = set()
    
    def get(self, key: str):
        # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
        cached_data = self.cache.get(f"data:{key}")
        cached_time = self.cache.get(f"time:{key}")
        
        if cached_data is None:
            # Cache miss - –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
            return self._load_and_cache(key)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞—Ä–∞–Ω–µ–µ
        if (cached_time and 
            time.time() - cached_time > self.refresh_ahead_time and
            key not in self.refresh_in_progress):
            
            # –ó–∞–ø—É—Å–∫–∞–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            threading.Thread(
                target=self._async_refresh, 
                args=(key,)
            ).start()
        
        return cached_data
    
    def _load_and_cache(self, key: str):
        """–ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –∫—ç—à–∏—Ä—É–µ—Ç –∏—Ö"""
        data = self.refresh_function(key)
        current_time = time.time()
        
        self.cache.set(f"data:{key}", data, ttl=self.ttl)
        self.cache.set(f"time:{key}", current_time, ttl=self.ttl)
        
        return data
    
    def _async_refresh(self, key: str):
        """–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞"""
        if key in self.refresh_in_progress:
            return
        
        self.refresh_in_progress.add(key)
        try:
            self._load_and_cache(key)
        finally:
            self.refresh_in_progress.discard(key)
```

---

## ‚ö° –ì–ª–∞–≤–∞ 4: –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

### 4.1 TTL (Time To Live) —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

**–¢–∏–ø—ã TTL:**

```
Fixed TTL:
‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ 3600s
0               3600

Sliding TTL:
‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ Access extends TTL
0    Access  Access  New expiry

Hierarchical TTL:
Hot data:   ‚îÇ‚îÄ‚îÄ‚îÇ 60s
Warm data:  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ 300s  
Cold data:  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ 3600s
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–º–Ω–æ–≥–æ TTL:**

```python
class SmartTTLCache:
    def __init__(self):
        self.cache = {}
        self.access_count = {}
        self.last_access = {}
    
    def get(self, key: str):
        if key in self.cache:
            # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–æ—Å—Ç—É–ø–∞
            self.access_count[key] = self.access_count.get(key, 0) + 1
            self.last_access[key] = time.time()
            
            return self.cache[key]['data']
        return None
    
    def set(self, key: str, value, base_ttl: int = 3600):
        # –í—ã—á–∏—Å–ª—è–µ–º TTL –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
        access_frequency = self.access_count.get(key, 0)
        
        if access_frequency > 100:
            ttl = base_ttl * 2  # –ì–æ—Ä—è—á–∏–µ –¥–∞–Ω–Ω—ã–µ –∂–∏–≤—É—Ç –¥–æ–ª—å—à–µ
        elif access_frequency > 10:
            ttl = base_ttl
        else:
            ttl = base_ttl // 2  # –•–æ–ª–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ - –∫–æ—Ä–æ—á–µ
        
        self.cache[key] = {
            'data': value,
            'expires': time.time() + ttl,
            'ttl': ttl
        }
    
    def cleanup_expired(self):
        """–£–¥–∞–ª—è–µ—Ç –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏"""
        current_time = time.time()
        expired_keys = [
            key for key, item in self.cache.items()
            if item['expires'] < current_time
        ]
        
        for key in expired_keys:
            del self.cache[key]
            self.access_count.pop(key, None)
            self.last_access.pop(key, None)
```

### 4.2 Event-driven –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–±—ã—Ç–∏–π–Ω–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    Event    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    Invalidate    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Database   ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ  Event Bus   ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ  Cache  ‚îÇ
‚îÇ   Changes   ‚îÇ            ‚îÇ  (Redis Pub/ ‚îÇ                 ‚îÇ Cluster ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ  Sub, Kafka) ‚îÇ                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                                   ‚ñº
                           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                           ‚îÇ  Cache Tags  ‚îÇ
                           ‚îÇ  Resolution  ‚îÇ
                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π–Ω–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏:**

```python
import redis
import json
from typing import Set, List

class EventDrivenCache:
    def __init__(self, cache, redis_client):
        self.cache = cache
        self.redis = redis_client
        self.tag_mapping = {}  # key -> set of tags
        
        # –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏
        self.pubsub = self.redis.pubsub()
        self.pubsub.subscribe('cache_invalidation')
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏–π
        threading.Thread(target=self._listen_events, daemon=True).start()
    
    def set_with_tags(self, key: str, value, tags: Set[str], ttl: int = 3600):
        """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å —Ç–µ–≥–∞–º–∏"""
        self.cache.set(key, value, ttl)
        self.tag_mapping[key] = tags
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–≥ -> –∫–ª—é—á–∏
        for tag in tags:
            tag_key = f"tag:{tag}"
            self.redis.sadd(tag_key, key)
            self.redis.expire(tag_key, ttl + 300)  # –ß—É—Ç—å –±–æ–ª—å—à–µ TTL –∫—ç—à–∞
    
    def invalidate_by_tag(self, tag: str):
        """–ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Å–µ –∫–ª—é—á–∏ —Å –¥–∞–Ω–Ω—ã–º —Ç–µ–≥–æ–º"""
        tag_key = f"tag:{tag}"
        keys_to_invalidate = self.redis.smembers(tag_key)
        
        for key in keys_to_invalidate:
            self.cache.delete(key.decode())
            # –£–¥–∞–ª—è–µ–º –∏–∑ tag mapping
            if key.decode() in self.tag_mapping:
                del self.tag_mapping[key.decode()]
        
        # –£–¥–∞–ª—è–µ–º —Å–∞–º —Ç–µ–≥
        self.redis.delete(tag_key)
    
    def publish_invalidation_event(self, tags: List[str]):
        """–ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏"""
        event = {
            'type': 'invalidate',
            'tags': tags,
            'timestamp': time.time()
        }
        self.redis.publish('cache_invalidation', json.dumps(event))
    
    def _listen_events(self):
        """–°–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏"""
        for message in self.pubsub.listen():
            if message['type'] == 'message':
                try:
                    event = json.loads(message['data'].decode())
                    if event['type'] == 'invalidate':
                        for tag in event['tags']:
                            self.invalidate_by_tag(tag)
                except Exception as e:
                    print(f"Error processing invalidation event: {e}")

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
cache_system = EventDrivenCache(cache, redis_client)

# –ö—ç—à–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Ç–µ–≥–∞–º–∏
cache_system.set_with_tags(
    "user:123", 
    {"id": 123, "name": "Alice"}, 
    tags={"user", "user:123", "profile"}
)

# –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫—ç—à–∏
def update_user(user_id: int, data: dict):
    database.update_user(user_id, data)
    cache_system.publish_invalidation_event([f"user:{user_id}", "user", "profile"])
```

### 4.3 Cache Warming

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏:**

```
Cold Start Problem:
Time ‚îÇ
     ‚îÇ     ‚îå‚îÄ High latency spikes
     ‚îÇ    ‚ï±‚îÇ
     ‚îÇ   ‚ï± ‚îÇ
     ‚îÇ  ‚ï±  ‚îÇ
     ‚îî‚îÄ‚ï±‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Cache deployment

With Cache Warming:
Time ‚îÇ
     ‚îÇ ‚îå‚îÄ Smooth performance
     ‚îÇ ‚îÇ
     ‚îÇ ‚îÇ
     ‚îÇ ‚îÇ
     ‚îî‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Pre-warmed cache
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Cache Warming:**

```python
import asyncio
import concurrent.futures
from typing import List, Callable

class CacheWarmer:
    def __init__(self, cache, data_loader: Callable):
        self.cache = cache
        self.data_loader = data_loader
    
    async def warm_cache_batch(self, keys: List[str], batch_size: int = 10):
        """–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫—ç—à –ø–∞–∫–µ—Ç–∞–º–∏"""
        semaphore = asyncio.Semaphore(batch_size)
        
        async def warm_single_key(key: str):
            async with semaphore:
                try:
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –≤ –∫—ç—à–µ
                    if self.cache.get(key) is None:
                        data = await self.data_loader(key)
                        if data is not None:
                            self.cache.set(key, data)
                            print(f"Warmed cache for key: {key}")
                except Exception as e:
                    print(f"Failed to warm cache for {key}: {e}")
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ –∑–∞–¥–∞—á–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
        tasks = [warm_single_key(key) for key in keys]
        await asyncio.gather(*tasks, return_exceptions=True)
    
    def warm_popular_data(self):
        """–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"""
        popular_keys = [
            "trending_products",
            "featured_categories", 
            "homepage_content",
            "popular_articles"
        ]
        
        asyncio.run(self.warm_cache_batch(popular_keys))
    
    def warm_user_specific_data(self, user_ids: List[int]):
        """–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ"""
        keys = [
            f"user_profile:{user_id}" for user_id in user_ids
        ] + [
            f"user_preferences:{user_id}" for user_id in user_ids
        ]
        
        asyncio.run(self.warm_cache_batch(keys))

# Scheduler –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ warming
class CacheWarmingScheduler:
    def __init__(self, warmer: CacheWarmer):
        self.warmer = warmer
        self.running = False
    
    def start_periodic_warming(self, interval: int = 3600):
        """–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞"""
        self.running = True
        
        def warming_loop():
            while self.running:
                try:
                    print("Starting cache warming...")
                    self.warmer.warm_popular_data()
                    print("Cache warming completed")
                except Exception as e:
                    print(f"Cache warming failed: {e}")
                
                time.sleep(interval)
        
        threading.Thread(target=warming_loop, daemon=True).start()
    
    def stop(self):
        self.running = False
```

### 4.4 Cache Stampede Protection

**–ü—Ä–æ–±–ª–µ–º–∞ Cache Stampede:**

```
Cache expires at T=0
‚îÇ
‚îú‚îÄ T=0: Request 1 ‚îÄ‚îÄ‚îê
‚îú‚îÄ T=1: Request 2 ‚îÄ‚îÄ‚î§
‚îú‚îÄ T=2: Request 3 ‚îÄ‚îÄ‚î§ ‚óÑ‚îÄ‚îÄ All hit database
‚îú‚îÄ T=3: Request 4 ‚îÄ‚îÄ‚î§      simultaneously
‚îú‚îÄ T=4: Request 5 ‚îÄ‚îÄ‚îò
‚îÇ
‚ñº Database overload
```

**–†–µ—à–µ–Ω–∏–µ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏:**

```python
import threading
import time
from typing import Optional, Callable

class StampedeProtectedCache:
    def __init__(self, cache, data_loader: Callable):
        self.cache = cache
        self.data_loader = data_loader
        self.loading_locks = {}
        self.lock = threading.Lock()
    
    def get_with_stampede_protection(self, key: str, ttl: int = 3600) -> Optional[any]:
        """–ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç stampede"""
        
        # 1. –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞
        value = self.cache.get(key)
        if value is not None:
            return value
        
        # 2. Cache miss - –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ª–∏ —É–∂–µ –∫—Ç–æ-—Ç–æ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ
        with self.lock:
            if key in self.loading_locks:
                loading_lock = self.loading_locks[key]
            else:
                loading_lock = threading.Lock()
                self.loading_locks[key] = loading_lock
        
        # 3. –ü—ã—Ç–∞–µ–º—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∑–∞–≥—Ä—É–∑–∫–∏
        if loading_lock.acquire(blocking=False):
            try:
                # –ú—ã –ø–µ—Ä–≤—ã–µ - –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
                print(f"Loading data for key: {key}")
                value = self.data_loader(key)
                
                if value is not None:
                    self.cache.set(key, value, ttl)
                
                return value
            finally:
                loading_lock.release()
                # –£–¥–∞–ª—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
                with self.lock:
                    if key in self.loading_locks:
                        del self.loading_locks[key]
        else:
            # –ö—Ç–æ-—Ç–æ —É–∂–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç - –∂–¥–µ–º
            print(f"Waiting for data loading: {key}")
            with loading_lock:
                # –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –∫—ç—à–µ
                return self.cache.get(key)

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
class ProbabilisticCache:
    def __init__(self, cache, data_loader: Callable):
        self.cache = cache
        self.data_loader = data_loader
    
    def get_with_probabilistic_refresh(self, key: str, ttl: int = 3600, 
                                     refresh_probability: float = 0.1):
        """–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è stampede"""
        
        cached_item = self.cache.get_with_metadata(key)
        
        if cached_item is None:
            # Cache miss - –∑–∞–≥—Ä—É–∂–∞–µ–º
            return self._load_and_cache(key, ttl)
        
        value, cache_time = cached_item['value'], cached_item['time']
        age = time.time() - cache_time
        
        # –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ç–µ—Ç —Å –≤–æ–∑—Ä–∞—Å—Ç–æ–º –∑–∞–ø–∏—Å–∏
        if age > ttl * 0.8:  # –ü–æ—Å–ª–µ 80% TTL
            remaining_ttl = ttl - age
            probability = refresh_probability * (age / ttl)
            
            if random.random() < probability:
                # –û–±–Ω–æ–≤–ª—è–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
                threading.Thread(
                    target=self._async_refresh,
                    args=(key, ttl)
                ).start()
        
        return value
    
    def _load_and_cache(self, key: str, ttl: int):
        value = self.data_loader(key)
        if value is not None:
            self.cache.set_with_metadata(key, value, ttl)
        return value
    
    def _async_refresh(self, key: str, ttl: int):
        try:
            self._load_and_cache(key, ttl)
        except Exception as e:
            print(f"Async refresh failed for {key}: {e}")
```

---

## üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è

### –ó–∞–¥–∞–Ω–∏–µ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è ORM

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å middleware –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è ORM –∑–∞–ø—Ä–æ—Å–æ–≤

```python
# –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –¥–æ–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ—Ç –∫–ª–∞—Å—Å
class ORMCacheMiddleware:
    def __init__(self, orm_session, cache_backend):
        self.orm = orm_session
        self.cache = cache_backend
    
    def execute_query(self, query_obj):
        """
        –ó–∞–¥–∞—á–∏:
        1. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –∫—ç—à–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
        2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫—ç—à –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å–∞
        3. –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å —É–º–Ω—ã–º TTL
        4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (SELECT, COUNT, etc.)
        """
        pass
    
    def invalidate_model_cache(self, model_class, instance_id=None):
        """
        –ó–∞–¥–∞—á–∏:
        1. –ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫—ç—à–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏
        2. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é
        3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
        """
        pass

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
# cache_middleware = ORMCacheMiddleware(db_session, redis_cache)
# users = cache_middleware.execute_query(User.query.filter(User.active == True))
```

### –ó–∞–¥–∞–Ω–∏–µ 2: Distributed Cache —Å Redis Cluster

**–¶–µ–ª—å:** –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∫—ç—à —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```python
class DistributedRedisCache:
    def __init__(self, redis_nodes):
        """
        –ó–∞–¥–∞—á–∏:
        1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
        2. –û–±–µ—Å–ø–µ—á–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
        3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
        4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞
        """
        self.nodes = redis_nodes
        
    def get(self, key: str):
        """–î–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —É–∑–µ–ª"""
        pass
    
    def set(self, key: str, value, ttl: int = 3600):
        """–î–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é"""
        pass
    
    def get_cluster_stats(self):
        """–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º—É –∫–ª–∞—Å—Ç–µ—Ä—É"""
        pass
```

### –ó–∞–¥–∞–Ω–∏–µ 3: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫—ç—à –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

```python
class AutoInvalidationSystem:
    def __init__(self, cache, database):
        """
        –ó–∞–¥–∞—á–∏:
        1. –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î
        2. –û–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –¥–∞–Ω–Ω—ã–º–∏
        3. –ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫—ç—à–∏
        4. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å batch –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é
        """
        pass
    
    def track_dependencies(self, cache_key: str, db_tables: List[str]):
        """–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫—ç—à–∞ –æ—Ç —Ç–∞–±–ª–∏—Ü –ë–î"""
        pass
    
    def on_database_change(self, table: str, operation: str, record_id: int):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î"""
        pass
```

### –ó–∞–¥–∞–Ω–∏–µ 4: Cache Performance Benchmark

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

```python
class CacheBenchmark:
    def __init__(self):
        """
        –ó–∞–¥–∞—á–∏:
        1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è
        2. –ò–∑–º–µ—Ä—è—Ç—å hit rate, latency, throughput
        3. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–æ—Å—Ç—É–ø–∞
        4. –°–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç—á–µ—Ç—ã —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
        """
        pass
    
    def run_benchmark_suite(self, cache_implementations: List):
        """–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤"""
        pass
    
    def generate_access_patterns(self, pattern_type: str):
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–æ—Å—Ç—É–ø–∞: random, sequential, hotspot"""
        pass
```

### –ó–∞–¥–∞–Ω–∏–µ 5: Cache Warming System

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –∫—ç—à–∞

```python
class IntelligentCacheWarmer:
    def __init__(self, cache, analytics_db):
        """
        –ó–∞–¥–∞—á–∏:
        1. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–æ—Å—Ç—É–ø–∞
        2. –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        3. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å warming tasks
        4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        """
        pass
    
    def analyze_access_patterns(self, time_period: timedelta):
        """–ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥"""
        pass
    
    def predict_hot_data(self):
        """–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –≥–æ—Ä—è—á–∏—Ö –¥–∞–Ω–Ω—ã—Ö"""
        pass
    
    def schedule_warming(self):
        """–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏"""
        pass
```

---

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    –ö—Ä–∏—Ç–µ—Ä–∏–π         ‚îÇ              –û–ø–∏—Å–∞–Ω–∏–µ                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å (30%)  ‚îÇ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤        ‚îÇ
‚îÇ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å  ‚îÇ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è             ‚îÇ
‚îÇ (25%)               ‚îÇ                                          ‚îÇ
‚îÇ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (20%)    ‚îÇ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å    ‚îÇ
‚îÇ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (15%)   ‚îÇ –ö–∞—á–µ—Å—Ç–≤–æ –¥–∏–∑–∞–π–Ω–∞, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å         ‚îÇ
‚îÇ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (10%)  ‚îÇ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, README, –ø—Ä–∏–º–µ—Ä—ã            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–ª–æ–∫–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–≥–æ –±–ª–æ–∫–∞ –≤—ã –±—É–¥–µ—Ç–µ —É–º–µ—Ç—å:

‚úÖ **–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä—É—é—â–∏–µ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –ë–î** –ª—é–±–æ–≥–æ —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏  
‚úÖ **–í—ã–±–∏—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á  
‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å Redis/Memcached  
‚úÖ **–†–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏** –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å** –∫—ç—à–∏—Ä—É—é—â–∏–µ —Å–∏—Å—Ç–µ–º—ã  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ ORM –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏  

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —á—Ç–µ–Ω–∏–µ:
- **"Redis in Action"** - Josiah Carlson
- **"Designing Data-Intensive Applications"** - Martin Kleppmann  
- **"Database Internals"** - Alex Petrov

### –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:
- [Redis Documentation](https://redis.io/documentation)
- [Memcached Wiki](https://github.com/memcached/memcached/wiki)
- [Database Caching Strategies](https://aws.amazon.com/caching/database-caching/)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏:
- **Redis** - –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å in-memory –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **Memcached** - –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ K-V –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è  
- **Apache JMeter** - –¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Grafana + Prometheus** - –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

**–°–ª–µ–¥—É—é—â–∏–π –±–ª–æ–∫:** üîÑ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –ü–µ—Ä–µ—Ö–æ–¥ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–º —Ä–µ—à–µ–Ω–∏—è–º

---

*–≠—Ç–æ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª —Å–æ–∑–¥–∞–Ω –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ—Å—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –Ω–µ –±–æ–π—Ç–µ—Å—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å!*