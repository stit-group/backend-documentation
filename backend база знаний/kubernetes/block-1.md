# Блок 1: Основы контейнеризации и введение в Kubernetes

*Полное руководство для понимания фундаментальных концепций*

---

## 📖 Обзор блока

**⏱️ Продолжительность:** 2-3 недели  
**🎯 Цель:** Понять концепцию контейнеризации и базовые принципы Kubernetes  
**💡 Подход:** Концептуальное понимание с практическими примерами

---

## 1.1 Основы Docker и контейнеризации

### История развития: от серверов к контейнерам

```
Эволюция развертывания приложений:

Физические серверы → Виртуальные машины → Контейнеры
     (2000-е)              (2005-2015)         (2013+)

┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐
│   Приложение    │  │   Приложение    │  │   Приложение    │
├─────────────────┤  ├─────────────────┤  ├─────────────────┤
│       OS        │  │   Гостевая OS   │  │   Библиотеки    │
├─────────────────┤  ├─────────────────┤  ├─────────────────┤
│   Физический    │  │   Гипервизор    │  │ Container Engine│
│    сервер       │  ├─────────────────┤  ├─────────────────┤
└─────────────────┘  │   Хостовая OS   │  │   Хостовая OS   │
                     ├─────────────────┤  ├─────────────────┤
                     │   Физический    │  │   Физический    │
                     │    сервер       │  │    сервер       │
                     └─────────────────┘  └─────────────────┘
```

### Что такое контейнер?

**Контейнер** - это легковесная, переносимая единица упаковки приложения, которая включает в себя:

- **Приложение и его зависимости**
- **Системные библиотеки**
- **Конфигурационные файлы**
- **Environment variables**

#### Ключевые принципы контейнеризации:

```
┌──────────────────────────────────────────────────────────┐
│                    ПРИНЦИПЫ КОНТЕЙНЕРОВ                  │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  🔒 ИЗОЛЯЦИЯ                                            │
│  ────────────                                           │
│  Каждый контейнер работает в изолированном окружении     │
│                                                          │
│  📦 УПАКОВКА                                            │
│  ────────────                                           │
│  Все зависимости упакованы вместе с приложением          │
│                                                          │
│  🚀 ПЕРЕНОСИМОСТЬ                                       │
│  ─────────────────                                      │
│  "Работает на моей машине" = "Работает везде"           │
│                                                          │
│  ⚡ ЭФФЕКТИВНОСТЬ                                       │
│  ─────────────────                                      │
│  Быстрый запуск, минимальные ресурсы                    │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

### Docker: основные концепции

#### Docker Image (Образ)
```
Docker Image - это шаблон для создания контейнеров

┌─────────────────────────────────────┐
│            Docker Image             │
├─────────────────────────────────────┤
│  Layer 4: Приложение + код          │
├─────────────────────────────────────┤
│  Layer 3: Зависимости (npm, pip)    │
├─────────────────────────────────────┤
│  Layer 2: Runtime (Node.js, Python) │
├─────────────────────────────────────┤
│  Layer 1: Базовая OS (Ubuntu, Alpine)│
└─────────────────────────────────────┘

Особенности:
• Неизменяемый (immutable)
• Состоит из слоев (layers)
• Можно версионировать (tags)
• Переиспользуемые слои экономят место
```

#### Docker Container (Контейнер)
```
Docker Container - это работающий экземпляр образа

         Dockerfile
             │
             ▼
     ┌─────────────┐     docker run     ┌─────────────┐
     │Docker Image │ ─────────────────→ │Docker       │
     │(Template)   │                    │Container    │
     └─────────────┘                    │(Running)    │
                                        └─────────────┘

Жизненный цикл контейнера:
Created → Running → Stopped → Removed
```

#### Dockerfile: рецепт создания образа
```
Dockerfile - это текстовый файл с инструкциями для сборки образа

Структура Dockerfile:
┌──────────────────────────────────────┐
│ FROM ubuntu:20.04    # Базовый образ │
│ RUN apt-get update   # Команды сборки │
│ COPY . /app          # Копирование   │
│ WORKDIR /app         # Рабочая папка │
│ EXPOSE 8080          # Открытый порт │
│ CMD ["node", "app"]  # Команда запуска│
└──────────────────────────────────────┘
```

### Docker Compose: оркестрация нескольких контейнеров

```
Проблема: Как управлять несколькими связанными контейнерами?

Пример: Веб-приложение
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   Frontend  │◄──►│   Backend   │◄──►│  Database   │
│ (React/Vue) │    │(Node.js/API)│    │ (PostgreSQL)│
└─────────────┘    └─────────────┘    └─────────────┘
   Container 1        Container 2        Container 3

Docker Compose решение:
• Описание всех сервисов в docker-compose.yml
• Автоматическое создание сети между контейнерами
• Управление зависимостями запуска
• Единые команды для всего стека (up/down)
```

### Реестры образов

```
Docker Registry - централизованное хранилище образов

┌─────────────────────────────────────────────────────────┐
│                   ЭКОСИСТЕМА РЕЕСТРОВ                   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🌐 ПУБЛИЧНЫЕ РЕЕСТРЫ                                  │
│  ────────────────────                                  │
│  • Docker Hub (hub.docker.com)                         │
│  • Amazon ECR Public                                   │
│  • Google Container Registry (gcr.io)                  │
│                                                         │
│  🏢 ПРИВАТНЫЕ РЕЕСТРЫ                                  │
│  ─────────────────────                                 │
│  • Harbor (VMware)                                     │
│  • Nexus Repository                                    │
│  • JFrog Artifactory                                   │
│                                                         │
│  ☁️ ОБЛАЧНЫЕ РЕЕСТРЫ                                   │
│  ───────────────────                                   │
│  • AWS ECR                                             │
│  • Azure Container Registry                            │
│  • Google Artifact Registry                            │
│                                                         │
└─────────────────────────────────────────────────────────┘

#### Полезные команды для начинающих
```
┌─────────────────────────────────────────────────────────┐
│               ШПАРГАЛКА ПО KUBECTL                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🔍 ИССЛЕДОВАНИЕ КЛАСТЕРА:                             │
│  ────────────────────────                              │
│                                                         │
│  kubectl version                                        │
│  └─ Версии клиента и сервера                           │
│                                                         │
│  kubectl config view                                    │
│  └─ Текущая конфигурация kubectl                       │
│                                                         │
│  kubectl config current-context                        │
│  └─ Текущий контекст                                   │
│                                                         │
│  kubectl api-resources                                  │
│  └─ Все доступные типы ресурсов                        │
│                                                         │
│  🎯 БЫСТРЫЕ КОМАНДЫ:                                   │
│  ──────────────────                                    │
│                                                         │
│  kubectl get all -A                                     │
│  └─ Все ресурсы во всех namespace                      │
│                                                         │
│  kubectl top nodes                                      │
│  └─ Использование ресурсов узлами                      │
│                                                         │
│  kubectl top pods                                       │
│  └─ Использование ресурсов подами                      │
│                                                         │
│  🆘 ПОМОЩЬ И ДОКУМЕНТАЦИЯ:                             │
│  ────────────────────────                              │
│                                                         │
│  kubectl help                                           │
│  └─ Общая справка                                      │
│                                                         │
│  kubectl <command> --help                              │
│  └─ Справка по конкретной команде                      │
│                                                         │
│  kubectl explain <resource>                            │
│  └─ Документация по ресурсу                            │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 🏆 Полученные знания после Блока 1

### Концептуальное понимание

```
┌─────────────────────────────────────────────────────────┐
│                  ЧТО ВЫ ТЕПЕРЬ ЗНАЕТЕ                   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🧠 КОНЦЕПТУАЛЬНОЕ ПОНИМАНИЕ:                          │
│  ───────────────────────────                           │
│  ✅ Эволюция от монолитов к контейнерам               │
│  ✅ Проблемы масштабирования и их решения              │
│  ✅ Роль оркестраторов в современной разработке        │
│  ✅ Принципы работы Kubernetes                         │
│                                                         │
│  🏗️ АРХИТЕКТУРНОЕ ПОНИМАНИЕ:                          │
│  ──────────────────────────                            │
│  ✅ Компоненты Control Plane                           │
│  ✅ Компоненты Worker Nodes                            │
│  ✅ Сетевая модель Kubernetes                          │
│  ✅ Принципы Service Discovery                         │
│                                                         │
│  💻 ПРАКТИЧЕСКИЕ НАВЫКИ:                               │
│  ──────────────────────                                │
│  ✅ Установка локального кластера                      │
│  ✅ Настройка kubectl                                  │
│  ✅ Базовые команды для управления                     │
│  ✅ Работа с YAML манифестами                          │
│                                                         │
│  🔧 ИНСТРУМЕНТАРИЙ:                                    │
│  ─────────────────                                     │
│  ✅ Docker и контейнеризация                          │
│  ✅ minikube для локальной разработки                  │
│  ✅ kubectl как основной инструмент                    │
│  ✅ YAML для декларативного управления                 │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Готовность к следующему этапу

```
┌─────────────────────────────────────────────────────────┐
│                 ГОТОВНОСТЬ К БЛОКУ 2                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🎯 ВЫ ГОТОВЫ ИЗУЧАТЬ:                                 │
│  ─────────────────────                                 │
│  • Pods и их жизненный цикл                            │
│  • Deployments для управления приложениями             │
│  • Services для сетевого взаимодействия                │
│  • ConfigMaps и Secrets для конфигурации               │
│  • Namespaces для организации ресурсов                 │
│                                                         │
│  📚 ФУНДАМЕНТ ЗАЛОЖЕН:                                 │
│  ────────────────────                                  │
│  ✅ Понимание "зачем нужен Kubernetes"                 │
│  ✅ Знание архитектуры и компонентов                   │
│  ✅ Умение работать с локальным кластером              │
│  ✅ Базовые навыки kubectl                             │
│                                                         │
│  🚀 СЛЕДУЮЩИЙ ШАГ:                                     │
│  ─────────────────                                     │
│  Переходим к изучению основных объектов Kubernetes     │
│  и созданию первых приложений                          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 📚 Рекомендуемые ресурсы для дополнительного изучения

### Официальная документация
```
┌─────────────────────────────────────────────────────────┐
│              ОФИЦИАЛЬНЫЕ РЕСУРСЫ                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📖 ДОКУМЕНТАЦИЯ:                                      │
│  ────────────────                                      │
│  • kubernetes.io/docs - официальная документация       │
│  • kubernetes.io/tutorials - интерактивные туториалы   │
│  • labs.play-with-k8s.com - онлайн песочница          │
│                                                         │
│  🎥 ВИДЕО И КУРСЫ:                                     │
│  ────────────────                                      │
│  • Kubernetes The Hard Way - Kelsey Hightower          │
│  • CNCF YouTube канал                                  │
│  • KubeCon конференции                                 │
│                                                         │
│  📚 КНИГИ:                                             │
│  ─────────                                             │
│  • "Kubernetes in Action" - Marko Lukša                │
│  • "Kubernetes Up & Running" - Kelsey Hightower        │
│  • "Programming Kubernetes" - Michael Hausenblas       │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Практические упражнения

```
┌─────────────────────────────────────────────────────────┐
│               ПРАКТИЧЕСКИЕ ЗАДАНИЯ                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🎯 ЗАКРЕПЛЕНИЕ МАТЕРИАЛА:                             │
│  ────────────────────────                              │
│                                                         │
│  1. Установите все варианты локальных кластеров:       │
│     • minikube с разными драйверами                    │
│     • kind с многоузловой конфигурацией               │
│     • k3s на виртуальной машине                        │
│                                                         │
│  2. Исследуйте архитектуру:                           │
│     • Изучите все компоненты в namespace kube-system   │
│     • Проанализируйте логи компонентов Control Plane   │
│     • Понаблюдайте за работой kubelet                  │
│                                                         │
│  3. Освойте kubectl:                                   │
│     • Изучите все доступные ресурсы (api-resources)    │
│     • Попробуйте разные форматы вывода (-o yaml/json)  │
│     • Настройте bash автодополнение                    │
│                                                         │
│  4. Поэкспериментируйте с конфигурацией:              │
│     • Создайте несколько контекстов                    │
│     • Переключайтесь между разными кластерами          │
│     • Изучите структуру ~/.kube/config                 │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 🎯 Контрольные вопросы для самопроверки

```
┌─────────────────────────────────────────────────────────┐
│                 САМОПРОВЕРКА ЗНАНИЙ                     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ❓ КОНЦЕПТУАЛЬНЫЕ ВОПРОСЫ:                            │
│  ─────────────────────────                             │
│  1. Какие проблемы решает Kubernetes?                   │
│  2. В чем разница между контейнером и Pod?             │
│  3. Зачем нужен API Server в архитектуре?              │
│  4. Что происходит, если etcd недоступен?              │
│  5. Как Scheduler выбирает узел для Pod?               │
│                                                         │
│  🔧 ПРАКТИЧЕСКИЕ ВОПРОСЫ:                              │
│  ───────────────────────                               │
│  1. Как проверить состояние кластера?                  │
│  2. Где хранится конфигурация kubectl?                 │
│  3. Как посмотреть логи системных компонентов?         │
│  4. В чем разница между create и apply?                │
│  5. Как переключиться на другой namespace?             │
│                                                         │
│  🏗️ АРХИТЕКТУРНЫЕ ВОПРОСЫ:                            │
│  ─────────────────────────                             │
│  1. Что произойдет, если упадет API Server?           │
│  2. Как Pod получает IP адрес?                         │
│  3. Где хранятся образы контейнеров?                   │
│  4. Как происходит Service Discovery?                  │
│  5. Что такое Control Plane и зачем он нужен?         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 🎊 Поздравляем с завершением Блока 1!

```
┌─────────────────────────────────────────────────────────┐
│                    ДОСТИЖЕНИЕ                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│                    🏆 БЛОК 1 ЗАВЕРШЕН!                  │
│                                                         │
│  Вы успешно освоили основы Kubernetes и готовы к        │
│  изучению более сложных концепций. Теперь у вас есть    │
│  прочный фундамент для понимания работы с основными     │
│  объектами Kubernetes в Блоке 2.                       │
│                                                         │
│  🌟 Ключевые достижения:                               │
│  • Понимание архитектуры Kubernetes                    │
│  • Настроенная локальная среда разработки              │
│  • Базовые навыки работы с kubectl                     │
│  • Понимание роли контейнеризации в современной IT     │
│                                                         │
│                  🚀 ВПЕРЕД К БЛОКУ 2!                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

*💡 **Совет для дальнейшего обучения:** Не спешите переходить к следующему блоку, пока не почувствуете уверенность в понимании архитектуры Kubernetes. Лучше потратить дополнительное время на эксперименты с локальным кластером, чем потом возвращаться к базовым концепциям.*

*🔧 **Практический совет:** Держите запущенным локальный кластер и экспериментируйте с kubectl командами. Чем больше практики на этом этапе, тем легче будет освоение следующих блоков.*
```

---

## 1.2 Что такое оркестрация контейнеров

### Проблемы масштабирования контейнеров

```
Когда приложение растет, возникают проблемы:

┌─────────────────────────────────────────────────────────┐
│                    ПРОБЛЕМЫ РОСТА                       │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📊 МАСШТАБИРОВАНИЕ                                     │
│  ──────────────────                                     │
│  • Как автоматически увеличивать количество контейнеров?│
│  • Как распределять нагрузку между ними?               │
│                                                         │
│  🔄 УПРАВЛЕНИЕ ЖИЗНЕННЫМ ЦИКЛОМ                         │
│  ──────────────────────────────                        │
│  • Что делать, если контейнер упал?                    │
│  • Как обновлять приложения без простоя?              │
│                                                         │
│  🌐 СЕТЕВОЕ ВЗАИМОДЕЙСТВИЕ                             │
│  ─────────────────────────                             │
│  • Как контейнеры находят друг друга?                  │
│  • Как управлять внешним доступом?                     │
│                                                         │
│  💾 УПРАВЛЕНИЕ ДАННЫМИ                                 │
│  ─────────────────────                                 │
│  • Где хранить данные, если контейнер перезапускается? │
│  • Как делать резервные копии?                         │
│                                                         │
│  🔒 БЕЗОПАСНОСТЬ                                       │
│  ────────────                                          │
│  • Как контролировать доступ между сервисами?          │
│  • Как управлять секретами и конфигурациями?           │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Эволюция решений оркестрации

```
Временная линия развития оркестрации:

2013        2014         2015         2016         2017+
 │           │            │            │            │
 ▼           ▼            ▼            ▼            ▼
Docker    Docker       Docker       Kubernetes    Kubernetes
Demon     Compose      Swarm        1.0          становится
          (локально)   (кластер)    (production)  стандартом

┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│Docker Compose│  │ Docker Swarm │  │ Kubernetes   │
├──────────────┤  ├──────────────┤  ├──────────────┤
│• Простота    │  │• Простота    │  │• Мощность    │
│• Локальная   │  │• Встроен в   │  │• Гибкость   │
│  разработка  │  │  Docker      │  │• Экосистема │
│• Один хост   │  │• Легкий старт│  │• Enterprise  │
└──────────────┘  └──────────────┘  └──────────────┘
```

### Что такое оркестратор контейнеров?

**Оркестратор** - это система, которая автоматизирует развертывание, масштабирование и управление контейнеризованными приложениями.

```
┌─────────────────────────────────────────────────────────┐
│                 ФУНКЦИИ ОРКЕСТРАТОРА                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🎯 ПЛАНИРОВАНИЕ (Scheduling)                          │
│  ─────────────────────────────                         │
│  Решает, на каком узле запустить контейнер             │
│                                                         │
│  ⚖️ БАЛАНСИРОВКА НАГРУЗКИ (Load Balancing)             │
│  ─────────────────────────────────────                 │
│  Распределяет трафик между экземплярами                │
│                                                         │
│  🔄 САМОВОССТАНОВЛЕНИЕ (Self-healing)                  │
│  ────────────────────────────────                      │
│  Автоматически перезапускает упавшие контейнеры        │
│                                                         │
│  📈 АВТОМАСШТАБИРОВАНИЕ (Auto-scaling)                 │
│  ─────────────────────────────────                     │
│  Увеличивает/уменьшает количество экземпляров          │
│                                                         │
│  🔧 УПРАВЛЕНИЕ КОНФИГУРАЦИЕЙ                           │
│  ──────────────────────────────                        │
│  Централизованно управляет настройками                 │
│                                                         │
│  🌐 SERVICE DISCOVERY                                  │
│  ────────────────────                                  │
│  Помогает сервисам находить друг друга                 │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Сравнение решений оркестрации

```
┌─────────────────────────────────────────────────────────┐
│                  СРАВНЕНИЕ РЕШЕНИЙ                      │
├─────────────┬─────────────┬─────────────┬─────────────────┤
│  Критерий   │Docker Swarm │ Kubernetes  │    Nomad       │
├─────────────┼─────────────┼─────────────┼─────────────────┤
│ Сложность   │    📗       │     📕     │      📘       │
│ настройки   │   Простая   │   Сложная   │   Средняя      │
├─────────────┼─────────────┼─────────────┼─────────────────┤
│ Экосистема  │    📘       │     📗     │      📘       │
│             │   Средняя   │   Богатая   │   Средняя      │
├─────────────┼─────────────┼─────────────┼─────────────────┤
│ Кривая      │    📗       │     📕     │      📘       │
│ обучения    │   Пологая   │   Крутая    │   Средняя      │
├─────────────┼─────────────┼─────────────┼─────────────────┤
│ Enterprise  │    📘       │     📗     │      📘       │
│ готовность  │   Средняя   │   Высокая   │   Средняя      │
├─────────────┼─────────────┼─────────────┼─────────────────┤
│ Поддержка   │    📘       │     📗     │      📘       │
│ сообщества  │   Средняя   │   Отличная  │   Хорошая      │
└─────────────┴─────────────┴─────────────┴─────────────────┘

📗 = Отлично   📘 = Хорошо   📕 = Сложно
```

### Когда использовать Kubernetes?

```
┌─────────────────────────────────────────────────────────┐
│              КОГДА ВЫБИРАТЬ KUBERNETES                  │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ✅ ПОДХОДЯЩИЕ СЦЕНАРИИ                                │
│  ──────────────────────                                │
│  • Микросервисная архитектура                          │
│  • Высокие требования к доступности                    │
│  • Сложные процессы CI/CD                             │
│  • Мультиоблачная стратегия                           │
│  • Большая команда разработки                          │
│  • Необходимость в автомасштабировании                 │
│                                                         │
│  ❌ НЕ ПОДХОДЯЩИЕ СЦЕНАРИИ                             │
│  ─────────────────────────                             │
│  • Простые монолитные приложения                       │
│  • Малая команда без DevOps экспертизы                │
│  • Ограниченные ресурсы на инфраструктуру             │
│  • Статичные приложения без частых обновлений         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 1.3 Архитектура Kubernetes

### Общая архитектура кластера

```
┌─────────────────────────────────────────────────────────┐
│                 KUBERNETES КЛАСТЕР                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │              CONTROL PLANE                      │   │
│  │  ┌─────────────┬─────────────┬─────────────┐   │   │
│  │  │ API Server  │ Scheduler   │Controller   │   │   │
│  │  │             │             │Manager      │   │   │
│  │  └─────────────┴─────────────┴─────────────┘   │   │
│  │  ┌─────────────────────────────────────────┐   │   │
│  │  │              etcd                       │   │   │
│  │  │        (База данных кластера)           │   │   │
│  │  └─────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐     │
│  │   NODE 1    │  │   NODE 2    │  │   NODE 3    │     │
│  │ ┌─────────┐ │  │ ┌─────────┐ │  │ ┌─────────┐ │     │
│  │ │ kubelet │ │  │ │ kubelet │ │  │ │ kubelet │ │     │
│  │ ├─────────┤ │  │ ├─────────┤ │  │ ├─────────┤ │     │
│  │ │kube-    │ │  │ │kube-    │ │  │ │kube-    │ │     │
│  │ │proxy    │ │  │ │proxy    │ │  │ │proxy    │ │     │
│  │ ├─────────┤ │  │ ├─────────┤ │  │ ├─────────┤ │     │
│  │ │Container│ │  │ │Container│ │  │ │Container│ │     │
│  │ │Runtime  │ │  │ │Runtime  │ │  │ │Runtime  │ │     │
│  │ └─────────┘ │  │ └─────────┘ │  │ └─────────┘ │     │
│  │   Pods...   │  │   Pods...   │  │   Pods...   │     │
│  └─────────────┘  └─────────────┘  └─────────────┘     │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Control Plane компоненты

#### API Server
```
┌─────────────────────────────────────────────────────────┐
│                     API SERVER                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🎯 ОСНОВНЫЕ ФУНКЦИИ:                                  │
│  ────────────────────                                  │
│  • Единая точка входа для всех REST API запросов      │
│  • Аутентификация и авторизация                        │
│  • Валидация и мутация ресурсов                       │
│  • Хранение состояния в etcd                          │
│                                                         │
│  🔄 ПОТОК ЗАПРОСОВ:                                    │
│  ──────────────────                                    │
│                                                         │
│  kubectl ─────┐                                        │
│               │                                         │
│  Dashboard ───┼───► API Server ───► etcd               │
│               │                                         │
│  Controllers ─┘                                        │
│                                                         │
│  💡 АНАЛОГИЯ:                                          │
│  API Server = Ресепшн в отеле                         │
│  Все запросы проходят через него                       │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### etcd
```
┌─────────────────────────────────────────────────────────┐
│                        ETCD                             │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📊 ЧТО ХРАНИТ:                                        │
│  ──────────────                                        │
│  • Состояние всех ресурсов кластера                   │
│  • Конфигурация кластера                              │
│  • Секреты и ConfigMaps                               │
│  • Информация о Nodes и Pods                          │
│                                                         │
│  🔍 ХАРАКТЕРИСТИКИ:                                    │
│  ─────────────────                                     │
│  • Консистентная key-value база данных                │
│  • Использует алгоритм консенсуса Raft               │
│  • Высокая доступность (HA)                           │
│  • Горизонтальное масштабирование                     │
│                                                         │
│  💡 АНАЛОГИЯ:                                          │
│  etcd = Мозг кластера                                 │
│  Здесь хранится вся "память" о состоянии              │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### Scheduler
```
┌─────────────────────────────────────────────────────────┐
│                      SCHEDULER                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🎯 ОСНОВНАЯ ЗАДАЧА:                                   │
│  ──────────────────                                    │
│  Принимает решение, на каком узле запустить Pod        │
│                                                         │
│  🧮 АЛГОРИТМ ПЛАНИРОВАНИЯ:                             │
│  ────────────────────────                              │
│                                                         │
│  1. ФИЛЬТРАЦИЯ (Filtering)                             │
│     ┌─────────────────────────────────────┐            │
│     │ Доступные ресурсы (CPU, Memory)    │            │
│     │ Соответствие nodeSelector          │            │
│     │ Affinity/Anti-affinity правила     │            │
│     │ Taints и Tolerations               │            │
│     └─────────────────────────────────────┘            │
│                      │                                 │
│  2. ОЦЕНКА (Scoring)  ▼                               │
│     ┌─────────────────────────────────────┐            │
│     │ Балансировка нагрузки              │            │
│     │ Минимизация сетевого трафика       │            │
│     │ Оптимизация размещения             │            │
│     └─────────────────────────────────────┘            │
│                                                         │
│  💡 АНАЛОГИЯ:                                          │
│  Scheduler = Диспетчер такси                          │
│  Выбирает лучшую машину для поездки                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### Controller Manager
```
┌─────────────────────────────────────────────────────────┐
│                  CONTROLLER MANAGER                     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🔄 ПРИНЦИП РАБОТЫ:                                    │
│  ─────────────────                                     │
│  Постоянно сравнивает желаемое состояние (Desired)     │
│  с текущим состоянием (Current) и принимает меры       │
│                                                         │
│  📋 ВСТРОЕННЫЕ КОНТРОЛЛЕРЫ:                            │
│  ─────────────────────────                             │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ Deployment Controller                           │   │
│  │ ├─ Управляет ReplicaSets                       │   │
│  │ └─ Обновления приложений                       │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ ReplicaSet Controller                           │   │
│  │ ├─ Поддерживает нужное количество Pods         │   │
│  │ └─ Создает/удаляет Pods по необходимости       │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ Node Controller                                 │   │
│  │ ├─ Мониторит состояние узлов                   │   │
│  │ └─ Помечает недоступные узлы                   │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ Service Controller                              │   │
│  │ ├─ Создает LoadBalancer в облаке               │   │
│  │ └─ Управляет Endpoints                         │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  💡 АНАЛОГИЯ:                                          │
│  Controllers = Автопилоты самолета                     │
│  Постоянно корректируют курс                           │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Node компоненты

#### kubelet
```
┌─────────────────────────────────────────────────────────┐
│                       KUBELET                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🤖 ОСНОВНОЙ АГЕНТ НА УЗЛЕ:                            │
│  ─────────────────────────                             │
│  • Обеспечивает связь узла с Control Plane            │
│  • Управляет жизненным циклом Pods                     │
│  • Мониторит ресурсы узла                             │
│                                                         │
│  🔄 РАБОЧИЙ ЦИКЛ:                                      │
│  ─────────────                                         │
│                                                         │
│  1. Получает Pod Spec от API Server                    │
│           │                                            │
│  2. Запускает Container Runtime ◄──────────────────────┘│
│           │                                             │
│  3. Мониторит состояние Pods ◄─────────────────────────┘│
│           │                                             │
│  4. Отправляет статус в API Server ◄──────────────────┘ │
│                                                         │
│  📊 ЧТО ОТСЛЕЖИВАЕТ:                                   │
│  ──────────────────                                    │
│  • Liveness и Readiness проbes                         │
│  • Потребление ресурсов                               │
│  • Volume mounting                                     │
│  • Network настройки                                   │
│                                                         │
│  💡 АНАЛОГИЯ:                                          │
│  kubelet = Прораб на стройке                          │
│  Следит за выполнением работ на своем участке          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### kube-proxy
```
┌─────────────────────────────────────────────────────────┐
│                     KUBE-PROXY                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🌐 СЕТЕВОЙ КОМПОНЕНТ:                                 │
│  ─────────────────────                                 │
│  • Реализует сетевую модель Services                   │
│  • Балансирует трафик между Pods                       │
│  • Настраивает правила iptables/IPVS                   │
│                                                         │
│  🔄 КАК РАБОТАЕТ:                                      │
│  ────────────────                                      │
│                                                         │
│  Клиент ──► Service IP ──► kube-proxy ──► Pod IP       │
│              (Virtual)       (Routes)      (Real)      │
│                                                         │
│  📋 РЕЖИМЫ РАБОТЫ:                                     │
│  ────────────────                                      │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ iptables (по умолчанию)                         │   │
│  │ ├─ Использует netfilter правила                │   │
│  │ └─ Хорошая производительность                  │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ IPVS (для больших кластеров)                   │   │
│  │ ├─ Лучшая производительность                   │   │
│  │ └─ Продвинутая балансировка                    │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  💡 АНАЛОГИЯ:                                          │
│  kube-proxy = Почтальон                               │
│  Знает, куда доставить письмо по адресу               │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### Container Runtime
```
┌─────────────────────────────────────────────────────────┐
│                  CONTAINER RUNTIME                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🏃 НИЗКОУРОВНЕВОЕ УПРАВЛЕНИЕ:                         │
│  ─────────────────────────────                         │
│  • Запуск и остановка контейнеров                      │
│  • Загрузка образов                                    │
│  • Изоляция ресурсов                                   │
│                                                         │
│  🔧 ПОПУЛЯРНЫЕ RUNTIME:                                │
│  ──────────────────────                                │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ containerd                                      │   │
│  │ ├─ Стандарт индустрии                          │   │
│  │ ├─ Высокая производительность                  │   │
│  │ └─ Используется в Docker                       │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ CRI-O                                           │   │
│  │ ├─ Специально для Kubernetes                   │   │
│  │ ├─ Легковесный                                 │   │
│  │ └─ OCI совместимый                             │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ Docker Engine                                   │   │
│  │ ├─ Классический выбор                          │   │
│  │ ├─ Богатая экосистема                          │   │
│  │ └─ Постепенно замещается containerd            │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  💡 АНАЛОГИЯ:                                          │
│  Container Runtime = Двигатель автомобиля              │
│  Выполняет основную работу по движению                 │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Сетевая модель Kubernetes

```
┌─────────────────────────────────────────────────────────┐
│                  СЕТЕВАЯ МОДЕЛЬ                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🌐 ОСНОВНЫЕ ПРИНЦИПЫ:                                 │
│  ─────────────────────                                 │
│  • Каждый Pod имеет уникальный IP в кластере          │
│  • Pods могут общаться друг с другом без NAT          │
│  • Services обеспечивают стабильные точки доступа     │
│                                                         │
│  📊 УРОВНИ СЕТЕВОГО ВЗАИМОДЕЙСТВИЯ:                    │
│  ──────────────────────────────────                    │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ Уровень 4: Service Network                      │   │
│  │ ┌─────────────────────────────────────────────┐ │   │
│  │ │ Уровень 3: Pod Network                     │ │   │
│  │ │ ┌─────────────────────────────────────────┐ │ │   │
│  │ │ │ Уровень 2: Container Network           │ │ │   │
│  │ │ │ ┌─────────────────────────────────────┐ │ │ │   │
│  │ │ │ │ Уровень 1: Host Network            │ │ │ │   │
│  │ │ │ └─────────────────────────────────────┘ │ │ │   │
│  │ │ └─────────────────────────────────────────┘ │ │   │
│  │ └─────────────────────────────────────────────┘ │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  🔧 CNI (Container Network Interface):                 │
│  ─────────────────────────────────────                 │
│  • Стандартный интерфейс для сетевых плагинов         │
│  • Популярные реализации: Calico, Flannel, Weave      │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### DNS в Kubernetes

```
┌─────────────────────────────────────────────────────────┐
│                    KUBERNETES DNS                       │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🏷️ СОГЛАШЕНИЯ ОБ ИМЕНАХ:                              │
│  ────────────────────────                              │
│                                                         │
│  Service DNS имя:                                       │
│  <service-name>.<namespace>.svc.cluster.local         │
│                                                         │
│  Pod DNS имя:                                          │
│  <pod-ip>.<namespace>.pod.cluster.local               │
│                                                         │
│  🔍 ПРИМЕР РАЗРЕШЕНИЯ ИМЕН:                            │
│  ─────────────────────────                             │
│                                                         │
│  frontend-service.default.svc.cluster.local           │
│          │         │      │      │                     │
│          │         │      │      └─ Домен кластера    │
│          │         │      └─ Указатель на service     │
│          │         └─ Namespace                        │
│          └─ Имя сервиса                               │
│                                                         │
│  💡 УМНЫЕ СОКРАЩЕНИЯ:                                  │
│  ───────────────────                                   │
│  • В том же namespace: frontend-service               │
│  • В любом namespace: frontend-service.default        │
│  • Полное имя для внешних запросов                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 1.4 Установка и настройка локального кластера

### Выбор локального решения

```
┌─────────────────────────────────────────────────────────┐
│               ЛОКАЛЬНЫЕ РЕШЕНИЯ                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🎯 MINIKUBE                                           │
│  ───────────                                           │
│  ✅ Лучше всего для обучения                          │
│  ✅ Поддержка аддонов                                 │
│  ✅ Простая установка                                 │
│  ❌ Только один узел                                   │
│                                                         │
│  🐳 KIND (Kubernetes IN Docker)                       │
│  ──────────────────────────────                       │
│  ✅ Быстрый запуск                                    │
│  ✅ Поддержка многоузловых кластеров                  │
│  ✅ Отлично для CI/CD                                 │
│  ❌ Требует Docker                                     │
│                                                         │
│  🐄 K3S                                               │
│  ──────                                               │
│  ✅ Легковесный                                       │
│  ✅ Подходит для Edge/IoT                             │
│  ✅ Быстрая установка                                 │
│  ❌ Упрощенная конфигурация                           │
│                                                         │
│  🐋 DOCKER DESKTOP                                    │
│  ─────────────────                                    │
│  ✅ Интеграция с Docker                               │
│  ✅ GUI интерфейс                                     │
│  ❌ Только для Mac/Windows                            │
│  ❌ Ресурсоемкий                                      │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Процесс установки minikube

```
┌─────────────────────────────────────────────────────────┐
│                 УСТАНОВКА MINIKUBE                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📋 ПРЕДВАРИТЕЛЬНЫЕ ТРЕБОВАНИЯ:                        │
│  ──────────────────────────────                        │
│  • 2+ CPU ядра                                         │
│  • 2GB+ свободной RAM                                  │
│  • 20GB+ свободного места на диске                     │
│  • Интернет соединение                                 │
│  • Гипервизор (VirtualBox, HyperV, KVM)               │
│                                                         │
│  🔄 ШАГИ УСТАНОВКИ:                                    │
│  ─────────────────                                     │
│                                                         │
│  1️⃣ Установка kubectl                                 │
│      └─ Инструмент командной строки для K8s           │
│                                                         │
│  2️⃣ Установка minikube                               │
│      └─ Локальный Kubernetes кластер                  │
│                                                         │
│  3️⃣ Выбор драйвера                                   │
│      ├─ docker (рекомендуется)                        │
│      ├─ virtualbox                                     │
│      └─ hyperv (Windows)                              │
│                                                         │
│  4️⃣ Запуск кластера                                  │
│      └─ minikube start                                 │
│                                                         │
│  5️⃣ Проверка статуса                                 │
│      └─ kubectl cluster-info                           │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Первый запуск кластера

```
┌─────────────────────────────────────────────────────────┐
│                   ПЕРВЫЙ ЗАПУСК                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🚀 ЧТО ПРОИСХОДИТ ПРИ ЗАПУСКЕ:                       │
│  ──────────────────────────────────                    │
│                                                         │
│  1. Загрузка ISO образа Kubernetes                     │
│     ┌─────────────────────────────────────┐            │
│     │ 📥 Downloading Kubernetes v1.28.0  │            │
│     │    ISO image...                     │            │
│     └─────────────────────────────────────┘            │
│                                                         │
│  2. Создание виртуальной машины                        │
│     ┌─────────────────────────────────────┐            │
│     │ 🖥️ Creating VM with 2GB RAM        │            │
│     │    and 2 CPU cores...               │            │
│     └─────────────────────────────────────┘            │
│                                                         │
│  3. Запуск Kubernetes компонентов                      │
│     ┌─────────────────────────────────────┐            │
│     │ ⚙️ Starting kubelet, apiserver,     │            │
│     │    scheduler, controller-manager... │            │
│     └─────────────────────────────────────┘            │
│                                                         │
│  4. Настройка kubectl контекста                        │
│     ┌─────────────────────────────────────┐            │
│     │ 🔧 Configuring kubectl context...  │            │
│     └─────────────────────────────────────┘            │
│                                                         │
│  ✅ ГОТОВО! Кластер работает                          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Настройка kubectl

```
┌─────────────────────────────────────────────────────────┐
│                  KUBECTL КОНФИГУРАЦИЯ                   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📁 РАСПОЛОЖЕНИЕ КОНФИГУРАЦИИ:                         │
│  ─────────────────────────────                         │
│  ~/.kube/config - главный конфигурационный файл        │
│                                                         │
│  🏗️ СТРУКТУРА КОНФИГУРАЦИИ:                           │
│  ──────────────────────────                            │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ CLUSTERS                                        │   │
│  │ ├─ minikube                                     │   │
│  │ ├─ production-cluster                           │   │
│  │ └─ staging-cluster                              │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ CONTEXTS                                        │   │
│  │ ├─ minikube (cluster + user + namespace)       │   │
│  │ ├─ prod-admin                                  │   │
│  │ └─ staging-developer                           │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ USERS                                           │   │
│  │ ├─ minikube                                     │   │
│  │ ├─ admin@company.com                           │   │
│  │ └─ developer@company.com                       │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  🔄 ПЕРЕКЛЮЧЕНИЕ КОНТЕКСТОВ:                           │
│  ──────────────────────────                            │
│  Context = Cluster + User + Default Namespace          │
│                                                         │
│  Текущий контекст → Определяет, с каким кластером     │
│  вы работаете по умолчанию                             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Альтернативные решения

```
┌─────────────────────────────────────────────────────────┐
│                   АЛЬТЕРНАТИВЫ                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🐳 KIND - ИДЕАЛЬНО ДЛЯ РАЗРАБОТКИ                     │
│  ─────────────────────────────────                     │
│  • Кластер внутри Docker контейнеров                   │
│  • Поддержка мультинодовых кластеров                   │
│  • Быстрое создание/удаление                           │
│  • Отлично для тестирования                            │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ Пример конфигурации kind:                       │   │
│  │                                                 │   │
│  │ kind: Cluster                                   │   │
│  │ apiVersion: kind.x-k8s.io/v1alpha4             │   │
│  │ nodes:                                          │   │
│  │ - role: control-plane                           │   │
│  │ - role: worker                                  │   │
│  │ - role: worker                                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  🐄 K3S - ЛЕГКОВЕСНОСТЬ                               │
│  ─────────────────────                                 │
│  • Один бинарный файл < 100MB                         │
│  • Встроенный storage и networking                     │
│  • SQLite вместо etcd (по умолчанию)                  │
│  • ARM64 поддержка для Raspberry Pi                   │
│                                                         │
│  🐋 DOCKER DESKTOP                                    │
│  ─────────────────                                    │
│  • Графический интерфейс                              │
│  • Интеграция с Docker workflows                       │
│  • Автоматические обновления                          │
│  • Ресурсы настраиваются через GUI                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 1.5 Первые команды kubectl

### Структура команд kubectl

```
┌─────────────────────────────────────────────────────────┐
│                 СИНТАКСИС KUBECTL                       │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📝 ОБЩИЙ ФОРМАТ:                                      │
│  ────────────────                                      │
│                                                         │
│  kubectl [COMMAND] [TYPE] [NAME] [FLAGS]               │
│     │        │       │      │       │                  │
│     │        │       │      │       └─ Дополнительные │
│     │        │       │      │          параметры       │
│     │        │       │      │                          │
│     │        │       │      └─ Имя ресурса            │
│     │        │       │                                 │
│     │        │       └─ Тип ресурса                    │
│     │        │          (pod, service, deployment)     │
│     │        │                                         │
│     │        └─ Действие                               │
│     │           (get, create, delete, describe)        │
│     │                                                  │
│     └─ Базовая команда                                 │
│                                                         │
│  🔍 ПРИМЕРЫ:                                           │
│  ───────────                                           │
│  kubectl get pods                                      │
│  kubectl describe service frontend                     │
│  kubectl delete deployment backend                     │
│  kubectl create namespace production                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Основные команды для начинающих

#### Информация о кластере
```
┌─────────────────────────────────────────────────────────┐
│              ИНФОРМАЦИЯ О КЛАСТЕРЕ                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🏗️ СОСТОЯНИЕ КЛАСТЕРА:                               │
│  ──────────────────────                                │
│                                                         │
│  kubectl cluster-info                                   │
│  ├─ Показывает URL API server                         │
│  ├─ Показывает URL CoreDNS                            │
│  └─ Общее состояние кластера                          │
│                                                         │
│  kubectl get nodes                                      │
│  ├─ Список всех узлов кластера                        │
│  ├─ Статус каждого узла (Ready/NotReady)              │
│  └─ Роли узлов (master/worker)                        │
│                                                         │
│  kubectl get namespaces                                 │
│  ├─ Показывает все пространства имен                   │
│  ├─ Статус каждого namespace                          │
│  └─ Возраст namespace                                  │
│                                                         │
│  📊 ПРИМЕР ВЫВОДА:                                     │
│  ────────────────                                      │
│  NAME              STATUS   ROLES           AGE        │
│  minikube          Ready    control-plane   5m         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### Просмотр ресурсов
```
┌─────────────────────────────────────────────────────────┐
│                ПРОСМОТР РЕСУРСОВ                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📋 ОСНОВНЫЕ КОМАНДЫ GET:                              │
│  ────────────────────────                              │
│                                                         │
│  kubectl get all                                       │
│  └─ Показывает все основные ресурсы                    │
│                                                         │
│  kubectl get pods                                       │
│  ├─ Список всех подов                                  │
│  ├─ Статус (Running, Pending, Failed)                 │
│  └─ Количество рестартов                               │
│                                                         │
│  kubectl get services                                   │
│  ├─ Список всех сервисов                              │
│  ├─ Типы сервисов (ClusterIP, NodePort)               │
│  └─ Внешние IP адреса                                 │
│                                                         │
│  kubectl get deployments                                │
│  ├─ Список развертываний                               │
│  ├─ Желаемое vs текущее количество реплик             │
│  └─ Статус готовности                                  │
│                                                         │
│  🔍 ПОЛЕЗНЫЕ ФЛАГИ:                                    │
│  ─────────────────                                     │
│  -o wide    # Расширенная информация                   │
│  -A         # Все namespaces                           │
│  --watch    # Мониторинг изменений в реальном времени  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### Детальная информация
```
┌─────────────────────────────────────────────────────────┐
│               ДЕТАЛЬНАЯ ИНФОРМАЦИЯ                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🔍 КОМАНДА DESCRIBE:                                  │
│  ────────────────────                                  │
│                                                         │
│  kubectl describe <resource> <name>                    │
│                                                         │
│  📊 ЧТО ПОКАЗЫВАЕТ:                                    │
│  ─────────────────                                     │
│  ┌─────────────────────────────────────────────────┐   │
│  │ • Метаданные (labels, annotations)             │   │
│  │ • Спецификация ресурса                         │   │
│  │ • Текущий статус                               │   │
│  │ • События (Events)                             │   │
│  │ • Условия (Conditions)                         │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  🎯 ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ:                             │
│  ────────────────────────                              │
│                                                         │
│  kubectl describe pod my-app-123                       │
│  ├─ Детали конкретного пода                           │
│  ├─ Причины перезапусков                              │
│  └─ Последние события                                 │
│                                                         │
│  kubectl describe node minikube                        │
│  ├─ Ресурсы узла (CPU, Memory)                        │
│  ├─ Запущенные поды                                   │
│  └─ Системная информация                              │
│                                                         │
│  💡 СОВЕТ:                                             │
│  Events в конце вывода - самая важная информация       │
│  для диагностики проблем!                              │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### Работа с логами
```
┌─────────────────────────────────────────────────────────┐
│                    РАБОТА С ЛОГАМИ                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📝 ПРОСМОТР ЛОГОВ:                                    │
│  ─────────────────                                     │
│                                                         │
│  kubectl logs <pod-name>                               │
│  └─ Показывает логи конкретного пода                   │
│                                                         │
│  kubectl logs <pod-name> -c <container-name>           │
│  └─ Логи конкретного контейнера в поде                │
│                                                         │
│  🔄 ПОЛЕЗНЫЕ ОПЦИИ:                                    │
│  ─────────────────                                     │
│                                                         │
│  --follow (-f)                                          │
│  └─ Следить за логами в реальном времени               │
│                                                         │
│  --previous                                             │
│  └─ Логи предыдущего контейнера                       │
│     (полезно если контейнер перезапустился)            │
│                                                         │
│  --tail=20                                              │
│  └─ Показать только последние N строк                  │
│                                                         │
│  --since=1h                                             │
│  └─ Логи за последний час                              │
│                                                         │
│  🎯 ПРАКТИЧЕСКИЕ ПРИМЕРЫ:                              │
│  ───────────────────────                               │
│                                                         │
│  # Следить за логами в реальном времени                │
│  kubectl logs -f my-app-pod                            │
│                                                         │
│  # Логи с нескольких подов                             │
│  kubectl logs -l app=frontend                          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Работа с YAML манифестами

#### Что такое манифест?
```
┌─────────────────────────────────────────────────────────┐
│                    YAML МАНИФЕСТЫ                       │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📋 МАНИФЕСТ - это описание желаемого состояния        │
│  ──────────────────────────────────────────────────    │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ apiVersion: v1          # Версия API           │   │
│  │ kind: Pod               # Тип ресурса          │   │
│  │ metadata:               # Метаданные           │   │
│  │   name: my-app          #   Имя                │   │
│  │   labels:               #   Метки              │   │
│  │     app: frontend       #                      │   │
│  │ spec:                   # Спецификация         │   │
│  │   containers:           #   Контейнеры         │   │
│  │   - name: app           #     Имя контейнера   │   │
│  │     image: nginx:1.20   #     Образ            │   │
│  │     ports:              #     Порты            │   │
│  │     - containerPort: 80 #                      │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  🏗️ СТРУКТУРА ЛЮБОГО МАНИФЕСТА:                       │
│  ─────────────────────────────                         │
│                                                         │
│  1. apiVersion - какую версию API использовать         │
│  2. kind - тип ресурса (Pod, Service, Deployment)     │
│  3. metadata - метаинформация (имя, labels)           │
│  4. spec - желаемое состояние ресурса                 │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### Применение манифестов
```
┌─────────────────────────────────────────────────────────┐
│              ПРИМЕНЕНИЕ МАНИФЕСТОВ                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🚀 ОСНОВНЫЕ КОМАНДЫ:                                  │
│  ────────────────────                                  │
│                                                         │
│  kubectl apply -f <filename.yaml>                      │
│  └─ Создает или обновляет ресурс                       │
│                                                         │
│  kubectl create -f <filename.yaml>                     │
│  └─ Создает ресурс (ошибка, если уже существует)      │
│                                                         │
│  kubectl delete -f <filename.yaml>                     │
│  └─ Удаляет ресурс, описанный в файле                 │
│                                                         │
│  🔄 РАБОЧИЙ ПРОЦЕСС:                                   │
│  ──────────────────                                    │
│                                                         │
│  1. Написать манифест в YAML файле                     │
│           │                                            │
│  2. Применить kubectl apply -f manifest.yaml           │
│           │                                            │
│  3. Проверить статус kubectl get <resource>            │
│           │                                            │
│  4. При необходимости изменить файл и применить снова  │
│                                                         │
│  💡 РАЗНИЦА МЕЖДУ CREATE И APPLY:                      │
│  ───────────────────────────────                       │
│  • create - создает новый ресурс                      │
│  • apply - создает или обновляет (декларативно)       │
│                                                         │
│  Используйте apply для GitOps подхода!                 │