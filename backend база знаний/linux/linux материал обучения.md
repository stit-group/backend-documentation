### üöÄ –û—Ç –Ω–æ–≤–∏—á–∫–∞ –∫ —ç–∫—Å–ø–µ—Ä—Ç—É
–ü–æ–º–Ω–∏—Ç–µ –ø—É—Ç—å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø—Ä–æ—à–ª–∏:
```
–ù–æ–≤–∏—á–æ–∫ ‚Üí –ó–Ω–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ ‚Üí –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è ‚Üí –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞
   ‚Üì            ‚Üì              ‚Üì               ‚Üì           ‚Üì
–°—Ç—Ä–∞—Ö      –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å    –ì–ª—É–±–æ–∫–æ–µ         –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å  –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ
–ø–µ—Ä–µ–¥      –≤ –±–∞–∑–æ–≤—ã—Ö      –ø–æ–Ω–∏–º–∞–Ω–∏–µ        –≤ —Ä–µ—à–µ–Ω–∏–∏      –º—ã—à–ª–µ–Ω–∏–µ –∏
—Ç–µ—Ä–º–∏–Ω–∞–ª–æ–º –æ–ø–µ—Ä–∞—Ü–∏—è—Ö      –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π     –ø—Ä–æ–±–ª–µ–º        —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ
                                                          –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```

### üí° –ü–æ—Å–ª–µ–¥–Ω–µ–µ –Ω–∞–ø—É—Ç—Å—Ç–≤–∏–µ

Linux ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, —ç—Ç–æ **—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è**:
- **"–î–µ–ª–∞–π –æ–¥–Ω—É –≤–µ—â—å —Ö–æ—Ä–æ—à–æ"** ‚Äî –ø—Ä–∏–Ω—Ü–∏–ø Unix
- **"–í—Å—ë —è–≤–ª—è–µ—Ç—Å—è —Ñ–∞–π–ª–æ–º"** ‚Äî —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  
- **"–ú–∞–ª–µ–Ω—å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –≤–º–µ—Å—Ç–µ"** ‚Äî –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- **"–í—ã–±–æ—Ä –≤–∞–∂–Ω–µ–µ —É–¥–æ–±—Å—Ç–≤–∞"** ‚Äî –≥–∏–±–∫–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–í—ã —Ç–µ–ø–µ—Ä—å —á–∞—Å—Ç—å —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **96.3% —Ç–æ–ø-–º–∏–ª–ª–∏–æ–Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤** –≤ –º–∏—Ä–µ. –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ —Å–º–æ—Ç—Ä–∏—Ç YouTube, –∑–∞–∫–∞–∑—ã–≤–∞–µ—Ç –µ–¥—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç WhatsApp ‚Äî –æ–Ω–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å Linux —Å–∏—Å—Ç–µ–º–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ç–∞–∫–∏–º–∏ —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏, –∫–∞–∫ –≤—ã.

**Linux ‚Äî —ç—Ç–æ –≤–∞—à –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–∏—Ä–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –º—É–¥—Ä–æ! üêß**

---

*–£–¥–∞—á–∏ –≤ –≤–∞—à–µ–º –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–∏ –ø–æ –º–∏—Ä—É Linux –∏ backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!*# Linux –¥–ª—è Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: –û—Ç –Ω–æ–≤–∏—á–∫–∞ –¥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞

## –í–≤–µ–¥–µ–Ω–∏–µ

Linux ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, —ç—Ç–æ —Ü–µ–ª–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç 96.3% –∏–∑ –º–∏–ª–ª–∏–æ–Ω–∞ —Å–∞–º—ã—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –º–∏—Ä–µ. –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ Instagram, –∑–∞–∫–∞–∑—ã–≤–∞–µ—Ç–µ –µ–¥—É –∏–ª–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ Netflix ‚Äî –≤—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç–µ —Å Linux —Å–µ—Ä–≤–µ—Ä–∞–º–∏.

### –ü–æ—á–µ–º—É Linux –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞?

```
–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ–±-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí CDN (Linux) ‚Üí Load Balancer (Linux) ‚Üí Web Server (Linux) ‚Üí App Server (Linux) ‚Üí Database (Linux)
    ‚Üì             ‚Üì              ‚Üì                    ‚Üì                   ‚Üì                ‚Üì
  –ë—Ä–∞—É–∑–µ—Ä     Nginx/Apache    HAProxy/Nginx      Docker/K8s        Python/Java      PostgreSQL/MySQL
```

**–ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç –∏–∑—É—á–µ–Ω–∏—è:**
- –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ª—é–±–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ù–∞–≤—ã–∫–∏ –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–∞—Ö
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç Docker, Kubernetes, –æ–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –≠–∫—Å–ø–µ—Ä—Ç–∏–∑—É –≤ —Å–µ—Ç–µ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## –≠—Ç–∞–ø 1: –û—Å–Ω–æ–≤—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

### –§–∏–ª–æ—Å–æ—Ñ–∏—è Unix/Linux

Linux —Å–ª–µ–¥—É–µ—Ç —Ñ–∏–ª–æ—Å–æ—Ñ–∏–∏ Unix: "–î–µ–ª–∞–π –æ–¥–Ω—É –≤–µ—â—å, –Ω–æ –¥–µ–ª–∞–π –µ—ë —Ö–æ—Ä–æ—à–æ". –ö–∞–∂–¥–∞—è —É—Ç–∏–ª–∏—Ç–∞ —Ä–µ—à–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É, –Ω–æ –º–æ–∂–µ—Ç –æ–±—ä–µ–¥–∏–Ω—è—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.

```
–§–∏–ª–æ—Å–æ—Ñ–∏—è Unix –≤ –¥–µ–π—Å—Ç–≤–∏–∏:

cat file.txt | grep "ERROR" | sort | uniq -c | sort -nr
  ‚Üì           ‚Üì              ‚Üì      ‚Üì          ‚Üì
–ß–∏—Ç–∞—Ç—å    –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å   –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –£–±—Ä–∞—Ç—å   –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
—Ñ–∞–π–ª      —Å—Ç—Ä–æ–∫–∏        —Å—Ç—Ä–æ–∫–∏      –¥—É–±–ª–∏    –ø–æ —á–∏—Å–ª–∞–º
```

### –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ Linux ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ

Linux –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –≤—Å—ë –∫–∞–∫ —Ñ–∞–π–ª—ã –≤ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ. –ü–æ–Ω–∏–º–∞–Ω–∏–µ —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–∞–º–∏:

```
/                           (–∫–æ—Ä–µ–Ω—å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã)
‚îú‚îÄ‚îÄ bin/                    (–æ—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã: ls, cat, grep)
‚îÇ   ‚îú‚îÄ‚îÄ ls ‚Üí /bin/ls
‚îÇ   ‚îú‚îÄ‚îÄ cat ‚Üí /bin/cat
‚îÇ   ‚îî‚îÄ‚îÄ bash ‚Üí /bin/bash
‚îú‚îÄ‚îÄ boot/                   (—Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã)
‚îÇ   ‚îú‚îÄ‚îÄ vmlinuz             (—è–¥—Ä–æ Linux)
‚îÇ   ‚îî‚îÄ‚îÄ initrd.img          (–Ω–∞—á–∞–ª—å–Ω—ã–π RAM –¥–∏—Å–∫)
‚îú‚îÄ‚îÄ dev/                    (—Ñ–∞–π–ª—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
‚îÇ   ‚îú‚îÄ‚îÄ sda1                (–∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫, —Ä–∞–∑–¥–µ–ª 1)
‚îÇ   ‚îú‚îÄ‚îÄ null                (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ "—á–µ—Ä–Ω–∞—è –¥—ã—Ä–∞")
‚îÇ   ‚îî‚îÄ‚îÄ random              (–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª)
‚îú‚îÄ‚îÄ etc/                    (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)
‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf      (–≥–ª–∞–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sites-enabled/  (–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∞–π—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ passwd              (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã)
‚îÇ   ‚îú‚îÄ‚îÄ hosts               (–ª–æ–∫–∞–ª—å–Ω–∞—è DNS —Ç–∞–±–ª–∏—Ü–∞)
‚îÇ   ‚îî‚îÄ‚îÄ crontab             (—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á)
‚îú‚îÄ‚îÄ home/                   (–¥–æ–º–∞—à–Ω–∏–µ –ø–∞–ø–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
‚îÇ   ‚îú‚îÄ‚îÄ alice/
‚îÇ   ‚îú‚îÄ‚îÄ bob/
‚îÇ   ‚îî‚îÄ‚îÄ developer/
‚îÇ       ‚îú‚îÄ‚îÄ .bashrc         (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ bash)
‚îÇ       ‚îú‚îÄ‚îÄ .ssh/           (SSH –∫–ª—é—á–∏)
‚îÇ       ‚îî‚îÄ‚îÄ projects/
‚îú‚îÄ‚îÄ lib/                    (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
‚îú‚îÄ‚îÄ media/                  (—Å—ä–µ–º–Ω—ã–µ –Ω–æ—Å–∏—Ç–µ–ª–∏)
‚îú‚îÄ‚îÄ mnt/                    (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
‚îú‚îÄ‚îÄ opt/                    (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ü–û)
‚îú‚îÄ‚îÄ proc/                   (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è FS —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö)
‚îÇ   ‚îú‚îÄ‚îÄ cpuinfo             (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ CPU)
‚îÇ   ‚îú‚îÄ‚îÄ meminfo             (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–º—è—Ç–∏)
‚îÇ   ‚îî‚îÄ‚îÄ 1234/               (–ø–∞–ø–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å PID 1234)
‚îú‚îÄ‚îÄ root/                   (–¥–æ–º–∞—à–Ω—è—è –ø–∞–ø–∫–∞ root)
‚îú‚îÄ‚îÄ run/                    (runtime –¥–∞–Ω–Ω—ã–µ)
‚îú‚îÄ‚îÄ sbin/                   (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã)
‚îú‚îÄ‚îÄ srv/                    (–¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å–æ–≤)
‚îú‚îÄ‚îÄ sys/                    (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è FS –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —è–¥—Ä–æ–º)
‚îú‚îÄ‚îÄ tmp/                    (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ)
‚îú‚îÄ‚îÄ usr/                    (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –¥–∞–Ω–Ω—ã–µ)
‚îÇ   ‚îú‚îÄ‚îÄ bin/                (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã)
‚îÇ   ‚îú‚îÄ‚îÄ lib/                (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ local/              (–ª–æ–∫–∞–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ü–û)
‚îÇ   ‚îî‚îÄ‚îÄ share/              (–æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ)
‚îî‚îÄ‚îÄ var/                    (–∏–∑–º–µ–Ω—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ)
    ‚îú‚îÄ‚îÄ log/                (–ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
    ‚îÇ   ‚îú‚îÄ‚îÄ nginx/          (–ª–æ–≥–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞)
    ‚îÇ   ‚îú‚îÄ‚îÄ auth.log        (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
    ‚îÇ   ‚îî‚îÄ‚îÄ syslog          (—Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
    ‚îú‚îÄ‚îÄ www/                (–≤–µ–±-–∫–æ–Ω—Ç–µ–Ω—Ç)
    ‚îú‚îÄ‚îÄ lib/                (–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
    ‚îî‚îÄ‚îÄ tmp/                (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
```

### –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏:**

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
pwd
# –†–µ–∑—É–ª—å—Ç–∞—Ç: /home/developer/projects

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É (–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å)
cd /var/log/nginx
pwd
# –†–µ–∑—É–ª—å—Ç–∞—Ç: /var/log/nginx

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å)
cd ../../www/html
pwd
# –†–µ–∑—É–ª—å—Ç–∞—Ç: /var/www/html

# –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏
cd ~           # –¥–æ–º–∞—à–Ω—è—è –ø–∞–ø–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
cd -           # –ø—Ä–µ–¥—ã–¥—É—â–∞—è –ø–∞–ø–∫–∞
cd ../         # –Ω–∞ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å –≤–≤–µ—Ä—Ö
cd ../../      # –Ω–∞ –¥–≤–∞ —É—Ä–æ–≤–Ω—è –≤–≤–µ—Ä—Ö

# –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
ls                    # –ø—Ä–æ—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
ls -l                # –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫
ls -la               # –≤–∫–ª—é—á–∞—è —Å–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã
ls -lh               # —Ä–∞–∑–º–µ—Ä—ã –≤ —á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ
ls -lt               # —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
ls -lS               # —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–∞–∑–º–µ—Ä—É

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ ls -la:
# drwxr-xr-x  2 user group  4096 Jan 15 10:30 documents
# -rw-r--r--  1 user group  1024 Jan 15 09:15 config.txt
# -rwxr-xr-x  1 user group  2048 Jan 14 16:45 script.sh
```

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ ‚Äî –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ Linux –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ç—Ä–µ—Ö —Ç–∏–ø–∞—Ö –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Ç—Ä–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:

-rwxr-xr--
‚îÇ‚îî‚î¨‚îò‚îî‚î¨‚îò‚îî‚î¨‚îò
‚îÇ ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ –î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (others): r-- (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
‚îÇ ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ì—Ä—É–ø–ø–∞ (group): r-x (—á—Ç–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –í–ª–∞–¥–µ–ª–µ—Ü (owner): rwx (–≤—Å–µ –ø—Ä–∞–≤–∞)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –¢–∏–ø —Ñ–∞–π–ª–∞: - (–æ–±—ã—á–Ω—ã–π —Ñ–∞–π–ª), d (–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è), l (—Å—Å—ã–ª–∫–∞)

–ü—Ä–∞–≤–∞ –≤ —á–∏—Å–ª–æ–≤–æ–º –≤–∏–¥–µ:
r (read)    = 4
w (write)   = 2  
x (execute) = 1

rwx = 4+2+1 = 7
r-x = 4+0+1 = 5
r-- = 4+0+0 = 4

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º: -rwxr-xr-- = 754
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∞–≤–∞–º–∏:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤
touch script.sh
echo "#!/bin/bash" > script.sh
echo "echo 'Hello World'" >> script.sh

# –ü—Ä–æ–≤–µ—Ä–∏–º –ø—Ä–∞–≤–∞
ls -l script.sh
# -rw-r--r-- 1 user group 32 Jan 15 10:30 script.sh

# –§–∞–π–ª –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –¥–æ–±–∞–≤–∏–º –ø—Ä–∞–≤–∞
chmod +x script.sh
ls -l script.sh
# -rwxr-xr-x 1 user group 32 Jan 15 10:30 script.sh

# –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
./script.sh
# Hello World

# –†–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∞–≤
chmod 755 script.sh      # rwxr-xr-x
chmod u+x script.sh      # –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü—É
chmod g-w script.sh      # —É–±—Ä–∞—Ç—å –∑–∞–ø–∏—Å—å –≥—Ä—É–ø–ø–µ
chmod o=r script.sh      # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö

# –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤
chmod -R 644 /var/www/html/   # –≤—Å–µ —Ñ–∞–π–ª—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è
find /var/www -type d -exec chmod 755 {} \;   # –ø–∞–ø–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –æ–±—Ö–æ–¥–∞
find /var/www -type f -exec chmod 644 {} \;   # —Ñ–∞–π–ª—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è
```

### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

```bash
# SUID (Set User ID) - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç –∏–º–µ–Ω–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ñ–∞–π–ª–∞
chmod u+s /usr/bin/passwd
ls -l /usr/bin/passwd
# -rwsr-xr-x 1 root root 68208 Jan 15 10:30 /usr/bin/passwd
#    ^-- s –≤–º–µ—Å—Ç–æ x –æ–∑–Ω–∞—á–∞–µ—Ç SUID

# SGID (Set Group ID) - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç –∏–º–µ–Ω–∏ –≥—Ä—É–ø–ø—ã
chmod g+s /shared/folder
ls -ld /shared/folder
# drwxrwsr-x 2 user group 4096 Jan 15 10:30 /shared/folder
#       ^-- s –≤–º–µ—Å—Ç–æ x –æ–∑–Ω–∞—á–∞–µ—Ç SGID

# Sticky bit - —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å —Ñ–∞–π–ª—ã
chmod +t /tmp
ls -ld /tmp
# drwxrwxrwt 8 root root 4096 Jan 15 10:30 /tmp
#         ^-- t –≤–º–µ—Å—Ç–æ x –æ–∑–Ω–∞—á–∞–µ—Ç sticky bit
```

### –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏

**–°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
mkdir project
mkdir -p project/src/main/java    # —Å–æ–∑–¥–∞—Ç—å –≤—Å—é –∏–µ—Ä–∞—Ä—Ö–∏—é
mkdir -p logs/{nginx,app,db}       # —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞–ø–æ–∫

# –†–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
# project/
# ‚îú‚îÄ‚îÄ src/
# ‚îÇ   ‚îî‚îÄ‚îÄ main/
# ‚îÇ       ‚îî‚îÄ‚îÄ java/
# ‚îî‚îÄ‚îÄ logs/
#     ‚îú‚îÄ‚îÄ nginx/
#     ‚îú‚îÄ‚îÄ app/
#     ‚îî‚îÄ‚îÄ db/

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
touch app.py                       # –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª
touch {config,logs,data}.txt       # –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤
echo "print('Hello')" > app.py     # —Ñ–∞–π–ª —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
cp app.py backup/                  # –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª
cp -r project/ backup/             # –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
cp -a project/ backup/             # –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∞—Ç—Ä–∏–±—É—Ç–æ–≤

# –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
mv app.py main.py                  # –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å
mv main.py src/                    # –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å
mv src/ application/               # –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–∞–ø–∫—É

# –£–¥–∞–ª–µ–Ω–∏–µ
rm file.txt                        # —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª
rm -r folder/                      # —É–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É
rm -rf folder/                     # –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
rm *.tmp                          # —É–¥–∞–ª–∏—Ç—å –ø–æ –º–∞—Å–∫–µ
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–æ–≤

```bash
# –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
cat config.txt                     # –≤–µ—Å—å —Ñ–∞–π–ª —Å—Ä–∞–∑—É
cat file1.txt file2.txt           # –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤

# –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
less access.log                    # –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
more access.log                    # –ø—Ä–æ—Å—Ç–æ–π –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä

# –ù–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞
head -10 error.log                 # –ø–µ—Ä–≤—ã–µ 10 —Å—Ç—Ä–æ–∫
head -c 100 binary.dat             # –ø–µ—Ä–≤—ã–µ 100 –±–∞–π—Ç
tail -20 access.log                # –ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 —Å—Ç—Ä–æ–∫
tail -f error.log                  # —Å–ª–µ–¥–∏—Ç—å –∑–∞ –Ω–æ–≤—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏

# –ù—É–º–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–æ–∫
cat -n script.py                   # —Å –Ω–æ–º–µ—Ä–∞–º–∏ —Å—Ç—Ä–æ–∫
nl script.py                       # –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±

# –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
cat -A file.txt                    # –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã
cat -T file.txt                    # –ø–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±—ã –∫–∞–∫ ^I
```

### –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

**–ö–æ–º–∞–Ω–¥–∞ find ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∏—Å–∫–∞:**

```bash
# –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
find /var -name "*.log"                    # –≤—Å–µ .log —Ñ–∞–π–ª—ã
find . -name "config*"                     # —Ñ–∞–π–ª—ã –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å config
find /etc -iname "NGINX*"                  # —Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫

# –ü–æ–∏—Å–∫ –ø–æ —Ç–∏–ø—É
find /usr -type f -name "python*"          # —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã
find /var -type d -name "log*"             # —Ç–æ–ª—å–∫–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
find /tmp -type l                          # —Ç–æ–ª—å–∫–æ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏

# –ü–æ–∏—Å–∫ –ø–æ —Ä–∞–∑–º–µ—Ä—É
find /var/log -size +100M                  # —Ñ–∞–π–ª—ã –±–æ–ª—å—à–µ 100 –ú–ë
find . -size -1k                           # —Ñ–∞–π–ª—ã –º–µ–Ω—å—à–µ 1 –ö–ë
find /tmp -size +1G -size -2G               # —Ñ–∞–π–ª—ã –æ—Ç 1 –¥–æ 2 –ì–ë

# –ü–æ–∏—Å–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
find /var/log -mtime -7                     # –∏–∑–º–µ–Ω–µ–Ω—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
find /tmp -atime +30                        # –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å 30+ –¥–Ω–µ–π
find . -newer reference_file.txt            # –Ω–æ–≤–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

# –ü–æ–∏—Å–∫ –ø–æ –ø—Ä–∞–≤–∞–º
find /usr/bin -perm 755                     # —Ç–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∞ 755
find /var -perm -644                        # –º–∏–Ω–∏–º—É–º 644
find /tmp -perm /022                        # –ª—é–±–æ–π –∏–∑ –±–∏—Ç–æ–≤ –∑–∞–ø–∏—Å–∏ –¥–ª—è –≥—Ä—É–ø–ø—ã/–¥—Ä—É–≥–∏—Ö

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –Ω–∞–¥ –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
find /var/log -name "*.log" -exec ls -lh {} \;     # –ø–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏
find /tmp -name "*.tmp" -delete                     # —É–¥–∞–ª–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ
find . -name "*.py" -exec grep -l "import flask" {} \;  # –Ω–∞–π—Ç–∏ Python —Ñ–∞–π–ª—ã —Å Flask

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫
find /var/log -name "*.log" -size +10M -mtime -1    # –±–æ–ª—å—à–∏–µ –ª–æ–≥–∏ –∑–∞ —Å—É—Ç–∫–∏
```

**–ö–æ–º–∞–Ω–¥–∞ locate ‚Äî –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫:**

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–æ–±—ã—á–Ω–æ –¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
sudo updatedb

# –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫
locate nginx.conf                           # –≤—Å–µ —Ñ–∞–π–ª—ã nginx.conf
locate "*.py" | head -10                   # –ø–µ—Ä–≤—ã–µ 10 Python —Ñ–∞–π–ª–æ–≤
locate -i python                          # —Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫
```

### –ü–æ–∏—Å–∫ –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–æ–≤ —Å grep

**–ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫:**

```bash
# –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫
grep "error" /var/log/nginx/error.log       # –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫–∏ —Å "error"
grep -i "Error" application.log             # —Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫
grep -v "INFO" app.log                      # –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –ö–†–û–ú–ï —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö "INFO"

# –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–∏—Å–∫–∞
grep -A 3 "ERROR" app.log                   # –ø–æ–∫–∞–∑–∞—Ç—å 3 —Å—Ç—Ä–æ–∫–∏ –ø–æ—Å–ª–µ
grep -B 2 "FATAL" app.log                   # –ø–æ–∫–∞–∑–∞—Ç—å 2 —Å—Ç—Ä–æ–∫–∏ –¥–æ
grep -C 5 "Exception" app.log               # –ø–æ–∫–∞–∑–∞—Ç—å 5 —Å—Ç—Ä–æ–∫ –¥–æ –∏ –ø–æ—Å–ª–µ

# –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫
grep -r "database" /etc/                    # –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º –≤ /etc/
grep -r --include="*.py" "import" ./        # —Ç–æ–ª—å–∫–æ –≤ Python —Ñ–∞–π–ª–∞—Ö
grep -r --exclude="*.log" "password" ./     # –∏—Å–∫–ª—é—á–∏—Ç—å –ª–æ–≥ —Ñ–∞–π–ª—ã
```

**–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ grep:**

```bash
# –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
grep "^Error" app.log                       # —Å—Ç—Ä–æ–∫–∏ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å "Error"
grep "failed$" app.log                      # —Å—Ç—Ä–æ–∫–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ "failed"
grep "[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}" access.log  # IP –∞–¥—Ä–µ—Å–∞
grep -E "error|warning|fatal" app.log       # –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

# –ü–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
grep -n "Exception" app.log                 # —Å –Ω–æ–º–µ—Ä–∞–º–∏ —Å—Ç—Ä–æ–∫
grep -c "GET" access.log                    # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
grep -l "import flask" *.py                 # —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤
grep -H "error" *.log                       # —Å –∏–º–µ–Ω–∞–º–∏ —Ñ–∞–π–ª–æ–≤

# –ü–æ–∏—Å–∫ IP –∞–¥—Ä–µ—Å–æ–≤ –∏ URL
grep -oE '\b[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\b' access.log
grep -oE 'https?://[^\s]+' data.txt
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å awk –∏ sed

**awk ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞:**

```bash
# –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
awk '{print $1}' access.log                 # –ø–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü (IP –∞–¥—Ä–µ—Å–∞)
awk '{print $1, $7}' access.log             # IP –∏ URL
awk '{print NF}' file.txt                   # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ
awk '{print NR, $0}' file.txt               # –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
awk '$9 == 404' access.log                  # —Ç–æ–ª—å–∫–æ 404 –æ—à–∏–±–∫–∏
awk '$10 > 1000' access.log                 # –æ—Ç–≤–µ—Ç—ã –±–æ–ª—å—à–µ 1000 –±–∞–π—Ç
awk '/ERROR/ {print $1, $3}' app.log        # –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫ —Å ERROR

# –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥—Å—á–µ—Ç
awk '{sum += $10} END {print sum}' access.log           # —Å—É–º–º–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
awk '{count[$1]++} END {for(ip in count) print ip, count[ip]}' access.log  # –ø–æ–¥—Å—á–µ—Ç –ø–æ IP

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞
awk '{printf "%-15s %10s\n", $1, $7}' access.log       # –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥
```

**sed ‚Äî –ø–æ—Ç–æ–∫–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä:**

```bash
# –ó–∞–º–µ–Ω–∞ —Ç–µ–∫—Å—Ç–∞
sed 's/old/new/' file.txt                   # –∑–∞–º–µ–Ω–∏—Ç—å –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ
sed 's/old/new/g' file.txt                  # –∑–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –≤—Ö–æ–∂–¥–µ–Ω–∏—è
sed 's/old/new/2' file.txt                  # –∑–∞–º–µ–Ω–∏—Ç—å –≤—Ç–æ—Ä–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫
sed '/pattern/d' file.txt                   # —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ pattern
sed '1d' file.txt                           # —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É
sed '$d' file.txt                           # —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–æ–∫—É
sed '2,5d' file.txt                         # —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å 2 –ø–æ 5

# –í—Å—Ç–∞–≤–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
sed '2i\New line' file.txt                  # –≤—Å—Ç–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–µ—Ä–µ–¥ 2-–π
sed '2a\New line' file.txt                  # –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ—Å–ª–µ 2-–π
sed '$a\Last line' file.txt                 # –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–µ—Å—Ç–µ
sed -i 's/old/new/g' file.txt               # –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª
sed -i.bak 's/old/new/g' file.txt           # —Å–æ–∑–¥–∞—Ç—å backup
```

### –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ –∏ –ø–∞–π–ø—ã

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤ –≤ Linux:**

```
–ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç 3 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞:

stdin  (0) ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí [–ü—Ä–æ—Ü–µ—Å—Å] ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí stdout (1)
                     ‚îÇ
                     ‚Üì
                  stderr (2)

stdin  - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥ (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞)
stdout - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ (—ç–∫—Ä–∞–Ω)  
stderr - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—à–∏–±–æ–∫ (—ç–∫—Ä–∞–Ω)
```

**–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

```bash
# –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞
echo "Hello" > file.txt                     # –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª
echo "World" >> file.txt                    # –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü
ls > files.txt 2> errors.txt               # stdout –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª, stderr –≤ –¥—Ä—É–≥–æ–π
ls > all.txt 2>&1                          # –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å stdout –∏ stderr

# –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–≤–æ–¥–∞
wc -l < file.txt                            # –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏–∑ —Ñ–∞–π–ª–∞
sort < unsorted.txt > sorted.txt            # –≤–≤–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞, –≤—ã–≤–æ–¥ –≤ —Ñ–∞–π–ª

# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞
command > /dev/null                         # –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å stdout
command 2> /dev/null                        # –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å stderr
command > /dev/null 2>&1                    # –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë
```

**–ü–∞–π–ø—ã ‚Äî —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥:**

```bash
# –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã
ls -la | grep "Jan"                         # —Ñ–∞–π–ª—ã –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –≤ —è–Ω–≤–∞—Ä–µ
ps aux | grep nginx                         # –ø—Ä–æ—Ü–µ—Å—Å—ã nginx
cat access.log | grep "POST" | wc -l        # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ POST –∑–∞–ø—Ä–æ—Å–æ–≤

# –°–ª–æ–∂–Ω—ã–µ –ø–∞–π–ø–ª–∞–π–Ω—ã
cat access.log | awk '{print $1}' | sort | uniq -c | sort -nr | head -10
# ‚Üë –¢–æ–ø-10 IP –∞–¥—Ä–µ—Å–æ–≤ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø—Ä–æ—Å–æ–≤:
# 1. –ò–∑–≤–ª–µ—á—å IP –∞–¥—Ä–µ—Å–∞ (–ø–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü)
# 2. –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
# 3. –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –∏ –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å
# 4. –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É (—É–±—ã–≤–∞–Ω–∏–µ)
# 5. –ü–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–≤—ã–µ 10

# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
cat access.log | grep " 404 " | awk '{print $7}' | sort | uniq -c | sort -nr
# ‚Üë –°–∞–º—ã–µ —á–∞—Å—Ç—ã–µ 404 –æ—à–∏–±–∫–∏

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f /var/log/syslog | grep -i error | while read line; do echo "$(date): $line"; done
# ‚Üë –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
```

### –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∂–∞—Ç–∏–µ

**tar ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–≤
tar -cf archive.tar folder/                 # —Å–æ–∑–¥–∞—Ç—å tar –∞—Ä—Ö–∏–≤
tar -czf archive.tar.gz folder/             # —Å–æ–∑–¥–∞—Ç—å —Å gzip —Å–∂–∞—Ç–∏–µ–º
tar -cjf archive.tar.bz2 folder/            # —Å–æ–∑–¥–∞—Ç—å —Å bzip2 —Å–∂–∞—Ç–∏–µ–º
tar -cJf archive.tar.xz folder/             # —Å–æ–∑–¥–∞—Ç—å —Å xz —Å–∂–∞—Ç–∏–µ–º

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
tar -tf archive.tar                         # —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
tar -tvf archive.tar                        # –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ
tar -xf archive.tar                         # –∏–∑–≤–ª–µ—á—å –≤ —Ç–µ–∫—É—â—É—é –ø–∞–ø–∫—É
tar -xf archive.tar -C /destination/        # –∏–∑–≤–ª–µ—á—å –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –ø–∞–ø–∫—É
tar -xf archive.tar file.txt                # –∏–∑–≤–ª–µ—á—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞
tar -rf archive.tar newfile.txt             # –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞—Ä—Ö–∏–≤

# –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã
tar -czf backup_$(date +%Y%m%d).tar.gz /home/user/  # backup —Å –¥–∞—Ç–æ–π
tar -czf - folder/ | ssh user@server "cat > remote_backup.tar.gz"  # backup –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
```

**–î—Ä—É–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–∂–∞—Ç–∏—è:**

```bash
# gzip/gunzip
gzip file.txt                               # —Å–∂–∞—Ç—å —Ñ–∞–π–ª (—Å–æ–∑–¥–∞—Å—Ç file.txt.gz)
gunzip file.txt.gz                          # —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å
zcat file.txt.gz                            # –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –±–µ–∑ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏

# zip/unzip
zip -r archive.zip folder/                  # —Å–æ–∑–¥–∞—Ç—å zip –∞—Ä—Ö–∏–≤
unzip archive.zip                           # —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å
unzip -l archive.zip                        # —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –∞—Ä—Ö–∏–≤–µ

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–µ–ø–µ–Ω–∏ —Å–∂–∞—Ç–∏—è
ls -lh original_folder
tar -czf folder.tar.gz original_folder      # gzip
tar -cjf folder.tar.bz2 original_folder     # bzip2  
tar -cJf folder.tar.xz original_folder      # xz
ls -lh folder.tar.*
# –û–±—ã—á–Ω–æ: xz > bzip2 > gzip –ø–æ —Å—Ç–µ–ø–µ–Ω–∏ —Å–∂–∞—Ç–∏—è
#         gzip > bzip2 > xz –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏
```

---

## –≠—Ç–∞–ø 2: –ü—Ä–æ—Ü–µ—Å—Å—ã –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ Linux

–í Linux –≤—Å—ë —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º. –ö–∞–∂–¥–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º (PID).

```
–ò–µ—Ä–∞—Ä—Ö–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ Linux:

systemd (PID: 1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ NetworkManager (PID: 234)
‚îú‚îÄ‚îÄ sshd (PID: 456) ‚îÄ‚îÄ‚îÄ ssh —Å–µ—Å—Å–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ sshd (PID: 1001) ‚îÄ‚îÄ‚îÄ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å alice
‚îÇ   ‚îî‚îÄ‚îÄ sshd (PID: 1002) ‚îÄ‚îÄ‚îÄ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å bob
‚îú‚îÄ‚îÄ nginx (PID: 789)
‚îÇ   ‚îú‚îÄ‚îÄ nginx worker (PID: 790)
‚îÇ   ‚îú‚îÄ‚îÄ nginx worker (PID: 791)
‚îÇ   ‚îî‚îÄ‚îÄ nginx worker (PID: 792)
‚îî‚îÄ‚îÄ postgresql (PID: 567)
    ‚îú‚îÄ‚îÄ postgres writer (PID: 568)
    ‚îú‚îÄ‚îÄ postgres wal writer (PID: 569)
    ‚îî‚îÄ‚îÄ postgres autovacuum (PID: 570)
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**–ö–æ–º–∞–Ω–¥–∞ ps ‚Äî —Å–Ω–∏–º–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:**

```bash
# –ë–∞–∑–æ–≤—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
ps                                          # –ø—Ä–æ—Ü–µ—Å—Å—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
ps aux                                      # –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å–∏—Å—Ç–µ–º—ã
ps -ef                                      # –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ ps aux:
# USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
# root         1  0.0  0.4 168548  9012 ?        Ss   10:30   0:01 /sbin/init
# www-data   789  0.1  0.8  55968  17284 ?       S    10:31   0:00 nginx: master
# www-data   790  0.0  0.4  56420  8192 ?        S    10:31   0:00 nginx: worker

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep nginx                         # —Ç–æ–ª—å–∫–æ nginx –ø—Ä–æ—Ü–µ—Å—Å—ã
ps aux | grep -v grep                       # –∏—Å–∫–ª—é—á–∏—Ç—å —Å–∞–º grep
pgrep nginx                                 # —Ç–æ–ª—å–∫–æ PID –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ nginx
pgrep -f "python.*app.py"                  # –ø–æ–∏—Å–∫ –ø–æ –ø–æ–ª–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ

# –î–µ—Ä–µ–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps auxf                                     # –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞
pstree                                      # –ø—Ä–æ—Å—Ç–æ–µ –¥–µ—Ä–µ–≤–æ
pstree -p                                   # —Å PID
pstree nginx                                # –¥–µ—Ä–µ–≤–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
```

**–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:**

```
STAT –∫–æ–ª–æ–Ω–∫–∞ –≤ ps aux:

D  - –ù–µ–ø—Ä–µ—Ä—ã–≤–∞–µ–º—ã–π —Å–æ–Ω (–æ–±—ã—á–Ω–æ I/O)
R  - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–ª–∏ –≥–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é  
S  - –ü—Ä–µ—Ä—ã–≤–∞–µ–º—ã–π —Å–æ–Ω (–æ–∂–∏–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è)
T  - –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
Z  - –ó–æ–º–±–∏ (–∑–∞–≤–µ—Ä—à–∏–ª—Å—è, –Ω–æ parent –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–ª exit status)

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏:
<  - –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
N  - –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç  
L  - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –ø–∞–º—è—Ç–∏
s  - –õ–∏–¥–µ—Ä —Å–µ—Å—Å–∏–∏
l  - –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π
+  - –í foreground –≥—Ä—É–ø–ø–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å top –∏ htop

**top ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä:**

```bash
top
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
# h - –ø–æ–º–æ—â—å
# q - –≤—ã—Ö–æ–¥
# M - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–∞–º—è—Ç–∏
# P - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ CPU
# k - —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
# 1 - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ CPU —è–¥—Ä–∞
# f - –≤—ã–±—Ä–∞—Ç—å –ø–æ–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

# –ó–∞–ø—É—Å–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
top -p 1234,5678                           # –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö PID
top -u nginx                               # –ø—Ä–æ—Ü–µ—Å—Å—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
top -d 2                                   # –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
```

**htop ‚Äî —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è top:**

```bash
htop
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
# - –¶–≤–µ—Ç–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
# - –ú—ã—à—å –ø–æ–¥–¥–µ—Ä–∂–∫–∞  
# - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
# - –î—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–π –≤–∏–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
# - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

# –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ htop:
# F3 - –ø–æ–∏—Å–∫
# F4 - —Ñ–∏–ª—å—Ç—Ä
# F5 - –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–π –≤–∏–¥
# F6 - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
# F9 - —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
# F10 - –≤—ã—Ö–æ–¥
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

**–°–∏–≥–Ω–∞–ª—ã –≤ Linux:**

```
–û—Å–Ω–æ–≤–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã:

SIGTERM (15) - –í–µ–∂–ª–∏–≤–∞—è –ø—Ä–æ—Å—å–±–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
SIGKILL (9)  - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ (–Ω–µ–ª—å–∑—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å)
SIGHUP (1)   - –ü–µ—Ä–µ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
SIGSTOP (19) - –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
SIGCONT (18) - –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
SIGINT (2)   - –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ (Ctrl+C)
SIGQUIT (3)  - Quit (Ctrl+\)
SIGUSR1 (10) - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–∏–≥–Ω–∞–ª 1
SIGUSR2 (12) - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–∏–≥–Ω–∞–ª 2
```

**–ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏:**

```bash
# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
kill 1234                                  # –ø–æ—Å–ª–∞—Ç—å SIGTERM –ø—Ä–æ—Ü–µ—Å—Å—É 1234
kill -9 1234                               # –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å (SIGKILL)
kill -HUP 1234                             # –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
killall nginx                              # –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã nginx
pkill -f "python.*app.py"                  # –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É –∫–æ–º–∞–Ω–¥—ã

# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
nohup python app.py &                      # –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ, —É—Å—Ç–æ–π—á–∏–≤–æ –∫ SIGHUP
python app.py &                            # –ø—Ä–æ—Å—Ç–æ –≤ —Ñ–æ–Ω–µ
disown                                     # –æ—Ç–≤—è–∑–∞—Ç—å –æ—Ç —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è–º–∏
jobs                                       # –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è
fg %1                                      # –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞–¥–∞–Ω–∏–µ 1 –Ω–∞ –ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω
bg %1                                      # –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ 1 –≤ —Ñ–æ–Ω–µ
Ctrl+Z                                     # –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã:**

```bash
# –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ nginx
sudo nginx -t                              # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo kill -HUP $(cat /var/run/nginx.pid)   # –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
watch -n 1 "ps aux | grep python"          # –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É

# –ó–∞–ø—É—Å–∫ –¥–æ–ª–≥–æ–π –∑–∞–¥–∞—á–∏
nohup python long_running_script.py > output.log 2>&1 &
echo $!                                    # PID –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

**–ü–∞–º—è—Ç—å —Å–∏—Å—Ç–µ–º—ã:**

```bash
# –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–º—è—Ç–∏
free -h
#               total        used        free      shared  buff/cache   available
# Mem:           8.0G        2.1G        1.2G        125M        4.7G        5.5G
# Swap:          2.0G          0B        2.0G

# –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞:
# total     - –æ–±—â–∏–π –æ–±—ä–µ–º RAM
# used      - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
# free      - —Å–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å  
# shared    - —Ä–∞–∑–¥–µ–ª—è–µ–º–∞—è –ø–∞–º—è—Ç—å (tmpfs, etc.)
# buff/cache - –±—É—Ñ–µ—Ä—ã –∏ –∫–µ—à —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
# available - –¥–æ—Å—Ç—É–ø–Ω–∞—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
cat /proc/meminfo | head -20

# –ü—Ä–æ—Ü–µ—Å—Å—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–∞–º—è—Ç–∏
ps aux --sort=-%mem | head -10

# –ö–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
pmap 1234                                  # –∫–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ 1234
pmap -x 1234                               # —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
```

**–î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ:**

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
df -h
# Filesystem      Size  Used Avail Use% Mounted on
# /dev/sda1        20G   15G  4.2G  79% /
# /dev/sda2       100G   45G   50G  48% /home
# tmpfs           4.0G     0  4.0G   0% /dev/shm

# –†–∞–∑–º–µ—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
du -h /var/log                             # —Ä–∞–∑–º–µ—Ä /var/log
du -sh /var/log/*                          # —Ä–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞/–ø–∞–ø–∫–∏
du -sh * | sort -hr                        # —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–∞–∑–º–µ—Ä—É

# –ü–æ–∏—Å–∫ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
find /var -type f -size +100M -exec ls -lh {} \; | sort -k5 -hr

# –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è inode
df -i                                      # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ inode
find /var -type f | wc -l                  # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤

# –°–∞–º—ã–µ –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –≤ —Å–∏—Å—Ç–µ–º–µ
find / -type f -size +1G -exec ls -lh {} \; 2>/dev/null
```

**I/O —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**

```bash
# iostat - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ I/O
iostat -x 1                                # –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
# Device            r/s     w/s    rkB/s    wkB/s
# sda              12.34    5.67   123.45    67.89

# iotop - —Ç–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ I/O
sudo iotop

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–æ–≤
cat /proc/diskstats

# –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã  
sudo iotop -o                              # —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
sudo iotop -P                              # –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–æ—Ü–µ—Å—Å–∞–º
```

### –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ CPU:**

```bash
# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ
lscpu
# Architecture:        x86_64
# CPU(s):              4
# Thread(s) per core:  2
# Core(s) per socket:  2
# Model name:          Intel Core i5-8250U

# –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
cat /proc/cpuinfo | grep "model name" | head -1
nproc                                      # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ CPU —è–¥–µ—Ä

# –ó–∞–≥—Ä—É–∑–∫–∞ CPU
top -bn1 | grep "Cpu(s)"
# %Cpu(s):  5.2 us,  2.1 sy,  0.0 ni, 92.1 id,  0.6 wa,  0.0 hi,  0.0 si,  0.0 st

# –°—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã
uptime
# 14:30:15 up 2 days,  4:15,  3 users,  load average: 0.15, 0.25, 0.30

# Load average —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞:
# 0.15 - —Å—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞ 1 –º–∏–Ω—É—Ç—É
# 0.25 - —Å—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç  
# 0.30 - —Å—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞ 15 –º–∏–Ω—É—Ç
# –ó–Ω–∞—á–µ–Ω–∏—è –≤—ã—à–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ CPU —è–¥–µ—Ä –æ–∑–Ω–∞—á–∞—é—Ç –æ—á–µ—Ä–µ–¥—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏:**

```bash
# PCI —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
lspci                                      # –≤—Å–µ PCI —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
lspci | grep -i network                    # —Å–µ—Ç–µ–≤—ã–µ –∫–∞—Ä—Ç—ã
lspci | grep -i vga                        # –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã

# USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
lsusb

# –ë–ª–æ—á–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–¥–∏—Å–∫–∏)
lsblk
# NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
# sda      8:0    0   20G  0 disk 
# ‚îú‚îÄsda1   8:1    0    1G  0 part /boot
# ‚îî‚îÄsda2   8:2    0   19G  0 part /

# –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∏—Å–∫–∞—Ö
sudo fdisk -l
sudo parted -l
```

### –°–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–±–∞–∑–æ–≤—ã–π –æ–±–∑–æ—Ä)

```bash
# –°–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
netstat -tuln                              # —Å–ª—É—à–∞—é—â–∏–µ –ø–æ—Ä—Ç—ã
netstat -tun                               # –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
ss -tuln                                   # —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ netstat

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
cat /proc/net/dev
ip -s link show                            # —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

# –ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç
lsof -i :80                                # —á—Ç–æ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 80
lsof -i :443                               # —á—Ç–æ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 443
sudo netstat -tlnp | grep :22              # —á—Ç–æ —Å–ª—É—à–∞–µ—Ç SSH –ø–æ—Ä—Ç

# –°–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –ø—Ä–æ—Ü–µ—Å—Å–∞–º
sudo lsof -i                               # –≤—Å–µ —Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
sudo lsof -i -P                            # —Å –ø–æ—Ä—Ç–∞–º–∏ –≤–º–µ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–π —Å–µ—Ä–≤–∏—Å–æ–≤
```

---

## –≠—Ç–∞–ø 3: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Linux

Linux ‚Äî —ç—Ç–æ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —Ä–∞–∑–≤–∏—Ç–æ–π —Å–∏—Å—Ç–µ–º–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```
–£—Ä–æ–≤–Ω–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ Linux:

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (alice) ‚îÄ‚îÄ‚Üí –ì—Ä—É–ø–ø—ã (developers, www-data) ‚îÄ‚îÄ‚Üí –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
         ‚Üì                           ‚Üì                            ‚Üì
    –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è            –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è                 –§–∞–π–ª–æ–≤—ã–µ –ø—Ä–∞–≤–∞
         ‚Üì                           ‚Üì                            ‚Üì
    (/etc/passwd)           (/etc/group)              (rwxrwxrwx)
         ‚Üì                           ‚Üì                            ‚Üì
        sudo                   Capability                   ACL
         ‚Üì                           ‚Üì                            ‚Üì
    (/etc/sudoers)            (setcap)                (setfacl/getfacl)
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo useradd -m -s /bin/bash alice         # —Å–æ–∑–¥–∞—Ç—å —Å –¥–æ–º–∞—à–Ω–µ–π –ø–∞–ø–∫–æ–π –∏ bash
sudo useradd -m -s /bin/bash -G sudo bob   # —Å–æ–∑–¥–∞—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É sudo
sudo useradd -r -s /bin/false nginx        # —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ –æ–±–æ–ª–æ—á–∫–∏

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è
sudo passwd alice                          # –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è
echo "alice:newpassword" | sudo chpasswd   # —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo usermod -aG docker alice              # –¥–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -s /bin/zsh alice             # —Å–º–µ–Ω–∏—Ç—å –æ–±–æ–ª–æ—á–∫—É –Ω–∞ zsh
sudo usermod -L alice                      # –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å
sudo usermod -U alice                      # —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å

# –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo userdel alice                         # —É–¥–∞–ª–∏—Ç—å –±–µ–∑ –¥–æ–º–∞—à–Ω–µ–π –ø–∞–ø–∫–∏
sudo userdel -r alice                      # —É–¥–∞–ª–∏—Ç—å —Å –¥–æ–º–∞—à–Ω–µ–π –ø–∞–ø–∫–æ–π

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
id alice                                   # –≥—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è alice
whoami                                     # —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
who                                        # –∫—Ç–æ —Å–µ–π—á–∞—Å –≤ —Å–∏—Å—Ç–µ–º–µ
w                                          # –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
last                                       # –∏—Å—Ç–æ—Ä–∏—è –≤—Ö–æ–¥–æ–≤ –≤ —Å–∏—Å—Ç–µ–º—É
```

**–§–∞–π–ª—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:**

```bash
# /etc/passwd - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
cat /etc/passwd | grep alice
# alice:x:1001:1001:Alice Smith,,,:/home/alice:/bin/bash
#   ‚Üë   ‚Üë  ‚Üë    ‚Üë    ‚Üë               ‚Üë           ‚Üë
# –∏–º—è –ø–∞—Ä–æ–ª—å UID GID –ø–æ–ª–Ω–æ–µ_–∏–º—è  –¥–æ–º–∞—à–Ω—è—è_–ø–∞–ø–∫–∞ –æ–±–æ–ª–æ—á–∫–∞

# /etc/shadow - –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ (—Ç–æ–ª—å–∫–æ root)
sudo cat /etc/shadow | grep alice
# alice:$6$rounds=656000$salt$hash:18000:0:99999:7:::

# /etc/group - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–∞—Ö
cat /etc/group | grep docker
# docker:x:999:alice,bob
#   ‚Üë    ‚Üë ‚Üë   ‚Üë
# –≥—Ä—É–ø–ø–∞ –ø–∞—Ä–æ–ª—å GID —É—á–∞—Å—Ç–Ω–∏–∫–∏

# /etc/gshadow - –ø–∞—Ä–æ–ª–∏ –≥—Ä—É–ø–ø
sudo cat /etc/gshadow | grep docker
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏

**–°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä—É–ø–ø:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
sudo groupadd developers                   # —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
sudo groupadd -g 2000 webdev               # —Å–æ–∑–¥–∞—Ç—å —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º GID

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≥—Ä—É–ø–ø—ã
sudo gpasswd -a alice developers           # –¥–æ–±–∞–≤–∏—Ç—å alice –≤ developers
sudo gpasswd -A alice developers           # —Å–¥–µ–ª–∞—Ç—å alice –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≥—Ä—É–ø–ø—ã
sudo gpasswd -d alice developers           # —É–¥–∞–ª–∏—Ç—å alice –∏–∑ developers

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
sudo usermod -aG developers alice          # –¥–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É
newgrp developers                          # –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≥—Ä—É–ø–ø—É

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–∞—Ö
groups alice                               # –≥—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è alice
id -G alice                                # GID –≥—Ä—É–ø–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è alice
getent group developers                    # –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ
```

### –°–∏—Å—Ç–µ–º–∞ sudo

sudo –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –æ—Ç –∏–º–µ–Ω–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–±—ã—á–Ω–æ root):

```
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ sudo:

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚îÄ‚îÄ‚Üí sudo ‚îÄ‚îÄ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ /etc/sudoers ‚îÄ‚îÄ‚Üí –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
     ‚Üì              ‚Üì              ‚Üì                         ‚Üì
   alice         –∫–æ–º–∞–Ω–¥–∞      –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞            –æ—Ç –∏–º–µ–Ω–∏ root
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ sudo:**

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ sudoers (–¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ visudo!)
sudo visudo

# –ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ sudoers:
# –ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –≥—Ä—É–ø–ø—ã sudo
%sudo ALL=(ALL:ALL) ALL

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å nginx –±–µ–∑ –ø–∞—Ä–æ–ª—è
alice ALL=(ALL) NOPASSWD: /bin/systemctl restart nginx, /bin/systemctl reload nginx

# –ì—Ä—É–ø–ø–∞ –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–º
%webadmin ALL=(ALL) NOPASSWD: /usr/sbin/nginx, /bin/systemctl * nginx

# –ó–∞–ø—Ä–µ—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
alice ALL=(ALL) ALL, !/bin/su, !/usr/bin/passwd root

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
alice ALL=(ALL) NOPASSWD: /bin/systemctl restart nginx
Defaults:alice timestamp_timeout=5

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ sudo —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
sudo -l                                    # –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
sudo -u alice command                      # –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç –∏–º–µ–Ω–∏ alice
sudo -g developers command                 # –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –≥—Ä—É–ø–ø—ã developers
sudo -i                                    # –ø–æ–ª–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞ root
sudo -s                                    # –æ–±–æ–ª–æ—á–∫–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
```

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
# su - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
su alice                                   # –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ alice (–Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
su - alice                                 # –ø–æ–ª–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ (—á–∏—Å—Ç–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
su -c "command" alice                      # –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –æ—Ç –∏–º–µ–Ω–∏ alice

# –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
su - postgres -c "psql -l"                # –≤—ã–ø–æ–ª–Ω–∏—Ç—å psql –æ—Ç –∏–º–µ–Ω–∏ postgres
su - www-data -s /bin/bash                 # –æ–±–æ–ª–æ—á–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ bash

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
sudo env                                   # –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏ sudo
su - alice -c env                          # –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏ su
```

### SSH –∏ —É–¥–∞–ª–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø

SSH ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞–º–∏:

```
SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:

–ö–ª–∏–µ–Ω—Ç ‚îÄ‚îÄ‚Üí [–ò–Ω—Ç–µ—Ä–Ω–µ—Ç] ‚îÄ‚îÄ‚Üí SSH —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 22) ‚îÄ‚îÄ‚Üí –û–±–æ–ª–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ‚Üì                           ‚Üì                        ‚Üì
 ssh alice@server         sshd –ø—Ä–æ—Ü–µ—Å—Å              bash/zsh/fish
   ‚Üì                           ‚Üì                        ‚Üì
–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è            –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–π          –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
(–ø–∞—Ä–æ–ª—å/–∫–ª—é—á)             ~/.ssh/authorized_keys
```

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SSH –∫–ª—é—á–∞–º–∏:**

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–≤–æ–π –ø–∞—Ä—ã
ssh-keygen -t rsa -b 4096 -C "alice@company.com"
ssh-keygen -t ed25519 -C "alice@company.com"      # –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º

# –ö–ª—é—á–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ ~/.ssh/:
# ~/.ssh/id_rsa      - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–ù–ò–ö–û–ì–î–ê –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å!)
# ~/.ssh/id_rsa.pub  - –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å)

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh-copy-id alice@server.com                      # –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
ssh-copy-id -i ~/.ssh/specific_key.pub alice@server.com

# –†—É—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
cat ~/.ssh/id_rsa.pub | ssh alice@server.com "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
chmod 700 ~/.ssh                                  # –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É .ssh
chmod 600 ~/.ssh/authorized_keys                  # –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª –∫–ª—é—á–µ–π
```

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH:**

```bash
# –ë–∞–∑–æ–≤—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ssh alice@server.com                              # –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –ø–∞—Ä–æ–ª–µ–º/–∫–ª—é—á–æ–º
ssh -p 2222 alice@server.com                      # –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç
ssh -i ~/.ssh/specific_key alice@server.com       # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —É–¥–∞–ª–µ–Ω–Ω–æ
ssh alice@server.com "ls -la"                     # –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –∏ –≤—ã–π—Ç–∏
ssh alice@server.com "cd /var/log && tail -f nginx/access.log"

# –¢—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤)
ssh -L 8080:localhost:80 alice@server.com         # –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç 8080 -> —É–¥–∞–ª–µ–Ω–Ω—ã–π 80
ssh -R 9090:localhost:3000 alice@server.com       # —É–¥–∞–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç 9090 -> –ª–æ–∫–∞–ª—å–Ω—ã–π 3000
ssh -D 1080 alice@server.com                      # SOCKS proxy —á–µ—Ä–µ–∑ SSH

# –ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤
scp file.txt alice@server.com:/home/alice/         # –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp -r folder/ alice@server.com:/home/alice/       # –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É
scp alice@server.com:/var/log/app.log ./           # —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª —Å —Å–µ—Ä–≤–µ—Ä–∞

# rsync –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
rsync -avz folder/ alice@server.com:/backup/       # —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–∂–∞—Ç–∏–µ–º
rsync -avz --delete local/ remote:/backup/         # —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –ª–∏—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SSH –∫–ª–∏–µ–Ω—Ç–∞:**

```bash
# ~/.ssh/config - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
cat > ~/.ssh/config << EOF
# –°–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
Host dev
    HostName dev.company.com
    User alice
    Port 2222
    IdentityFile ~/.ssh/dev_key

# –ü—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä
Host prod  
    HostName prod.company.com
    User deploy
    IdentityFile ~/.ssh/prod_key
    StrictHostKeyChecking yes

# –í—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –∫–æ–º–ø–∞–Ω–∏–∏
Host *.company.com
    User alice
    Compression yes
    ServerAliveInterval 60
EOF

chmod 600 ~/.ssh/config

# –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –ø—Ä–æ—Å—Ç–æ:
ssh dev                                            # –≤–º–µ—Å—Ç–æ ssh -p 2222 alice@dev.company.com
ssh prod                                           # –≤–º–µ—Å—Ç–æ ssh deploy@prod.company.com
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH —Å–µ—Ä–≤–µ—Ä–∞:**

```bash
# /etc/ssh/sshd_config - –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
sudo nano /etc/ssh/sshd_config

# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
Port 2222                                         # –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç
PermitRootLogin no                                # –∑–∞–ø—Ä–µ—Ç –≤—Ö–æ–¥–∞ –ø–æ–¥ root
PasswordAuthentication no                         # —Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏, –±–µ–∑ –ø–∞—Ä–æ–ª–µ–π
PubkeyAuthentication yes                          # —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫–ª—é—á–∏
AuthorizedKeysFile .ssh/authorized_keys           # —Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏
MaxAuthTries 3                                    # –º–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
ClientAliveInterval 300                           # —Ç–∞–π–º-–∞—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
ClientAliveCountMax 2                             # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
AllowUsers alice bob                              # —Ç–æ–ª—å–∫–æ —ç—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
DenyUsers guest                                   # –∑–∞–ø—Ä–µ—Ç–∏—Ç—å guest
AllowGroups ssh-users                             # —Ç–æ–ª—å–∫–æ –≥—Ä—É–ø–ø–∞ ssh-users

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
sudo systemctl restart sshd
sudo systemctl status sshd                        # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (ACL)

Access Control Lists –ø–æ–∑–≤–æ–ª—è—é—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –±–æ–ª–µ–µ –≥–∏–±–∫–∏–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ ACL
mount | grep acl                                   # –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ ACL

# –ü—Ä–æ—Å–º–æ—Ç—Ä ACL
getfacl file.txt
# # file: file.txt
# # owner: alice
# # group: developers
# user::rw-
# user:bob:r--
# group::r--
# mask::r--
# other::---

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ACL
setfacl -m u:bob:rw file.txt                      # –¥–∞—Ç—å bob –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å
setfacl -m g:developers:rx folder/                # –¥–∞—Ç—å –≥—Ä—É–ø–ø–µ –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
setfacl -m o::--- file.txt                        # –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –æ—Å—Ç–∞–ª—å–Ω—ã–º

# –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ ACL
setfacl -R -m u:bob:rw folder/                     # —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
setfacl -d -m u:bob:rw folder/                     # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

# –£–¥–∞–ª–µ–Ω–∏–µ ACL
setfacl -x u:bob file.txt                          # —É–¥–∞–ª–∏—Ç—å ACL –¥–ª—è bob
setfacl -b file.txt                                # —É–¥–∞–ª–∏—Ç—å –≤—Å–µ ACL

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ ACL
getfacl source_file | setfacl --set-file=- target_file
```

### –ê—É–¥–∏—Ç –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ö–æ–¥–æ–≤ –≤ —Å–∏—Å—Ç–µ–º—É:**

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –≤—Ö–æ–¥—ã
last                                               # –∏—Å—Ç–æ—Ä–∏—è –≤—Ö–æ–¥–æ–≤
last alice                                         # –≤—Ö–æ–¥—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
lastb                                              # –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞ (—Ç—Ä–µ–±—É–µ—Ç sudo)

# –¢–µ–∫—É—â–∏–µ —Å–µ—Å—Å–∏–∏
who                                                # –∫—Ç–æ —Å–µ–π—á–∞—Å –≤ —Å–∏—Å—Ç–µ–º–µ
w                                                  # –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
users                                              # –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
sudo tail -f /var/log/auth.log                    # –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo grep "Failed password" /var/log/auth.log     # –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞
sudo grep "Accepted" /var/log/auth.log            # —É—Å–ø–µ—à–Ω—ã–µ –≤—Ö–æ–¥—ã

# SSH —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ª–æ–≥–∏
sudo grep "sshd" /var/log/auth.log | grep "Failed"
sudo grep "sshd" /var/log/auth.log | grep "Accepted"
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ sudo –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**

```bash
# –õ–æ–≥–∏ sudo
sudo tail -f /var/log/auth.log | grep sudo
sudo grep "sudo.*COMMAND" /var/log/auth.log       # –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ sudo

# –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ sudo (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –≤ sudoers)
# Defaults logfile="/var/log/sudo.log"
sudo tail -f /var/log/sudo.log
```

---

## –≠—Ç–∞–ø 4: –°–µ—Ç–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–ì–ª—É–±–æ–∫–∏–π —Ñ–æ–∫—É—Å)

### –°–µ—Ç–µ–≤–∞—è –º–æ–¥–µ–ª—å Linux

Linux —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫ TCP/IP —Å –±–æ–≥–∞—Ç—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```
–°–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ Linux:

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (HTTP, SSH, FTP, DNS)
    ‚Üì
–°–æ–∫–µ—Ç—ã (Berkeley Sockets API)
    ‚Üì
–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (TCP, UDP, SCTP)
    ‚Üì
–°–µ—Ç–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å (IP, ICMP, IGMP)
    ‚Üì
–ö–∞–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (Ethernet, WiFi)
    ‚Üì
–§–∏–∑–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å (–∫–∞–±–µ–ª—å, —Ä–∞–¥–∏–æ)

–ü—Ä–∏–º–µ—Ä HTTP –∑–∞–ø—Ä–æ—Å–∞:
Browser ‚Üí socket(AF_INET, SOCK_STREAM) ‚Üí TCP ‚Üí IP ‚Üí Ethernet ‚Üí Network
```

### –°–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –∞–¥—Ä–µ—Å–∞—Ü–∏—è

**–¢–∏–ø—ã —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:**

```
–§–∏–∑–∏—á–µ—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
eth0, eth1    - Ethernet –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
wlan0, wlan1  - WiFi –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
enp0s3        - –Ω–æ–≤–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ (en = ethernet, p0s3 = PCI slot)

–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
lo            - loopback (127.0.0.1)
docker0       - Docker bridge
br0           - bridge –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
tun0, tap0    - VPN —Ç—É–Ω–Ω–µ–ª–∏
veth*         - –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ ethernet –ø–∞—Ä—ã
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:**

```bash
# –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (iproute2)
ip addr show                                       # –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
ip addr show eth0                                  # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
ip link show                                       # —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ ip addr show:
# 2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP
#    link/ether 08:00:27:46:75:05 brd ff:ff:ff:ff:ff:ff
#    inet 192.168.1.100/24 brd 192.168.1.255 scope global dynamic eth0
#    inet6 fe80::a00:27ff:fe46:7505/64 scope link

# –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã (—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ, –Ω–æ –≤—Å—ë –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
ifconfig                                           # –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
ifconfig eth0                                      # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏
sudo ip link set eth0 up                           # –≤–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
sudo ip link set eth0 down                         # –≤—ã–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
sudo ip link set eth0 mtu 9000                     # –∏–∑–º–µ–Ω–∏—Ç—å MTU

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ IP –∞–¥—Ä–µ—Å–æ–≤
sudo ip addr add 192.168.1.200/24 dev eth0        # –¥–æ–±–∞–≤–∏—Ç—å IP
sudo ip addr del 192.168.1.200/24 dev eth0        # —É–¥–∞–ª–∏—Ç—å IP

# –ü—Å–µ–≤–¥–æ–Ω–∏–º—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (–∞–ª–∏–∞—Å—ã)
sudo ip addr add 192.168.1.201/24 dev eth0 label eth0:0
ifconfig eth0:0                                    # –ø—Ä–æ—Å–º–æ—Ç—Ä –∞–ª–∏–∞—Å–∞
```

**–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ç–∏:**

```bash
# Ubuntu/Debian (Netplan)
sudo nano /etc/netplan/01-netcfg.yaml
```

```yaml
network:
  version: 2
  renderer: networkd
  ethernets:
    eth0:
      dhcp4: false
      addresses:
        - 192.168.1.100/24
      gateway4: 192.168.1.1
      nameservers:
        addresses: [8.8.8.8, 1.1.1.1]
        search: [company.local]
```

```bash
# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo netplan try                                   # —Ç–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
sudo netplan apply                                 # –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

# CentOS/RHEL (NetworkManager –∏–ª–∏ ifcfg)
sudo nano /etc/sysconfig/network-scripts/ifcfg-eth0
```

```bash
# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ ifcfg-eth0
TYPE=Ethernet
BOOTPROTO=static
NAME=eth0
DEVICE=eth0
ONBOOT=yes
IPADDR=192.168.1.100
NETMASK=255.255.255.0
GATEWAY=192.168.1.1
DNS1=8.8.8.8
DNS2=1.1.1.1
```

### DNS –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–º—ë–Ω

DNS –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —á–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –≤ IP-–∞–¥—Ä–µ—Å–∞:

```
DNS –∑–∞–ø—Ä–æ—Å (example.com):

–ö–ª–∏–µ–Ω—Ç ‚Üí /etc/hosts ‚Üí –ª–æ–∫–∞–ª—å–Ω—ã–π DNS –∫–µ—à ‚Üí DNS —Å–µ—Ä–≤–µ—Ä ‚Üí –∫–æ—Ä–Ω–µ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã ‚Üí .com —Å–µ—Ä–≤–µ—Ä—ã ‚Üí example.com —Å–µ—Ä–≤–µ—Ä—ã
   ‚Üì         ‚Üì              ‚Üì               ‚Üì              ‚Üì                ‚Üì               ‚Üì
–ª–æ–∫–∞–ª—å–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω—ã–π      systemd        8.8.8.8     –∫–æ—Ä–Ω–µ–≤—ã–µ NS      .com NS       example.com NS
–ø—Ä–æ–≤–µ—Ä–∫–∞  —Ñ–∞–π–ª hosts   resolved                                                           ‚Üì
                                                                                    93.184.216.34
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è DNS:**

```bash
# /etc/hosts - –ª–æ–∫–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∏–º—ë–Ω
cat /etc/hosts
127.0.0.1       localhost
192.168.1.10    database.local db
192.168.1.20    cache.local redis
192.168.1.30    app1.local app2.local

# /etc/resolv.conf - DNS —Å–µ—Ä–≤–µ—Ä—ã
cat /etc/resolv.conf
nameserver 8.8.8.8
nameserver 1.1.1.1
search company.local
options timeout:2 attempts:3

# systemd-resolved (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ Ubuntu)
systemd-resolve --status
resolvectl status                                  # –Ω–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS —á–µ—Ä–µ–∑ systemd-resolved
sudo nano /etc/systemd/resolved.conf
[Resolve]
DNS=8.8.8.8 1.1.1.1
FallbackDNS=8.8.4.4 1.0.0.1
Domains=company.local
```

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ DNS:**

```bash
# nslookup - –±–∞–∑–æ–≤—ã–µ DNS –∑–∞–ø—Ä–æ—Å—ã
nslookup google.com
nslookup google.com 8.8.8.8                       # –∑–∞–ø—Ä–æ—Å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É DNS —Å–µ—Ä–≤–µ—Ä—É

# dig - –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç DNS –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
dig google.com                                     # A –∑–∞–ø–∏—Å—å
dig google.com MX                                  # MX –∑–∞–ø–∏—Å–∏ (–ø–æ—á—Ç–∞)
dig google.com NS                                  # NS –∑–∞–ø–∏—Å–∏ (–∏–º—è —Å–µ—Ä–≤–µ—Ä—ã)
dig google.com TXT                                 # TXT –∑–∞–ø–∏—Å–∏
dig @8.8.8.8 google.com                           # –∑–∞–ø—Ä–æ—Å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É

# –ü–æ–¥—Ä–æ–±–Ω—ã–π dig –∑–∞–ø—Ä–æ—Å
dig +trace google.com                              # –ø–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ DNS –∑–∞–ø—Ä–æ—Å–∞
dig +short google.com                              # —Ç–æ–ª—å–∫–æ IP –∞–¥—Ä–µ—Å
dig -x 8.8.8.8                                     # –æ–±—Ä–∞—Ç–Ω—ã–π DNS (PTR –∑–∞–ø–∏—Å—å)

# host - –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
host google.com                                    # –±–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
host -t MX google.com                              # MX –∑–∞–ø–∏—Å–∏
host -a google.com                                 # –≤—Å–µ –∑–∞–ø–∏—Å–∏

# –ö–µ—à DNS
sudo systemd-resolve --flush-caches                # –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à DNS
sudo resolvectl flush-caches                       # –Ω–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ DNS –∑–∞–ø—Ä–æ—Å–æ–≤
sudo tcpdump -i any port 53                        # –∑–∞—Ö–≤–∞—Ç DNS —Ç—Ä–∞—Ñ–∏–∫–∞
dig +trace google.com | grep -E "^[a-zA-Z]"        # —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ DNS —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞
```

### –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

–¢–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø–∞–∫–µ—Ç—ã:

```
–ö–æ–Ω—Ü–µ–ø—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:

–ü–∞–∫–µ—Ç ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ ‚Üí –í—ã–±–æ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞

–¢–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:
–°–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è    –®–ª—é–∑          –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å    –ú–µ—Ç—Ä–∏–∫–∞
192.168.1.0/24     0.0.0.0       eth0         0          (–ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å)
10.0.0.0/16        192.168.1.10  eth0         10         (–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–µ—Ç—å)
0.0.0.0/0          192.168.1.1   eth0         100        (–º–∞—Ä—à—Ä—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
ip route show                                      # —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
route -n                                           # –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞
netstat -rn                                        # –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤—ã–≤–æ–¥

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ ip route show:
# default via 192.168.1.1 dev eth0 proto dhcp metric 100
# 192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.100 metric 100

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
sudo ip route add 10.0.0.0/16 via 192.168.1.10    # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç
sudo ip route add default via 192.168.1.1          # –º–∞—Ä—à—Ä—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
sudo ip route add 172.16.0.0/12 dev tun0           # —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

# –£–¥–∞–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
sudo ip route del 10.0.0.0/16                      # —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç
sudo ip route del default                          # —É–¥–∞–ª–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

# –ú–∞—Ä—à—Ä—É—Ç—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
sudo ip route add 0.0.0.0/0 via 192.168.1.1 metric 100    # –æ—Å–Ω–æ–≤–Ω–æ–π —à–ª—é–∑
sudo ip route add 0.0.0.0/0 via 192.168.1.2 metric 200    # —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —à–ª—é–∑

# –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (Ubuntu)
sudo nano /etc/netplan/01-netcfg.yaml
```

```yaml
network:
  version: 2
  ethernets:
    eth0:
      addresses: [192.168.1.100/24]
      routes:
        - to: 10.0.0.0/16
          via: 192.168.1.10
        - to: 172.16.0.0/12
          via: 192.168.1.20
          metric: 200
```

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:**

```bash
# –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞
traceroute google.com                              # –ø–æ–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ google.com
tracepath google.com                               # –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
mtr google.com                                     # –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ traceroute:
# 1  192.168.1.1 (192.168.1.1)  1.234 ms  1.123 ms  1.456 ms
# 2  10.0.0.1 (10.0.0.1)  15.234 ms  14.123 ms  16.456 ms
# 3  203.0.113.1 (203.0.113.1)  25.234 ms  24.123 ms  26.456 ms

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–∏–º–æ—Å—Ç–∏
ping -c 4 google.com                               # 4 –ø–∞–∫–µ—Ç–∞ –∫ google.com
ping -c 4 -I eth0 google.com                      # —á–µ—Ä–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
ping6 -c 4 google.com                             # IPv6 ping

# –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
ip route get 8.8.8.8                              # –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∫ 8.8.8.8
# 8.8.8.8 via 192.168.1.1 dev eth0 src 192.168.1.100 uid 1000
```

### –ê–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:**

```bash
# netstat - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
netstat -tuln                                      # —Å–ª—É—à–∞—é—â–∏–µ –ø–æ—Ä—Ç—ã TCP/UDP
netstat -tun                                       # –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
netstat -tulnp                                     # —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (–Ω—É–∂–µ–Ω sudo –¥–ª—è —á—É–∂–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)

# –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Ñ–ª–∞–≥–æ–≤ netstat:
# -t: TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
# -u: UDP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è  
# -l: —Ç–æ–ª—å–∫–æ —Å–ª—É—à–∞—é—â–∏–µ –ø–æ—Ä—Ç—ã
# -n: —á–∏—Å–ª–æ–≤–æ–π –≤–∏–¥ (–Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—å –∏–º–µ–Ω–∞)
# -p: –ø–æ–∫–∞–∑–∞—Ç—å PID/–∏–º—è –ø—Ä–æ—Ü–µ—Å—Å–∞

# ss - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ netstat
ss -tuln                                           # —Å–ª—É—à–∞—é—â–∏–µ –ø–æ—Ä—Ç—ã
ss -tun                                            # –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
ss -tlnp                                           # —Å–ª—É—à–∞—é—â–∏–µ TCP –ø–æ—Ä—Ç—ã —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ ss -tlnp:
# State    Recv-Q Send-Q Local Address:Port  Peer Address:Port Process
# LISTEN   0      128    0.0.0.0:22           0.0.0.0:*     users:(("sshd",pid=1234,fd=3))
# LISTEN   0      128    0.0.0.0:80           0.0.0.0:*     users:(("nginx",pid=5678,fd=6))

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
ss state listening                                 # —Ç–æ–ª—å–∫–æ —Å–ª—É—à–∞—é—â–∏–µ
ss sport = :80                                     # –ø–æ—Ä—Ç 80
ss dport = :443                                    # —É–¥–∞–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç 443
ss src 192.168.1.100                              # —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ IP
ss dst 8.8.8.8                                    # –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É IP

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
ss -s                                              # –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
# Total: 1024 (kernel 1536)
# TCP:   12 (estab 3, closed 5, orphaned 0, synrecv 0, timewait 4/0), ports 0
```

**lsof –¥–ª—è —Å–µ—Ç–µ–≤–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**

```bash
# –í—Å–µ —Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
sudo lsof -i                                       # –≤—Å–µ —Å–µ—Ç–µ–≤—ã–µ —Ñ–∞–π–ª—ã
sudo lsof -i -P                                    # —Å –ø–æ—Ä—Ç–∞–º–∏ –≤–º–µ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–π —Å–µ—Ä–≤–∏—Å–æ–≤

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É
sudo lsof -i tcp                                   # —Ç–æ–ª—å–∫–æ TCP
sudo lsof -i udp                                   # —Ç–æ–ª—å–∫–æ UDP

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ—Ä—Ç—É
sudo lsof -i :80                                   # —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 80
sudo lsof -i :443                                  # —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 443
sudo lsof -i :22                                   # SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ—Ü–µ—Å—Å—É
sudo lsof -i -p 1234                              # —Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ 1234
sudo lsof -i -c nginx                              # —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è nginx

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
sudo lsof -i -s TCP:LISTEN                         # —Å–ª—É—à–∞—é—â–∏–µ TCP –ø–æ—Ä—Ç—ã
sudo lsof -i -s TCP:ESTABLISHED                    # —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
sudo lsof -i TCP:80 -s TCP:LISTEN                  # —á—Ç–æ —Å–ª—É—à–∞–µ—Ç TCP –ø–æ—Ä—Ç 80
sudo lsof -i @192.168.1.100                       # —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º IP
```

### –§–∞–π—Ä–≤–æ–ª –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞

Linux –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ —è–¥—Ä–∞:

```
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Netfilter/iptables:

–°–µ—Ç–µ–≤–æ–π –ø–∞–∫–µ—Ç ‚Üí Netfilter hooks ‚Üí iptables –ø—Ä–∞–≤–∏–ª–∞ ‚Üí –†–µ—à–µ–Ω–∏–µ (ACCEPT/DROP/REJECT)
       ‚Üì              ‚Üì                ‚Üì                    ‚Üì
   –≤—Ö–æ–¥—è—â–∏–π/        NF_PRE_ROUTING   —Ç–∞–±–ª–∏—Ü—ã:         —Ä–∞–∑—Ä–µ—à–∏—Ç—å/
   –∏—Å—Ö–æ–¥—è—â–∏–π/       NF_LOCAL_IN      - filter         –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å/
   –ø—Ä–æ—Ö–æ–¥—è—â–∏–π       NF_FORWARD       - nat            –æ—Ç–∫–ª–æ–Ω–∏—Ç—å
                   NF_LOCAL_OUT      - mangle
                   NF_POST_ROUTING   - raw
```

**iptables - –æ—Å–Ω–æ–≤—ã:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –ø—Ä–∞–≤–∏–ª
sudo iptables -L                                   # –≤—Å–µ —Ü–µ–ø–æ—á–∫–∏
sudo iptables -L INPUT                             # —Ü–µ–ø–æ—á–∫–∞ INPUT
sudo iptables -L -n                                # –±–µ–∑ —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞ –∏–º—ë–Ω
sudo iptables -L -v                                # —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
sudo iptables -L --line-numbers                    # —Å –Ω–æ–º–µ—Ä–∞–º–∏ –ø—Ä–∞–≤–∏–ª

# –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏:
# INPUT   - –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
# OUTPUT  - –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã  
# FORWARD - –ø—Ä–æ—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)

# –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT           # —Ä–∞–∑—Ä–µ—à–∏—Ç—å SSH
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT           # —Ä–∞–∑—Ä–µ—à–∏—Ç—å HTTP
sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT          # —Ä–∞–∑—Ä–µ—à–∏—Ç—å HTTPS
sudo iptables -A INPUT -i lo -j ACCEPT                       # —Ä–∞–∑—Ä–µ—à–∏—Ç—å loopback
sudo iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT  # —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞
sudo iptables -A INPUT -s 192.168.1.100 -j DROP             # –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å IP
sudo iptables -A INPUT -p tcp --dport 3306 -j DROP           # –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å MySQL –ø–æ—Ä—Ç
sudo iptables -A INPUT -j DROP                               # –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ

# –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
sudo iptables -D INPUT 3                                     # —É–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –Ω–æ–º–µ—Ä 3
sudo iptables -D INPUT -p tcp --dport 80 -j ACCEPT           # —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ
sudo iptables -F                                             # –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞
sudo iptables -F INPUT                                       # –æ—á–∏—Å—Ç–∏—Ç—å —Ü–µ–ø–æ—á–∫—É INPUT

# –ü–æ–ª–∏—Ç–∏–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
sudo iptables -P INPUT DROP                                  # –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
sudo iptables -P OUTPUT ACCEPT                               # —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
sudo iptables -P FORWARD DROP                                # –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—Ä–æ—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
```

**–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞ iptables:**

```bash
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ (rate limiting)
sudo iptables -A INPUT -p tcp --dport 22 -m limit --limit 3/minute --limit-burst 3 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 22 -j DROP             # –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ SSH –ø–æ–ø—ã—Ç–∫–∏

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
sudo iptables -A INPUT -j LOG --log-prefix "DROPPED: " --log-level 4
sudo iptables -A INPUT -j DROP

# Geo-blocking (—Å –º–æ–¥—É–ª–µ–º geoip)
sudo iptables -A INPUT -m geoip --src-cc CN,RU -j DROP       # –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω—ã

# –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–æ–≤
sudo iptables -A INPUT -p tcp --tcp-flags ALL NONE -j DROP   # null –ø–∞–∫–µ—Ç—ã
sudo iptables -A INPUT -p tcp --tcp-flags ALL ALL -j DROP    # xmas –ø–∞–∫–µ—Ç—ã
sudo iptables -A INPUT -p tcp --tcp-flags ALL FIN,URG,PSH -j DROP  # nmap —Å–∫–∞–Ω—ã

# NAT (Network Address Translation)
sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE    # –º–∞—Å–∫–∞—Ä–∞–¥–∏–Ω–≥
sudo iptables -t nat -A PREROUTING -p tcp --dport 8080 -j REDIRECT --to-port 80  # –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
```

**UFW - —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Ñ–∞–π—Ä–≤–æ–ª:**

```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ UFW
sudo ufw enable                                              # –≤–∫–ª—é—á–∏—Ç—å —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw --force enable                                      # –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

# –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
sudo ufw allow ssh                                           # —Ä–∞–∑—Ä–µ—à–∏—Ç—å SSH
sudo ufw allow 22/tcp                                        # –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
sudo ufw allow 80/tcp                                        # HTTP
sudo ufw allow 443/tcp                                       # HTTPS
sudo ufw allow from 192.168.1.0/24                          # —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–¥—Å–µ—Ç—å

# –ó–∞–ø—Ä–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞
sudo ufw deny 3306                                           # –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å MySQL
sudo ufw deny from 203.0.113.100                            # –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å IP

# –°–ª–æ–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
sudo ufw allow from 192.168.1.0/24 to any port 3306         # MySQL —Ç–æ–ª—å–∫–æ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
sudo ufw allow in on eth0 to any port 80                    # HTTP —Ç–æ–ª—å–∫–æ –Ω–∞ eth0
sudo ufw limit ssh                                           # –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å SSH (rate limiting)

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º–∏
sudo ufw status                                              # —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
sudo ufw status numbered                                     # —Å –Ω–æ–º–µ—Ä–∞–º–∏ –ø—Ä–∞–≤–∏–ª
sudo ufw delete 3                                            # —É–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –Ω–æ–º–µ—Ä 3
sudo ufw reset                                               # —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
sudo ufw logging on                                          # –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
sudo ufw logging high                                        # –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
tail -f /var/log/ufw.log                                     # –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞

**tcpdump - –∑–∞—Ö–≤–∞—Ç –ø–∞–∫–µ—Ç–æ–≤:**

```bash
# –ë–∞–∑–æ–≤—ã–π –∑–∞—Ö–≤–∞—Ç
sudo tcpdump -i eth0                                         # –∑–∞—Ö–≤–∞—Ç –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ eth0
sudo tcpdump -i any                                          # –∑–∞—Ö–≤–∞—Ç –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
sudo tcpdump -c 100                                          # –∑–∞—Ö–≤–∞—Ç–∏—Ç—å 100 –ø–∞–∫–µ—Ç–æ–≤

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É
sudo tcpdump -i eth0 tcp                                     # —Ç–æ–ª—å–∫–æ TCP
sudo tcpdump -i eth0 udp                                     # —Ç–æ–ª—å–∫–æ UDP
sudo tcpdump -i eth0 icmp                                    # —Ç–æ–ª—å–∫–æ ICMP (ping)

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ—Ä—Ç—É
sudo tcpdump -i eth0 port 80                                 # —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –ø–æ—Ä—Ç 80
sudo tcpdump -i eth0 src port 22                             # –∏—Å—Ö–æ–¥—è—â–∏–π —Å –ø–æ—Ä—Ç–∞ 22
sudo tcpdump -i eth0 dst port 443                            # –≤—Ö–æ–¥—è—â–∏–π –Ω–∞ –ø–æ—Ä—Ç 443

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ IP
sudo tcpdump -i eth0 host 8.8.8.8                           # —Ç—Ä–∞—Ñ–∏–∫ —Å/–Ω–∞ 8.8.8.8
sudo tcpdump -i eth0 src 192.168.1.100                      # –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ IP
sudo tcpdump -i eth0 dst 192.168.1.200                      # –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É IP
sudo tcpdump -i eth0 net 192.168.1.0/24                     # —Ç—Ä–∞—Ñ–∏–∫ –ø–æ–¥—Å–µ—Ç–∏

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
sudo tcpdump -i eth0 tcp and port 80                        # TCP –Ω–∞ –ø–æ—Ä—Ç 80
sudo tcpdump -i eth0 host 8.8.8.8 and port 53               # DNS –∫ 8.8.8.8
sudo tcpdump -i eth0 '(tcp and port 80) or (tcp and port 443)'  # HTTP/HTTPS

# –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
sudo tcpdump -i eth0 -v                                     # –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
sudo tcpdump -i eth0 -x                                     # hex –¥–∞–º–ø
sudo tcpdump -i eth0 -X                                     # hex + ASCII
sudo tcpdump -i eth0 -A                                     # ASCII —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª
sudo tcpdump -i eth0 -w capture.pcap                        # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª
sudo tcpdump -r capture.pcap                                # —á–∏—Ç–∞—Ç—å –∏–∑ —Ñ–∞–π–ª–∞
sudo tcpdump -r capture.pcap host 192.168.1.100             # —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏

# –ü—Ä–∏–º–µ—Ä—ã —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
sudo tcpdump -i eth0 'tcp[tcpflags] & (tcp-syn|tcp-fin) != 0'  # SYN/FIN –ø–∞–∫–µ—Ç—ã
sudo tcpdump -i eth0 'icmp[icmptype] = icmp-echo'           # ping –∑–∞–ø—Ä–æ—Å—ã
```

**–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏:**

```bash
# iftop - —Ç–æ–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø–æ —Ç—Ä–∞—Ñ–∏–∫—É
sudo iftop                                                  # –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
sudo iftop -i eth0                                          # –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
sudo iftop -n                                               # –±–µ–∑ —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞ –∏–º—ë–Ω

# nethogs - —Ç–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ —Å–µ—Ç–µ–≤–æ–º—É —Ç—Ä–∞—Ñ–∏–∫—É
sudo nethogs                                                # –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
sudo nethogs eth0                                           # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

# iperf3 - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
iperf3 -s                                                   # —Ä–µ–∂–∏–º —Å–µ—Ä–≤–µ—Ä–∞
# –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:
iperf3 -c server_ip                                         # —Ç–µ—Å—Ç –∫ —Å–µ—Ä–≤–µ—Ä—É
iperf3 -c server_ip -t 30                                   # —Ç–µ—Å—Ç 30 —Å–µ–∫—É–Ω–¥
iperf3 -c server_ip -P 4                                    # 4 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞

# nload - –ø—Ä–æ—Å—Ç–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞
nload                                                       # –≥—Ä–∞—Ñ–∏–∫ —Ç—Ä–∞—Ñ–∏–∫–∞
nload eth0                                                  # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

# bwm-ng - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
bwm-ng                                                      # –ø—Ä–æ—Å—Ç–æ–π –≤—ã–≤–æ–¥
bwm-ng -o csv                                               # CSV —Ñ–æ—Ä–º–∞—Ç
```

### –°–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**netcat (nc) - —à–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π –Ω–æ–∂ —Å–µ—Ç–∏:**

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
nc -zv google.com 80                                        # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞
nc -zv -w 3 192.168.1.100 22                               # —Å —Ç–∞–π–º–∞—É—Ç–æ–º 3 —Å–µ–∫—É–Ω–¥—ã
nc -zv 192.168.1.1-254 22 2>&1 | grep succeeded            # —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–µ—Ç–∏

# –ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–µ—Ä
echo "Hello World" | nc -l -p 8080                         # –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
nc -l -p 9999                                               # –ø—Ä–æ—Å—Ç–æ–π TCP —Å–µ—Ä–≤–µ—Ä

# –ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ø–æ–ª—É—á–∞—Ç–µ–ª—å):
nc -l -p 9999 > received_file.txt
# –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å):
nc server_ip 9999 < file_to_send.txt

# –ß–∞—Ç –º–µ–∂–¥—É –º–∞—à–∏–Ω–∞–º–∏
# –ù–∞ –º–∞—à–∏–Ω–µ A:
nc -l -p 1234
# –ù–∞ –º–∞—à–∏–Ω–µ B:
nc machine_a_ip 1234

# –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ
nc -l -p 8080 | nc target_host 80                          # –ø—Ä–æ—Å—Ç–æ–π TCP –ø—Ä–æ–∫—Å–∏

# UDP —Ç–µ—Å—Ç—ã
nc -u server_ip 53                                          # UDP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (DNS)
echo "test" | nc -u -w 1 8.8.8.8 53                       # UDP –ø–∞–∫–µ—Ç —Å —Ç–∞–π–º–∞—É—Ç–æ–º
```

**telnet –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
telnet google.com 80                                        # –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—É
telnet smtp.gmail.com 587                                   # —Ç–µ—Å—Ç SMTP —Å–µ—Ä–≤–µ—Ä–∞
telnet localhost 3306                                       # —Ç–µ—Å—Ç MySQL

# HTTP –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ telnet
telnet google.com 80
GET / HTTP/1.1
Host: google.com
[Enter twice]

# –¢–µ—Å—Ç SMTP
telnet smtp.server.com 25
EHLO client.domain.com
MAIL FROM: <test@domain.com>
RCPT TO: <target@domain.com>
```

**curl –¥–ª—è HTTP –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**

```bash
# –ë–∞–∑–æ–≤—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
curl http://example.com                                     # GET –∑–∞–ø—Ä–æ—Å
curl -I http://example.com                                  # —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏
curl -v http://example.com                                  # –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
curl -s http://example.com                                  # —Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º

# HTTP –º–µ—Ç–æ–¥—ã
curl -X POST http://api.example.com/users                   # POST –∑–∞–ø—Ä–æ—Å
curl -X PUT http://api.example.com/users/123                # PUT –∑–∞–ø—Ä–æ—Å
curl -X DELETE http://api.example.com/users/123             # DELETE –∑–∞–ø—Ä–æ—Å

# –î–∞–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–µ
curl -d "name=John&age=30" http://api.example.com/users     # POST –¥–∞–Ω–Ω—ã–µ
curl -H "Content-Type: application/json" -d '{"name":"John"}' http://api.example.com/users

# –§–∞–π–ª—ã
curl -F "file=@document.pdf" http://upload.example.com      # –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
curl -o output.html http://example.com                      # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª
curl -O http://example.com/file.zip                         # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
curl -u username:password http://example.com/protected      # Basic Auth
curl -H "Authorization: Bearer token123" http://api.example.com  # Bearer token

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
curl -w "@curl-format.txt" -o /dev/null -s http://example.com

# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ curl-format.txt:
#      time_namelookup:  %{time_namelookup}\n
#         time_connect:  %{time_connect}\n
#      time_appconnect:  %{time_appconnect}\n
#     time_pretransfer:  %{time_pretransfer}\n
#        time_redirect:  %{time_redirect}\n
#   time_starttransfer:  %{time_starttransfer}\n
#                      ----------\n
#           time_total:  %{time_total}\n
```

### –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –∏ —Ç—É–Ω–Ω–µ–ª–∏

**VLAN (Virtual LAN):**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ VLAN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
sudo ip link add link eth0 name eth0.100 type vlan id 100   # VLAN 100
sudo ip addr add 192.168.100.1/24 dev eth0.100             # –Ω–∞–∑–Ω–∞—á–∏—Ç—å IP
sudo ip link set dev eth0.100 up                           # –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å

# –ü—Ä–æ—Å–º–æ—Ç—Ä VLAN
cat /proc/net/vlan/config
ip link show type vlan

# –£–¥–∞–ª–µ–Ω–∏–µ VLAN
sudo ip link delete eth0.100
```

**Bridge –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ bridge
sudo ip link add name br0 type bridge                      # —Å–æ–∑–¥–∞—Ç—å bridge
sudo ip link set dev br0 up                                # –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∫ bridge
sudo ip link set dev eth0 master br0                       # –¥–æ–±–∞–≤–∏—Ç—å eth0
sudo ip link set dev eth1 master br0                       # –¥–æ–±–∞–≤–∏—Ç—å eth1

# –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ IP bridge
sudo ip addr add 192.168.1.1/24 dev br0

# –ü—Ä–æ—Å–º–æ—Ç—Ä bridge
bridge link show                                            # –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ bridge
bridge fdb show                                             # —Ç–∞–±–ª–∏—Ü–∞ MAC –∞–¥—Ä–µ—Å–æ–≤

# –£–¥–∞–ª–µ–Ω–∏–µ bridge
sudo ip link set dev eth0 nomaster                         # —É–±—Ä–∞—Ç—å –∏–∑ bridge
sudo ip link delete br0                                    # —É–¥–∞–ª–∏—Ç—å bridge
```

**VPN —Ç—É–Ω–Ω–µ–ª–∏:**

```bash
# OpenVPN –∫–ª–∏–µ–Ω—Ç
sudo openvpn --config client.ovpn                          # –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
sudo systemctl start openvpn@client                        # —á–µ—Ä–µ–∑ systemd

# WireGuard
sudo wg-quick up wg0                                        # –ø–æ–¥–Ω—è—Ç—å —Ç—É–Ω–Ω–µ–ª—å
sudo wg show                                                # —Å—Ç–∞—Ç—É—Å —Ç—É–Ω–Ω–µ–ª–µ–π
sudo wg-quick down wg0                                      # –æ–ø—É—Å—Ç–∏—Ç—å —Ç—É–Ω–Ω–µ–ª—å

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è WireGuard (/etc/wireguard/wg0.conf):
[Interface]
PrivateKey = client_private_key
Address = 10.0.0.2/24
DNS = 8.8.8.8

[Peer]
PublicKey = server_public_key
Endpoint = vpn.server.com:51820
AllowedIPs = 0.0.0.0/0
```

---

## –≠—Ç–∞–ø 5: –í–µ–±-—Å–µ—Ä–≤–µ—Ä—ã –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### Nginx - –≥–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ

Nginx ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä, reverse proxy –∏ load balancer, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –∫—Ä—É–ø–Ω—ã—Ö –≤–µ–±-—Å–∞–π—Ç–æ–≤.

```
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Nginx:

Master –ø—Ä–æ—Ü–µ—Å—Å (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
‚îú‚îÄ‚îÄ Worker –ø—Ä–æ—Ü–µ—Å—Å 1 (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤)
‚îú‚îÄ‚îÄ Worker –ø—Ä–æ—Ü–µ—Å—Å 2 (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤)
‚îî‚îÄ‚îÄ Worker –ø—Ä–æ—Ü–µ—Å—Å N (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤)

–ö–∞–∂–¥—ã–π worker –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç—ã—Å—è—á–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
–±–ª–∞–≥–æ–¥–∞—Ä—è event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (epoll/kqueue).
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (Ubuntu/Debian)
sudo apt update
sudo apt install nginx

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (CentOS/RHEL)
sudo yum install epel-release
sudo yum install nginx

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º
sudo systemctl start nginx                                  # –∑–∞–ø—É—Å–∫
sudo systemctl stop nginx                                   # –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl restart nginx                                # –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl reload nginx                                 # –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo systemctl enable nginx                                 # –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl status nginx                                 # —Å—Ç–∞—Ç—É—Å

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t                                               # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
sudo nginx -T                                               # –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -v                                                    # –≤–µ—Ä—Å–∏—è nginx
nginx -V                                                    # –≤–µ—Ä—Å–∏—è –∏ –º–æ–¥—É–ª–∏
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx:**

```
/etc/nginx/
‚îú‚îÄ‚îÄ nginx.conf                 (–≥–ª–∞–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ conf.d/                    (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
‚îú‚îÄ‚îÄ sites-available/           (–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã)
‚îú‚îÄ‚îÄ sites-enabled/             (–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∞–π—Ç—ã - —Å–∏–º–ª–∏–Ω–∫–∏)
‚îú‚îÄ‚îÄ modules-available/         (–¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥—É–ª–∏)
‚îú‚îÄ‚îÄ modules-enabled/           (–∞–∫—Ç–∏–≤–Ω—ã–µ –º–æ–¥—É–ª–∏)
‚îî‚îÄ‚îÄ snippets/                  (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã)
```

**–ì–ª–∞–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx.conf:**

```nginx
# /etc/nginx/nginx.conf
user www-data;                                              # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è worker –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
worker_processes auto;                                      # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ worker –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (= CPU cores)
pid /run/nginx.pid;                                         # —Ñ–∞–π–ª —Å PID –≥–ª–∞–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

# Events –±–ª–æ–∫ - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
events {
    worker_connections 1024;                                # –º–∞–∫—Å–∏–º—É–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ worker
    use epoll;                                               # –º–µ—Ç–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π (Linux)
    multi_accept on;                                         # –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å—Ä–∞–∑—É
}

# HTTP –±–ª–æ–∫ - –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
http {
    ##
    # –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ##
    sendfile on;                                             # —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤
    tcp_nopush on;                                           # –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è TCP –ø–∞–∫–µ—Ç–æ–≤
    tcp_nodelay on;                                          # –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º Nagle
    keepalive_timeout 65;                                    # –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ keep-alive —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    types_hash_max_size 2048;                              # —Ä–∞–∑–º–µ—Ä —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ã MIME —Ç–∏–ø–æ–≤
    
    include /etc/nginx/mime.types;                          # MIME —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤
    default_type application/octet-stream;                  # —Ç–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

    ##
    # SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ##
    ssl_protocols TLSv1.2 TLSv1.3;                         # —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ SSL –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
    ssl_prefer_server_ciphers on;                           # –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —à–∏—Ñ—Ä—ã
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;

    ##
    # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    ##
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';
    
    access_log /var/log/nginx/access.log main;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip —Å–∂–∞—Ç–∏–µ
    ##
    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types
        text/plain
        text/css
        text/xml
        text/javascript
        application/json
        application/javascript
        application/xml+rss
        application/atom+xml
        image/svg+xml;

    ##
    # –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ö–æ—Å—Ç—ã
    ##
    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞:**

```nginx
# /etc/nginx/sites-available/myapp
server {
    listen 80;                                              # —Å–ª—É—à–∞—Ç—å –ø–æ—Ä—Ç 80
    listen [::]:80;                                         # IPv6
    server_name myapp.example.com www.myapp.example.com;    # –¥–æ–º–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞
    
    # –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;                                   # HTTPS —Å HTTP/2
    listen [::]:443 ssl http2;                              # IPv6 HTTPS
    server_name myapp.example.com www.myapp.example.com;
    
    # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
    ssl_certificate /etc/ssl/certs/myapp.crt;
    ssl_certificate_key /etc/ssl/private/myapp.key;
    ssl_session_timeout 1d;
    ssl_session_cache shared:MozTLS:10m;
    ssl_session_tickets off;
    
    # –ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞
    root /var/www/myapp/public;
    index index.html index.htm index.php;
    
    # –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    
    # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }
    
    # PHP –æ–±—Ä–∞–±–æ—Ç–∫–∞
    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
        fastcgi_hide_header X-Powered-By;
    }
    
    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1M;
        add_header Cache-Control "public, immutable";
        add_header X-Content-Type-Options nosniff;
    }
    
    # –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–Ω—ã–º —Ñ–∞–π–ª–∞–º
    location ~ /\. {
        deny all;
    }
    
    location ~ ^/(\.user.ini|\.htaccess|\.git|\.svn|\.project|LICENSE|README.md)$ {
        deny all;
    }
    
    # –õ–æ–≥–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–∞–π—Ç–∞
    access_log /var/log/nginx/myapp_access.log;
    error_log /var/log/nginx/myapp_error.log;
}
```

**Nginx –∫–∞–∫ reverse proxy:**

```nginx
# /etc/nginx/sites-available/api-proxy
upstream backend {
    least_conn;                                             # –∞–ª–≥–æ—Ä–∏—Ç–º –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏
    server 127.0.0.1:3000 weight=3;                        # —Å–µ—Ä–≤–µ—Ä —Å –≤–µ—Å–æ–º 3
    server 127.0.0.1:3001 weight=2;                        # —Å–µ—Ä–≤–µ—Ä —Å –≤–µ—Å–æ–º 2
    server 127.0.0.1:3002 backup;                          # —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
    
    # Health checks (—Ç–æ–ª—å–∫–æ –≤ Nginx Plus)
    # health_check interval=30s fails=3 passes=2;
}

server {
    listen 80;
    server_name api.example.com;
    
    location / {
        proxy_pass http://backend;
        
        # –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è backend
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Port $server_port;
        
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤
        proxy_connect_timeout 30s;
        proxy_send_timeout 30s;
        proxy_read_timeout 30s;
        
        # –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è
        proxy_buffering on;
        proxy_buffer_size 4k;
        proxy_buffers 8 4k;
        proxy_busy_buffers_size 8k;
        
        # –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        proxy_cache backend_cache;
        proxy_cache_valid 200 302 10m;
        proxy_cache_valid 404 1m;
        proxy_cache_use_stale error timeout updating http_500 http_502 http_503 http_504;
    }
    
    # WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    location /ws {
        proxy_pass http://backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }
    
    # Health check endpoint
    location /health {
        access_log off;
        return 200 "healthy\n";
        add_header Content-Type text/plain;
    }
}

# –ö–µ—à –∑–æ–Ω–∞
proxy_cache_path /var/cache/nginx/backend levels=1:2 keys_zone=backend_cache:10m inactive=60m;
```

**Load balancing –∞–ª–≥–æ—Ä–∏—Ç–º—ã:**

```nginx
# Round Robin (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
upstream backend {
    server server1.example.com;
    server server2.example.com;
    server server3.example.com;
}

# Least Connections
upstream backend {
    least_conn;
    server server1.example.com;
    server server2.example.com;
}

# IP Hash (—Å–µ—Å—Å–∏–æ–Ω–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞)
upstream backend {
    ip_hash;
    server server1.example.com;
    server server2.example.com;
}

# Weighted Round Robin
upstream backend {
    server server1.example.com weight=3;
    server server2.example.com weight=2;
    server server3.example.com weight=1;
}

# Hash —Å –∫–ª—é—á–æ–º
upstream backend {
    hash $request_uri consistent;
    server server1.example.com;
    server server2.example.com;
}
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Nginx:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log

# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –¥–æ—Å—Ç—É–ø–∞
# –¢–æ–ø IP –∞–¥—Ä–µ—Å–æ–≤
awk '{print $1}' /var/log/nginx/access.log | sort | uniq -c | sort -nr | head -10

# –¢–æ–ø –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
awk '{print $7}' /var/log/nginx/access.log | sort | uniq -c | sort -nr | head -10

# –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤
awk '{print $9}' /var/log/nginx/access.log | sort | uniq -c | sort -nr

# –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫
grep "ERROR" /var/log/nginx/error.log | tail -20

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ (—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
awk '{print $NF}' /var/log/nginx/access.log | sort -n | tail -10

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ Nginx
curl -s http://localhost/nginx_status                       # –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –º–æ–¥—É–ª—å status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
ab -n 1000 -c 10 http://localhost/                         # Apache Bench
```

### SSL/TLS –∏ Let's Encrypt

**–ü–æ–ª—É—á–µ–Ω–∏–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
sudo apt install certbot python3-certbot-nginx             # Ubuntu/Debian
sudo yum install certbot python3-certbot-nginx             # CentOS/RHEL

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è Nginx
sudo certbot --nginx -d example.com -d www.example.com

# –†—É—á–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot certonly --webroot -w /var/www/html -d example.com

# –ü–æ–ª—É—á–µ–Ω–∏–µ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (—Ç—Ä–µ–±—É–µ—Ç DNS challenge)
sudo certbot certonly --manual --preferred-challenges dns -d *.example.com

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo crontab -e
# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É:
0 12 * * * /usr/bin/certbot renew --quiet && systemctl reload nginx

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
sudo certbot renew --dry-run

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo certbot certificates

# –û—Ç–∑—ã–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot revoke --cert-path /etc/letsencrypt/live/example.com/cert.pem
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL –≤ Nginx:**

```nginx
server {
    listen 443 ssl http2;
    server_name example.com;
    
    # –ü—É—Ç–∏ –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º Let's Encrypt
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;
    
    # –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-CHACHA20-POLY1305;
    ssl_prefer_server_ciphers off;
    
    # SSL –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
    ssl_session_timeout 1d;
    ssl_session_cache shared:MozTLS:10m;
    ssl_session_tickets off;
    
    # OCSP Stapling
    ssl_stapling on;
    ssl_stapling_verify on;
    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;
    
    # HSTS
    add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload";
    
    # –î—Ä—É–≥–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline'";
}
```

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - PostgreSQL

PostgreSQL ‚Äî –º–æ—â–Ω–∞—è –æ–±—ä–µ–∫—Ç–Ω–æ-—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –±–æ–≥–∞—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (Ubuntu/Debian)
sudo apt update
sudo apt install postgresql postgresql-contrib

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (CentOS/RHEL)
sudo yum install postgresql-server postgresql-contrib
sudo postgresql-setup initdb

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º
sudo systemctl start postgresql
sudo systemctl enable postgresql
sudo systemctl status postgresql

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è postgres
sudo -i -u postgres

# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
createdb myapp
createuser --interactive myuser
# –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:
# Shall the new role be a superuser? (y/n) n
# Shall the new role be allowed to create databases? (y/n) y
# Shall the new role be allowed to create more new roles? (y/n) n

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è
psql
postgres=# \password myuser
postgres=# \q

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
psql -c "CREATE USER myuser WITH PASSWORD 'secretpassword';"
psql -c "CREATE DATABASE myapp OWNER myuser;"
psql -c "GRANT ALL PRIVILEGES ON DATABASE myapp TO myuser;"
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PostgreSQL:**

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
/etc/postgresql/13/main/postgresql.conf              # –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
/etc/postgresql/13/main/pg_hba.conf                  # –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –¥–æ—Å—Ç—É–ø

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ postgresql.conf
sudo nano /etc/postgresql/13/main/postgresql.conf
```

```ini
# postgresql.conf - –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
listen_addresses = '*'                                     # —Å–ª—É—à–∞—Ç—å –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
port = 5432                                                # –ø–æ—Ä—Ç PostgreSQL

# –ü–∞–º—è—Ç—å
shared_buffers = 256MB                                     # —Ä–∞–∑–¥–µ–ª—è–µ–º–∞—è –ø–∞–º—è—Ç—å
effective_cache_size = 1GB                                 # –∫–µ—à –û–°
maintenance_work_mem = 64MB                                # –ø–∞–º—è—Ç—å –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
work_mem = 4MB                                             # –ø–∞–º—è—Ç—å –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

# –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è
max_connections = 200                                      # –º–∞–∫—Å–∏–º—É–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
superuser_reserved_connections = 3                        # —Ä–µ–∑–µ—Ä–≤ –¥–ª—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

# WAL (Write-Ahead Logging)
wal_level = replica                                        # —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è WAL
max_wal_size = 1GB                                         # –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä WAL
min_wal_size = 80MB                                        # –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä WAL

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logging_collector = on                                     # –≤–∫–ª—é—á–∏—Ç—å —Å–±–æ—Ä—â–∏–∫ –ª–æ–≥–æ–≤
log_directory = 'log'                                      # –ø–∞–ø–∫–∞ –ª–æ–≥–æ–≤
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'           # —Ñ–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
log_min_messages = warning                                 # –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤
log_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '

# –ê–≤—Ç–æ–≤–∞–∫—É—É–º
autovacuum = on                                            # –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–≤–∞–∫—É—É–º
autovacuum_max_workers = 3                                 # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ worker –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ pg_hba.conf:**

```bash
sudo nano /etc/postgresql/13/main/pg_hba.conf
```

```
# pg_hba.conf - –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
local   all             postgres                                peer
local   all             all                                     md5

# IPv4 –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
host    all             all             127.0.0.1/32            md5
host    all             all             192.168.1.0/24          md5    # –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å

# IPv6 –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è  
host    all             all             ::1/128                 md5

# –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
host    myapp           myuser          0.0.0.0/0               md5    # —Ç–æ–ª—å–∫–æ –¥–ª—è myapp

# SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
hostssl myapp           myuser          0.0.0.0/0               md5

# –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo systemctl reload postgresql
```

**–†–∞–±–æ—Ç–∞ —Å PostgreSQL:**

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
psql -h localhost -U myuser -d myapp
psql -h localhost -U postgres                             # –∫–∞–∫ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

# –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã psql
\l                                                         # —Å–ø–∏—Å–æ–∫ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
\c myapp                                                   # –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ myapp
\dt                                                        # —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
\d table_name                                              # —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã
\du                                                        # —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
\q                                                         # –≤—ã–π—Ç–∏

# SQL –∑–∞–ø—Ä–æ—Å—ã
SELECT version();                                          # –≤–µ—Ä—Å–∏—è PostgreSQL
SELECT current_database();                                 # —Ç–µ–∫—É—â–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
SELECT current_user;                                       # —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

# –í—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
INSERT INTO users (username, email, password_hash) 
VALUES ('alice', 'alice@example.com', 'hashed_password');

# –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_username ON users(username);
```

**Backup –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ PostgreSQL:**

```bash
# Backup –æ–¥–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
pg_dump -h localhost -U myuser myapp > myapp_backup.sql
pg_dump -h localhost -U myuser -Fc myapp > myapp_backup.dump    # —Å–∂–∞—Ç—ã–π —Ñ–æ—Ä–º–∞—Ç

# Backup –≤—Å–µ—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
pg_dumpall -h localhost -U postgres > all_databases.sql

# Backup —Å —Å–∂–∞—Ç–∏–µ–º
pg_dump -h localhost -U myuser myapp | gzip > myapp_backup.sql.gz

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ SQL —Ñ–∞–π–ª–∞
psql -h localhost -U myuser myapp < myapp_backup.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ dump —Ñ–∞–π–ª–∞
pg_restore -h localhost -U myuser -d myapp myapp_backup.dump

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ–º –±–∞–∑—ã
dropdb myapp
createdb myapp
psql -h localhost -U myuser myapp < myapp_backup.sql

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup —á–µ—Ä–µ–∑ cron
sudo crontab -e
# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É:
0 2 * * * pg_dump -h localhost -U myuser myapp | gzip > /backup/myapp_$(date +\%Y\%m\%d).sql.gz
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ PostgreSQL:**

```sql
-- –¢–µ–∫—É—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
SELECT 
    pid,
    usename,
    datname,
    client_addr,
    state,
    query_start,
    query
FROM pg_stat_activity 
WHERE state != 'idle';

-- –†–∞–∑–º–µ—Ä—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
SELECT 
    datname,
    pg_size_pretty(pg_database_size(datname)) as size
FROM pg_database 
ORDER BY pg_database_size(datname) DESC;

-- –†–∞–∑–º–µ—Ä—ã —Ç–∞–±–ª–∏—Ü
SELECT 
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) as size
FROM pg_tables 
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;

-- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ log_min_duration_statement)
SELECT 
    query,
    calls,
    total_time,
    mean_time
FROM pg_stat_statements 
ORDER BY total_time DESC 
LIMIT 10;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤
SELECT 
    indexrelname,
    idx_tup_read,
    idx_tup_fetch,
    idx_scan
FROM pg_stat_user_indexes 
ORDER BY idx_scan DESC;
```

**–¢—é–Ω–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ PostgreSQL:**

```bash
# –ê–Ω–∞–ª–∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
# –í postgresql.conf –≤–∫–ª—é—á–∏—Ç—å:
log_min_duration_statement = 1000                         # –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã > 1 —Å–µ–∫—É–Ω–¥—ã
log_statement = 'all'                                     # –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pg_stat_statements –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
sudo nano /etc/postgresql/13/main/postgresql.conf
shared_preload_libraries = 'pg_stat_statements'
pg_stat_statements.max = 1000
pg_stat_statements.track = all

sudo systemctl restart postgresql

# –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
CREATE EXTENSION pg_stat_statements;
```

```sql
-- EXPLAIN –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–ª–∞–Ω–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
EXPLAIN ANALYZE SELECT * FROM users WHERE email = 'alice@example.com';

-- VACUUM –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
VACUUM ANALYZE users;                                      -- –∞–Ω–∞–ª–∏–∑ –∏ –æ—á–∏—Å—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
VACUUM FULL users;                                         -- –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É)

-- –ü–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
REINDEX TABLE users;
REINDEX INDEX idx_users_email;
```

---

## –≠—Ç–∞–ø 6: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è (–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ)

### Docker - –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ

Docker —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Å—Ä–µ–¥–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ production.

```
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Docker:

Docker Client (docker CLI)
        ‚Üì
Docker Daemon (dockerd)
        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Docker Host          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇContainer‚îÇ ‚îÇContainer‚îÇ    ‚îÇ
‚îÇ  ‚îÇ    A    ‚îÇ ‚îÇ    B    ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ       ‚Üë           ‚Üë         ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ Image A ‚îÇ ‚îÇ Image B ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–µ–µ —è–¥—Ä–æ Linux, –Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑:
- Namespaces (–∏–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Å–µ—Ç–∏, —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã)
- Cgroups (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤)
- Union FS (—Å–ª–æ–∏—Å—Ç–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker:**

```bash
# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π
sudo apt remove docker docker-engine docker.io containerd runc

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
sudo apt update
sudo apt install apt-transport-https ca-certificates curl gnupg lsb-release

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ GPG –∫–ª—é—á–∞ Docker
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Engine
sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER
newgrp docker                                              # –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É –±–µ–∑ –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∞

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
docker --version
docker run hello-world
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker:**

```bash
# –†–∞–±–æ—Ç–∞ —Å –æ–±—Ä–∞–∑–∞–º–∏
docker images                                             # —Å–ø–∏—Å–æ–∫ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤
docker search nginx                                       # –ø–æ–∏—Å–∫ –æ–±—Ä–∞–∑–æ–≤ –≤ Docker Hub
docker pull nginx:latest                                  # —Å–∫–∞—á–∞—Ç—å –æ–±—Ä–∞–∑
docker pull nginx:1.21-alpine                            # –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è
docker rmi nginx:latest                                   # —É–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑
docker image prune                                        # —É–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker run nginx                                          # –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ foreground
docker run -d nginx                                       # –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ background (daemon)
docker run -d --name webserver nginx                      # —Å –∏–º–µ–Ω–µ–º
docker run -d -p 8080:80 nginx                           # –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤
docker run -d -p 127.0.0.1:8080:80 nginx                # –ø—Ä–∏–≤—è–∑–∫–∞ –∫ localhost
docker run -d -v /host/path:/container/path nginx         # –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ volume

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
docker ps                                                 # –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker ps -a                                              # –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker stop container_id                                  # –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker start container_id                                 # –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π
docker restart container_id                               # –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker rm container_id                                    # —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker rm -f container_id                                 # –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª–∏—Ç—å

# –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
docker exec -it container_id bash                         # –≤–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec container_id ls -la                           # –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
docker logs container_id                                  # –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker logs -f container_id                               # —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏
docker logs --tail 100 container_id                       # –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
docker inspect container_id                               # –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
docker stats                                              # —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
docker top container_id                                   # –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
```

### –°–æ–∑–¥–∞–Ω–∏–µ Docker –æ–±—Ä–∞–∑–æ–≤

**Dockerfile - –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞:**

```dockerfile
# –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: Dockerfile –¥–ª—è Python –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

# –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑
FROM python:3.9-slim

# –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
LABEL maintainer="developer@company.com"
LABEL version="1.0"
LABEL description="My Python Web Application"

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
ENV PYTHONUNBUFFERED=1
ENV PYTHONDONTWRITEBYTECODE=1
ENV APP_HOME=/app

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
RUN groupadd -r appuser && useradd -r -g appuser appuser

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN apt-get update && apt-get install -y \
    gcc \
    libpq-dev \
    && rm -rf /var/lib/apt/lists/*

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
WORKDIR $APP_HOME

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY requirements.txt .

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN pip install --no-cache-dir --upgrade pip && \
    pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
COPY . .

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ñ–∞–π–ª–æ–≤
RUN chown -R appuser:appuser $APP_HOME

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
USER appuser

# –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–∞
EXPOSE 8000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8000/health || exit 1

# –ö–æ–º–∞–Ω–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
CMD ["gunicorn", "--bind", "0.0.0.0:8000", "app:application"]
```

**–ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ (Multi-stage build):**

```dockerfile
# –≠—Ç–∞–ø 1: –°–±–æ—Ä–∫–∞
FROM node:16-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

# –≠—Ç–∞–ø 2: Production
FROM nginx:alpine

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —ç—Ç–∞–ø–∞
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Docker –æ–±—Ä–∞–∑–æ–≤:**

```dockerfile
# –ü–ª–æ—Ö–æ–π –ø—Ä–∏–º–µ—Ä (–±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä)
FROM ubuntu:20.04
RUN apt-get update
RUN apt-get install -y python3
RUN apt-get install -y python3-pip
COPY . .
RUN pip3 install -r requirements.txt

# –•–æ—Ä–æ—à–∏–π –ø—Ä–∏–º–µ—Ä (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
FROM python:3.9-alpine
WORKDIR /app

# –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ RUN –∫–æ–º–∞–Ω–¥ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Å–ª–æ–µ–≤
RUN apk add --no-cache gcc musl-dev libffi-dev && \
    pip install --no-cache-dir --upgrade pip

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ requirements.txt —Å–Ω–∞—á–∞–ª–∞ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–æ—è
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ –∫–æ–Ω—Ü–µ
COPY . .

# –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –∏ –Ω–µ–Ω—É–∂–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
RUN apk del gcc musl-dev libffi-dev

CMD ["python", "app.py"]
```

**–°–±–æ—Ä–∫–∞ –∏ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤:**

```bash
# –ü—Ä–æ—Å—Ç–∞—è —Å–±–æ—Ä–∫–∞
docker build -t myapp .

# –°–±–æ—Ä–∫–∞ —Å —Ç–µ–≥–æ–º
docker build -t myapp:v1.0 .
docker build -t myapp:latest .

# –°–±–æ—Ä–∫–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
docker build -t myapp -f Dockerfile.prod .

# –°–±–æ—Ä–∫–∞ —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏
docker build --build-arg ENV=production -t myapp .

# –ü—Ä–∏–º–µ—Ä Dockerfile —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏:
# ARG ENV=development
# ENV ENVIRONMENT=$ENV

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –æ–±—Ä–∞–∑–∞
docker history myapp:latest

# –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ —Å–ª–æ–µ–≤
docker image inspect myapp:latest
```

### Docker Compose - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏

**docker-compose.yml –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**

```yaml
version: '3.8'

services:
  # –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  web:
    build: 
      context: .
      dockerfile: Dockerfile
      args:
        - ENV=production
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://user:password@db:5432/myapp
      - REDIS_URL=redis://redis:6379/0
      - DEBUG=false
    volumes:
      - ./app:/app                                         # –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
      - static_volume:/app/static                          # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
      - media_volume:/app/media                            # –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
    depends_on:
      - web
    restart: unless-stopped
    networks:
      - frontend

  # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å Prometheus
  prometheus:
    image: prom/prometheus:latest
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml:ro
      - prometheus_data:/prometheus
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
      - '--web.console.libraries=/etc/prometheus/console_libraries'
      - '--web.console.templates=/etc/prometheus/consoles'
      - '--storage.tsdb.retention.time=200h'
      - '--web.enable-lifecycle'
    restart: unless-stopped
    networks:
      - backend

  # Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
  grafana:
    image: grafana/grafana:latest
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_USER=admin
      - GF_SECURITY_ADMIN_PASSWORD=admin123
      - GF_USERS_ALLOW_SIGN_UP=false
    volumes:
      - grafana_data:/var/lib/grafana
      - ./grafana/provisioning:/etc/grafana/provisioning
    depends_on:
      - prometheus
    restart: unless-stopped
    networks:
      - backend

# Volumes –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
volumes:
  postgres_data:
    driver: local
  redis_data:
    driver: local
  static_volume:
    driver: local
  media_volume:
    driver: local
  prometheus_data:
    driver: local
  grafana_data:
    driver: local

# –°–µ—Ç–∏ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
networks:
  frontend:
    driver: bridge
  backend:
    driver: bridge
```

**–ö–æ–º–∞–Ω–¥—ã Docker Compose:**

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
docker-compose up                                          # –∑–∞–ø—É—Å–∫ –≤ foreground
docker-compose up -d                                       # –∑–∞–ø—É—Å–∫ –≤ background
docker-compose up --build                                  # –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã
docker-compose up --scale web=3                            # –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
docker-compose start                                       # –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose stop                                        # –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose restart                                     # –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose pause web                                   # –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å
docker-compose unpause web                                 # –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
docker-compose ps                                          # —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose logs                                        # –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose logs -f web                                 # –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose top                                         # –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
docker-compose exec web bash                               # –≤–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä web
docker-compose exec db psql -U user -d myapp               # –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
docker-compose run --rm web python manage.py migrate      # —Ä–∞–∑–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞

# –û—á–∏—Å—Ç–∫–∞
docker-compose down                                        # –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down -v                                     # —É–¥–∞–ª–∏—Ç—å —Ç–∞–∫–∂–µ volumes
docker-compose down --rmi all                              # —É–¥–∞–ª–∏—Ç—å —Ç–∞–∫–∂–µ –æ–±—Ä–∞–∑—ã

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
docker-compose config                                      # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker-compose config --services                           # —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Docker Compose:**

```bash
# .env —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
DATABASE_URL=postgresql://user:secret@localhost:5432/myapp
REDIS_URL=redis://localhost:6379/0
SECRET_KEY=your-secret-key-here
DEBUG=false
ENVIRONMENT=production
```

```yaml
# docker-compose.yml —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
version: '3.8'

services:
  web:
    build: .
    ports:
      - "${WEB_PORT:-8000}:8000"
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - SECRET_KEY=${SECRET_KEY}
      - DEBUG=${DEBUG}
    env_file:
      - .env
      - .env.local                                         # –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### Docker —Å–µ—Ç–∏ –∏ volumes

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç—è–º–∏ Docker:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ç–µ–π
docker network ls

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏
docker network create mynetwork                           # bridge —Å–µ—Ç—å
docker network create --driver bridge mynetwork           # —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å driver
docker network create --driver overlay mynetwork          # –¥–ª—è Docker Swarm

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫ —Å–µ—Ç–∏
docker run -d --name web --network mynetwork nginx
docker network connect mynetwork existing_container

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç —Å–µ—Ç–∏
docker network disconnect mynetwork container_name

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ç–∏
docker network inspect mynetwork

# –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Ç–∏
docker network rm mynetwork
docker network prune                                      # —É–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ç–∏
```

**–¢–∏–ø—ã —Å–µ—Ç–µ–π Docker:**

```
bridge (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
‚îú‚îÄ‚îÄ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ
‚îú‚îÄ‚îÄ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –ø–æ –∏–º–µ–Ω–∏
‚îî‚îÄ‚îÄ NAT –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –≤–æ –≤–Ω–µ—à–Ω—é—é —Å–µ—Ç—å

host
‚îú‚îÄ‚îÄ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç—å —Ö–æ—Å—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é
‚îú‚îÄ‚îÄ –ù–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ —Å–µ—Ç–∏
‚îî‚îÄ‚îÄ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

none
‚îú‚îÄ‚îÄ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îú‚îÄ‚îÄ –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è
‚îî‚îÄ‚îÄ –î–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

overlay
‚îú‚îÄ‚îÄ –î–ª—è Docker Swarm –∫–ª–∞—Å—Ç–µ—Ä–∞
‚îú‚îÄ‚îÄ –°–≤—è–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ö–æ—Å—Ç–∞—Ö
‚îî‚îÄ‚îÄ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –º–µ–∂–¥—É —Ö–æ—Å—Ç–∞–º–∏
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ volumes:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä volumes
docker volume ls

# –°–æ–∑–¥–∞–Ω–∏–µ volume
docker volume create myvolume
docker volume create --driver local --opt type=nfs myvolume

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ volume
docker run -v myvolume:/data nginx
docker run --mount source=myvolume,target=/data nginx      # –Ω–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ volume
docker volume inspect myvolume

# –£–¥–∞–ª–µ–Ω–∏–µ volume
docker volume rm myvolume
docker volume prune                                       # —É–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes

# Backup volume
docker run --rm -v myvolume:/source -v $(pwd):/backup alpine tar czf /backup/myvolume.tar.gz -C /source .

# Restore volume
docker run --rm -v myvolume:/target -v $(pwd):/backup alpine tar xzf /backup/myvolume.tar.gz -C /target
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Docker

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats                                              # –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker stats container1 container2                        # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker stats --format "table {{.Container}}\t{{.CPUPerc}}\t{{.MemUsage}}"

# –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
docker system df                                          # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
docker system events                                      # —Å–æ–±—ã—Ç–∏—è Docker
docker system info                                        # –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Docker

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker inspect container_name | jq '.State'               # —Å–æ—Å—Ç–æ—è–Ω–∏–µ
docker inspect container_name | jq '.NetworkSettings'     # —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker logs container_name                                # –≤—Å–µ –ª–æ–≥–∏
docker logs -f container_name                             # —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏
docker logs --tail 100 container_name                     # –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker logs --since 2h container_name                     # –ª–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —á–∞—Å–∞
docker logs --until 2023-01-01T12:00:00 container_name    # –ª–æ–≥–∏ –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
docker run -d --log-driver json-file --log-opt max-size=10m --log-opt max-file=3 nginx

# –¶–µ–Ω—Ç—Ä—Å–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
docker run -d --log-driver syslog --log-opt syslog-address=tcp://logserver:514 nginx
docker run -d --log-driver fluentd --log-opt fluentd-address=localhost:24224 nginx
```

**Docker —Å ELK Stack –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

```yaml
# docker-compose.yml –¥–ª—è ELK
version: '3.8'

services:
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:7.14.0
    environment:
      - discovery.type=single-node
      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
    ports:
      - "9200:9200"
    volumes:
      - elasticsearch_data:/usr/share/elasticsearch/data

  logstash:
    image: docker.elastic.co/logstash/logstash:7.14.0
    volumes:
      - ./logstash.conf:/usr/share/logstash/pipeline/logstash.conf
    ports:
      - "5044:5044"
    depends_on:
      - elasticsearch

  kibana:
    image: docker.elastic.co/kibana/kibana:7.14.0
    ports:
      - "5601:5601"
    environment:
      - ELASTICSEARCH_HOSTS=http://elasticsearch:9200
    depends_on:
      - elasticsearch

  filebeat:
    image: docker.elastic.co/beats/filebeat:7.14.0
    volumes:
      - ./filebeat.yml:/usr/share/filebeat/filebeat.yml:ro
      - /var/lib/docker/containers:/var/lib/docker/containers:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
    depends_on:
      - logstash

volumes:
  elasticsearch_data:
```

---

## –≠—Ç–∞–ø 7: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ DevOps

### Bash —Å–∫—Ä–∏–ø—Ç–∏–Ω–≥ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

Bash —Å–∫—Ä–∏–ø—Ç—ã ‚Äî –æ—Å–Ω–æ–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≤ Linux. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ deployment –ø–∞–π–ø–ª–∞–π–Ω—ã.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ bash —Å–∫—Ä–∏–ø—Ç–∞:**

```bash
#!/bin/bash
# Deployment script for web application
# Usage: ./deploy.sh [environment] [version]
# Example: ./deploy.sh production v1.2.3

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
set -euo pipefail                                          # –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ, –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
IFS=_on:
      db:
        condition: service_healthy
      redis:
        condition: service_started
    restart: unless-stopped
    networks:
      - backend
      - frontend
    deploy:
      replicas: 2
      resources:
        limits:
          cpus: '0.5'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 256M

  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
  db:
    image: postgres:13-alpine
    environment:
      POSTGRES_DB: myapp
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_INITDB_ARGS: "--encoding=UTF-8"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql:ro
    ports:
      - "5432:5432"                                        # —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U user -d myapp"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    restart: unless-stopped
    networks:
      - backend

  # Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
  redis:
    image: redis:6-alpine
    command: redis-server --appendonly yes --requirepass mypassword
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"
    restart: unless-stopped
    networks:
      - backend

  # Nginx reverse proxy
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./ssl:/etc/nginx/ssl:ro
      - static_volume:/var/www/static:ro
      - media_volume:/var/www/media:ro
    depends\n\t'                                                # –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫

# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
readonly SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
readonly APP_NAME="mywebapp"
readonly LOG_FILE="/var/log/${APP_NAME}/deploy.log"
readonly BACKUP_DIR="/backup/${APP_NAME}"
readonly DEPLOY_USER="deploy"

# –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
log() {
    local level=$1
    shift
    local message="$*"
    local timestamp=$(date '+%Y-%m-%d %H:%M:%S')
    echo "[${timestamp}] [${level}] ${message}" | tee -a "${LOG_FILE}"
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
check_dependencies() {
    local deps=("docker" "docker-compose" "git" "curl")
    
    for dep in "${deps[@]}"; do
        if ! command -v "$dep" &> /dev/null; then
            log "ERROR" "Dependency $dep is not installed"
            exit 1
        fi
    done
    
    log "INFO" "All dependencies are satisfied"
}

# –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è backup
create_backup() {
    local backup_name="${APP_NAME}_$(date +%Y%m%d_%H%M%S)"
    local backup_path="${BACKUP_DIR}/${backup_name}"
    
    log "INFO" "Creating backup: ${backup_name}"
    
    mkdir -p "${backup_path}"
    
    # Backup –∫–æ–¥–∞
    if [ -d "/opt/${APP_NAME}" ]; then
        cp -r "/opt/${APP_NAME}" "${backup_path}/code"
    fi
    
    # Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    if docker ps | grep -q "${APP_NAME}_db"; then
        docker exec "${APP_NAME}_db" pg_dump -U postgres myapp > "${backup_path}/database.sql"
    fi
    
    # –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞
    tar -czf "${backup_path}.tar.gz" -C "${BACKUP_DIR}" "${backup_name}"
    rm -rf "${backup_path}"
    
    log "INFO" "Backup created: ${backup_path}.tar.gz"
    
    # –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö backup (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
    find "${BACKUP_DIR}" -name "*.tar.gz" -mtime +30 -delete
}

# –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
deploy_application() {
    local environment=$1
    local version=$2
    local app_dir="/opt/${APP_NAME}"
    
    log "INFO" "Starting deployment of ${APP_NAME} ${version} to ${environment}"
    
    # –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    cd "${app_dir}"
    
    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
    log "INFO" "Updating code to version ${version}"
    git fetch origin
    git checkout "${version}"
    git pull origin "${version}"
    
    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    if [ -f "requirements.txt" ]; then
        log "INFO" "Updating Python dependencies"
        pip install -r requirements.txt
    fi
    
    if [ -f "package.json" ]; then
        log "INFO" "Updating Node.js dependencies"
        npm ci --production
    fi
    
    # –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤
    log "INFO" "Building Docker images"
    docker-compose build --no-cache
    
    # –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    log "INFO" "Running database migrations"
    docker-compose run --rm web python manage.py migrate
    
    # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
    log "INFO" "Restarting services"
    docker-compose down
    docker-compose up -d
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤
    health_check
    
    log "INFO" "Deployment completed successfully"
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
health_check() {
    local max_attempts=30
    local attempt=1
    
    log "INFO" "Performing health check"
    
    while [ $attempt -le $max_attempts ]; do
        if curl -f -s http://localhost:8000/health > /dev/null; then
            log "INFO" "Health check passed"
            return 0
        fi
        
        log "WARN" "Health check failed, attempt ${attempt}/${max_attempts}"
        sleep 10
        ((attempt++))
    done
    
    log "ERROR" "Health check failed after ${max_attempts} attempts"
    return 1
}

# –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫–∞—Ç–∞
rollback() {
    local backup_file=$1
    
    log "WARN" "Rolling back to backup: ${backup_file}"
    
    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    docker-compose down
    
    # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup
    tar -xzf "${backup_file}" -C "${BACKUP_DIR}"
    local backup_name=$(basename "${backup_file}" .tar.gz)
    
    # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
    rm -rf "/opt/${APP_NAME}"
    cp -r "${BACKUP_DIR}/${backup_name}/code" "/opt/${APP_NAME}"
    
    # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    if [ -f "${BACKUP_DIR}/${backup_name}/database.sql" ]; then
        docker-compose up -d db
        sleep 30
        docker exec -i "${APP_NAME}_db" psql -U postgres myapp < "${BACKUP_DIR}/${backup_name}/database.sql"
    fi
    
    # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
    docker-compose up -d
    
    log "INFO" "Rollback completed"
}

# –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
send_notification() {
    local status=$1
    local message=$2
    local webhook_url="${SLACK_WEBHOOK_URL}"
    
    if [ -n "${webhook_url}" ]; then
        curl -X POST -H 'Content-type: application/json' \
            --data "{\"text\":\"[${APP_NAME}] ${status}: ${message}\"}" \
            "${webhook_url}"
    fi
}

# –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
main() {
    local environment=${1:-staging}
    local version=${2:-main}
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
    if [ "$(whoami)" != "${DEPLOY_USER}" ]; then
        log "ERROR" "This script must be run as ${DEPLOY_USER} user"
        exit 1
    fi
    
    # –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤
    mkdir -p "$(dirname "${LOG_FILE}")"
    
    log "INFO" "Starting deployment process"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    check_dependencies
    
    # –°–æ–∑–¥–∞–Ω–∏–µ backup
    create_backup
    
    # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
    if deploy_application "${environment}" "${version}"; then
        send_notification "SUCCESS" "Deployment of ${version} to ${environment} completed"
    else
        log "ERROR" "Deployment failed"
        send_notification "FAILURE" "Deployment of ${version} to ${environment} failed"
        
        # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫–∞—Ç–∞
        read -p "Do you want to rollback? (y/n): " -n 1 -r
        echo
        if [[ $REPLY =~ ^[Yy]$ ]]; then
            local latest_backup=$(ls -t "${BACKUP_DIR}"/*.tar.gz | head -1)
            rollback "${latest_backup}"
        fi
        
        exit 1
    fi
}

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
trap 'log "ERROR" "Script interrupted"; exit 1' INT TERM

# –ó–∞–ø—É—Å–∫ –≥–ª–∞–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
main "$@"
```

**–ü–æ–ª–µ–∑–Ω—ã–µ bash —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞/–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
if [ -f "/path/to/file" ]; then
    echo "File exists"
fi

if [ -d "/path/to/directory" ]; then
    echo "Directory exists"
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
if [ -r "/path/to/file" ]; then
    echo "File is readable"
fi

if [ -w "/path/to/file" ]; then
    echo "File is writable"
fi

if [ -x "/path/to/file" ]; then
    echo "File is executable"
fi

# –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏
servers=("web1.example.com" "web2.example.com" "web3.example.com")

for server in "${servers[@]}"; do
    echo "Deploying to ${server}"
    ssh "${server}" "systemctl restart nginx"
done

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
for server in "${servers[@]}"; do
    ssh "${server}" "systemctl restart nginx" &
done
wait  # –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á

# –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
while IFS= read -r line; do
    echo "Processing: ${line}"
done < input.txt

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
random_password=$(openssl rand -base64 32)
random_id=$(uuidgen)

# –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
current_date=$(date '+%Y-%m-%d')
timestamp=$(date '+%Y-%m-%d %H:%M:%S')
unix_timestamp=$(date +%s)

# –ü–∞—Ä—Å–∏–Ω–≥ JSON —Å jq
config_value=$(cat config.json | jq -r '.database.host')

# –í–∞–ª–∏–¥–∞—Ü–∏—è email
validate_email() {
    local email=$1
    if [[ $email =~ ^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$ ]]; then
        return 0
    else
        return 1
    fi
}

# Retry —Ñ—É–Ω–∫—Ü–∏—è
retry() {
    local max_attempts=$1
    shift
    local cmd=("$@")
    local attempt=1
    
    while [ $attempt -le $max_attempts ]; do
        if "${cmd[@]}"; then
            return 0
        fi
        
        echo "Attempt $attempt failed, retrying..."
        ((attempt++))
        sleep 5
    done
    
    echo "All $max_attempts attempts failed"
    return 1
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: retry 3 curl -f http://example.com
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ —Å Cron

Cron –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞—á–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é:

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ crontab
crontab -e                                                # –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo crontab -e                                           # –¥–ª—è root
sudo crontab -u username -e                               # –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

# –ü—Ä–æ—Å–º–æ—Ç—Ä crontab
crontab -l                                                # —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
sudo crontab -l                                           # root
sudo crontab -u username -l                               # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

# –£–¥–∞–ª–µ–Ω–∏–µ crontab
crontab -r                                                # —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏

# –§–æ—Ä–º–∞—Ç crontab:
# –º–∏–Ω—É—Ç–∞ —á–∞—Å –¥–µ–Ω—å_–º–µ—Å—è—Ü–∞ –º–µ—Å—è—Ü –¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏ –∫–æ–º–∞–Ω–¥–∞
# 0-59   0-23    1-31      1-12    0-7     (0 –∏ 7 = –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
```

**–ü—Ä–∏–º–µ—Ä—ã cron –∑–∞–¥–∞—á:**

```bash
# Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2:00
0 2 * * * /usr/local/bin/backup-database.sh

# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ –∫–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 3:00
0 3 * * 0 find /var/log -name "*.log" -mtime +7 -delete

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
*/5 * * * * /usr/local/bin/check-services.sh

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é
0 4 * * 1 systemctl restart myservice

# –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞ –∫–∞–∂–¥—ã–π –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞
0 9 1 * * /usr/local/bin/monthly-report.sh

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∫–∞–∂–¥—ã–π —á–∞—Å
0 * * * * df -h | grep -E '9[0-9]%|100%' && echo "Disk space warning" | mail -s "Disk Alert" admin@company.com

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ crontab
SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=admin@company.com

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
0 1 * * * /usr/local/bin/backup.sh && find /backup -name "*.tar.gz" -mtime +30 -delete

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏
0 3 * * * ntpdate -s time.nist.gov

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
0 6 * * * /usr/local/bin/check-ssl-expiry.sh
```

**–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤:**

```bash
#!/bin/bash
# /usr/local/bin/check-services.sh

SERVICES=("nginx" "postgresql" "redis" "docker")
ALERT_EMAIL="admin@company.com"
LOG_FILE="/var/log/service-monitor.log"

for service in "${SERVICES[@]}"; do
    if ! systemctl is-active --quiet "$service"; then
        echo "$(date): $service is not running" >> "$LOG_FILE"
        echo "$service is down on $(hostname)" | mail -s "Service Alert" "$ALERT_EMAIL"
        
        # –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
        systemctl restart "$service"
        sleep 10
        
        if systemctl is-active --quiet "$service"; then
            echo "$(date): $service restarted successfully" >> "$LOG_FILE"
        else
            echo "$(date): Failed to restart $service" >> "$LOG_FILE"
        fi
    fi
done
```

### Ansible –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

Ansible –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Å–µ—Ä–≤–µ—Ä–æ–≤:

```
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Ansible:

Control Node (Ansible Controller)
‚îú‚îÄ‚îÄ Inventory (—Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤)
‚îú‚îÄ‚îÄ Playbooks (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)
‚îú‚îÄ‚îÄ Roles (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
‚îî‚îÄ‚îÄ Modules (–∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
        ‚Üì
    SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
        ‚Üì
Managed Nodes (—Ü–µ–ª–µ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã)
‚îú‚îÄ‚îÄ Server 1
‚îú‚îÄ‚îÄ Server 2
‚îî‚îÄ‚îÄ Server N
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ansible:**

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install ansible

# CentOS/RHEL
sudo yum install epel-release
sudo yum install ansible

# pip
pip install ansible

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
ansible --version
```

**Inventory —Ñ–∞–π–ª:**

```ini
# /etc/ansible/hosts –∏–ª–∏ inventory/hosts

# –ì—Ä—É–ø–ø—ã —Å–µ—Ä–≤–µ—Ä–æ–≤
[webservers]
web1.example.com
web2.example.com
web3.example.com

[databases]
db1.example.com
db2.example.com

[loadbalancers]
lb1.example.com

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≥—Ä—É–ø–ø
[webservers:vars]
ansible_user=deploy
ansible_ssh_private_key_file=~/.ssh/deploy_key
http_port=80
max_clients=200

[databases:vars]
ansible_user=postgres
postgresql_version=13

# –í—Å–µ —Å–µ—Ä–≤–µ—Ä—ã production
[production:children]
webservers
databases
loadbalancers

# YAML —Ñ–æ—Ä–º–∞—Ç inventory
# inventory/hosts.yml
all:
  children:
    webservers:
      hosts:
        web1.example.com:
          ansible_host: 192.168.1.10
        web2.example.com:
          ansible_host: 192.168.1.11
      vars:
        http_port: 80
        
    databases:
      hosts:
        db1.example.com:
          ansible_host: 192.168.1.20
          postgresql_version: 13
```

**–ü—Ä–æ—Å—Ç—ã–µ ad-hoc –∫–æ–º–∞–Ω–¥—ã:**

```bash
# Ping –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
ansible all -m ping

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
ansible webservers -m command -a "uptime"
ansible webservers -m shell -a "df -h | grep -v tmpfs"

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
ansible webservers -m service -a "name=nginx state=restarted"
ansible databases -m service -a "name=postgresql state=started enabled=yes"

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞–º–∏
ansible webservers -m apt -a "name=nginx state=present" --become
ansible webservers -m yum -a "name=httpd state=latest" --become

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
ansible webservers -m copy -a "src=/local/file dest=/remote/file" --become
ansible webservers -m file -a "path=/tmp/test state=directory mode=0755" --become

# –°–±–æ—Ä —Ñ–∞–∫—Ç–æ–≤ –æ —Å–∏—Å—Ç–µ–º–µ
ansible webservers -m setup | grep ansible_distribution
ansible webservers -m setup -a "filter=ansible_memory_mb"
```

**Playbook –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞:**

```yaml
# webserver-setup.yml
---
- name: Setup Web Server
  hosts: webservers
  become: yes
  vars:
    nginx_version: "1.20.*"
    domain_name: "{{ inventory_hostname }}"
    
  tasks:
    - name: Update package cache
      apt:
        update_cache: yes
        cache_valid_time: 3600
      when: ansible_os_family == "Debian"
    
    - name: Install Nginx
      package:
        name: nginx
        state: present
    
    - name: Install additional packages
      package:
        name: "{{ item }}"
        state: present
      loop:
        - ufw
        - certbot
        - python3-certbot-nginx
    
    - name: Start and enable Nginx
      service:
        name: nginx
        state: started
        enabled: yes
    
    - name: Configure firewall
      ufw:
        rule: allow
        port: "{{ item }}"
        proto: tcp
      loop:
        - '22'
        - '80'
        - '443'
    
    - name: Enable firewall
      ufw:
        state: enabled
        policy: deny
        direction: incoming
    
    - name: Create document root
      file:
        path: "/var/www/{{ domain_name }}"
        state: directory
        owner: www-data
        group: www-data
        mode: '0755'
    
    - name: Copy index.html template
      template:
        src: index.html.j2
        dest: "/var/www/{{ domain_name }}/index.html"
        owner: www-data
        group: www-data
        mode: '0644'
      notify: restart nginx
    
    - name: Copy Nginx configuration
      template:
        src: nginx-site.conf.j2
        dest: "/etc/nginx/sites-available/{{ domain_name }}"
        owner: root
        group: root
        mode: '0644'
      notify: restart nginx
    
    - name: Enable site
      file:
        src: "/etc/nginx/sites-available/{{ domain_name }}"
        dest: "/etc/nginx/sites-enabled/{{ domain_name }}"
        state: link
      notify: restart nginx
    
    - name: Remove default site
      file:
        path: /etc/nginx/sites-enabled/default
        state: absent
      notify: restart nginx
    
    - name: Test Nginx configuration
      command: nginx -t
      changed_when: false
    
    - name: Obtain SSL certificate
      shell: >
        certbot --nginx -d {{ domain_name }} 
        --non-interactive --agree-tos 
        --email admin@{{ domain_name }}
      args:
        creates: "/etc/letsencrypt/live/{{ domain_name }}/fullchain.pem"
    
    - name: Setup certificate renewal
      cron:
        name: "Renew SSL certificates"
        minute: "0"
        hour: "2"
        job: "certbot renew --quiet && systemctl reload nginx"
  
  handlers:
    - name: restart nginx
      service:
        name: nginx
        state: restarted
    
    - name: reload nginx
      service:
        name: nginx
        state: reloaded
```

**Ansible —Ä–æ–ª–∏:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–æ–ª–∏
ansible-galaxy init nginx-role

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ–ª–∏:
# nginx-role/
# ‚îú‚îÄ‚îÄ defaults/main.yml      # –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
# ‚îú‚îÄ‚îÄ files/                 # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
# ‚îú‚îÄ‚îÄ handlers/main.yml      # –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
# ‚îú‚îÄ‚îÄ meta/main.yml          # –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ä–æ–ª–∏
# ‚îú‚îÄ‚îÄ tasks/main.yml         # –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏
# ‚îú‚îÄ‚îÄ templates/             # —à–∞–±–ª–æ–Ω—ã Jinja2
# ‚îú‚îÄ‚îÄ tests/                 # —Ç–µ—Å—Ç—ã
# ‚îî‚îÄ‚îÄ vars/main.yml          # –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏
```

```yaml
# nginx-role/tasks/main.yml
---
- name: Install Nginx
  package:
    name: nginx
    state: present
  become: yes

- name: Start Nginx service
  service:
    name: nginx
    state: started
    enabled: yes
  become: yes

- name: Copy configuration templates
  template:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
    owner: root
    group: root
    mode: '0644'
  loop:
    - { src: 'nginx.conf.j2', dest: '/etc/nginx/nginx.conf' }
    - { src: 'site.conf.j2', dest: '/etc/nginx/sites-available/{{ site_name }}' }
  notify: restart nginx
  become: yes

# nginx-role/handlers/main.yml
---
- name: restart nginx
  service:
    name: nginx
    state: restarted
  become: yes

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–æ–ª–∏ –≤ playbook
---
- name: Deploy web application
  hosts: webservers
  roles:
    - { role: nginx-role, site_name: "myapp.com" }
```

**–ó–∞–ø—É—Å–∫ playbooks:**

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
ansible-playbook webserver-setup.yml                      # –∑–∞–ø—É—Å–∫ playbook
ansible-playbook -i inventory/hosts webserver-setup.yml   # —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º inventory
ansible-playbook webserver-setup.yml --limit webservers   # —Ç–æ–ª—å–∫–æ –¥–ª—è –≥—Ä—É–ø–ø—ã webservers
ansible-playbook webserver-setup.yml --tags nginx         # —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ —Å —Ç–µ–≥–æ–º nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
ansible-playbook webserver-setup.yml --check              # dry run
ansible-playbook webserver-setup.yml --diff               # –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

# –û—Ç–ª–∞–¥–∫–∞
ansible-playbook webserver-setup.yml -v                   # verbose
ansible-playbook webserver-setup.yml -vvv                 # –æ—á–µ–Ω—å verbose

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á
ansible-playbook webserver-setup.yml --step               # –ø–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
ansible-playbook webserver-setup.yml --start-at-task="Install Nginx"
```

### CI/CD —Å Git Hooks

Git hooks –ø–æ–∑–≤–æ–ª—è—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:

**Pre-commit hook –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞:**

```bash
#!/bin/bash
# .git/hooks/pre-commit

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Python —Ñ–∞–π–ª–æ–≤
echo "Checking Python syntax..."
python_files=$(git diff --cached --name-only --diff-filter=ACM | grep '\.py_on:
      db:
        condition: service_healthy
      redis:
        condition: service_started
    restart: unless-stopped
    networks:
      - backend
      - frontend
    deploy:
      replicas: 2
      resources:
        limits:
          cpus: '0.5'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 256M

  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
  db:
    image: postgres:13-alpine
    environment:
      POSTGRES_DB: myapp
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_INITDB_ARGS: "--encoding=UTF-8"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql:ro
    ports:
      - "5432:5432"                                        # —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U user -d myapp"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    restart: unless-stopped
    networks:
      - backend

  # Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
  redis:
    image: redis:6-alpine
    command: redis-server --appendonly yes --requirepass mypassword
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"
    restart: unless-stopped
    networks:
      - backend

  # Nginx reverse proxy
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./ssl:/etc/nginx/ssl:ro
      - static_volume:/var/www/static:ro
      - media_volume:/var/www/media:ro
    depends)

if [ -n "$python_files" ]; then
    for file in $python_files; do
        python -m py_compile "$file"
        if [ $? -ne 0 ]; then
            echo "Python syntax error in $file"
            exit 1
        fi
    done
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å black
if [ -n "$python_files" ]; then
    black --check $python_files
    if [ $? -ne 0 ]; then
        echo "Code formatting issues found. Run 'black .' to fix."
        exit 1
    fi
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º
if [ -n "$python_files" ]; then
    flake8 $python_files
    if [ $? -ne 0 ]; then
        echo "Linting issues found."
        exit 1
    fi
fi

echo "All checks passed!"
```

**Post-receive hook –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**

```bash
#!/bin/bash
# hooks/post-receive (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

APP_NAME="mywebapp"
APP_DIR="/opt/$APP_NAME"
DEPLOY_USER="deploy"
LOG_FILE="/var/log/$APP_NAME/deploy.log"

# –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
log() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" >> "$LOG_FILE"
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
if [ "$(whoami)" != "$DEPLOY_USER" ]; then
    echo "Deploy must be run as $DEPLOY_USER user"
    exit 1
fi

while read oldrev newrev refname; do
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ push –≤ main –≤–µ—Ç–∫—É
    if [ "$refname" = "refs/heads/main" ]; then
        log "Starting deployment for commit $newrev"
        
        # –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
        cd "$APP_DIR"
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
        git --git-dir="$APP_DIR/.git" --work-tree="$APP_DIR" checkout -f main
        
        # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        if [ -f "requirements.txt" ]; then
            log "Installing Python dependencies"
            pip install -r requirements.txt
        fi
        
        # –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π
        if [ -f "manage.py" ]; then
            log "Running database migrations"
            python manage.py migrate
        fi
        
        # –°–±–æ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
        if [ -f "manage.py" ]; then
            log "Collecting static files"
            python manage.py collectstatic --noinput
        fi
        
        # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
        log "Restarting services"
        sudo systemctl restart "$APP_NAME"
        sudo systemctl restart nginx
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
        sleep 10
        if curl -f -s http://localhost:8000/health > /dev/null; then
            log "Deployment successful"
            echo "Deployment successful!"
        else
            log "Deployment failed - health check failed"
            echo "Deployment failed!"
            exit 1
        fi
    fi
done
```

---

## –≠—Ç–∞–ø 8: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Prometheus –∏ Grafana

Prometheus ‚Äî —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞, Grafana ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫.

```
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí Exporters ‚Üí Prometheus ‚Üí Grafana
     ‚Üì           ‚Üì           ‚Üì          ‚Üì
  –ú–µ—Ç—Ä–∏–∫–∏   –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ  –•—Ä–∞–Ω–µ–Ω–∏–µ  –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
             –≤ —Ñ–æ—Ä–º–∞—Ç       –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö    –∏ –∞–ª–µ—Ä—Ç—ã
             Prometheus      —Ä—è–¥–æ–≤
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Prometheus:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo useradd --no-create-home --shell /bin/false prometheus

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
sudo mkdir /etc/prometheus
sudo mkdir /var/lib/prometheus
sudo chown prometheus:prometheus /etc/prometheus
sudo chown prometheus:prometheus /var/lib/prometheus

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
cd /tmp
wget https://github.com/prometheus/prometheus/releases/download/v2.30.3/prometheus-2.30.3.linux-amd64.tar.gz
tar xvf prometheus-2.30.3.linux-amd64.tar.gz
cd prometheus-2.30.3.linux-amd64

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
sudo cp prometheus /usr/local/bin/
sudo cp promtool /usr/local/bin/
sudo chown prometheus:prometheus /usr/local/bin/prometheus
sudo chown prometheus:prometheus /usr/local/bin/promtool

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo cp -r consoles /etc/prometheus
sudo cp -r console_libraries /etc/prometheus
sudo chown -R prometheus:prometheus /etc/prometheus/consoles
sudo chown -R prometheus:prometheus /etc/prometheus/console_libraries
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus:**

```yaml
# /etc/prometheus/prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "rules/*.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - localhost:9093

scrape_configs:
  # Prometheus —Å–∞–º —Å–µ–±—è
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Node Exporter –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
  - job_name: 'node'
    static_configs:
      - targets: 
        - 'web1.example.com:9100'
        - 'web2.example.com:9100'
        - 'db1.example.com:9100'

  # Nginx –º–µ—Ç—Ä–∏–∫–∏
  - job_name: 'nginx'
    static_configs:
      - targets: ['localhost:9113']

  # PostgreSQL –º–µ—Ç—Ä–∏–∫–∏
  - job_name: 'postgres'
    static_configs:
      - targets: ['localhost:9187']

  # Application –º–µ—Ç—Ä–∏–∫–∏
  - job_name: 'myapp'
    static_configs:
      - targets: ['localhost:8000']
    metrics_path: '/metrics'
    scrape_interval: 5s

  # Docker –º–µ—Ç—Ä–∏–∫–∏
  - job_name: 'docker'
    static_configs:
      - targets: ['localhost:9323']

  # Blackbox exporter –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
  - job_name: 'blackbox'
    metrics_path: /probe
    params:
      module: [http_2xx]
    static_configs:
      - targets:
        - https://example.com
        - https://api.example.com
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: localhost:9115
```

**Systemd —Å–µ—Ä–≤–∏—Å –¥–ª—è Prometheus:**

```ini
# /etc/systemd/system/prometheus.service
[Unit]
Description=Prometheus
Wants=network-online.target
After=network-online.target

[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/usr/local/bin/prometheus \
    --config.file /etc/prometheus/prometheus.yml \
    --storage.tsdb.path /var/lib/prometheus/ \
    --web.console.templates=/etc/prometheus/consoles \
    --web.console.libraries=/etc/prometheus/console_libraries \
    --web.listen-address=0.0.0.0:9090 \
    --web.enable-lifecycle \
    --storage.tsdb.retention.time=30d

[Install]
WantedBy=multi-user.target
```

```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl daemon-reload
sudo systemctl enable prometheus
sudo systemctl start prometheus
sudo systemctl status prometheus
```

**Node Exporter –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node Exporter
cd /tmp
wget https://github.com/prometheus/node_exporter/releases/download/v1.2.2/node_exporter-1.2.2.linux-amd64.tar.gz
tar xvf node_exporter-1.2.2.linux-amd64.tar.gz
sudo cp node_exporter-1.2.2.linux-amd64/node_exporter /usr/local/bin/

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo useradd --no-create-home --shell /bin/false node_exporter
sudo chown node_exporter:node_exporter /usr/local/bin/node_exporter
```

```ini
# /etc/systemd/system/node_exporter.service
[Unit]
Description=Node Exporter
Wants=network-online.target
After=network-online.target

[Service]
User=node_exporter
Group=node_exporter
Type=simple
ExecStart=/usr/local/bin/node_exporter \
    --collector.systemd \
    --collector.processes \
    --web.listen-address=:9100

[Install]
WantedBy=multi-user.target
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Grafana:**

```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
sudo apt-get install -y software-properties-common
sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
wget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo apt-get update
sudo apt-get install grafana

# –ó–∞–ø—É—Å–∫
sudo systemctl enable grafana-server
sudo systemctl start grafana-server
sudo systemctl status grafana-server

# –î–æ—Å—Ç—É–ø: http://localhost:3000 (admin/admin)
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Grafana –∫–∞–∫ –∫–æ–¥:**

```yaml
# /etc/grafana/provisioning/datasources/prometheus.yml
apiVersion: 1

datasources:
  - name: Prometheus
    type: prometheus
    access: proxy
    url: http://localhost:9090
    isDefault: true
    editable: true
```

**–ü—Ä–∏–º–µ—Ä –¥–∞—à–±–æ—Ä–¥–∞ Grafana (JSON):**

```json
{
  "dashboard": {
    "title": "System Overview",
    "panels": [
      {
        "title": "CPU Usage",
        "type": "graph",
        "targets": [
          {
            "expr": "100 - (avg(irate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)",
            "legendFormat": "CPU Usage %"
          }
        ]
      },
      {
        "title": "Memory Usage",
        "type": "graph", 
        "targets": [
          {
            "expr": "(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100",
            "legendFormat": "Memory Usage %"
          }
        ]
      },
      {
        "title": "Disk Usage",
        "type": "graph",
        "targets": [
          {
            "expr": "100 - ((node_filesystem_avail_bytes{mountpoint=\"/\"} * 100) / node_filesystem_size_bytes{mountpoint=\"/\"})",
            "legendFormat": "Disk Usage %"
          }
        ]
      }
    ]
  }
}
```

**–ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞ Prometheus:**

```yaml
# /etc/prometheus/rules/alerts.yml
groups:
  - name: system_alerts
    rules:
      - alert: HighCPUUsage
        expr: 100 - (avg(irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High CPU usage detected"
          description: "CPU usage is above 80% for more than 5 minutes"

      - alert: HighMemoryUsage
        expr: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100 > 90
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "High memory usage detected"
          description: "Memory usage is above 90% for more than 5 minutes"

      - alert: DiskSpaceLow
        expr: 100 - ((node_filesystem_avail_bytes{mountpoint="/"} * 100) / node_filesystem_size_bytes{mountpoint="/"}) > 85
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: "Low disk space"
          description: "Disk usage is above 85%"

      - alert: ServiceDown
        expr: up == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Service is down"
          description: "Service {{ $labels.job }} is down"

  - name: application_alerts
    rules:
      - alert: HighResponseTime
        expr: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) > 0.5
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High response time"
          description: "95th percentile response time is above 500ms"

      - alert: HighErrorRate
        expr: rate(http_requests_total{status=~"5.."}[5m]) / rate(http_requests_total[5m]) > 0.1
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "High error rate"
          description: "Error rate is above 10%"
```

### ELK Stack –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

ELK Stack (Elasticsearch, Logstash, Kibana) –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑.

```
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ELK:

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí Filebeat ‚Üí Logstash ‚Üí Elasticsearch ‚Üí Kibana
     ‚Üì          ‚Üì          ‚Üì           ‚Üì            ‚Üì
   –õ–æ–≥–∏    –°–±–æ—Ä –ª–æ–≥–æ–≤  –û–±—Ä–∞–±–æ—Ç–∫–∞   –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è   –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
           —Å —Å–µ—Ä–≤–µ—Ä–æ–≤   –∏ –ø–∞—Ä—Å–∏–Ω–≥   –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ   –∏ –ø–æ–∏—Å–∫
```

**Docker Compose –¥–ª—è ELK Stack:**

```yaml
# elk-stack.yml
version: '3.8'

services:
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:7.15.0
    container_name: elasticsearch
    environment:
      - node.name=elasticsearch
      - cluster.name=elk-cluster
      - discovery.type=single-node
      - bootstrap.memory_lock=true
      - "ES_JAVA_OPTS=-Xms2g -Xmx2g"
      - xpack.security.enabled=false
    ulimits:
      memlock:
        soft: -1
        hard: -1
    volumes:
      - elasticsearch_data:/usr/share/elasticsearch/data
    ports:
      - "9200:9200"
      - "9300:9300"
    networks:
      - elk

  logstash:
    image: docker.elastic.co/logstash/logstash:7.15.0
    container_name: logstash
    volumes:
      - ./logstash/config:/usr/share/logstash/config:ro
      - ./logstash/pipeline:/usr/share/logstash/pipeline:ro
    ports:
      - "5044:5044"
      - "5000:5000/tcp"
      - "5000:5000/udp"
      - "9600:9600"
    environment:
      LS_JAVA_OPTS: "-Xmx1g -Xms1g"
    networks:
      - elk
    depends_on:
      - elasticsearch

  kibana:
    image: docker.elastic.co/kibana/kibana:7.15.0
    container_name: kibana
    ports:
      - "5601:5601"
    environment:
      ELASTICSEARCH_URL: http://elasticsearch:9200
      ELASTICSEARCH_HOSTS: '["http://elasticsearch:9200"]'
    networks:
      - elk
    depends_on:
      - elasticsearch

  filebeat:
    image: docker.elastic.co/beats/filebeat:7.15.0
    container_name: filebeat
    user: root
    volumes:
      - ./filebeat/filebeat.yml:/usr/share/filebeat/filebeat.yml:ro
      - /var/lib/docker/containers:/var/lib/docker/containers:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - /var/log:/var/log:ro
    networks:
      - elk
    depends_on:
      - logstash

volumes:
  elasticsearch_data:
    driver: local

networks:
  elk:
    driver: bridge
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Logstash:**

```ruby
# logstash/pipeline/logstash.conf
input {
  beats {
    port => 5044
  }
  
  tcp {
    port => 5000
    codec => json
  }
  
  udp {
    port => 5000
    codec => json
  }
}

filter {
  # Nginx access logs
  if [fileset][module] == "nginx" and [fileset][name] == "access" {
    grok {
      match => { 
        "message" => '%{IPORHOST:remote_addr} - %{DATA:remote_user} \[%{HTTPDATE:time_local}\] "%{WORD:method} %{DATA:request} HTTP/%{NUMBER:http_version}" %{INT:status} %{INT:body_bytes_sent} "%{DATA:http_referer}" "%{DATA:http_user_agent}"'
      }
    }
    
    date {
      match => [ "time_local", "dd/MMM/yyyy:HH:mm:ss Z" ]
    }
    
    mutate {
      convert => {
        "status" => "integer"
        "body_bytes_sent" => "integer"
      }
    }
  }
  
  # Application logs
  if [fields][service] == "myapp" {
    if [message] =~ /^\{.*\}$/ {
      json {
        source => "message"
      }
    }
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–µ–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ IP
    if [remote_addr] {
      geoip {
        source => "remote_addr"
        target => "geoip"
      }
    }
  }
  
  # Docker logs
  if [container][name] {
    mutate {
      add_field => { "service" => "%{[container][name]}" }
    }
  }
  
  # –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  if [level] {
    mutate {
      uppercase => [ "level" ]
    }
  }
}

output {
  elasticsearch {
    hosts => ["elasticsearch:9200"]
    index => "logs-%{+YYYY.MM.dd}"
  }
  
  # –î–µ–±–∞–≥ –≤—ã–≤–æ–¥
  stdout {
    codec => rubydebug
  }
}
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Filebeat:**

```yaml
# filebeat/filebeat.yml
filebeat.inputs:
  # –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
  - type: log
    enabled: true
    paths:
      - /var/log/syslog
      - /var/log/auth.log
    fields:
      service: system
      
  # Nginx –ª–æ–≥–∏
  - type: log
    enabled: true
    paths:
      - /var/log/nginx/access.log
    fields:
      service: nginx
      log_type: access
      
  - type: log
    enabled: true
    paths:
      - /var/log/nginx/error.log
    fields:
      service: nginx
      log_type: error
      
  # Docker –ª–æ–≥–∏
  - type: docker
    containers.ids:
      - '*'
    processors:
      - add_docker_metadata:
          host: "unix:///var/run/docker.sock"

# –ú–æ–¥—É–ª–∏
filebeat.modules:
  - module: nginx
    access:
      enabled: true
      var.paths: ["/var/log/nginx/access.log"]
    error:
      enabled: true
      var.paths: ["/var/log/nginx/error.log"]
      
  - module: system
    syslog:
      enabled: true
    auth:
      enabled: true

# Output –∫ Logstash
output.logstash:
  hosts: ["logstash:5044"]

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.level: info
logging.to_files: true
logging.files:
  path: /var/log/filebeat
  name: filebeat
  keepfiles: 7
  permissions: 0644

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
monitoring.enabled: true
```

**–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –≤ Kibana:**

```bash
# –ó–∞–ø—É—Å–∫ ELK Stack
docker-compose -f elk-stack.yml up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
curl http://localhost:9200/_cluster/health?pretty
curl http://localhost:5601/api/status

# –°–æ–∑–¥–∞–Ω–∏–µ index pattern –≤ Kibana
# 1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:5601
# 2. Management ‚Üí Index Patterns
# 3. –°–æ–∑–¥–∞—Ç—å pattern "logs-*"
# 4. –í—ã–±—Ä–∞—Ç—å @timestamp –∫–∞–∫ time field
```

**–ü–æ–ª–µ–∑–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ Kibana:**

```json
// –û—à–∏–±–∫–∏ 5xx –≤ Nginx
{
  "query": {
    "bool": {
      "must": [
        { "range": { "status": { "gte": 500, "lt": 600 } } },
        { "match": { "service": "nginx" } }
      ]
    }
  }
}

// –¢–æ–ø IP –∞–¥—Ä–µ—Å–æ–≤ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤
{
  "size": 0,
  "aggs": {
    "top_ips": {
      "terms": {
        "field": "remote_addr.keyword",
        "size": 10
      }
    }
  }
}

// –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (response time > 1s)
{
  "query": {
    "range": {
      "response_time": {
        "gt": 1000
      }
    }
  }
}

// –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —É—Ä–æ–≤–Ω–µ–º ERROR
{
  "query": {
    "bool": {
      "must": [
        { "match": { "service": "myapp" } },
        { "match": { "level": "ERROR" } }
      ]
    }
  }
}
```

**Alerting –≤ Kibana (Watcher):**

```json
{
  "trigger": {
    "schedule": {
      "interval": "1m"
    }
  },
  "input": {
    "search": {
      "request": {
        "search_type": "query_then_fetch",
        "indices": ["logs-*"],
        "body": {
          "query": {
            "bool": {
              "must": [
                {
                  "range": {
                    "@timestamp": {
                      "gte": "now-5m"
                    }
                  }
                },
                {
                  "range": {
                    "status": {
                      "gte": 500
                    }
                  }
                }
              ]
            }
          }
        }
      }
    }
  },
  "condition": {
    "compare": {
      "ctx.payload.hits.total": {
        "gt": 10
      }
    }
  },
  "actions": {
    "send_email": {
      "email": {
        "to": ["admin@company.com"],
        "subject": "High Error Rate Alert",
        "body": "More than 10 server errors in the last 5 minutes"
      }
    }
  }
}
```

---

## –≠—Ç–∞–ø 9: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ production

### Hardening —Å–∏—Å—Ç–µ–º—ã

Hardening ‚Äî –ø—Ä–æ—Ü–µ—Å—Å —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –ø—É—Ç–µ–º –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –∞—Ç–∞–∫–∏.

**–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Ubuntu/Debian)
sudo apt install unattended-upgrades apt-listchanges

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
sudo dpkg-reconfigure -plow unattended-upgrades

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ /etc/apt/apt.conf.d/50unattended-upgrades
Unattended-Upgrade::Allowed-Origins {
    "${distro_id}:${distro_codename}";
    "${distro_id}:${distro_codename}-security";
    "${distro_id}ESMApps:${distro_codename}-apps-security";
    "${distro_id}ESM:${distro_codename}-infra-security";
};

Unattended-Upgrade::Remove-Unused-Kernel-Packages "true";
Unattended-Upgrade::Remove-New-Unused-Dependencies "true";
Unattended-Upgrade::Remove-Unused-Dependencies "true";
Unattended-Upgrade::Automatic-Reboot "false";
Unattended-Upgrade::Automatic-Reboot-Time "02:00";

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
sudo cat /var/log/unattended-upgrades/unattended-upgrades.log
```

**–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl list-unit-files --type=service --state=enabled

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl disable telnet.socket
sudo systemctl disable rsh.socket
sudo systemctl disable rlogin.socket
sudo systemctl disable vsftpd
sudo systemctl disable apache2                             # –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤
sudo netstat -tulnp
sudo ss -tulnp

# –ó–∞–∫—Ä—ã—Ç–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ—Ä—Ç–æ–≤ —á–µ—Ä–µ–∑ firewall
sudo ufw deny 23/tcp                                       # telnet
sudo ufw deny 21/tcp                                       # ftp
sudo ufw deny 512/tcp                                      # rexec
sudo ufw deny 513/tcp                                      # rlogin
sudo ufw deny 514/tcp                                      # rsh
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

```bash
# /etc/ssh/sshd_config - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ (security through obscurity)
Port 2222

# –ó–∞–ø—Ä–µ—Ç root login
PermitRootLogin no

# –¢–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
PasswordAuthentication no
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
AllowUsers alice bob charlie
DenyUsers guest test

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≥—Ä—É–ø–ø
AllowGroups ssh-users sudo

# –¢–∞–π–º–∞—É—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
MaxAuthTries 3
MaxSessions 2
MaxStartups 3
LoginGraceTime 30
ClientAliveInterval 300
ClientAliveCountMax 2

# –ó–∞–ø—Ä–µ—Ç –ø—É—Å—Ç—ã—Ö –ø–∞—Ä–æ–ª–µ–π
PermitEmptyPasswords no

# –ó–∞–ø—Ä–µ—Ç X11 forwarding –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω
X11Forwarding no

# –ó–∞–ø—Ä–µ—Ç TCP forwarding –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω
AllowTcpForwarding no

# –ó–∞–ø—Ä–µ—Ç Agent forwarding
AllowAgentForwarding no

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏–ª—å–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
Protocol 2
Ciphers aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
MACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha2-256,hmac-sha2-512
KexAlgorithms diffie-hellman-group14-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512

# –ë–∞–Ω–Ω–µ—Ä –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
Banner /etc/ssh/banner.txt

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
ForceCommand /usr/local/bin/log-ssh-commands.sh

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
sudo systemctl restart sshd
```

**–°–∫—Ä–∏–ø—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è SSH –∫–æ–º–∞–Ω–¥:**

```bash
#!/bin/bash
# /usr/local/bin/log-ssh-commands.sh

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ syslog
logger -t ssh-session "User $USER connected from $SSH_CLIENT"

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥
export HISTFILE="/var/log/ssh-commands/${USER}-$(date +%Y%m%d).log"
export HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S "
export PROMPT_COMMAND='echo "$(date): $(whoami)@$(hostname):$(pwd) $(history 1)" >> /var/log/ssh-commands/commands.log'

# –ó–∞–ø—É—Å–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –æ–±–æ–ª–æ—á–∫–∏
exec "$SHELL"_on:
      db:
        condition: service_healthy
      redis:
        condition: service_started
    restart: unless-stopped
    networks:
      - backend
      - frontend
    deploy:
      replicas: 2
      resources:
        limits:
          cpus: '0.5'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 256M

  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
  db:
    image: postgres:13-alpine
    environment:
      POSTGRES_DB: myapp
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_INITDB_ARGS: "--encoding=UTF-8"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql:ro
    ports:
      - "5432:5432"                                        # —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U user -d myapp"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    restart: unless-stopped
    networks:
      - backend

  # Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
  redis:
    image: redis:6-alpine
    command: redis-server --appendonly yes --requirepass mypassword
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"
    restart: unless-stopped
    networks:
      - backend

  # Nginx reverse proxy
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./ssl:/etc/nginx/ssl:ro
      - static_volume:/var/www/static:ro
      - media_volume:/var/www/media:ro
    depends

exec "$SHELL"
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ (PAM):**

```bash
# /etc/pam.d/common-auth - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
auth    required    pam_tally2.so deny=3 unlock_time=1800 onerr=fail

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
password required pam_pwquality.so retry=3 minlen=12 difok=3 ucredit=-1 lcredit=-1 dcredit=-1 ocredit=-1

# /etc/security/pwquality.conf - –¥–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–æ–ª–µ–π
minlen = 12                                                # –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞
minclass = 3                                               # –º–∏–Ω–∏–º—É–º –∫–ª–∞—Å—Å–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤
maxrepeat = 2                                              # –º–∞–∫—Å–∏–º—É–º –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤
maxclasrepeat = 3                                          # –º–∞–∫—Å–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤ –æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –ø–æ–¥—Ä—è–¥
dictcheck = 1                                              # –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Å–ª–æ–≤–∞—Ä—é

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
sudo pam_tally2 --user=alice                               # —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo pam_tally2 --user=alice --reset                       # —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
```

### Fail2ban - –∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫

Fail2ban –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–æ–≥–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç IP –∞–¥—Ä–µ—Å–∞ —Å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo apt install fail2ban                                  # Ubuntu/Debian
sudo yum install epel-release && sudo yum install fail2ban # CentOS/RHEL

# –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
/etc/fail2ban/fail2ban.conf                                # –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
/etc/fail2ban/jail.conf                                    # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ jail (–Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å!)
/etc/fail2ban/jail.local                                   # –ª–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
/etc/fail2ban/filter.d/                                    # —Ñ–∏–ª—å—Ç—Ä—ã –ª–æ–≥–æ–≤
/etc/fail2ban/action.d/                                    # –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è jail.local:**

```ini
# /etc/fail2ban/jail.local
[DEFAULT]
# –í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
bantime = 3600

# –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
findtime = 600

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
maxretry = 3

# –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ IP –∞–¥—Ä–µ—Å–∞
ignoreip = 127.0.0.1/8 ::1 192.168.1.0/24 10.0.0.0/8

# Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
destemail = admin@company.com
sender = fail2ban@company.com
mta = sendmail

# –î–µ–π—Å—Ç–≤–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
action = %(action_mwl)s

[sshd]
enabled = true
port = ssh,2222
filter = sshd
logpath = /var/log/auth.log
maxretry = 3
bantime = 3600

[nginx-http-auth]
enabled = true
filter = nginx-http-auth
port = http,https
logpath = /var/log/nginx/error.log
maxretry = 3

[nginx-noscript]
enabled = true
port = http,https
filter = nginx-noscript
logpath = /var/log/nginx/access.log
maxretry = 6

[nginx-badbots]
enabled = true
port = http,https
filter = nginx-badbots
logpath = /var/log/nginx/access.log
maxretry = 2

[nginx-noproxy]
enabled = true
port = http,https
filter = nginx-noproxy
logpath = /var/log/nginx/access.log
maxretry = 2

[postfix]
enabled = true
port = smtp,465,submission
filter = postfix
logpath = /var/log/mail.log

[postfix-sasl]
enabled = true
port = smtp,465,submission
filter = postfix-sasl
logpath = /var/log/mail.log

[mysql]
enabled = true
port = 3306
filter = mysqld-auth
logpath = /var/log/mysql/error.log
maxretry = 3

[postgresql]
enabled = true
port = 5432
filter = postgresql
logpath = /var/log/postgresql/postgresql-*.log
maxretry = 3
```

**–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤:**

```ini
# /etc/fail2ban/filter.d/nginx-login.conf
[Definition]
failregex = ^<HOST> -.*"POST /login.*" 401
            ^<HOST> -.*"POST /admin.*" 403

ignoreregex =

# /etc/fail2ban/filter.d/django-auth.conf
[Definition]
failregex = ^<HOST> -.*"POST /accounts/login.*" 400
            Django.*Invalid login.*from <HOST>

ignoreregex =

# /etc/fail2ban/filter.d/wordpress.conf
[Definition]
failregex = ^<HOST> -.*"POST /wp-login.php.*" 200
            ^<HOST> -.*"POST /wp-admin.*" 200

ignoreregex =
```

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:**

```bash
# /etc/fail2ban/action.d/telegram-notify.conf
[Definition]
actionstart = 
actionstop = 
actioncheck = 
actionban = curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/sendMessage" -d "chat_id=<CHAT_ID>&text=Fail2ban: banned <ip> for <failures> failures"
actionunban = curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/sendMessage" -d "chat_id=<CHAT_ID>&text=Fail2ban: unbanned <ip>"

[Init]
BOT_TOKEN = your_telegram_bot_token
CHAT_ID = your_chat_id
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Fail2ban:**

```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl status fail2ban

# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö jail
sudo fail2ban-client status

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ jail
sudo fail2ban-client status sshd

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö IP
sudo fail2ban-client get sshd banip

# –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP
sudo fail2ban-client set sshd unbanip 203.0.113.100

# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP –≤—Ä—É—á–Ω—É—é
sudo fail2ban-client set sshd banip 203.0.113.100

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo fail2ban-client reload

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ jail
sudo fail2ban-client restart sshd

# –õ–æ–≥–∏ Fail2ban
sudo tail -f /var/log/fail2ban.log
```

### –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**Lynis - –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Lynis
sudo apt install lynis                                     # Ubuntu/Debian
sudo yum install lynis                                     # CentOS/RHEL

# –ò–ª–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
cd /tmp
wget https://downloads.cisofy.com/lynis/lynis-3.0.6.tar.gz
tar xzf lynis-3.0.6.tar.gz
cd lynis

# –ó–∞–ø—É—Å–∫ –∞—É–¥–∏—Ç–∞
sudo ./lynis audit system

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞
sudo cat /var/log/lynis.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
sudo ./lynis audit system --tests SSH,FILE,NETW

# –¢–∏—Ö–∏–π —Ä–µ–∂–∏–º –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤
sudo ./lynis audit system --quiet
```

**Chkrootkit –∏ rkhunter - –ø–æ–∏—Å–∫ —Ä—É—Ç–∫–∏—Ç–æ–≤:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ chkrootkit
sudo apt install chkrootkit

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏
sudo chkrootkit

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ rkhunter
sudo apt install rkhunter

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo rkhunter --update

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è baseline
sudo rkhunter --propupd

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏
sudo rkhunter --check

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ cron
echo "0 3 * * * root /usr/bin/rkhunter --check --quiet --report-warnings-only" | sudo tee -a /etc/crontab
```

**AIDE - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ AIDE
sudo apt install aide

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo aideinit

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo cp /var/lib/aide/aide.db.new /var/lib/aide/aide.db

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
sudo aide --check

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
sudo aide --update
sudo cp /var/lib/aide/aide.db.new /var/lib/aide/aide.db

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ /etc/aide/aide.conf
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–∞–∂–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
/bin        BINLIB
/sbin       BINLIB  
/usr/bin    BINLIB
/usr/sbin   BINLIB
/etc        CONFFILE
/var/log    LOG

# –ò—Å–∫–ª—é—á–µ–Ω–∏—è
!/var/log/.*
!/tmp/.*
!/proc/.*
!/sys/.*

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ cron
echo "0 4 * * * root /usr/bin/aide --check" | sudo tee -a /etc/crontab
```

### Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

**–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**

```bash
#!/bin/bash
# /usr/local/bin/backup-system.sh
# –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

set -euo pipefail

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
BACKUP_ROOT="/backup"
RETENTION_DAYS=30
RETENTION_WEEKS=12
RETENTION_MONTHS=12
LOG_FILE="/var/log/backup.log"
NOTIFICATION_EMAIL="admin@company.com"

# –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
log() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" | tee -a "$LOG_FILE"
}

# –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã backup
create_backup_structure() {
    local backup_date=$(date +%Y-%m-%d)
    local backup_time=$(date +%H%M%S)
    
    DAILY_DIR="$BACKUP_ROOT/daily/$backup_date"
    WEEKLY_DIR="$BACKUP_ROOT/weekly/$(date +%Y-W%V)"
    MONTHLY_DIR="$BACKUP_ROOT/monthly/$(date +%Y-%m)"
    
    mkdir -p "$DAILY_DIR" "$WEEKLY_DIR" "$MONTHLY_DIR"
    
    # –¢–µ–∫—É—â–∏–π backup
    CURRENT_BACKUP="$DAILY_DIR/$backup_time"
    mkdir -p "$CURRENT_BACKUP"
}

# Backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
backup_configs() {
    log "Backing up configuration files"
    
    tar -czf "$CURRENT_BACKUP/configs.tar.gz" \
        /etc \
        /var/spool/cron \
        /usr/local/etc \
        2>/dev/null || true
        
    log "Configuration backup completed"
}

# Backup –¥–æ–º–∞—à–Ω–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
backup_home_dirs() {
    log "Backing up home directories"
    
    tar -czf "$CURRENT_BACKUP/home.tar.gz" \
        --exclude="*/tmp/*" \
        --exclude="*/.cache/*" \
        --exclude="*/Downloads/*" \
        /home \
        2>/dev/null || true
        
    log "Home directories backup completed"
}

# Backup –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
backup_databases() {
    log "Backing up databases"
    
    # PostgreSQL
    if systemctl is-active --quiet postgresql; then
        sudo -u postgres pg_dumpall > "$CURRENT_BACKUP/postgresql.sql"
        gzip "$CURRENT_BACKUP/postgresql.sql"
    fi
    
    # MySQL
    if systemctl is-active --quiet mysql; then
        mysqldump --all-databases --single-transaction --routines --triggers > "$CURRENT_BACKUP/mysql.sql"
        gzip "$CURRENT_BACKUP/mysql.sql"
    fi
    
    # Redis
    if systemctl is-active --quiet redis; then
        cp /var/lib/redis/dump.rdb "$CURRENT_BACKUP/redis.rdb"
    fi
    
    log "Database backup completed"
}

# Backup Docker –¥–∞–Ω–Ω—ã—Ö
backup_docker() {
    if command -v docker &> /dev/null; then
        log "Backing up Docker data"
        
        # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
        docker-compose down 2>/dev/null || true
        
        # Backup volumes
        docker run --rm -v docker_data_volume:/data -v "$CURRENT_BACKUP":/backup alpine tar czf /backup/docker-volumes.tar.gz -C /data .
        
        # Backup –æ–±—Ä–∞–∑–æ–≤
        docker save $(docker images --format "table {{.Repository}}:{{.Tag}}" | tail -n +2) > "$CURRENT_BACKUP/docker-images.tar"
        gzip "$CURRENT_BACKUP/docker-images.tar"
        
        # –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –æ–±—Ä–∞—Ç–Ω–æ
        docker-compose up -d 2>/dev/null || true
        
        log "Docker backup completed"
    fi
}

# Backup –≤–µ–±-–∫–æ–Ω—Ç–µ–Ω—Ç–∞
backup_web_content() {
    log "Backing up web content"
    
    if [ -d "/var/www" ]; then
        tar -czf "$CURRENT_BACKUP/www.tar.gz" /var/www
    fi
    
    if [ -d "/opt" ]; then
        tar -czf "$CURRENT_BACKUP/opt.tar.gz" \
            --exclude="*/node_modules/*" \
            --exclude="*/venv/*" \
            --exclude="*/__pycache__/*" \
            /opt
    fi
    
    log "Web content backup completed"
}

# –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ backup —Å rsync
incremental_backup() {
    local today=$(date +%Y-%m-%d)
    local yesterday=$(date -d "yesterday" +%Y-%m-%d)
    local link_dest=""
    
    if [ -d "$BACKUP_ROOT/daily/$yesterday" ]; then
        link_dest="--link-dest=$BACKUP_ROOT/daily/$yesterday"
    fi
    
    log "Creating incremental backup"
    
    rsync -avH --delete \
        $link_dest \
        --exclude="/dev/*" \
        --exclude="/proc/*" \
        --exclude="/sys/*" \
        --exclude="/tmp/*" \
        --exclude="/run/*" \
        --exclude="/mnt/*" \
        --exclude="/media/*" \
        --exclude="/lost+found" \
        --exclude="/var/cache/*" \
        --exclude="/var/tmp/*" \
        / "$CURRENT_BACKUP/system/"
        
    log "Incremental backup completed"
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ backup
verify_backup() {
    log "Verifying backup integrity"
    
    # –°–æ–∑–¥–∞–Ω–∏–µ checksums
    find "$CURRENT_BACKUP" -type f -exec sha256sum {} \; > "$CURRENT_BACKUP/checksums.sha256"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ backup
    local backup_size=$(du -sh "$CURRENT_BACKUP" | cut -f1)
    log "Backup size: $backup_size"
    
    # –¢–µ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–≤—ã–±–æ—Ä–æ—á–Ω–æ)
    if [ -f "$CURRENT_BACKUP/configs.tar.gz" ]; then
        tar -tzf "$CURRENT_BACKUP/configs.tar.gz" > /dev/null
        log "Configuration backup verification: OK"
    fi
}

# –†–æ—Ç–∞—Ü–∏—è backup'–æ–≤
rotate_backups() {
    log "Rotating old backups"
    
    # –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö daily backup'–æ–≤
    find "$BACKUP_ROOT/daily" -type d -mtime +$RETENTION_DAYS -exec rm -rf {} \; 2>/dev/null || true
    
    # –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö weekly backup'–æ–≤
    find "$BACKUP_ROOT/weekly" -type d -mtime +$((RETENTION_WEEKS * 7)) -exec rm -rf {} \; 2>/dev/null || true
    
    # –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö monthly backup'–æ–≤
    find "$BACKUP_ROOT/monthly" -type d -mtime +$((RETENTION_MONTHS * 30)) -exec rm -rf {} \; 2>/dev/null || true
    
    log "Backup rotation completed"
}

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ weekly/monthly –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
create_weekly_monthly() {
    local day_of_week=$(date +%u)
    local day_of_month=$(date +%d)
    
    # Weekly backup (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
    if [ "$day_of_week" = "7" ]; then
        log "Creating weekly backup link"
        ln -sf "$CURRENT_BACKUP" "$WEEKLY_DIR/$(basename $CURRENT_BACKUP)"
    fi
    
    # Monthly backup (–ø–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ –º–µ—Å—è—Ü–∞)
    if [ "$day_of_month" = "01" ]; then
        log "Creating monthly backup link"
        ln -sf "$CURRENT_BACKUP" "$MONTHLY_DIR/$(basename $CURRENT_BACKUP)"
    fi
}

# –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
send_notification() {
    local status=$1
    local message=$2
    
    if command -v mail &> /dev/null; then
        echo "$message" | mail -s "Backup $status - $(hostname)" "$NOTIFICATION_EMAIL"
    fi
    
    # Slack webhook (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
    if [ -n "${SLACK_WEBHOOK_URL:-}" ]; then
        curl -X POST -H 'Content-type: application/json' \
            --data "{\"text\":\"[$(hostname)] Backup $status: $message\"}" \
            "$SLACK_WEBHOOK_URL"
    fi
}

# –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
main() {
    log "Starting backup process"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
    local available_space=$(df "$BACKUP_ROOT" | awk 'NR==2 {print $4}')
    if [ "$available_space" -lt 1048576 ]; then  # –ú–µ–Ω–µ–µ 1GB
        log "ERROR: Insufficient disk space"
        send_notification "FAILED" "Insufficient disk space for backup"
        exit 1
    fi
    
    create_backup_structure
    
    # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ backup'–∞
    backup_configs
    backup_home_dirs
    backup_databases
    backup_docker
    backup_web_content
    incremental_backup
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–æ—Ç–∞—Ü–∏—è
    verify_backup
    create_weekly_monthly
    rotate_backups
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    local total_size=$(du -sh "$BACKUP_ROOT" | cut -f1)
    local backup_duration=$SECONDS
    
    log "Backup completed successfully in ${backup_duration}s, total backup size: $total_size"
    send_notification "SUCCESS" "Backup completed in ${backup_duration}s, size: $total_size"
}

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
trap 'log "ERROR: Backup failed"; send_notification "FAILED" "Backup process encountered an error"; exit 1' ERR

# –ó–∞–ø—É—Å–∫
main "$@"
```

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è backup —á–µ—Ä–µ–∑ cron:**

```bash
# /etc/cron.d/backup-system
SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=admin@company.com

# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π backup –≤ 2:00
0 2 * * * root /usr/local/bin/backup-system.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ backup'–æ–≤ –∫–∞–∂–¥—ã–π —á–∞—Å
0 * * * * root /usr/local/bin/check-backup-health.sh

# –¢–µ—Å—Ç–æ–≤–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
0 4 * * 0 root /usr/local/bin/test-restore.sh
```

**–°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**

```bash
#!/bin/bash
# /usr/local/bin/test-restore.sh

BACKUP_ROOT="/backup"
TEST_RESTORE_DIR="/tmp/restore-test"
LOG_FILE="/var/log/restore-test.log"

log() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" | tee -a "$LOG_FILE"
}

# –ü–æ–∏—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ backup'–∞
latest_backup=$(find "$BACKUP_ROOT/daily" -type d -name "*" | sort | tail -1)

if [ -z "$latest_backup" ]; then
    log "ERROR: No backup found"
    exit 1
fi

log "Testing restore from: $latest_backup"

# –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
rm -rf "$TEST_RESTORE_DIR"
mkdir -p "$TEST_RESTORE_DIR"

# –¢–µ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
if [ -f "$latest_backup/configs.tar.gz" ]; then
    log "Testing configuration restore"
    tar -xzf "$latest_backup/configs.tar.gz" -C "$TEST_RESTORE_DIR"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
    if [ -f "$TEST_RESTORE_DIR/etc/passwd" ] && [ -f "$TEST_RESTORE_DIR/etc/ssh/sshd_config" ]; then
        log "Configuration restore: SUCCESS"
    else
        log "Configuration restore: FAILED"
        exit 1
    fi
fi

# –¢–µ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
if [ -f "$latest_backup/postgresql.sql.gz" ]; then
    log "Testing database restore"
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã
    sudo -u postgres createdb test_restore_db
    
    # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
    gunzip -c "$latest_backup/postgresql.sql.gz" | sudo -u postgres psql test_restore_db
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞
    table_count=$(sudo -u postgres psql -t -c "SELECT count(*) FROM information_schema.tables;" test_restore_db)
    
    if [ "$table_count" -gt 0 ]; then
        log "Database restore: SUCCESS ($table_count tables)"
    else
        log "Database restore: FAILED"
    fi
    
    # –û—á–∏—Å—Ç–∫–∞
    sudo -u postgres dropdb test_restore_db
fi

# –û—á–∏—Å—Ç–∫–∞
rm -rf "$TEST_RESTORE_DIR"

log "Restore test completed successfully"
```

---

## –≠—Ç–∞–ø 10: Performance tuning

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

Linux –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —Ç—é–Ω–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏.

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —è–¥—Ä–∞ (sysctl):**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
sysctl -a | grep -E "(net|vm|kernel)" | head -20

# –í—Ä–µ–º–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
sudo sysctl net.core.somaxconn=65535

# –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ /etc/sysctl.conf –∏–ª–∏ /etc/sysctl.d/99-custom.conf
```

```ini
# /etc/sysctl.d/99-performance.conf
# –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è web-—Å–µ—Ä–≤–µ—Ä–æ–≤

# === –°–µ—Ç–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ===

# –†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
net.core.somaxconn = 65535

# –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
net.core.netdev_max_backlog = 30000

# –†–∞–∑–º–µ—Ä—ã —Å–æ–∫–µ—Ç–Ω—ã—Ö –±—É—Ñ–µ—Ä–æ–≤
net.core.rmem_default = 262144
net.core.rmem_max = 16777216
net.core.wmem_default = 262144
net.core.wmem_max = 16777216

# TCP –±—É—Ñ–µ—Ä—ã
net.ipv4.tcp_rmem = 4096 87380 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216

# TCP congestion control (BBR –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)
net.core.default_qdisc = fq
net.ipv4.tcp_congestion_control = bbr

# TCP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
net.ipv4.tcp_fin_timeout = 30
net.ipv4.tcp_keepalive_time = 600
net.ipv4.tcp_keepalive_intvl = 30
net.ipv4.tcp_keepalive_probes = 3
net.ipv4.tcp_max_syn_backlog = 8192
net.ipv4.tcp_max_tw_buckets = 2000000
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_no_metrics_save = 1

# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤
net.ipv4.ip_local_port_range = 1024 65535

# === –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ ===

# –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å swap (0-100, –º–µ–Ω—å—à–µ = —Ä–µ–∂–µ swap)
vm.swappiness = 1

# –ü—Ä–æ—Ü–µ–Ω—Ç –≥—Ä—è–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –Ω–∞—á–∞–ª–∞ –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫
vm.dirty_background_ratio = 5
vm.dirty_ratio = 10

# –í—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≥—Ä—è–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (—Å–æ—Ç—ã–µ –¥–æ–ª–∏ —Å–µ–∫—É–Ω–¥—ã)
vm.dirty_expire_centisecs = 3000
vm.dirty_writeback_centisecs = 500

# === –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ ===

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤
fs.file-max = 2097152

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ inotify watches
fs.inotify.max_user_watches = 524288
fs.inotify.max_user_instances = 256

# === –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ===

# –ó–∞—â–∏—Ç–∞ –æ—Ç SYN flood –∞—Ç–∞–∫
net.ipv4.tcp_syncookies = 1

# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ ICMP redirects
net.ipv4.conf.all.accept_redirects = 0
net.ipv6.conf.all.accept_redirects = 0

# –ó–∞—â–∏—Ç–∞ –æ—Ç IP spoofing
net.ipv4.conf.all.rp_filter = 1

# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ ping –∑–∞–ø—Ä–æ—Å–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# net.ipv4.icmp_echo_ignore_all = 1

# === –Ø–¥—Ä–æ ===

# –†–∞–∑–º–µ—Ä —Ä–∞–∑–¥–µ–ª—è–µ–º–æ–π –ø–∞–º—è—Ç–∏
kernel.shmmax = 68719476736
kernel.shmall = 4294967296

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
kernel.pid_max = 4194304

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
# sudo sysctl -p /etc/sysctl.d/99-performance.conf
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ª–∏–º–∏—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã:**

```bash
# /etc/security/limits.conf - –ª–∏–º–∏—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# <domain> <type> <item> <value>

# –õ–∏–º–∏—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* soft nofile 65535
* hard nofile 65535
* soft nproc 32768
* hard nproc 32768

# –õ–∏–º–∏—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–≥—Ä—É–ø–ø
www-data soft nofile 100000
www-data hard nofile 100000

postgres soft nofile 8192
postgres hard nofile 8192

# –ü–∞–º—è—Ç—å –¥–ª—è core dumps
* soft core unlimited

# –†–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞
* soft stack 8192
* hard stack 32768

# /etc/security/limits.d/90-nproc.conf (CentOS/RHEL)
# –õ–∏–º–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* soft nproc 4096
root soft nproc unlimited

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –ª–∏–º–∏—Ç–æ–≤
ulimit -a                                                  # –≤—Å–µ –ª–∏–º–∏—Ç—ã
ulimit -n                                                  # —Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã
ulimit -u                                                  # –ø—Ä–æ—Ü–µ—Å—Å—ã

# –í—Ä–µ–º–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤
ulimit -n 100000                                           # —É–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç —Ñ–∞–π–ª–æ–≤
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd –ª–∏–º–∏—Ç–æ–≤ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤:**

```ini
# /etc/systemd/system/nginx.service.d/limits.conf
[Service]
LimitNOFILE=100000
LimitNPROC=32768
LimitCORE=infinity

# /etc/systemd/system/postgresql.service.d/limits.conf
[Service]
LimitNOFILE=8192
LimitNPROC=4096

# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ systemd
# /etc/systemd/system.conf
DefaultLimitNOFILE=65535
DefaultLimitNPROC=32768

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
sudo systemctl daemon-reload
sudo systemctl restart nginx
```

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**CPU –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å perf:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ perf
sudo apt install linux-tools-common linux-tools-generic    # Ubuntu/Debian
sudo yum install perf                                       # CentOS/RHEL

# –°–∏—Å—Ç–µ–º–Ω–æ–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
sudo perf top                                               # —Ç–æ–ø —Ñ—É–Ω–∫—Ü–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo perf top -p $(pgrep nginx)                            # –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

# –ó–∞–ø–∏—Å—å –ø—Ä–æ—Ñ–∏–ª—è
sudo perf record -g ./my_application                       # –∑–∞–ø–∏—Å—å —Å call graph
sudo perf record -F 99 -a -g -- sleep 30                  # –∑–∞–ø–∏—Å—å –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã 30 —Å–µ–∫—É–Ω–¥

# –ê–Ω–∞–ª–∏–∑ –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
sudo perf report                                            # –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑
sudo perf report --stdio                                   # —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç

# CPU —Å–æ–±—ã—Ç–∏—è
sudo perf stat ./my_application                            # —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
sudo perf stat -e cache-misses,cache-references ./app     # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

# Flamegraphs –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
git clone https://github.com/brendangregg/FlameGraph.git
sudo perf record -F 99 -a -g -- sleep 30
sudo perf script | ./FlameGraph/stackcollapse-perf.pl | ./FlameGraph/flamegraph.pl > flame.svg
```

**–ê–Ω–∞–ª–∏–∑ –ø–∞–º—è—Ç–∏:**

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–º
pmap -x $(pgrep nginx)                                     # –∫–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
cat /proc/$(pgrep nginx)/smaps                             # –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

# –ê–Ω–∞–ª–∏–∑ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ —Å valgrind
sudo apt install valgrind
valgrind --tool=memcheck --leak-check=full ./my_app

# –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ —Å massif
valgrind --tool=massif ./my_app
ms_print massif.out.* | head -50

# –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ /proc/meminfo
watch -n 1 'cat /proc/meminfo | head -20'

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–ª–∞–±–∞–º (slab allocator)
sudo cat /proc/slabinfo | head -20
sudo slabtop                                               # —Ç–æ–ø –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π slab –ø–∞–º—è—Ç–∏

# OOM killer –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
dmesg | grep -i "killed process"
cat /var/log/kern.log | grep -i "out of memory"
```

**I/O –∞–Ω–∞–ª–∏–∑:**

```bash
# iostat –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∏—Å–∫–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
iostat -x 1                                               # –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
iostat -x -d 1 10                                         # 10 —Ä–∞–∑ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É

# –í–∞–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ iostat:
# %util - –ø—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –¥–∏—Å–∫–∞
# await - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
# r/s, w/s - –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ –≤ —Å–µ–∫—É–Ω–¥—É
# rkB/s, wkB/s - KB/s —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏

# iotop –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ I/O –ø–æ –ø—Ä–æ—Ü–µ—Å—Å–∞–º
sudo iotop -o                                             # —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
sudo iotop -a                                             # –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π I/O

# –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
sudo iotop -p $(pgrep postgres)

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
sudo lsof +L1                                             # —Ñ–∞–π–ª—ã —Å —É–¥–∞–ª–µ–Ω–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
sudo lsof | grep "(deleted)"                              # —É–¥–∞–ª–µ–Ω–Ω—ã–µ –Ω–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–∏—Å–∫–∞
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ
sudo dd if=/dev/sda of=/dev/null bs=1M count=1000

# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å
sudo dd if=/dev/zero of=/tmp/testfile bs=1M count=1000 oflag=direct

# –°–ª—É—á–∞–π–Ω—ã–π I/O —Å fio
sudo apt install fio
fio --name=random-rw --ioengine=libaio --iodepth=64 --rw=randrw --bs=4k --direct=1 --size=1G --numjobs=4 --runtime=60 --group_reporting
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–µ–±-—Å—Ç–µ–∫–∞

**–¢—é–Ω–∏–Ω–≥ Nginx:**

```nginx
# /etc/nginx/nginx.conf - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ worker –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–æ–±—ã—á–Ω–æ = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ CPU —è–¥–µ—Ä)
worker_processes auto;

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ worker
events {
    worker_connections 8192;
    use epoll;                                             # —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π event model –¥–ª—è Linux
    multi_accept on;                                       # –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å—Ä–∞–∑—É
    accept_mutex off;                                      # –æ—Ç–∫–ª—é—á–∏—Ç—å –º—å—é—Ç–µ–∫—Å –¥–ª—è SMP —Å–∏—Å—Ç–µ–º
}

http {
    # === –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ===
    
    # –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤
    sendfile on;
    tcp_nopush on;                                         # –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
    tcp_nodelay on;                                        # –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ Nagle
    
    # Keep-alive —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    keepalive_timeout 65;
    keepalive_requests 1000;                               # –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
    
    # –†–∞–∑–º–µ—Ä—ã –±—É—Ñ–µ—Ä–æ–≤
    client_body_buffer_size 16k;
    client_header_buffer_size 1k;
    client_max_body_size 50m;
    large_client_header_buffers 4 16k;
    
    # –¢–∞–π–º–∞—É—Ç—ã
    client_body_timeout 12;
    client_header_timeout 12;
    send_timeout 10;
    
    # === –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ ===
    
    # –ö–µ—à –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤
    open_file_cache max=10000 inactive=20s;
    open_file_cache_valid 30s;
    open_file_cache_min_uses 2;
    open_file_cache_errors on;
    
    # === –°–∂–∞—Ç–∏–µ ===
    
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_comp_level 6;
    gzip_types
        text/plain
        text/css
        text/javascript
        text/xml
        application/json
        application/javascript
        application/xml+rss
        application/atom+xml
        image/svg+xml;
    
    # === SSL –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ===
    
    # SSL session cache
    ssl_session_cache shared:SSL:50m;
    ssl_session_timeout 1d;
    ssl_session_tickets off;
    
    # OCSP stapling
    ssl_stapling on;
    ssl_stapling_verify on;
    
    # === –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ===
    
    # –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –ª–æ–≥–æ–≤
    access_log /var/log/nginx/access.log main buffer=64k flush=5s;
    error_log /var/log/nginx/error.log warn;
    
    # –ò–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ access –ª–æ–≥–æ–≤ –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
    location ~* \.(jpg|jpeg|png|gif|css|js|ico|svg)$ {
        access_log off;
        expires 1M;
        add_header Cache-Control "public, immutable";
    }
    
    # === Upstream –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ===
    
    upstream backend {
        least_conn;                                        # –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–∞–≥—Ä—É–∑–∫–µ
        server 127.0.0.1:3000 max_fails=3 fail_timeout=30s;
        server 127.0.0.1:3001 max_fails=3 fail_timeout=30s;
        keepalive 32;                                      # keep-alive –∫ backend
    }
    
    # === Proxy –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ===
    
    proxy_buffering on;
    proxy_buffer_size 8k;
    proxy_buffers 8 8k;
    proxy_busy_buffers_size 16k;
    
    # –¢–∞–π–º–∞—É—Ç—ã –∫ backend
    proxy_connect_timeout 5s;
    proxy_send_timeout 10s;
    proxy_read_timeout 30s;
    
    # HTTP/1.1 –∫ backend –¥–ª—è keep-alive
    proxy_http_version 1.1;
    proxy_set_header Connection "";
}
```

**–¢—é–Ω–∏–Ω–≥ PostgreSQL:**

```ini
# /etc/postgresql/13/main/postgresql.conf - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

# === –ü–∞–º—è—Ç—å ===

# –†–∞–∑–¥–µ–ª—è–µ–º–∞—è –ø–∞–º—è—Ç—å (25% –æ—Ç RAM)
shared_buffers = 2GB

# –ö–µ—à –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ (75% –æ—Ç RAM)
effective_cache_size = 6GB

# –†–∞–±–æ—á–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
work_mem = 64MB

# –ü–∞–º—è—Ç—å –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (vacuum, index creation)
maintenance_work_mem = 512MB

# === WAL (Write-Ahead Logging) ===

# –†–∞–∑–º–µ—Ä WAL —Å–µ–≥–º–µ–Ω—Ç–æ–≤
wal_level = replica
max_wal_size = 4GB
min_wal_size = 1GB

# –ë—É—Ñ–µ—Ä—ã WAL
wal_buffers = 16MB

# Checkpoint –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
checkpoint_completion_target = 0.9
checkpoint_timeout = 15min

# === –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ ===

# –°—Ç–æ–∏–º–æ—Å—Ç—å —Å–ª—É—á–∞–π–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Å–∫—É
random_page_cost = 1.1                                    # –¥–ª—è SSD
# random_page_cost = 4.0                                  # –¥–ª—è HDD

# –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
seq_page_cost = 1.0

# –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å I/O
effective_io_concurrency = 200                            # –¥–ª—è SSD
# effective_io_concurrency = 2                            # –¥–ª—è HDD

# === –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è ===

max_connections = 200
superuser_reserved_connections = 3

# === –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ ===

log_min_duration_statement = 1000                         # –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã > 1 —Å–µ–∫
log_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '
log_lock_waits = on
log_temp_files = 0

# === –ê–≤—Ç–æ–≤–∞–∫—É—É–º ===

autovacuum = on
autovacuum_max_workers = 4
autovacuum_naptime = 30s
autovacuum_vacuum_threshold = 50
autovacuum_analyze_threshold = 50
autovacuum_vacuum_scale_factor = 0.1
autovacuum_analyze_scale_factor = 0.05

# === –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ ===

shared_preload_libraries = 'pg_stat_statements'
pg_stat_statements.max = 10000
pg_stat_statements.track = all
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ PostgreSQL:**

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
CREATE EXTENSION IF NOT EXISTS pg_stat_statements;

-- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
SELECT 
    query,
    calls,
    total_time,
    mean_time,
    stddev_time,
    rows
FROM pg_stat_statements 
ORDER BY total_time DESC 
LIMIT 10;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö
SELECT 
    datname,
    numbackends,
    xact_commit,
    xact_rollback,
    blks_read,
    blks_hit,
    temp_files,
    temp_bytes
FROM pg_stat_database 
WHERE datname NOT IN ('template0', 'template1', 'postgres');

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∞–±–ª–∏—Ü–∞–º
SELECT 
    schemaname,
    tablename,
    seq_scan,
    seq_tup_read,
    idx_scan,
    idx_tup_fetch,
    n_tup_ins,
    n_tup_upd,
    n_tup_del
FROM pg_stat_user_tables 
ORDER BY seq_scan DESC;

-- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã
SELECT 
    indexrelname,
    relname,
    idx_scan,
    pg_size_pretty(pg_relation_size(indexrelname::regclass)) as size
FROM pg_stat_user_indexes 
WHERE idx_scan = 0 
ORDER BY pg_relation_size(indexrelname::regclass) DESC;

-- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏
SELECT 
    pid,
    usename,
    query,
    state,
    wait_event_type,
    wait_event
FROM pg_stat_activity 
WHERE state != 'idle' AND pid != pg_backend_pid();

-- Cache hit ratio
SELECT 
    'cache hit ratio' as metric,
    round(
        sum(blks_hit) * 100.0 / nullif(sum(blks_hit) + sum(blks_read), 0), 2
    ) as ratio
FROM pg_stat_database;
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

**–í—ã–±–æ—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:**

```bash
# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫:

# ext4 - —Ö–æ—Ä–æ—à–∏–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä
# - –û—Ç–ª–∏—á–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
# - –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤
# - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

# XFS - –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
# - –û—Ç–ª–∏—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (–≤–∏–¥–µ–æ, backup)
# - –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ I/O
# - –õ—É—á—à–µ ext4 –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º

# Btrfs - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è FS —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
# - –°–Ω–µ–ø—à–æ—Ç—ã –∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
# - –°–∂–∞—Ç–∏–µ –Ω–∞ –ª–µ—Ç—É
# - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ext4
# /etc/fstab
/dev/sda1 / ext4 defaults,noatime,data=writeback,barrier=0,nobh 0 1
/dev/sdb1 /var/log ext4 defaults,noatime,data=journal 0 2

# –û–ø—Ü–∏–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
# noatime - –Ω–µ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Ä–µ–º—è –¥–æ—Å—Ç—É–ø–∞ (–±–æ–ª—å—à–æ–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
# data=writeback - –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –º–µ–Ω–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ
# data=journal - –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ
# barrier=0 - –æ—Ç–∫–ª—é—á–∏—Ç—å –±–∞—Ä—å–µ—Ä—ã –∑–∞–ø–∏—Å–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–∏—Å—Ç–µ–º —Å UPS)
# nobh - –æ—Ç–∫–ª—é—á–∏—Ç—å buffer heads

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è SSD
# /etc/fstab –¥–ª—è SSD
/dev/ssd1 / ext4 defaults,noatime,discard,data=ordered 0 1

# discard - –≤–∫–ª—é—á–∏—Ç—å TRIM –¥–ª—è SSD
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fstrim –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏:
sudo fstrim -av                                           # TRIM –≤—Å–µ—Ö –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö FS

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ cron
echo "0 1 * * 0 root /sbin/fstrim -av" | sudo tee -a /etc/crontab
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è I/O –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
cat /sys/block/sda/queue/scheduler
# [mq-deadline] kyber bfq none

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –¥–ª—è SSD
echo none | sudo tee /sys/block/sda/queue/scheduler       # –¥–ª—è NVMe SSD
echo mq-deadline | sudo tee /sys/block/sda/queue/scheduler # –¥–ª—è SATA SSD

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –¥–ª—è HDD
echo bfq | sudo tee /sys/block/sda/queue/scheduler         # –ª—É—á—à–µ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

# –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ udev
# /etc/udev/rules.d/60-schedulers.rules

# SSD - –æ—Ç–∫–ª—é—á–∞–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
ACTION=="add|change", KERNEL=="sd[a-z]|mmcblk[0-9]*|nvme[0-9]*", ATTR{queue/rotational}=="0", ATTR{queue/scheduler}="none"

# HDD - –∏—Å–ø–æ–ª—å–∑—É–µ–º BFQ –∏–ª–∏ mq-deadline
ACTION=="add|change", KERNEL=="sd[a-z]", ATTR{queue/rotational}=="1", ATTR{queue/scheduler}="bfq"

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
sudo udevadm control --reload-rules
sudo udevadm trigger
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ readahead:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è readahead
sudo blockdev --getra /dev/sda

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ readahead –¥–ª—è SSD (–º–µ–Ω—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
sudo blockdev --setra 256 /dev/sda                        # 128KB –¥–ª—è SSD

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ readahead –¥–ª—è HDD (–±–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
sudo blockdev --setra 4096 /dev/sda                       # 2MB –¥–ª—è HDD

# –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ udev
# /etc/udev/rules.d/60-readahead.rules
ACTION=="add|change", KERNEL=="sd[a-z]", ATTR{queue/rotational}=="0", ATTR{bdi/read_ahead_kb}="128"
ACTION=="add|change", KERNEL=="sd[a-z]", ATTR{queue/rotational}=="1", ATTR{bdi/read_ahead_kb}="2048"
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å Netdata:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Netdata (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
bash <(curl -Ss https://my-netdata.io/kickstart.sh)

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ –ø–∞–∫–µ—Ç–æ–≤
sudo apt install netdata                                  # Ubuntu/Debian

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è /etc/netdata/netdata.conf
[global]
    hostname = web-server-01
    history = 3600                                         # –∏—Å—Ç–æ—Ä–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    update every = 1                                       # –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

[web]
    bind to = 127.0.0.1:19999                             # —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø
    
# –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ nginx proxy
# /etc/nginx/sites-available/netdata
server {
    listen 80;
    server_name monitoring.example.com;
    
    location / {
        proxy_pass http://127.0.0.1:19999;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}

# Netdata –¥–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –ø–æ:
# - CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫–∏, —Å–µ—Ç—å
# - –ü—Ä–æ—Ü–µ—Å—Å—ã –∏ —Å–µ—Ä–≤–∏—Å—ã
# - Nginx, Apache, MySQL, PostgreSQL
# - Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
# - –°–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –≤ Netdata:**

```bash
# /etc/netdata/health.d/cpu_usage.conf
alarm: cpu_usage_high
    on: system.cpu
lookup: average -3m unaligned of user,system,softirq,irq,guest
  units: %
  every: 10s
   warn: $this > 80
   crit: $this > 95
  delay: down 15m multiplier 1.5 max 1h
   info: average CPU utilization over the last 3 minutes
     to: sysadmin

# /etc/netdata/health.d/memory_usage.conf
alarm: ram_usage_high
    on: system.ram
lookup: average -1m unaligned of used
calc: $this * 100 / ($this + $free + $buffers + $cached)
units: %
every: 10s
warn: $this > 90
crit: $this > 95
delay: down 15m multiplier 1.5 max 1h
info: system RAM usage
to: sysadmin

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Slack
# /etc/netdata/health_alarm_notify.conf
SEND_SLACK="YES"
SLACK_WEBHOOK_URL="https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
DEFAULT_RECIPIENT_SLACK="monitoring"
```

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ, –≤—ã—Å–æ–∫–∏–π load average.

```bash
# –®–∞–≥ 1: –û–±—â–∏–π –æ–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã
top                                                        # –æ–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞
htop                                                       # –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
uptime                                                     # load average

# –®–∞–≥ 2: –ê–Ω–∞–ª–∏–∑ –∑–∞–≥—Ä—É–∑–∫–∏ CPU
iostat -x 1 5                                            # I/O wait
vmstat 1 5                                                # —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏
sar -u 1 5                                                # –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ CPU

# –ï—Å–ª–∏ –≤—ã—Å–æ–∫–∏–π %iowait - –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–∏—Å–∫–∞–º–∏
# –ï—Å–ª–∏ –≤—ã—Å–æ–∫–∏–π %sys - –º–Ω–æ–≥–æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
# –ï—Å–ª–∏ –≤—ã—Å–æ–∫–∏–π %user - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç CPU

# –®–∞–≥ 3: –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤-–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π
ps aux --sort=-%cpu | head -10                           # —Ç–æ–ø –ø–æ CPU
ps aux --sort=-%mem | head -10                           # —Ç–æ–ø –ø–æ –ø–∞–º—è—Ç–∏

# –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–∞
strace -p PID                                             # —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã
lsof -p PID                                               # –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã
pmap -x PID                                               # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

# –®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
netstat -i                                                # —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
ss -tuln | wc -l                                         # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
ss -s                                                     # —Å–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

# –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
df -h                                                     # —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ
du -sh /var/log/* | sort -hr                            # —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤
lsof +L1                                                  # —É–¥–∞–ª–µ–Ω–Ω—ã–µ –Ω–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã

# –®–∞–≥ 6: –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
tail -f /var/log/syslog                                  # —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
journalctl -f                                            # systemd –ª–æ–≥–∏
tail -f /var/log/nginx/error.log                        # –æ—à–∏–±–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
#!/bin/bash
echo "=== System Load ==="
uptime
echo -e "\n=== CPU Usage ==="
top -bn1 | grep "Cpu(s)"
echo -e "\n=== Memory Usage ==="
free -h
echo -e "\n=== Disk Usage ==="
df -h | grep -vE '^tmpfs|^devtmpfs'
echo -e "\n=== Top Processes by CPU ==="
ps aux --sort=-%cpu | head -5
echo -e "\n=== Top Processes by Memory ==="
ps aux --sort=-%mem | head -5
echo -e "\n=== Network Connections ==="
ss -s
echo -e "\n=== Disk I/O ==="
iostat -x 1 1 | tail -n +4
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ.

```bash
# –®–∞–≥ 1: –ë–∞–∑–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ping -c 4 google.com                                     # –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
ping -c 4 localhost                                      # –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å
curl -I http://localhost                                 # HTTP –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞

# –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
ip addr show                                             # IP –∞–¥—Ä–µ—Å–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
ip route show                                            # —Ç–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
netstat -i                                               # —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

# –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª—É—à–∞—é—â–∏—Ö –ø–æ—Ä—Ç–æ–≤
ss -tlnp | grep :80                                     # –∫—Ç–æ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 80
ss -tlnp | grep :443                                    # –∫—Ç–æ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 443
nmap localhost                                           # —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤

# –®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
sudo tcpdump -i eth0 port 80                           # HTTP —Ç—Ä–∞—Ñ–∏–∫
sudo tcpdump -i eth0 host 8.8.8.8                      # —Ç—Ä–∞—Ñ–∏–∫ –∫ DNS —Å–µ—Ä–≤–µ—Ä—É
sudo iftop                                               # –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞

# –®–∞–≥ 5: DNS –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
dig google.com                                          # DNS –∑–∞–ø—Ä–æ—Å
nslookup google.com                                     # –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π DNS –∑–∞–ø—Ä–æ—Å
cat /etc/resolv.conf                                    # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS

# –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ firewall
sudo ufw status                                          # —Å—Ç–∞—Ç—É—Å UFW
sudo iptables -L -n                                     # –ø—Ä–∞–≤–∏–ª–∞ iptables
sudo iptables -L -n -v                                  # —Å —Å—á–µ—Ç—á–∏–∫–∞–º–∏ –ø–∞–∫–µ—Ç–æ–≤

# –®–∞–≥ 7: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
systemctl status nginx                                  # —Å—Ç–∞—Ç—É—Å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
nginx -t                                                 # –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx
curl -v http://localhost                                # –ø–æ–¥—Ä–æ–±–Ω—ã–π HTTP –∑–∞–ø—Ä–æ—Å

# –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏
iperf3 -s                                               # –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
iperf3 -c server_ip                                     # –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–∏—Å–∫–æ–≤—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ.

```bash
# –®–∞–≥ 1: –û–±–∑–æ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–æ–≤
df -h                                                    # –æ–±—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
df -i                                                    # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ inodes

# –®–∞–≥ 2: –ü–æ–∏—Å–∫ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
du -sh /* | sort -hr | head -10                        # —Ç–æ–ø –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø–æ —Ä–∞–∑–º–µ—Ä—É
find / -type f -size +1G 2>/dev/null | head -10       # —Ñ–∞–π–ª—ã –±–æ–ª—å—à–µ 1GB
find /var/log -type f -size +100M                      # –±–æ–ª—å—à–∏–µ –ª–æ–≥ —Ñ–∞–π–ª—ã

# –®–∞–≥ 3: –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
du -sh /var/log/* | sort -hr                           # —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤
du -sh /home/* | sort -hr                              # —Ä–∞–∑–º–µ—Ä –¥–æ–º–∞—à–Ω–∏—Ö –ø–∞–ø–æ–∫
du -sh /opt/* | sort -hr                               # —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

# –®–∞–≥ 4: –ü–æ–∏—Å–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –Ω–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤
lsof +L1                                                # —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã –Ω–æ –≤—Å–µ –µ—â–µ –æ—Ç–∫—Ä—ã—Ç—ã
lsof | grep "(deleted)"                                # –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±

# –®–∞–≥ 5: –û—á–∏—Å—Ç–∫–∞ –º–µ—Å—Ç–∞
# –õ–æ–≥–∏
sudo journalctl --vacuum-time=7d                       # –æ—Å—Ç–∞–≤–∏—Ç—å –∂—É—Ä–Ω–∞–ª—ã –∑–∞ 7 –¥–Ω–µ–π
sudo logrotate -f /etc/logrotate.conf                  # –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

# Temporary —Ñ–∞–π–ª—ã
sudo find /tmp -type f -atime +7 -delete               # —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ temp —Ñ–∞–π–ª—ã
sudo find /var/tmp -type f -atime +30 -delete          # —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ var/tmp —Ñ–∞–π–ª—ã

# Package cache
sudo apt clean                                          # –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –ø–∞–∫–µ—Ç–æ–≤ (Debian/Ubuntu)
sudo yum clean all                                      # –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –ø–∞–∫–µ—Ç–æ–≤ (RHEL/CentOS)

# Docker
docker system prune -a                                  # —É–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker volume prune                                     # —É–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏
#!/bin/bash
# /usr/local/bin/cleanup-disk.sh

echo "Starting disk cleanup..."

# –õ–æ–≥–∏ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
find /var/log -name "*.log" -mtime +30 -delete
find /var/log -name "*.gz" -mtime +30 -delete

# Temporary —Ñ–∞–π–ª—ã
find /tmp -type f -atime +7 -delete
find /var/tmp -type f -atime +30 -delete

# Cores dumps
find /var/crash -name "*.crash" -mtime +7 -delete

# –ñ—É—Ä–Ω–∞–ª—ã systemd —Å—Ç–∞—Ä—à–µ –Ω–µ–¥–µ–ª–∏
journalctl --vacuum-time=7d

# Package cache
apt autoremove -y
apt autoclean

echo "Disk cleanup completed"
df -h
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ.

```bash
# –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è PostgreSQL
systemctl status postgresql                             # —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
sudo -u postgres psql -c "SELECT version();"           # –≤–µ—Ä—Å–∏—è PostgreSQL

# –®–∞–≥ 2: –ê–Ω–∞–ª–∏–∑ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
sudo -u postgres psql -c "
SELECT 
    count(*) as total_connections,
    sum(case when state = 'active' then 1 else 0 end) as active,
    sum(case when state = 'idle' then 1 else 0 end) as idle
FROM pg_stat_activity;"

# –®–∞–≥ 3: –ü–æ–∏—Å–∫ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
sudo -u postgres psql -c "
SELECT 
    pid,
    now() - pg_stat_activity.query_start AS duration,
    query 
FROM pg_stat_activity 
WHERE (now() - pg_stat_activity.query_start) > interval '5 minutes';"

# –®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
sudo -u postgres psql -c "
SELECT 
    blocked_locks.pid AS blocked_pid,
    blocked_activity.usename AS blocked_user,
    blocking_locks.pid AS blocking_pid,
    blocking_activity.usename AS blocking_user,
    blocked_activity.query AS blocked_statement,
    blocking_activity.query AS blocking_statement
FROM pg_catalog.pg_locks blocked_locks
JOIN pg_catalog.pg_stat_activity blocked_activity ON blocked_activity.pid = blocked_locks.pid
JOIN pg_catalog.pg_locks blocking_locks ON blocking_locks.locktype = blocked_locks.locktype
JOIN pg_catalog.pg_stat_activity blocking_activity ON blocking_activity.pid = blocking_locks.pid
WHERE NOT blocked_locks.granted;"

# –®–∞–≥ 5: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
sudo -u postgres psql -c "
SELECT 
    schemaname,
    tablename,
    seq_scan,
    seq_tup_read,
    idx_scan,
    idx_tup_fetch,
    n_tup_ins + n_tup_upd + n_tup_del as total_writes
FROM pg_stat_user_tables 
ORDER BY seq_scan DESC 
LIMIT 10;"

# –®–∞–≥ 6: Cache hit ratio
sudo -u postgres psql -c "
SELECT 
    'Buffer cache hit ratio' as metric,
    round(sum(blks_hit) * 100.0 / nullif(sum(blks_hit) + sum(blks_read), 0), 2) as percentage
FROM pg_stat_database;"

# –®–∞–≥ 7: –†–∞–∑–º–µ—Ä—ã —Ç–∞–±–ª–∏—Ü –∏ –∏–Ω–¥–µ–∫—Å–æ–≤
sudo -u postgres psql -c "
SELECT 
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) as total_size,
    pg_size_pretty(pg_relation_size(schemaname||'.'||tablename)) as table_size,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename) - 
                   pg_relation_size(schemaname||'.'||tablename)) as index_size
FROM pg_tables 
WHERE schemaname NOT IN ('information_schema', 'pg_catalog')
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC 
LIMIT 10;"

# –®–∞–≥ 8: –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
iostat -x 1 5                                          # I/O —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
top -p $(pgrep postgres)                               # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ postgres
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –ø—É—Ç—å –æ—Ç –æ—Å–Ω–æ–≤ Linux –¥–æ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –≥–ª—É–±–æ–∫–∏–µ –∑–Ω–∞–Ω–∏—è –≤:

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏
- **–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ bash —Å–∫—Ä–∏–ø—Ç—ã
- **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞** ‚Äî –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∞–π–ª–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ü—Ä–æ—Ü–µ—Å—Å—ã** ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

### üåê –°–µ—Ç–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **TCP/IP —Å—Ç–µ–∫** ‚Äî –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
- **DNS –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–§–∞–π—Ä–≤–æ–ª—ã** ‚Äî –∑–∞—â–∏—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Å –ø–æ–º–æ—â—å—é iptables –∏ UFW
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞** ‚Äî –∞–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### üöÄ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ DevOps
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä—ã** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Nginx –¥–ª—è production
- **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ PostgreSQL –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** ‚Äî Docker –∏ Docker Compose –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** ‚Äî Ansible –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Prometheus + Grafana** ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **ELK Stack** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑
- **Hardening —Å–∏—Å—Ç–µ–º—ã** ‚Äî —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ production —Å–µ—Ä–≤–µ—Ä–æ–≤
- **Fail2ban** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫

### ‚ö° Performance tuning
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** ‚Äî —Ç—é–Ω–∏–Ω–≥ —è–¥—Ä–∞ Linux –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
- **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** ‚Äî –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ CPU, –ø–∞–º—è—Ç–∏ –∏ I/O
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç–µ–∫–∞** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º** ‚Äî —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–æ—á–Ω–∞—è –æ—Å–Ω–æ–≤–∞ –≤ Linux, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö:

### üîÑ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
**Kubernetes** ‚Äî —Å–ª–µ–¥—É—é—â–∏–π –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —à–∞–≥ –ø–æ—Å–ª–µ Docker:
```bash
# –ò–∑—É—á–∏—Ç–µ –æ—Å–Ω–æ–≤—ã Kubernetes
kubectl get nodes
kubectl get pods
kubectl apply -f deployment.yaml

# –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π:
# - Pods, Services, Deployments
# - Ingress, ConfigMaps, Secrets  
# - Helm –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–∞–º–∏
# - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å Prometheus Operator
```

### ‚òÅÔ∏è –û–±–ª–∞—á–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–ª–∞–∫–µ:
```bash
# AWS
aws ec2 describe-instances
aws s3 ls
aws eks update-kubeconfig --cluster my-cluster

# Google Cloud Platform  
gcloud compute instances list
gcloud container clusters get-credentials my-cluster

# Azure
az vm list
az aks get-credentials --resource-group myResourceGroup --name myAKSCluster
```

### üèóÔ∏è Infrastructure as Code
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —á–µ—Ä–µ–∑ –∫–æ–¥:
```hcl
# Terraform example
resource "aws_instance" "web" {
  ami           = "ami-0c55b159cbfafe1d0"
  instance_type = "t2.micro"
  
  tags = {
    Name = "WebServer"
  }
}

# –ò–∑—É—á–∏—Ç–µ —Ç–∞–∫–∂–µ:
# - Terraform –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
# - Ansible –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤  
# - Pulumi –∫–∞–∫ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É
```

### üîê –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–£–≥–ª—É–±–ª–µ–Ω–∏–µ –≤ DevSecOps:
```bash
# –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
trivy image nginx:latest
clair-scanner nginx:latest

# Secrets management
vault write secret/myapp/config db_password=secretpassword
kubectl create secret generic mysecret --from-literal=password=secretpassword

# Compliance as Code
inspec exec compliance-profile
```

### üìà SRE (Site Reliability Engineering)
–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –±–æ–ª—å—à–∏—Ö —Å–∏—Å—Ç–µ–º:
```yaml
# SLI/SLO –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
sli:
  - name: "API availability"
    description: "Percentage of successful API requests"
    query: "rate(http_requests_total{status!~'5..'}[5m]) / rate(http_requests_total[5m])"
    
slo:
  - name: "99.9% API availability"
    target: 99.9
    time_window: "30d"
```

### ü§ñ GitOps –∏ CI/CD
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
```yaml
# GitHub Actions workflow
name: Deploy to Production
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy to Kubernetes
        run: |
          kubectl apply -f k8s/
          kubectl rollout status deployment/app
```

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è

### üéØ –ü—Ä–æ–µ–∫—Ç 1: –ü–æ–ª–Ω—ã–π –≤–µ–±-—Å—Ç–µ–∫
–°–æ–∑–¥–∞–π—Ç–µ complete production-ready –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```
Frontend (React) ‚Üí Load Balancer (Nginx) ‚Üí Backend (Python/Node.js) ‚Üí Database (PostgreSQL) ‚Üí Cache (Redis)
                                ‚Üì
                           –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus/Grafana)
                                ‚Üì
                           –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (ELK Stack)
                                ‚Üì
                           Backup –∏ Recovery
```

### üéØ –ü—Ä–æ–µ–∫—Ç 2: Kubernetes –∫–ª–∞—Å—Ç–µ—Ä
–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π Kubernetes –∫–ª–∞—Å—Ç–µ—Ä:
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞
kubeadm init --pod-network-cidr=10.244.0.0/16

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞
kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml

# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
helm install prometheus prometheus-community/kube-prometheus-stack
```

### üéØ –ü—Ä–æ–µ–∫—Ç 3: CI/CD pipeline
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```
Git Push ‚Üí Build (Docker) ‚Üí Test ‚Üí Security Scan ‚Üí Deploy to Staging ‚Üí Manual Approval ‚Üí Deploy to Production
    ‚Üì           ‚Üì            ‚Üì         ‚Üì                ‚Üì                    ‚Üì                ‚Üì
   GitHub    Docker Hub   Jest    Trivy/Snyk      Staging K8s         Slack        Production K8s
```

### üéØ –ü—Ä–æ–µ–∫—Ç 4: Multi-cloud –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–±–ª–∞–∫–∞—Ö:
```
Primary Region (AWS)     Secondary Region (GCP)     Tertiary Region (Azure)
      ‚Üì                          ‚Üì                          ‚Üì
   Web Servers              Web Servers              Web Servers
      ‚Üì                          ‚Üì                          ‚Üì
   Database Master         Database Replica         Database Replica
      ‚Üì                          ‚Üì                          ‚Üì
   Global Load Balancer (CloudFlare)
```

---

## –†–µ—Å—É—Ä—Å—ã –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è

### üìö –ö–Ω–∏–≥–∏
- **"Linux Bible"** by Christopher Negus ‚Äî –≤—Å–µ–æ–±—ä–µ–º–ª—é—â–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
- **"UNIX and Linux System Administration Handbook"** ‚Äî –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
- **"Site Reliability Engineering"** by Google ‚Äî SRE –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏
- **"Kubernetes: Up and Running"** ‚Äî –≥–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ K8s
- **"Terraform: Up & Running"** ‚Äî Infrastructure as Code

### üåê –û–Ω–ª–∞–π–Ω —Ä–µ—Å—É—Ä—Å—ã
- **Linux Academy / A Cloud Guru** ‚Äî –∫—É—Ä—Å—ã –ø–æ Linux –∏ –æ–±–ª–∞—á–Ω—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º
- **Kubernetes Documentation** ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è K8s
- **DigitalOcean Tutorials** ‚Äî –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
- **Red Hat Learning** ‚Äî —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫—É—Ä—Å—ã
- **Linux Foundation Training** ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã Linux

### üèÜ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏:

**Linux —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- LPIC-1, LPIC-2, LPIC-3 (LPI)
- RHCSA, RHCE (Red Hat)
- CompTIA Linux+

**Cloud —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- AWS Solutions Architect
- Google Cloud Professional
- Azure Solutions Architect

**DevOps —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- Certified Kubernetes Administrator (CKA)
- Certified Kubernetes Application Developer (CKAD)
- Docker Certified Associate

### üíº –ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø—É—Ç–∏

–ü–æ—Å–ª–µ –æ—Å–≤–æ–µ–Ω–∏—è Linux –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–∞—Ä—å–µ—Ä–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π:

**üîß Systems Administrator**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ uptime

**‚òÅÔ∏è Cloud Engineer**
- –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–ª–∞—á–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –ú–∏–≥—Ä–∞—Ü–∏—è –≤ –æ–±–ª–∞–∫–æ
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–ª–∞—á–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏

**üöÄ DevOps Engineer**
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ CI/CD –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
- Infrastructure as Code
- –ö—É–ª—å—Ç—É—Ä–∞ DevOps –≤ –∫–æ–º–∞–Ω–¥–µ

**üõ°Ô∏è Site Reliability Engineer (SRE)**
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º–∏

**üîí Security Engineer**
- Hardening —Å–∏—Å—Ç–µ–º
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- Compliance –∏ –∞—É–¥–∏—Ç

**üìä Platform Engineer**
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- Kubernetes –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
- Developer Experience

---

## –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Äî –∫–ª—é—á –∫ —É—Å–ø–µ—Ö—É
- **–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç—ã** ‚Äî —Ç–µ–æ—Ä–∏—è –±–µ–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞
- **–õ–æ–º–∞–π—Ç–µ –∏ —á–∏–Ω–∏—Ç–µ** ‚Äî –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –∏–∑—É—á–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –≤—Å—ë** ‚Äî –µ—Å–ª–∏ –¥–µ–ª–∞–µ—Ç–µ —á—Ç–æ-—Ç–æ –¥–≤–∞–∂–¥—ã, –Ω–∞–ø–∏—à–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
- **–ß–∏—Ç–∞–π—Ç–µ –ª–æ–≥–∏** ‚Äî –æ–Ω–∏ —Ä–∞—Å—Å–∫–∞–∂—É—Ç –≤–∞–º –≤—Å—é –ø—Ä–∞–≤–¥—É –æ —Å–∏—Å—Ç–µ–º–µ

### ü§ù –°–æ–æ–±—â–µ—Å—Ç–≤–æ
- **–£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ open source** ‚Äî –≤–Ω–æ—Å–∏—Ç–µ –≤–∫–ª–∞–¥ –≤ Linux –ø—Ä–æ–µ–∫—Ç—ã
- **–ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã** ‚Äî Stack Overflow, Reddit, —Ñ–æ—Ä—É–º—ã
- **–î–µ–ª–∏—Ç–µ—Å—å –∑–Ω–∞–Ω–∏—è–º–∏** ‚Äî –±–ª–æ–≥, –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è, –º–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ
- **–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ç—Ä–µ–Ω–¥–∞–º–∏** ‚Äî Hacker News, /r/sysadmin, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –±–ª–æ–≥–∏

### üìà –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –º–µ–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ** ‚Äî –±—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ã —É—á–∏—Ç—å—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
- **–ò–∑—É—á–∞–π—Ç–µ —Å–º–µ–∂–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏** ‚Äî —Å–µ—Ç–∏, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** ‚Äî –¥–æ–º–∞—à–Ω—è—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –∏–ª–∏ cloud playground
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –æ–ø—ã—Ç** ‚Äî —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ª–∏—á–Ω—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
