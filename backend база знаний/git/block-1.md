# Блок 1: Основы версионного контроля и Git
*Время изучения: 1-2 недели*

---

## 🎯 Цели блока
- Понять концепцию версионного контроля
- Освоить базовые команды Git  
- Научиться работать с локальным репозиторием

---

## Глава 1: Введение в версионный контроль

### Что такое версионный контроль и зачем он нужен?

Представьте, что вы пишете важный документ. Сначала у вас есть черновик, потом вы его улучшаете, добавляете новые разделы, исправляете ошибки. Как вы обычно сохраняете изменения?

**Традиционный подход:**
```
документ.docx
документ_исправленный.docx  
документ_исправленный_финальный.docx
документ_исправленный_финальный_последний.docx
документ_исправленный_финальный_последний_реально_финальный.docx
```

**Проблемы этого подхода:**
- Хаос в именах файлов
- Невозможно понять, что именно изменилось
- Сложно вернуться к предыдущей версии
- Занимает много места
- Как работать в команде?

**Версионный контроль решает эти проблемы:**

```
Версия 1: Создан первый черновик
    ↓
Версия 2: Добавлена глава "Введение"  
    ↓
Версия 3: Исправлены орфографические ошибки
    ↓
Версия 4: Добавлены примеры кода
    ↓
Версия 5: Переработана структура документа
```

### Централизованные vs Распределенные системы

#### Централизованные системы (SVN, Perforce)
```
         Центральный сервер
              [База]
               /|\
              / | \
             /  |  \
        [Клиент] [Клиент] [Клиент]
         Петя     Вася     Маша
```

**Принцип работы:**
- Один центральный сервер хранит всю историю
- Разработчики получают только текущую версию
- Для любой операции нужно соединение с сервером
- Если сервер недоступен — работа останавливается

#### Распределенные системы (Git, Mercurial)
```
    [Полная копия]     [Полная копия]     [Полная копия]
         Петя              Вася              Маша
          |                 |                 |
          \                 |                /
           \                |               /
            \               |              /
             \              |             /
              \    [Центральный сервер]  /
               \        (опционально)   /
                \                      /
                 \____________________/
```

**Принцип работы:**
- Каждый разработчик имеет полную копию истории
- Можно работать офлайн
- Центральный сервер нужен только для синхронизации
- Большая гибкость в организации workflow

### История Git и его философия

**Создание Git (2005 год)**
Linux Torvalds создал Git для разработки ядра Linux из-за проблем с существующими системами.

**Основные принципы Git:**
1. **Скорость** — операции должны быть быстрыми
2. **Простота дизайна** — понятная архитектура
3. **Поддержка нелинейной разработки** — тысячи параллельных веток
4. **Полная распределенность** — каждая копия равноправна
5. **Эффективность для больших проектов** — как Linux kernel

---

## Глава 2: Установка и настройка Git

### Концепция конфигурации Git

Git имеет трехуровневую систему конфигурации:

```
--system     (для всех пользователей компьютера)
    ↓
--global     (для конкретного пользователя)
    ↓
--local      (для конкретного проекта)
```

**Приоритет настроек:** local → global → system

### Первоначальная настройка

**Обязательные настройки:**
Git должен знать, кто делает изменения, чтобы отслеживать авторство.

```
Ваша личность в Git:
┌─────────────────────────────┐
│ Имя: Иван Петров            │
│ Email: ivan@example.com     │
│ Подпись: Ivan Petrov        │
└─────────────────────────────┘
            ↓
    Привязывается к каждому коммиту
```

**Настройка редактора:**
Git иногда открывает текстовый редактор для ввода сообщений. Важно настроить удобный для вас редактор.

**Создание алиасов:**
Можно создавать короткие команды для часто используемых операций:
- `st` вместо `status`  
- `co` вместо `checkout`
- `br` вместо `branch`

---

## Глава 3: Базовые операции

### Концепция Git-репозитория

**Что такое репозиторий?**
Репозиторий — это папка с вашим проектом + скрытая папка `.git`, которая содержит всю историю изменений.

```
Ваш проект/
├── index.html          ← Ваши файлы
├── style.css           ← Ваши файлы  
├── script.js           ← Ваши файлы
└── .git/               ← История Git (скрытая папка)
    ├── objects/        ← База данных изменений
    ├── refs/           ← Указатели на коммиты
    ├── HEAD            ← Текущая позиция
    └── config          ← Настройки репозитория
```

### Жизненный цикл изменений в Git

Git отслеживает изменения в файлах через несколько состояний:

```
Рабочая директория  →  Индекс (Staging)  →  Репозиторий
    (Modified)           (Staged)          (Committed)
        │                    │                 │
        │      git add       │   git commit    │
        │─────────────────→  │ ──────────────→ │
        │                    │                 │
   Файлы изменены       Изменения готовы   Изменения
   но не готовы        к сохранению        сохранены
   к сохранению                            навсегда
```

**Детальное объяснение состояний:**

1. **Modified (Изменен)**: Файл изменился, но Git об этом только знает
2. **Staged (Индексирован)**: Изменения помечены для включения в следующий коммит
3. **Committed (Зафиксирован)**: Изменения сохранены в базе данных Git

### Понимание команд через аналогии

#### git init — "Создание фотоальбома"
```
Обычная папка          После git init
┌───────────┐         ┌─────────────────┐
│  Файлы    │   →     │ Файлы + История │
│           │         │    Git-репо     │  
└───────────┘         └─────────────────┘
```

#### git add — "Выбор фото для альбома"
```
Все изменения              Выбранные изменения
┌─────────────┐           ┌─────────────┐
│ file1.txt ✓ │           │ file1.txt ✓ │
│ file2.txt ✗ │   add →   │             │
│ file3.txt ✗ │           │             │
└─────────────┘           └─────────────┘
  (рабочая зона)            (staging area)
```

#### git commit — "Вклеивание страницы в альбом"
```
Staging Area               История (альбом)
┌─────────────┐           ┌─────────────────┐
│ file1.txt ✓ │ commit → │ Страница #1     │
│             │           │ - file1.txt     │
│             │           │ - время: 14:30  │
└─────────────┘           │ - автор: Иван   │
                          └─────────────────┘
```

### Команды просмотра состояния

#### git status — "Что происходит сейчас?"
Эта команда показывает:
```
┌─────────────────────────────────┐
│ На какой ветке вы находитесь    │
│ Какие файлы изменены            │  
│ Какие файлы готовы к коммиту    │
│ Какие файлы не отслеживаются    │
└─────────────────────────────────┘
```

#### git log — "Просмотр альбома"
Показывает историю изменений:
```
Коммит #3: "Добавил новую функцию"
├── Автор: Иван Петров
├── Дата: 2025-01-15 14:30
└── Файлы: feature.js, README.md

Коммит #2: "Исправил баг в калькуляторе"  
├── Автор: Иван Петров
├── Дата: 2025-01-14 09:15
└── Файлы: calculator.js

Коммит #1: "Первый коммит"
├── Автор: Иван Петров  
├── Дата: 2025-01-13 16:45
└── Файлы: index.html, style.css
```

---

## Глава 4: Работа с файлами

### Жизненный цикл файлов в Git

Каждый файл в Git проходит через определенные состояния:

```
Untracked (Неотслеживаемый)
    │
    │ git add
    ↓
Tracked → Modified → Staged → Committed
    ↑        │         ↑         │
    │        │ git add │         │
    │        ↓         │         │
    │    Unstaged ─────┘         │
    │                            │
    │ git commit                 │
    └────────────────────────────┘
```

**Объяснение состояний:**

- **Untracked**: Git видит файл, но не следит за его изменениями
- **Tracked**: Git отслеживает файл
- **Modified**: Файл изменился с последнего коммита
- **Staged**: Изменения подготовлены для коммита
- **Committed**: Изменения сохранены в истории

### Концепция .gitignore

Иногда в проекте есть файлы, которые не нужно отслеживать:

```
Проект
├── src/                    ← Отслеживать
├── tests/                  ← Отслеживать  
├── README.md               ← Отслеживать
├── node_modules/           ← НЕ отслеживать (зависимости)
├── .env                    ← НЕ отслеживать (секреты)
├── *.log                   ← НЕ отслеживать (логи)
└── dist/                   ← НЕ отслеживать (собранные файлы)
```

**Зачем игнорировать файлы?**
- **Большие файлы**: node_modules может весить сотни мегабайт
- **Автогенерируемые файлы**: можно пересобрать в любой момент
- **Личные настройки**: .vscode, .idea — у каждого свои
- **Секретные данные**: пароли, API ключи

### Просмотр изменений с git diff

Git diff показывает разницу между состояниями:

```
Сравнение состояний:

git diff                 ← Рабочая зона vs Staging
git diff --staged        ← Staging vs Последний коммит  
git diff HEAD           ← Рабочая зона vs Последний коммит
git diff commit1 commit2 ← Между любыми коммитами
```

**Понимание вывода diff:**
```
--- a/file.txt    (старая версия)
+++ b/file.txt    (новая версия)
@@ -1,3 +1,4 @@   (контекст изменений)
 function hello() {
-    console.log("Hi");     ← удалено (красный)
+    console.log("Hello");  ← добавлено (зеленый)  
+    console.log("World");  ← добавлено (зеленый)
 }
```

### Операции с файлами

#### Удаление файлов
```
Обычное удаление файла:
Файл удален из папки, но Git помнит о нем

git rm:
├── Удаляет файл из папки
└── Автоматически индексирует удаление
```

#### Перемещение файлов
```
Обычное перемещение:
Git видит это как: удаление старого + создание нового

git mv:
├── Перемещает файл
└── Git понимает, что это одна операция
```

---

## ✅ Итоговые знания Блока 1

После изучения этого блока вы должны понимать:

### Концептуальное понимание:
- **Зачем нужен версионный контроль** и какие проблемы он решает
- **Разницу между централизованными и распределенными системами**
- **Философию Git** и принципы его работы
- **Трехзонную архитектуру Git**: рабочая зона → staging → репозиторий

### Практические навыки:
- **Создание репозитория** и понимание его структуры
- **Отслеживание изменений** через цикл add → commit
- **Просмотр состояния** проекта и истории изменений
- **Управление файлами** в контексте версионного контроля

### Ментальная модель:
У вас должна сформироваться четкая картина того, как Git хранит и управляет историей изменений вашего проекта.

---

## 🎯 Практическое задание

**Создайте учебный проект:**
1. Инициализируйте репозиторий для личного сайта-портфолио
2. Создайте файлы: index.html, style.css, about.html
3. Сделайте несколько коммитов, добавляя контент постепенно
4. Попрактикуйтесь с командами просмотра состояния
5. Настройте .gitignore для исключения временных файлов

**Цель:** Закрепить понимание базового workflow Git через практику.

---

*Следующий блок: **Ветвление и слияние** — изучим, как Git позволяет работать с параллельными линиями разработки.*