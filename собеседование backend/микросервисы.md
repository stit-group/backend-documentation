# Собеседование: Глубокое понимание микросервисной архитектуры

## Раздел 1: Фундаментальные концепции и принципы

### 1. Что такое ограниченный контекст (Bounded Context) и как он связан с микросервисами?

**Подсказка**: Domain-Driven Design, границы ответственности, языковые барьеры

**Углубление**: 
- Как определить правильные границы контекста?
- Что происходит при неправильном разделении?
- Примеры анти-паттернов разделения

### 2. Объясните принцип "Database per Service" и его альтернативы

**Подсказка**: Изоляция данных, транзакционность, eventual consistency

**Углубление**:
- Паттерн Saga vs 2PC
- CQRS и Event Sourcing
- Как обеспечить целостность данных между сервисами?

### 3. Что такое CAP-теорема и как она влияет на дизайн микросервисов?

**Подсказка**: Consistency, Availability, Partition tolerance

**Углубление**:
- PACELC теорема как расширение CAP
- Практические примеры выбора между C и A
- Влияние на выбор баз данных

## Раздел 2: Коммуникация между сервисами

### 4. Сравните синхронную и асинхронную коммуникацию в микросервисах

**Подсказка**: REST, gRPC, Message Queues, Event Streaming

**Углубление**:
- Когда использовать Request-Reply vs Pub-Sub?
- Проблема distributed monolith
- Backpressure и flow control

### 5. Как реализовать идемпотентность в микросервисах?

**Подсказка**: Idempotency keys, токены, версионирование

**Углубление**:
- At-least-once vs exactly-once delivery
- Outbox pattern
- Deduplication стратегии

### 6. Объясните паттерн Circuit Breaker и его состояния

**Подсказка**: Open, Closed, Half-Open состояния

**Углубление**:
- Настройка threshold и timeout
- Bulkhead pattern
- Adaptive circuit breakers с ML

## Раздел 3: Распределенные транзакции и согласованность

### 7. Как работает паттерн Saga и какие есть виды?

**Подсказка**: Choreography vs Orchestration

**Углубление**:
- Компенсирующие транзакции
- Обработка частичных сбоев
- Saga state machines

### 8. Что такое Event Sourcing и когда его применять?

**Подсказка**: Event Store, проекции, снапшоты

**Углубление**:
- GDPR и удаление данных
- Версионирование событий
- Eventual consistency окна

### 9. Как обеспечить распределенный трейсинг?

**Подсказка**: OpenTelemetry, Jaeger, correlation IDs

**Углубление**:
- Trace context propagation
- Sampling стратегии
- Performance overhead

## Раздел 4: Безопасность и аутентификация

### 10. Как реализовать Zero Trust Security в микросервисах?

**Подсказка**: mTLS, Service Mesh, Policy as Code

**Углубление**:
- SPIFFE/SPIRE
- Istio vs Linkerd security features
- Certificate rotation

### 11. Объясните паттерн API Gateway и BFF

**Подсказка**: Backend for Frontend, агрегация, маршрутизация

**Углубление**:
- GraphQL Federation
- Rate limiting стратегии
- Edge computing интеграция

### 12. Как организовать multi-tenancy в микросервисах?

**Подсказка**: Изоляция данных, маршрутизация, квоты

**Углубление**:
- Silo vs Pool vs Bridge модели
- Tenant context propagation
- Resource isolation

## Раздел 5: Масштабирование и производительность

### 13. Какие метрики важны для автоскейлинга микросервисов?

**Подсказка**: CPU, Memory, RPS, Queue depth, Business metrics

**Углубление**:
- HPA vs VPA в Kubernetes
- Predictive scaling
- Cost optimization

### 14. Как реализовать graceful shutdown?

**Подсказка**: SIGTERM, connection draining, in-flight requests

**Углубление**:
- Kubernetes lifecycle hooks
- Long-running процессы
- Stateful сервисы

### 15. Объясните стратегии кеширования в микросервисах

**Подсказка**: Local vs Distributed cache, Cache-aside, Write-through

**Углубление**:
- Cache invalidation стратегии
- Thundering herd problem
- Edge caching с CDN

## Раздел 6: Деплой и операционные аспекты

### 16. Сравните Blue-Green vs Canary vs Rolling deployments

**Подсказка**: Risk mitigation, rollback стратегии, traffic splitting

**Углубление**:
- Feature flags интеграция
- A/B testing в микросервисах
- Progressive delivery

### 17. Как организовать Configuration Management?

**Подсказка**: ConfigMaps, Secrets, External configuration services

**Углубление**:
- Dynamic configuration updates
- Configuration drift
- GitOps подход

### 18. Что такое Service Mesh и когда он нужен?

**Подсказка**: Sidecar proxy, control plane, data plane

**Углубление**:
- Istio vs Linkerd vs Consul Connect
- eBPF-based service mesh
- Performance overhead

## Раздел 7: Тестирование микросервисов

### 19. Какие виды тестов специфичны для микросервисов?

**Подсказка**: Contract testing, Chaos engineering, Integration tests

**Углубление**:
- Consumer-driven contracts
- Synthetic monitoring
- Test data management

### 20. Как тестировать отказоустойчивость?

**Подсказка**: Chaos Monkey, Fault injection, Game days

**Углубление**:
- Litmus vs Chaos Mesh
- Steady state hypothesis
- Blast radius control

### 21. Объясните принципы Contract Testing

**Подсказка**: Pact, Spring Cloud Contract, Schema evolution

**Углубление**:
- Backwards compatibility
- Provider states
- Broker pattern

## Раздел 8: Паттерны и анти-паттерны

### 22. Что такое Distributed Monolith и как его избежать?

**Подсказка**: Tight coupling, синхронные вызовы, shared databases

**Углубление**:
- Признаки distributed monolith
- Рефакторинг стратегии
- Domain boundaries

### 23. Объясните паттерн Strangler Fig

**Подсказка**: Постепенная миграция, proxy layer, feature parity

**Углубление**:
- Branch by abstraction
- Database decomposition
- Rollback стратегии

### 24. Когда НЕ использовать микросервисы?

**Подсказка**: Преждевременная оптимизация, маленькие команды, простой домен

**Углубление**:
- Modular monolith альтернатива
- Cost-benefit анализ
- Team topologies

## Раздел 9: Современные технологии и тренды 2025

### 25. Как WebAssembly меняет микросервисы?

**Подсказка**: WASI, polyglot сервисы, edge computing

**Углубление**:
- Spin framework
- WasmCloud
- Performance характеристики

### 26. Объясните роль eBPF в микросервисах

**Подсказка**: Observability, networking, security

**Углубление**:
- Cilium для networking
- Pixie для observability
- Performance profiling

### 27. Что такое Platform Engineering и как это связано с микросервисами?

**Подсказка**: Internal Developer Platform, Golden paths, Self-service

**Углубление**:
- Backstage vs Port
- Platform as Product
- Developer experience метрики

## Раздел 10: Проблемы и решения

### 28. Как решить проблему распределенных логов?

**Подсказка**: Centralized logging, structured logs, correlation

**Углубление**:
- OpenTelemetry Logs
- Log aggregation patterns
- Cost optimization

### 29. Объясните проблему "Death Star" архитектуры

**Подсказка**: Service dependency explosion, cascading failures

**Углубление**:
- Dependency management
- Service criticality levels
- Failure domains

### 30. Как обрабатывать версионирование API?

**Подсказка**: Semantic versioning, backwards compatibility, deprecation

**Углубление**:
- API evolution patterns
- Client libraries management
- Breaking changes strategy

## Раздел 11: Data Management

### 31. Как реализовать распределенный поиск?

**Подсказка**: Elasticsearch federation, CQRS, denormalization

**Углубление**:
- Near real-time indexing
- Multi-tenant search
- Relevance tuning

### 32. Объясните паттерн Change Data Capture (CDC)

**Подсказка**: Debezium, transaction logs, event streaming

**Углубление**:
- Exactly-once semantics
- Schema evolution
- Backfill стратегии

### 33. Как организовать аналитику в микросервисах?

**Подсказка**: Data Lake, ETL vs ELT, Real-time analytics

**Углубление**:
- Apache Kafka + ksqlDB
- Materialized views
- OLAP в микросервисах

## Раздел 12: Организационные аспекты

### 34. Как применить закон Конвея к микросервисам?

**Подсказка**: Team boundaries, communication patterns, ownership

**Углубление**:
- Inverse Conway Maneuver
- Team Topologies
- Cognitive load

### 35. Что такое SRE практики для микросервисов?

**Подсказка**: SLI/SLO/SLA, Error budgets, Toil reduction

**Углубление**:
- Golden signals
- Blameless postmortems
- On-call rotation

## Раздел 13: Специфические сценарии

### 36. Как обрабатывать long-running процессы?

**Подсказка**: Temporal, Apache Airflow, Step Functions

**Углубление**:
- Workflow engines сравнение
- State persistence
- Retry policies

### 37. Объясните Multi-region deployment стратегии

**Подсказка**: Active-Active vs Active-Passive, data replication

**Углубление**:
- Conflict resolution
- Geo-routing
- Compliance требования

### 38. Как реализовать Event-Driven Architecture?

**Подсказка**: Event streaming, CQRS, Event sourcing

**Углубление**:
- Schema registry
- Event ordering guarantees
- Tombstone events

## Раздел 14: Производительность и оптимизация

### 39. Какие есть стратегии для уменьшения latency?

**Подсказка**: Connection pooling, batch processing, caching

**Углубление**:
- gRPC vs REST performance
- Binary protocols
- Edge computing

### 40. Как профилировать микросервисы в production?

**Подсказка**: Continuous profiling, APM tools, flame graphs

**Углубление**:
- Async profiler
- eBPF-based profiling
- Cost of observability