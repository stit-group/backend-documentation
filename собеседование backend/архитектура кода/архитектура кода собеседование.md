# Техническое интервью: Чистая архитектура и практики проектирования

## Описание
Данное интервью предназначено для глубокой оценки знаний backend разработчика в области чистой архитектуры, SOLID принципов, Dependency Injection и других современных практик проектирования кода.

**Структура:** 80 основных вопросов + 400 углубляющих вопросов (5 к каждому основному)
**Время проведения:** 2-3 часа (выборочно)
**Уровень:** Middle/Senior Backend Developer

---

## 1. SOLID Принципы

### 1.1 Single Responsibility Principle (SRP)

**Основной вопрос:** Объясните принцип единственной ответственности. Как вы определяете границы ответственности класса?

**Углубляющие вопросы:**
1. Приведите пример класса, нарушающего SRP, и покажите, как его рефакторить
2. Как SRP применяется к микросервисной архитектуре?
3. Может ли класс иметь несколько методов и при этом соответствовать SRP?
4. Как SRP влияет на тестируемость кода?
5. В каких случаях нарушение SRP может быть оправданным?

### 1.2 Open/Closed Principle (OCP)

**Основной вопрос:** Объясните принцип открытости/закрытости. Какие механизмы позволяют его реализовать?

**Углубляющие вопросы:**
1. Покажите на примере, как использовать Strategy pattern для соблюдения OCP
2. Как OCP применяется при проектировании API?
3. Что такое "точки расширения" в архитектуре?
4. Как plugin-архитектура реализует OCP?
5. Может ли чрезмерное следование OCP навредить простоте кода?

### 1.3 Liskov Substitution Principle (LSP)

**Основной вопрос:** Объясните принцип подстановки Лисков. Какие контракты должны соблюдаться при наследовании?

**Углубляющие вопросы:**
1. Приведите пример нарушения LSP с квадратом и прямоугольником
2. Как LSP связан с контрактным программированием?
3. Какие проблемы создает нарушение LSP в runtime?
4. Как LSP применяется к интерфейсам, а не только к классам?
5. Что такое "поведенческая совместимость"?

### 1.4 Interface Segregation Principle (ISP)

**Основной вопрос:** Объясните принцип разделения интерфейсов. Как определить, что интерфейс слишком "толстый"?

**Углубляющие вопросы:**
1. Покажите рефакторинг "толстого" интерфейса
2. Как ISP связан с cohesion и coupling?
3. Применим ли ISP к REST API дизайну?
4. Что такое "interface pollution"?
5. Как ISP влияет на производительность в различных языках?

### 1.5 Dependency Inversion Principle (DIP)

**Основной вопрос:** Объясните принцип инверсии зависимостей. В чем разница между DIP и Dependency Injection?

**Углубляющие вопросы:**
1. Покажите код до и после применения DIP
2. Как DIP влияет на архитектуру слоев приложения?
3. Что такое "Stable Dependencies Principle"?
4. Как DIP помогает в юнит-тестировании?
5. Какие антипаттерны возникают при неправильном применении DIP?

### 1.6 SOLID в комплексе

**Основной вопрос:** Как SOLID принципы взаимодействуют между собой? Приведите пример их совместного применения.

**Углубляющие вопросы:**
1. Могут ли SOLID принципы противоречить друг другу?
2. Как SOLID принципы влияют на производительность?
3. Какие метрики помогают оценить соблюдение SOLID?
4. Как объяснить важность SOLID junior разработчику?
5. Существуют ли альтернативы SOLID принципам?

### 1.7 Нарушения SOLID в legacy коде

**Основной вопрос:** Как выявлять и исправлять нарушения SOLID в существующем коде?

**Углубляющие вопросы:**
1. Какой принцип SOLID нарушается чаще всего и почему?
2. Как приоритизировать рефакторинг нарушений SOLID?
3. Какие инструменты помогают автоматически выявлять нарушения?
4. Как постепенно внедрить SOLID в команде разработки?
5. Что делать, если рефакторинг под SOLID ломает существующую функциональность?

### 1.8 SOLID и производительность

**Основной вопрос:** Как SOLID принципы влияют на производительность приложения?

**Углубляющие вопросы:**
1. Может ли чрезмерная абстракция навредить производительности?
2. Как балансировать между чистотой кода и скоростью выполнения?
3. В каких случаях стоит пожертвовать SOLID ради производительности?
4. Как измерить влияние рефакторинга под SOLID на производительность?
5. Какие паттерны оптимизации могут конфликтовать с SOLID?

### 1.9 SOLID в различных парадигмах

**Основной вопрос:** Как SOLID принципы применяются в функциональном программировании?

**Углубляющие вопросы:**
1. Имеет ли смысл SRP для чистых функций?
2. Как реализовать DIP без классов и интерфейсов?
3. Какие функциональные паттерны соответствуют SOLID?
4. Применимы ли SOLID к reactive programming?
5. Как SOLID работают в микросервисной архитектуре?

### 1.10 SOLID и Domain-Driven Design

**Основной вопрос:** Как SOLID принципы поддерживают концепции DDD?

**Углубляющие вопросы:**
1. Как SRP применяется к доменным сущностям?
2. Должны ли агрегаты следовать OCP?
3. Как ISP помогает в проектировании доменных сервисов?
4. Как DIP поддерживает архитектуру Hexagonal/Clean?
5. Противоречат ли SOLID принципам богатые доменные модели?

### 1.11 SOLID и тестирование

**Основной вопрос:** Как SOLID принципы улучшают тестируемость кода?

**Углубляющие вопросы:**
1. Какой SOLID принцип наиболее критичен для unit testing?
2. Как SRP влияет на сложность тестовых сценариев?
3. Помогает ли следование OCP в integration testing?
4. Как DIP упрощает мокирование зависимостей?
5. Можно ли оценить качество архитектуры через покрытие тестами?

### 1.12 Антипаттерны SOLID

**Основной вопрос:** Какие антипаттерны возникают при неправильном применении SOLID?

**Углубляющие вопросы:**
1. Что такое "over-engineering" в контексте SOLID?
2. Как избежать создания "interface hell"?
3. Когда абстракции становятся избыточными?
4. Что такое "анемичная доменная модель" и как это связано с SOLID?
5. Как найти баланс между гибкостью и простотой?

### 1.13 SOLID и команда разработки

**Основной вопрос:** Как внедрить культуру следования SOLID принципам в команде?

**Углубляющие вопросы:**
1. Как проводить code review с фокусом на SOLID?
2. Какие практики помогают поддерживать качество архитектуры?
3. Как объяснить бизнесу важность инвестиций в архитектуру?
4. Какие KPI могут отражать соблюдение SOLID?
5. Как быть, если в команде есть сопротивление рефакторингу?

### 1.14 SOLID в различных технологиях

**Основной вопрос:** Как особенности языка программирования влияют на применение SOLID?

**Углубляющие вопросы:**
1. Чем отличается применение SOLID в Java и Python?
2. Как Go-интерфейсы поддерживают SOLID принципы?
3. Применимы ли SOLID к JavaScript/TypeScript?
4. Как SOLID работают с generic programming?
5. Влияют ли особенности runtime на архитектурные решения?

### 1.15 Эволюция SOLID

**Основной вопрос:** Как SOLID принципы эволюционировали со временем? Есть ли современные дополнения?

**Углубляющие вопросы:**
1. Какие новые принципы дополняют SOLID в современной разработке?
2. Как cloud-native подход влияет на применение SOLID?
3. Актуальны ли SOLID в эпоху serverless?
4. Что такое CUPID principles и как они соотносятся с SOLID?
5. Как изменится роль SOLID с развитием AI в программировании?

---

## 2. Чистая архитектура (Clean Architecture)

### 2.1 Основы Clean Architecture

**Основной вопрос:** Объясните концепцию чистой архитектуры. Какие проблемы она решает?

**Углубляющие вопросы:**
1. В чем разница между Clean Architecture и Layered Architecture?
2. Что означает "независимость от фреймворков" на практике?
3. Как чистая архитектура поддерживает принцип DIP?
4. Почему доменный слой должен быть в центре архитектуры?
5. Какие компромиссы приходится делать при внедрении Clean Architecture?

### 2.2 Слои архитектуры

**Основной вопрос:** Опишите назначение каждого слоя в Clean Architecture. Как обеспечивается изоляция между слоями?

**Углубляющие вопросы:**
1. Что может содержать доменный слой, а что нет?
2. В чем разница между Application Services и Domain Services?
3. Где размещать валидацию данных в Clean Architecture?
4. Как обрабатывать cross-cutting concerns (логирование, кеширование)?
5. Можно ли объединять слои в небольших приложениях?

### 2.3 Dependency Rule

**Основной вопрос:** Объясните правило зависимостей в Clean Architecture. Как его поддерживать в коде?

**Углубляющие вопросы:**
1. Что происходит при нарушении Dependency Rule?
2. Как передавать данные между слоями без нарушения правила?
3. Какие инструменты помогают контролировать зависимости?
4. Как обрабатывать исключения из внешних слоев?
5. Можно ли создавать временные нарушения для прототипирования?

### 2.4 Entities и Use Cases

**Основной вопрос:** В чем разница между entities и use cases? Как правильно их проектировать?

**Углубляющие вопросы:**
1. Should entities содержать бизнес-логику или только данные?
2. Как определить границы между use cases?
3. Могут ли use cases вызывать другие use cases?
4. Где размещать сложные business rules?
5. Как тестировать entities и use cases изолированно?

### 2.5 Границы архитектуры

**Основной вопрос:** Что такое архитектурные границы? Как их правильно определять и реализовывать?

**Углубляющие вопросы:**
1. Какие типы границ существуют в Clean Architecture?
2. Как реализовать границы в монолитном приложении?
3. Что такое "screaming architecture"?
4. Как границы влияют на производительность?
5. Когда стоит объединить компоненты, разделенные границей?

### 2.6 Adapters и Ports

**Основной вопрос:** Объясните паттерн Ports & Adapters. Как он реализуется в Clean Architecture?

**Углубляющие вопросы:**
1. В чем разница между primary и secondary adapters?
2. Как проектировать порты для различных типов данных?
3. Что такое anti-corruption layer и когда его использовать?
4. Как тестировать адаптеры?
5. Можно ли один адаптер использовать для нескольких портов?

### 2.7 Clean Architecture и базы данных

**Основной вопрос:** Как работать с базами данных в Clean Architecture? Где размещать ORM и SQL запросы?

**Углубляющие вопросы:**
1. Должны ли entities знать о схеме базы данных?
2. Как реализовать Repository pattern в Clean Architecture?
3. Где выполнять mapping между доменными объектами и DTO?
4. Как обрабатывать транзакции в архитектуре?
5. Что делать с производительными запросами, требующими знания БД?

### 2.8 Тестирование Clean Architecture

**Основной вопрос:** Как организовать тестирование в Clean Architecture? Какие типы тестов и для каких слоев?

**Углубляющие вопросы:**
1. Как тестировать use cases без внешних зависимостей?
2. Что такое architecture tests и как их писать?
3. Как интеграционные тесты вписываются в Clean Architecture?
4. Нужны ли моки для всех внешних зависимостей?
5. Как тестировать производительность в изолированных слоях?

### 2.9 Clean Architecture в микросервисах

**Основной вопрос:** Как применять Clean Architecture в микросервисной архитектуре?

**Углубляющие вопросы:**
1. Должен ли каждый микросервис следовать Clean Architecture?
2. Как обрабатывать межсервисное взаимодействие?
3. Где размещать API Gateway в контексте Clean Architecture?
4. Как шарить код между микросервисами без нарушения изоляции?
5. Влияет ли размер сервиса на необходимость следования архитектуре?

### 2.10 Рефакторинг к Clean Architecture

**Основной вопрос:** Как постепенно мигрировать существующее приложение к Clean Architecture?

**Углубляющие вопросы:**
1. С какого слоя начинать рефакторинг?
2. Как выделить доменную логику из существующего кода?
3. Что такое Strangler Fig pattern в контексте архитектуры?
4. Как поддерживать работоспособность во время миграции?
5. Какие метрики показывают прогресс рефакторинга?

### 2.11 Performance в Clean Architecture

**Основной вопрос:** Как оптимизировать производительность не нарушая принципы Clean Architecture?

**Углубляющие вопросы:**
1. Создает ли Clean Architecture излишние накладные расходы?
2. Как кешировать данные в разных слоях архитектуры?
3. Где размещать оптимизации для конкретных use cases?
4. Как обрабатывать требования real-time производительности?
5. Можно ли создавать "быстрые пути" в критичных местах?

### 2.12 Clean Architecture и DDD

**Основной вопрос:** Как Clean Architecture соотносится с Domain-Driven Design?

**Углубляющие вопросы:**
1. Где в Clean Architecture размещать агрегаты?
2. Как bounded contexts влияют на архитектурные границы?
3. Являются ли domain services частью entities слоя?
4. Как реализовать domain events в архитектуре?
5. Где размещать specifications pattern?

### 2.13 Frameworks и Clean Architecture

**Основной вопрос:** Как интегрировать фреймворки не нарушая принципы Clean Architecture?

**Углубляющие вопросы:**
1. Можно ли использовать аннотации фреймворка в доменном слое?
2. Как абстрагироваться от ORM фреймворков?
3. Где размещать конфигурацию фреймворков?
4. Как обновлять фреймворки без влияния на бизнес-логику?
5. Что делать, если фреймворк требует наследования от своих классов?

### 2.14 Альтернативы Clean Architecture

**Основной вопрос:** Какие альтернативы Clean Architecture существуют? Когда их предпочесть?

**Углубляющие вопросы:**
1. В чем преимущества Hexagonal Architecture?
2. Что такое Onion Architecture и чем она отличается?
3. Когда достаточно простой Layered Architecture?
4. Как выбрать архитектуру для конкретного проекта?
5. Можно ли комбинировать разные архитектурные подходы?

### 2.15 Clean Architecture в разных доменах

**Основной вопрос:** Как особенности предметной области влияют на применение Clean Architecture?

**Углубляющие вопросы:**
1. Подходит ли Clean Architecture для CRUD приложений?
2. Как применять архитектуру в real-time системах?
3. Работает ли подход для ML/AI приложений?
4. Как адаптировать архитектуру для embedded систем?
5. Применима ли Clean Architecture к ETL процессам?

---

## 3. Dependency Injection и IoC

### 3.1 Основы Dependency Injection

**Основной вопрос:** Объясните концепцию Dependency Injection. В чем разница между DI и Service Locator?

**Углубляющие вопросы:**
1. Какие типы DI существуют (constructor, setter, interface)?
2. Что такое Inversion of Control и как DI его реализует?
3. В чем преимущества и недостатки каждого типа injection?
4. Как DI влияет на производительность приложения?
5. Можно ли использовать DI без контейнера?

### 3.2 IoC контейнеры

**Основной вопрос:** Что такое IoC контейнер? Как он работает внутри?

**Углубляющие вопросы:**
1. Как контейнер разрешает циклические зависимости?
2. Что происходит при регистрации одного интерфейса с несколькими реализациями?
3. Как контейнер обрабатывает generic типы?
4. Что такое child containers и когда их использовать?
5. Как оптимизировать производительность резолвинга зависимостей?

### 3.3 Жизненные циклы объектов

**Основной вопрос:** Объясните различные жизненные циклы объектов в DI контейнерах.

**Углубляющие вопросы:**
1. В чем разница между Singleton, Transient и Scoped lifetimes?
2. Как Scoped lifetime работает в веб-приложениях?
3. Что происходит с Singleton объектами при завершении приложения?
4. Как обрабатывать disposable зависимости?
5. Какие проблемы создает неправильный выбор lifetime?

### 3.4 Конфигурация DI контейнера

**Основной вопрос:** Как правильно конфигурировать DI контейнер? Где размещать регистрации?

**Углубляющие вопросы:**
1. Что лучше: code-based или XML конфигурация?
2. Как организовать регистрацию зависимостей в больших проектах?
3. Что такое convention-based registration?
4. Как обрабатывать условную регистрацию зависимостей?
5. Как валидировать конфигурацию контейнера?

### 3.5 DI и тестирование

**Основной вопрос:** Как DI упрощает unit тестирование? Какие паттерны тестирования с DI?

**Углубляющие вопросы:**
1. Нужен ли отдельный DI контейнер для тестов?
2. Как мокировать зависимости в DI контейнере?
3. Что такое test doubles и как их регистрировать?
4. Как тестировать саму конфигурацию DI?
5. Создают ли интеграционные тесты с DI дополнительную сложность?

### 3.6 Антипаттерны DI

**Основной вопрос:** Какие антипаттерны существуют при использовании DI?

**Углубляющие вопросы:**
1. Что такое Service Locator anti-pattern?
2. В чем проблема Constructor Over-injection?
3. Что такое Captive Dependencies и как их избежать?
4. Почему опасно использовать контейнер в бизнес-логике?
5. Как избежать скрытых зависимостей через DI?

### 3.7 DI в различных архитектурах

**Основной вопрос:** Как DI интегрируется с различными архитектурными паттернами?

**Углубляющие вопросы:**
1. Как DI поддерживает Clean Architecture?
2. Где размещать DI конфигурацию в многослойной архитектуре?
3. Как использовать DI в микросервисной архитектуре?
4. Работает ли DI с functional programming подходами?
5. Как DI влияет на модульность приложения?

### 3.8 Factory patterns и DI

**Основной вопрос:** Как комбинировать Factory patterns с Dependency Injection?

**Углубляющие вопросы:**
1. Когда использовать Abstract Factory вместо DI?
2. Как реализовать Factory через DI контейнер?
3. Что такое Func<T> и как его использовать для lazy creation?
4. Как создавать объекты с runtime параметрами через DI?
5. В чем разница между Factory и Builder в контексте DI?

### 3.9 DI и производительность

**Основной вопрос:** Как оптимизировать производительность DI контейнеров?

**Углубляющие вопросы:**
1. Какие операции DI контейнера самые затратные?
2. Что такое compiled expressions в DI контейнерах?
3. Как измерить влияние DI на производительность?
4. Когда стоит кешировать результаты резолвинга?
5. Создают ли декораторы через DI проблемы производительности?

### 3.10 Продвинутые сценарии DI

**Основной вопрос:** Как решать сложные сценарии с DI (декораторы, interceptors, AOP)?

**Углубляющие вопросы:**
1. Как реализовать Decorator pattern через DI?
2. Что такое interception и как его настроить?
3. Как добавить logging/caching через DI interceptors?
4. Что такое aspect-oriented programming в контексте DI?
5. Как обрабатывать multiple implementations одного интерфейса?

---

## 4. Паттерны проектирования

### 4.1 Creational Patterns - Singleton

**Основной вопрос:** Когда уместно использовать Singleton? Какие проблемы он создает?

**Углубляющие вопросы:**
1. Как реализовать thread-safe Singleton без блокировок?
2. В чем проблема Singleton в контексте unit testing?
3. Как Singleton влияет на масштабируемость приложения?
4. Что такое Singleton anti-pattern и когда он применим?
5. Как заменить Singleton на DI container?

### 4.2 Creational Patterns - Factory

**Основной вопрос:** Объясните различия между Factory Method, Abstract Factory и Builder patterns.

**Углубляющие вопросы:**
1. Когда использовать каждый из factory patterns?
2. Как совместить Factory patterns с Dependency Injection?
3. Что такое fluent builder и его преимущества?
4. Как Factory patterns помогают в тестировании?
5. Можно ли использовать generic методы вместо Factory?

### 4.3 Structural Patterns - Adapter

**Основной вопрос:** Как применять Adapter pattern в современных приложениях?

**Углубляющие вопросы:**
1. В чем разница между Object Adapter и Class Adapter?
2. Как Adapter pattern поддерживает принцип OCP?
3. Что такое Two-way Adapter и когда его использовать?
4. Как Adapter влияет на производительность?
5. Можно ли автоматически генерировать адаптеры?

### 4.4 Structural Patterns - Decorator

**Основной вопрос:** Как правильно реализовать Decorator pattern? Когда он предпочтительнее наследования?

**Углубляющие вопросы:**
1. Как избежать explosion декораторов?
2. Что такое transparent decorator vs non-transparent?
3. Как Decorator pattern работает с Dependency Injection?
4. В чем разница между Decorator и Proxy patterns?
5. Как тестировать цепочки декораторов?

### 4.5 Behavioral Patterns - Strategy

**Основной вопрос:** Как Strategy pattern поддерживает принцип Open/Closed?

**Углубляющие вопросы:**
1. Как выбирать стратегию во runtime?
2. Что такое Null Object Strategy?
3. Как Strategy pattern работает с функциональным программированием?
4. В чем разница между Strategy и State patterns?
5. Как оптимизировать производительность с множеством стратегий?

### 4.6 Behavioral Patterns - Observer

**Основной вопрос:** Объясните Observer pattern и его современные реализации.

**Углубляющие вопросы:**
1. Как обрабатывать слабые ссылки в Observer pattern?
2. Что такое push vs pull notification models?
3. Как Observer pattern связан с Event-Driven Architecture?
4. Как избежать memory leaks в Observer implementations?
5. В чем разница между Observer и Publisher-Subscriber?

### 4.7 Repository Pattern

**Основной вопрос:** Как правильно реализовать Repository pattern в современных приложениях?

**Углубляющие вопросы:**
1. Нужен ли generic repository или только специфичные?
2. Как Repository pattern работает с ORM?
3. Что такое Specification pattern и как его комбинировать с Repository?
4. Как обрабатывать транзакции в Repository pattern?
5. Стоит ли Repository возвращать IQueryable?

### 4.8 Unit of Work Pattern

**Основной вопрос:** Что такое Unit of Work pattern и как он решает проблемы транзакционности?

**Углубляющие вопросы:**
1. Как Unit of Work интегрируется с Repository pattern?
2. Что происходит при откате транзакции в Unit of Work?
3. Как обрабатывать nested Unit of Work?
4. Влияет ли Unit of Work на производительность?
5. Можно ли использовать Unit of Work с NoSQL базами?

### 4.9 Command Pattern и CQRS

**Основной вопрос:** Как Command pattern эволюционировал в CQRS? Какие преимущества это дает?

**Углубляющие вопросы:**
1. В чем разница между Command pattern и CQRS?
2. Как реализовать undo/redo функциональность через Command pattern?
3. Что такое Command Handler и как его тестировать?
4. Как Command pattern помогает в Event Sourcing?
5. Когда CQRS избыточен для простых приложений?

### 4.10 Mediator Pattern

**Основной вопрос:** Как Mediator pattern упрощает взаимодействие между компонентами?

**Углубляющие вопросы:**
1. В чем разница между Mediator и Observer patterns?
2. Как Mediator pattern поддерживает Single Responsibility Principle?
3. Что такое request/response vs notification в медиаторе?
4. Как тестировать компоненты, использующие медиатор?
5. Может ли медиатор стать bottleneck в производительности?

### 4.11 Chain of Responsibility

**Основной вопрос:** Когда применять Chain of Responsibility pattern? Как его оптимизировать?

**Углубляющие вопросы:**
1. Как обрабатывать случаи, когда запрос не обработан ни одним handler?
2. Что такое dynamic chain building?
3. Как Chain of Responsibility работает с async операциями?
4. В чем разница между цепочкой и middleware pattern?
5. Как измерить производительность длинных цепочек?

### 4.12 Template Method vs Strategy

**Основной вопрос:** Когда выбрать Template Method, а когда Strategy pattern?

**Углубляющие вопросы:**
1. Как Template Method влияет на тестируемость кода?
2. Можно ли комбинировать Template Method со Strategy?
3. Что такое Hollywood Principle в контексте Template Method?
4. Как реализовать Template Method в функциональном стиле?
5. Создает ли Template Method tight coupling между классами?

### 4.13 Null Object Pattern

**Основной вопрос:** Как Null Object pattern помогает избежать null reference exceptions?

**Углубляющие вопросы:**
1. Когда Null Object pattern предпочтительнее Optional/Maybe?
2. Как Null Object влияет на производительность?
3. Что делать, если Null Object должен вести себя по-разному в разных контекстах?
4. Как тестировать взаимодействие с Null Objects?
5. Совместим ли Null Object pattern с типобезопасностью?

### 4.14 Паттерны и производительность

**Основной вопрос:** Как различные паттерны влияют на производительность приложения?

**Углубляющие вопросы:**
1. Какие паттерны создают наибольшие накладные расходы?
2. Как оптимизировать Decorator chains для production?
3. Влияет ли глубина наследования паттернов на performance?
4. Что такое pattern overhead и как его измерить?
5. Когда стоит пожертвовать паттерном ради производительности?

### 4.15 Современные альтернативы классическим паттернам

**Основной вопрос:** Как современные языковые конструкции заменяют классические паттерны?

**Углубляющие вопросы:**
1. Заменяют ли lambda expressions Strategy pattern?
2. Как generics влияют на необходимость паттернов?
3. Что такое functional patterns vs OOP patterns?
4. Как async/await изменил Observer pattern?
5. Нужны ли классические паттерны в reactive programming?

---

## 5. Domain-Driven Design

### 5.1 Основы DDD

**Основной вопрос:** Объясните основную философию Domain-Driven Design. Когда его стоит применять?

**Углубляющие вопросы:**
1. В чем разница между анемичной и богатой доменной моделью?
2. Что такое ubiquitous language и как его поддерживать?
3. Как DDD соотносится с agile методологиями?
4. Подходит ли DDD для всех типов приложений?
5. Как измерить успешность внедрения DDD?

### 5.2 Bounded Contexts

**Основной вопрос:** Что такое Bounded Context? Как определить его границы?

**Углубляющие вопросы:**
1. Может ли одна команда разработки работать с несколькими контекстами?
2. Как Bounded Contexts влияют на архитектуру базы данных?
3. Что такое Context Map и как его использовать?
4. Как обрабатывать пересечения между контекстами?
5. Влияют ли Bounded Contexts на размер микросервисов?

### 5.3 Entities и Value Objects

**Основной вопрос:** В чем ключевая разница между Entities и Value Objects? Как принимать решение о классификации?

**Углубляющие вопросы:**
1. Может ли Value Object содержать поведение?
2. Как обеспечить immutability Value Objects?
3. Что делать, если требования к объекту меняются (Entity ↔ Value Object)?
4. Как сравнивать Value Objects для производительности?
5. Должны ли Value Objects знать о persistence слое?

### 5.4 Aggregates

**Основной вопрос:** Что такое Aggregate? Как определить корень агрегата и его границы?

**Углубляющие вопросы:**
1. Может ли агрегат ссылаться на другие агрегаты по ID?
2. Как обрабатывать транзакции между агрегатами?
3. Что такое invariants и как их поддерживать?
4. Как размер агрегата влияет на производительность?
5. Можно ли изменять несколько агрегатов в одной транзакции?

### 5.5 Domain Services

**Основной вопрос:** Когда создавать Domain Service? Как отличить его от Application Service?

**Углубляющие вопросы:**
1. Может ли Domain Service быть stateful?
2. Как Domain Services взаимодействуют с Repository?
3. Что делать, если логика не принадлежит конкретной Entity?
4. Как тестировать Domain Services изолированно?
5. Создают ли Domain Services проблемы с cohesion?

### 5.6 Domain Events

**Основной вопрос:** Что такое Domain Events? Как их правильно проектировать и обрабатывать?

**Углубляющие вопросы:**
1. В чем разница между Domain Events и Integration Events?
2. Когда генерировать события: в момент изменения или при сохранении?
3. Как обеспечить consistency при обработке событий?
4. Что такое event versioning и зачем он нужен?
5. Как тестировать генерацию и обработку событий?

### 5.7 Specifications Pattern

**Основной вопрос:** Как Specification pattern помогает в DDD? Когда его использовать?

**Углубляющие вопросы:**
1. Как комбинировать спецификации (AND, OR, NOT)?
2. Где размещать спецификации в архитектуре?
3. Можно ли преобразовать спецификации в SQL запросы?
4. Как тестировать сложные спецификации?
5. В чем разница между спецификациями и бизнес-правилами?

### 5.8 Factories в DDD

**Основной вопрос:** Когда нужны Factories в доменной модели? Как их проектировать?

**Углубляющие вопросы:**
1. В чем разница между Domain Factory и обычным конструктором?
2. Должна ли Factory быть частью агрегата или отдельным сервисом?
3. Как Factory обрабатывает сложную бизнес-логику создания?
4. Можно ли использовать DI контейнер как Factory?
5. Как тестировать Domain Factories?

### 5.9 Anti-Corruption Layer

**Основной вопрос:** Что такое Anti-Corruption Layer? Когда и как его реализовывать?

**Углубляющие вопросы:**
1. В чем разница между ACL и обычным Adapter?
2. Как ACL защищает от изменений внешних систем?
3. Где размещать ACL в Clean Architecture?
4. Как тестировать Anti-Corruption Layer?
5. Может ли ACL стать bottleneck для производительности?

### 5.10 DDD и микросервисы

**Основной вопрос:** Как DDD помогает в проектировании микросервисной архитектуры?

**Углубляющие вопросы:**
1. Должен ли каждый Bounded Context быть отдельным сервисом?
2. Как обрабатывать транзакции между доменами в микросервисах?
3. Что такое distributed domain events?
4. Как поддерживать консистентность данных между сервисами?
5. Влияет ли network latency на проектирование агрегатов?

---

## 6. Тестирование архитектуры

### 6.1 Unit тестирование архитектуры

**Основной вопрос:** Как писать эффективные unit тесты для различных слоев архитектуры?

**Углубляющие вопросы:**
1. Нужно ли мокировать все внешние зависимости?
2. Как тестировать доменную логику без persistence слоя?
3. Что такое sociable vs solitary unit tests?
4. Как тестировать Use Cases в Clean Architecture?
5. Какой уровень покрытия кода оптимален для разных слоев?

### 6.2 Integration тестирование

**Основной вопрос:** Как организовать integration тесты в многослойной архитектуре?

**Углубляющие вопросы:**
1. Что тестировать на integration уровне, а что на unit?
2. Как настроить тестовую среду для integration тестов?
3. Что такое test containers и когда их использовать?
4. Как обеспечить изоляцию между integration тестами?
5. Как тестировать взаимодействие с внешними сервисами?

### 6.3 Architecture тесты

**Основной вопрос:** Что такое architecture тесты? Как они помогают поддерживать архитектурные принципы?

**Углубляющие вопросы:**
1. Как автоматически проверять Dependency Rule?
2. Что такое fitness functions в архитектуре?
3. Как тестировать naming conventions и package structure?
4. Можно ли автоматически выявлять architectural smells?
5. Как интегрировать architecture тесты в CI/CD pipeline?

### 6.4 Contract тестирование

**Основной вопрос:** Что такое contract testing? Как его применять в микросервисной архитектуре?

**Углубляющие вопросы:**
1. В чем разница между consumer-driven и provider-driven contracts?
2. Как версионировать контракты API?
3. Что такое schema evolution и как его тестировать?
4. Как обрабатывать breaking changes в контрактах?
5. Заменяют ли contract тесты integration тесты?

### 6.5 Performance тестирование архитектуры

**Основной вопрос:** Как тестировать производительность различных архитектурных решений?

**Углубляющие вопросы:**
1. Как измерить overhead от архитектурных абстракций?
2. Что такое microbenchmarks и когда их использовать?
3. Как тестировать scalability архитектурных решений?
4. Что измерять: latency, throughput или memory usage?
5. Как автоматизировать performance regression testing?

### 6.6 Тестирование в DDD

**Основной вопрос:** Как организовать тестирование в Domain-Driven Design?

**Углубляющие вопросы:**
1. Как тестировать агрегаты и их invariants?
2. Нужны ли интеграционные тесты для Repository?
3. Как тестировать Domain Events и их обработчики?
4. Что такое specification testing в DDD?
5. Как тестировать сложные доменные сценарии?

### 6.7 Test Doubles и архитектура

**Основной вопрос:** Какие типы test doubles использовать для разных архитектурных компонентов?

**Углубляющие вопросы:**
1. Когда использовать mocks, stubs, fakes, и spies?
2. Как создавать realistic test doubles?
3. Что такое in-memory implementations для тестирования?
4. Как избежать over-mocking в архитектурных тестах?
5. Влияют ли test doubles на качество тестов?

### 6.8 TDD и архитектура

**Основной вопрос:** Как Test-Driven Development влияет на архитектурные решения?

**Углубляющие вопросы:**
1. Приводит ли TDD к лучшей архитектуре автоматически?
2. Как применять TDD на архитектурном уровне?
3. Что такое acceptance test-driven development?
4. Как TDD влияет на coupling между компонентами?
5. Можно ли использовать TDD для рефакторинга архитектуры?

---

## 7. Рефакторинг и технический долг

### 7.1 Выявление технического долга

**Основной вопрос:** Как выявлять и классифицировать технический долг в архитектуре?

**Углубляющие вопросы:**
1. Какие метрики помогают измерить архитектурный технический долг?
2. Что такое architectural smells и как их выявлять?
3. Как отличить технический долг от естественной эволюции требований?
4. Какие инструменты помогают в автоматическом выявлении проблем?
5. Как количественно оценить влияние технического долга?

### 7.2 Стратегии рефакторинга

**Основной вопрос:** Какие стратегии рефакторинга архитектуры существуют? Как выбирать подходящую?

**Углубляющие вопросы:**
1. В чем разница между Big Bang и incremental рефакторингом?
2. Что такое Strangler Fig pattern и когда его применять?
3. Как планировать рефакторинг в условиях активной разработки?
4. Что такое Branch by Abstraction technique?
5. Как измерить успешность архитектурного рефакторинга?

### 7.3 Рефакторинг к паттернам

**Основной вопрос:** Как систематически внедрять паттерны проектирования в существующий код?

**Углубляющие вопросы:**
1. Как определить, какой паттерн решит конкретную проблему?
2. Что такое refactoring to patterns vs refactoring away from patterns?
3. Как рефакторить код с минимальным риском для функциональности?
4. Какие паттерны чаще всего нужны при рефакторинге legacy кода?
5. Как убедиться, что паттерн действительно улучшил код?

### 7.4 Legacy код и архитектура

**Основной вопрос:** Как работать с legacy кодом, который не следует современным архитектурным принципам?

**Углубляющие вопросы:**
1. Что такое characterization tests и как их использовать?
2. Как выделить доменную логику из legacy монолита?
3. Что такое seam в контексте legacy кода?
4. Как постепенно внедрить DI в код без него?
5. Стоит ли переписывать legacy систему с нуля?

### 7.5 Приоритизация рефакторинга

**Основной вопрос:** Как приоритизировать рефакторинг архитектуры? Что рефакторить в первую очередь?

**Углубляющие вопросы:**
1. Как соотносить техническую ценность и бизнес-ценность рефакторинга?
2. Что такое hotspot analysis в коде?
3. Как учитывать частоту изменений при планировании рефакторинга?
4. Какие части архитектуры критичны для производительности команды?
5. Как объяснить бизнесу необходимость архитектурного рефакторинга?

### 7.6 Безопасный рефакторинг

**Основной вопрос:** Как минимизировать риски при архитектурном рефакторинге?

**Углубляющие вопросы:**
1. Какую роль играют тесты в безопасном рефакторинге?
2. Что такое parallel run technique?
3. Как использовать feature flags при архитектурном рефакторинге?
4. Что такое canary releases в контексте архитектурных изменений?
5. Как быстро откатить неудачный архитектурный рефакторинг?

### 7.7 Команда и рефакторинг

**Основной вопрос:** Как организовать команду для эффективного архитектурного рефакторинга?

**Углубляющие вопросы:**
1. Должна ли архитектурным рефакторингом заниматься отдельная команда?
2. Как распределить знания об архитектуре в команде?
3. Что такое architectural decision records (ADR)?
4. Как проводить архитектурные ревью кода?
5. Как поддерживать мотивацию команды при длительном рефакторинге?

---

## 8. Дополнительные темы

### 8.1 Event-Driven Architecture

**Основной вопрос:** Что такое Event-Driven Architecture? Как она соотносится с другими архитектурными подходами?

**Углубляющие вопросы:**
1. В чем разница между событиями, командами и запросами?
2. Что такое event sourcing и когда его применять?
3. Как обеспечить eventual consistency в event-driven системах?
4. Что такое saga pattern для распределенных транзакций?
5. Как тестировать event-driven архитектуру?

### 8.2 CQRS (Command Query Responsibility Segregation)

**Основной вопрос:** Когда и как применять CQRS? Какие проблемы он решает?

**Углубляющие вопросы:**
1. В чем разница между простым CQRS и CQRS с event sourcing?
2. Как синхронизировать read и write модели?
3. Что такое projection в CQRS?
4. Как обрабатывать eventual consistency в UI?
5. Усложняет ли CQRS разработку и поддержку?

### 8.3 Hexagonal Architecture

**Основной вопрос:** В чем особенности Hexagonal Architecture? Как она отличается от Clean Architecture?

**Углубляющие вопросы:**
1. Что такое порты и адаптеры в Hexagonal Architecture?
2. Как организовать тестирование в гексагональной архитектуре?
3. Может ли быть несколько адаптеров для одного порта?
4. Как Hexagonal Architecture поддерживает принцип DIP?
5. Подходит ли гексагональная архитектура для всех типов приложений?

### 8.4 Reactive Architecture

**Основной вопрос:** Что такое Reactive Architecture? Какие принципы она включает?

**Углубляющие вопросы:**
1. Что означает responsive, resilient, elastic, message-driven?
2. Как backpressure влияет на архитектурные решения?
3. Что такое reactive streams и как их использовать?
4. Как обрабатывать ошибки в reactive системах?
5. Совместима ли reactive архитектура с традиционными паттернами?

### 8.5 Serverless Architecture

**Основной вопрос:** Как архитектурные принципы применяются в serverless среде?

**Углубляющие вопросы:**
1. Как организовать слои архитектуры в serverless функциях?
2. Что такое cold start и как он влияет на архитектуру?
3. Как реализовать DI в serverless environment?
4. Подходят ли традиционные паттерны для serverless?
5. Как тестировать serverless архитектуру?

### 8.6 API Design

**Основной вопрос:** Как архитектурные принципы влияют на дизайн API?

**Углубляющие вопросы:**
1. Что такое API-first подход в архитектуре?
2. Как версионировать API согласно архитектурным принципам?
3. Что такое hypermedia API и HATEOAS?
4. Как обеспечить backward compatibility в API?
5. Влияет ли внутренняя архитектура на внешний API?

### 8.7 Security Architecture

**Основной вопрос:** Как интегрировать security concerns в архитектуру приложения?

**Углубляющие вопросы:**
1. Что такое security by design принцип?
2. Как реализовать authentication/authorization в Clean Architecture?
3. Что такое threat modeling в контексте архитектуры?
4. Как обрабатывать sensitive data в различных слоях?
5. Влияет ли security на выбор архитектурных паттернов?

### 8.8 Performance Architecture

**Основной вопрос:** Как архитектурные решения влияют на производительность системы?

**Углубляющие вопросы:**
1. Что такое performance-driven architecture?
2. Как балансировать между чистотой кода и производительностью?
3. Какие архитектурные паттерны критичны для performance?
4. Как измерять архитектурные performance metrics?
5. Что такое performance budgets в архитектуре?

---

## Критерии оценки

### Уровни понимания:

**Junior уровень (20-40% правильных ответов):**
- Знание базовых принципов SOLID
- Понимание основ паттернов проектирования
- Базовое понимание слоев архитектуры

**Middle уровень (40-70% правильных ответов):**
- Глубокое понимание SOLID и DI
- Знание большинства паттернов и их применения
- Понимание Clean Architecture и DDD основ
- Способность применять принципы на практике

**Senior уровень (70-90% правильных ответов):**
- Экспертное знание всех тем
- Понимание trade-offs и компромиссов
- Способность адаптировать принципы под конкретные задачи
- Знание альтернативных подходов и их сравнение

**Архитектор уровень (90%+ правильных ответов):**
- Системное понимание всех концепций
- Способность объяснить сложные концепции простыми словами
- Опыт решения реальных архитектурных проблем
- Знание современных тенденций и эволюции принципов

---

## Примечания по проведению интервью

1. **Не задавайте все вопросы** - выберите 15-20 основных вопросов в зависимости от позиции
2. **Фокусируйтесь на понимании**, а не на заучивании определений
3. **Просите приводить примеры** из реального опыта кандидата
4. **Обращайте внимание на объяснения** - как кандидат объясняет сложные концепции
5. **Оценивайте критическое мышление** - способность видеть недостатки и альтернативы

## Полезные материалы для подготовки

- "Clean Architecture" - Robert C. Martin
- "Domain-Driven Design" - Eric Evans  
- "Patterns of Enterprise Application Architecture" - Martin Fowler
- "Dependency Injection Principles, Practices, and Patterns" - Steven van Deursen
- "Refactoring: Improving the Design of Existing Code" - Martin Fowler