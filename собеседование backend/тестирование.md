# üîç –ë–ª–æ–∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –¥–ª—è Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [Unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [Integration —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#integration-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [End-to-End (E2E) —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#end-to-end-e2e-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∏–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ-–≤–∏–¥—ã-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-–∑–∞–¥–∞—á–∏)

---

## üéØ Unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–æ–ø—Ä–æ—Å 1: –û—Å–Ω–æ–≤—ã Unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
**–í–æ–ø—Ä–æ—Å:** –û–±—ä—è—Å–Ω–∏—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã FIRST –¥–ª—è unit —Ç–µ—Å—Ç–æ–≤ –∏ –∫–∞–∫ –æ–Ω–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ 2025 –≥–æ–¥–∞.

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
FIRST –ø—Ä–∏–Ω—Ü–∏–ø—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã –∏ –≤ 2025:
- **F**ast - —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ (< 100–º—Å)
- **I**ndependent - –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
- **R**epeatable - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å –≤ –ª—é–±–æ–π —Å—Ä–µ–¥–µ
- **S**elf-validating - –±—É–ª–µ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (pass/fail)
- **T**imely - –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–¥ –∏–ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –∫–æ–¥–æ–º

**–ü—Ä–∏–º–µ—Ä:**
```python
# ‚ùå –ú–µ–¥–ª–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç (–æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ë–î)
def test_user_creation_slow():
    user = create_user_in_db("test@example.com")
    assert user.email == "test@example.com"

# ‚úÖ –ë—ã—Å—Ç—Ä—ã–π unit —Ç–µ—Å—Ç
def test_user_validation():
    user = User("test@example.com")
    assert user.is_valid_email() == True
```

### –í–æ–ø—Ä–æ—Å 2: TDD vs BDD –ø–æ–¥—Ö–æ–¥—ã
**–í–æ–ø—Ä–æ—Å:** –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É TDD –∏ BDD –ø–æ–¥—Ö–æ–¥–∞–º–∏? –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –≤ backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
- **TDD (Test-Driven Development):**
  - –§–æ–∫—É—Å –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ
  - Red-Green-Refactor —Ü–∏–∫–ª
  - Driven by —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
  - –õ—É—á—à–µ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏, –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

- **BDD (Behavior-Driven Development):**
  - –§–æ–∫—É—Å –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã
  - Given-When-Then —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
  - Driven by –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏
  - –õ—É—á—à–µ –¥–ª—è API endpoints, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

**–ü—Ä–∏–º–µ—Ä TDD:**
```python
# 1. Red - –ø–∏—à–µ–º —Ç–µ—Å—Ç
def test_calculate_discount():
    calculator = DiscountCalculator()
    result = calculator.calculate(100, 10)
    assert result == 90

# 2. Green - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥
class DiscountCalculator:
    def calculate(self, price, discount_percent):
        return price - (price * discount_percent / 100)

# 3. Refactor - —É–ª—É—á—à–∞–µ–º
```

**–ü—Ä–∏–º–µ—Ä BDD:**
```gherkin
Scenario: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏ –∫ –∑–∞–∫–∞–∑—É
  Given –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∑–∞–∫–∞–∑–æ–º –Ω–∞ —Å—É–º–º—É 100 —Ä—É–±–ª–µ–π
  When –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å–∫–∏–¥–∫–∞ 10%
  Then –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 90 —Ä—É–±–ª–µ–π
```

### –í–æ–ø—Ä–æ—Å 3: –ú–æ–∫–∏ –∏ —Å—Ç–∞–±—ã –≤ 2025
**–í–æ–ø—Ä–æ—Å:** –û–±—ä—è—Å–Ω–∏—Ç–µ —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É Mock, Stub, Fake –∏ Spy. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ç–∏–ø test double?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
- **Stub** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- **Mock** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (–≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤)
- **Fake** - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–∞–±–æ—á–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- **Spy** - —Ä–µ–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- **Stub** - –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **Mock** - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≤—ã–∑–æ–≤–æ–≤
- **Fake** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å "–ø–æ—á—Ç–∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏" –¥–∞–Ω–Ω—ã–º–∏
- **Spy** - –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä:**
```python
from unittest.mock import Mock, patch

# Mock - –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
def test_email_service_called():
    email_service = Mock()
    notification_service = NotificationService(email_service)
    
    notification_service.send_welcome_email("user@example.com")
    
    email_service.send.assert_called_once_with(
        to="user@example.com",
        subject="Welcome"
    )

# Stub - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
@patch('requests.get')
def test_api_client(mock_get):
    mock_get.return_value.json.return_value = {"status": "ok"}
    
    client = ApiClient()
    result = client.check_status()
    
    assert result == "ok"
```

### –í–æ–ø—Ä–æ—Å 4: –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º? –ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
–í 2025 –≥–æ–¥—É —Ñ–æ–∫—É—Å —Å–º–µ—â–∞–µ—Ç—Å—è —Å quantity –Ω–∞ quality:

**–¢–∏–ø—ã –ø–æ–∫—Ä—ã—Ç–∏—è:**
- **Statement Coverage** - –ø–æ–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–æ–∫ (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å)
- **Branch Coverage** - –ø–æ–∫—Ä—ã—Ç–∏–µ –≤–µ—Ç–≤–ª–µ–Ω–∏–π (–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–π)
- **Function Coverage** - –ø–æ–∫—Ä—ã—Ç–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
- **Condition Coverage** - –ø–æ–∫—Ä—ã—Ç–∏–µ —É—Å–ª–æ–≤–∏–π

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- 70-80% - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è production
- 90%+ - –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–≥–æ –∫–æ–¥–∞
- 100% - —Ä–µ–¥–∫–æ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ, –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ over-testing

**–í–∞–∂–Ω–µ–µ –ø–æ–∫—Ä—ã—Ç–∏—è:**
- –ö–∞—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ edge cases
- Mutation testing

---

## üîó Integration —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–æ–ø—Ä–æ—Å 5: –í–∏–¥—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
**–í–æ–ø—Ä–æ—Å:** –û–ø–∏—à–∏—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
**1. Contract Testing (2025 trend):**
- Consumer-driven contracts
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ API
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Pact, Spring Cloud Contract

**2. Component Testing:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –≤ –∏–∑–æ–ª—è—Ü–∏–∏
- –ú–æ–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö API endpoints

**3. Service Virtualization:**
- –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: WireMock, Hoverfly

**4. Narrow Integration Tests:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–æ—á–µ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- Database, Message Queue, External API

**–ü—Ä–∏–º–µ—Ä Contract Testing:**
```python
# Consumer contract
def test_user_service_contract():
    expected_response = {
        "id": 123,
        "name": "John Doe",
        "email": "john@example.com"
    }
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ Consumer –æ–∂–∏–¥–∞–µ—Ç –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç
    user_client = UserServiceClient()
    mock_response(expected_response)
    
    user = user_client.get_user(123)
    assert user.name == "John Doe"
```

### –í–æ–ø—Ä–æ—Å 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥, —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö? –ö–∞–∫–∏–µ –ø–æ–¥—Ö–æ–¥—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã –≤ 2025?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
**–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:**

**1. Test Containers (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≤ 2025):**
```python
import testcontainers

def test_user_repository():
    with testcontainers.PostgreSqlContainer() as postgres:
        db_url = postgres.get_connection_url()
        repository = UserRepository(db_url)
        
        user = repository.create_user("test@example.com")
        assert user.id is not None
```

**2. In-Memory Database:**
```python
# SQLite in memory –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤
@pytest.fixture
def db():
    engine = create_engine("sqlite:///:memory:")
    Base.metadata.create_all(engine)
    return engine
```

**3. Database Transactions Rollback:**
```python
@pytest.fixture
def db_transaction():
    transaction = db.begin()
    yield db
    transaction.rollback()
```

**4. Repository Pattern Testing:**
```python
def test_user_repository():
    # Arrange
    repository = UserRepository(db)
    user_data = {"email": "test@example.com", "name": "Test User"}
    
    # Act
    user = repository.create(user_data)
    found_user = repository.find_by_email("test@example.com")
    
    # Assert
    assert found_user.name == "Test User"
```

### –í–æ–ø—Ä–æ—Å 7: API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ REST API? –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤.

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
**–ö–ª—é—á–µ–≤—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API:**

**1. HTTP Status Codes:**
```python
def test_api_status_codes():
    # Success cases
    response = client.get("/users/123")
    assert response.status_code == 200
    
    # Error cases
    response = client.get("/users/999")
    assert response.status_code == 404
    
    # Validation errors
    response = client.post("/users", json={"invalid": "data"})
    assert response.status_code == 422
```

**2. Response Schema Validation:**
```python
from jsonschema import validate

def test_user_response_schema():
    response = client.get("/users/123")
    schema = {
        "type": "object",
        "properties": {
            "id": {"type": "number"},
            "name": {"type": "string"},
            "email": {"type": "string", "format": "email"}
        },
        "required": ["id", "name", "email"]
    }
    validate(response.json(), schema)
```

**3. Authorization & Authentication:**
```python
def test_api_authorization():
    # –ë–µ–∑ —Ç–æ–∫–µ–Ω–∞
    response = client.get("/private-data")
    assert response.status_code == 401
    
    # –° –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
    headers = {"Authorization": "Bearer valid-token"}
    response = client.get("/private-data", headers=headers)
    assert response.status_code == 200
    
    # –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤
    headers = {"Authorization": "Bearer user-token"}
    response = client.delete("/admin/users/123", headers=headers)
    assert response.status_code == 403
```

**4. Input Validation:**
```python
def test_input_validation():
    # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
    response = client.post("/users", json={})
    assert response.status_code == 422
    assert "name is required" in response.json()["errors"]
    
    # –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
    response = client.post("/users", json={
        "name": "Test",
        "email": "invalid-email"
    })
    assert response.status_code == 422
    assert "invalid email format" in response.json()["errors"]
```

### –í–æ–ø—Ä–æ—Å 8: Message Queue —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π (RabbitMQ, Kafka, etc.)?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
**–ü–æ–¥—Ö–æ–¥—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:**

**1. Test Containers –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö MQ:**
```python
def test_message_processing():
    with testcontainers.RabbitMqContainer() as rabbitmq:
        connection = rabbitmq.get_connection()
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        producer = MessageProducer(connection)
        producer.send("user-events", {"user_id": 123, "action": "login"})
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É
        consumer = MessageConsumer(connection)
        processed_messages = consumer.get_processed_messages()
        
        assert len(processed_messages) == 1
        assert processed_messages[0]["user_id"] == 123
```

**2. In-Memory Queue –¥–ª—è unit —Ç–µ—Å—Ç–æ–≤:**
```python
from queue import Queue

def test_message_handler():
    message_queue = Queue()
    handler = UserEventHandler(message_queue)
    
    handler.handle_message({"user_id": 123, "action": "login"})
    
    assert not message_queue.empty()
    processed_message = message_queue.get()
    assert processed_message["status"] == "processed"
```

**3. –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤:**
```python
@patch('pika.BlockingConnection')
def test_message_publisher(mock_connection):
    publisher = MessagePublisher()
    publisher.publish("test-queue", {"data": "test"})
    
    mock_connection.return_value.channel.return_value.basic_publish.assert_called_once()
```

---

## üöÄ End-to-End (E2E) —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–æ–ø—Ä–æ—Å 9: E2E —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è backend
**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è backend —Å–∏—Å—Ç–µ–º? –ö–∞–∫–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Å–ª–µ–¥—É–µ—Ç —Å–æ–±–ª—é–¥–∞—Ç—å?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
**–ü—Ä–∏–Ω—Ü–∏–ø—ã E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ 2025:**

**1. Testing Pyramid —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ:**
- 70% Unit —Ç–µ—Å—Ç—ã
- 20% Integration —Ç–µ—Å—Ç—ã  
- 10% E2E —Ç–µ—Å—Ç—ã

**2. –§–æ–∫—É—Å –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö user journeys:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã
- Payment flows
- Data integrity –ø—Ä–æ–≤–µ—Ä–∫–∏

**3. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:**

**Testing Diamond approach (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π):**
```python
# E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
def test_complete_order_flow():
    # –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user = create_test_user()
    
    # –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
    order = create_order(user.id, items=[{"id": 1, "qty": 2}])
    
    # –ü—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –ø–ª–∞—Ç–µ–∂–∞
    payment = process_payment(order.id, {"card": "4111111111111111"})
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    assert order.status == "completed"
    assert payment.status == "success"
    assert inventory_updated(item_id=1, qty=-2)
```

### –í–æ–ø—Ä–æ—Å 10: Test Data Management
**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤ E2E —Ç–µ—Å—Ç–∞—Ö? –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
**–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**
- Data pollution –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞/–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞

**–†–µ—à–µ–Ω–∏—è:**

**1. Test Data Builders:**
```python
class UserBuilder:
    def __init__(self):
        self.user_data = {
            "name": "Test User",
            "email": f"test_{uuid4()}@example.com",
            "role": "user"
        }
    
    def with_admin_role(self):
        self.user_data["role"] = "admin"
        return self
    
    def with_email(self, email):
        self.user_data["email"] = email
        return self
    
    def build(self):
        return User.create(self.user_data)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
def test_admin_access():
    admin = UserBuilder().with_admin_role().build()
    response = client.get("/admin/dashboard", auth=admin.token)
    assert response.status_code == 200
```

**2. Database Seeding:**
```python
@pytest.fixture(scope="session")
def test_data():
    # –°–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
    admin_user = User.create({
        "email": "admin@test.com",
        "role": "admin"
    })
    
    test_product = Product.create({
        "name": "Test Product",
        "price": 100
    })
    
    yield {
        "admin_user": admin_user,
        "test_product": test_product
    }
    
    # –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
    cleanup_test_data()
```

**3. Database Transactions:**
```python
@pytest.fixture
def isolated_test():
    transaction = db.begin()
    try:
        yield db
    finally:
        transaction.rollback()
```

### –í–æ–ø—Ä–æ—Å 11: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö
**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ? –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
**–í—ã–∑–æ–≤—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ E2E:**
- –ú–Ω–æ–≥–æ –¥–≤–∏–∂—É—â–∏—Ö—Å—è —á–∞—Å—Ç–µ–π
- Network latency –∏ failures
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏

**–†–µ—à–µ–Ω–∏—è:**

**1. Service Mesh –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```yaml
# Istio configuration –¥–ª—è test environment
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: user-service-test
spec:
  http:
  - match:
    - headers:
        test-scenario:
          exact: "payment-failure"
    fault:
      abort:
        percentage:
          value: 100
        httpStatus: 500
    route:
    - destination:
        host: payment-service
```

**2. Consumer-Driven Contract Testing:**
```python
# Pact contract test
def test_user_service_contract():
    pact = Pact(
        consumer="order-service",
        provider="user-service"
    )
    
    (pact
     .given("user 123 exists")
     .upon_receiving("a request for user details")
     .with_request("GET", "/users/123")
     .will_respond_with(200, body={
         "id": 123,
         "name": "John Doe",
         "email": "john@example.com"
     }))
    
    with pact:
        user_client = UserServiceClient("http://localhost:1234")
        user = user_client.get_user(123)
        assert user["name"] == "John Doe"
```

**3. Chaos Engineering –≤ —Ç–µ—Å—Ç–∞—Ö:**
```python
def test_system_resilience():
    # –ó–∞–ø—É—Å–∫–∞–µ–º chaos monkey
    with ChaosMonkey() as chaos:
        chaos.kill_random_service()
        
        # –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å
        response = client.post("/orders", json=order_data)
        assert response.status_code in [200, 202]  # Success –∏–ª–∏ Accepted
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º eventual consistency
        eventually_assert(lambda: order_exists(response.json()["id"]))
```

---

## üß™ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∏–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–æ–ø—Ä–æ—Å 12: Performance Testing
**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å performance —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏? –ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- Response Time (p50, p95, p99)
- Throughput (RPS)
- Error Rate
- Resource Utilization (CPU, Memory)

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã 2025:**
```python
# Locust –¥–ª—è load testing
from locust import HttpUser, task, between

class BackendUser(HttpUser):
    wait_time = between(1, 3)
    
    @task(3)
    def get_users(self):
        self.client.get("/api/users")
    
    @task(1)
    def create_user(self):
        self.client.post("/api/users", json={
            "name": "Test User",
            "email": f"test_{random.randint(1, 1000)}@example.com"
        })

# Performance regression tests
def test_api_performance():
    with performance_monitor() as monitor:
        response = client.get("/api/heavy-operation")
        
    assert monitor.response_time < 500  # ms
    assert monitor.memory_usage < 100   # MB
```

### –í–æ–ø—Ä–æ—Å 13: Security Testing
**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ –ø–æ–∫—Ä—ã–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
**–ê—Å–ø–µ–∫—Ç—ã security —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

**1. Authentication & Authorization:**
```python
def test_jwt_token_validation():
    # –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω
    response = client.get("/api/protected", 
                         headers={"Authorization": "Bearer invalid"})
    assert response.status_code == 401
    
    # –ò—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω
    expired_token = create_expired_jwt()
    response = client.get("/api/protected",
                         headers={"Authorization": f"Bearer {expired_token}"})
    assert response.status_code == 401

def test_role_based_access():
    user_token = create_user_token()
    admin_token = create_admin_token()
    
    # User –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ admin endpoint
    response = client.delete("/api/admin/users/123",
                            headers={"Authorization": f"Bearer {user_token}"})
    assert response.status_code == 403
    
    # Admin –º–æ–∂–µ—Ç
    response = client.delete("/api/admin/users/123",
                            headers={"Authorization": f"Bearer {admin_token}"})
    assert response.status_code == 200
```

**2. Input Validation & SQL Injection:**
```python
def test_sql_injection_protection():
    malicious_input = "'; DROP TABLE users; --"
    
    response = client.get(f"/api/users?name={malicious_input}")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ SQL injection –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
    assert response.status_code == 400  # Validation error
    assert "users" in db.get_table_names()  # –¢–∞–±–ª–∏—Ü–∞ –Ω–µ —É–¥–∞–ª–µ–Ω–∞
```

**3. Rate Limiting:**
```python
def test_rate_limiting():
    client_ip = "192.168.1.100"
    
    # –î–µ–ª–∞–µ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
    for i in range(101):  # –õ–∏–º–∏—Ç 100 req/min
        response = client.get("/api/users", 
                             headers={"X-Forwarded-For": client_ip})
    
    assert response.status_code == 429  # Too Many Requests
```

### –í–æ–ø—Ä–æ—Å 14: Monitoring –∏ Observability —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏, –ª–æ–≥–∏ –∏ traces –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏?

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É:**
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Observability:**

**1. Metrics Testing:**
```python
def test_metrics_collection():
    # Arrange
    metrics_client = MetricsClient()
    initial_count = metrics_client.get_counter("api_requests_total")
    
    # Act
    client.get("/api/users")
    
    # Assert
    final_count = metrics_client.get_counter("api_requests_total")
    assert final_count == initial_count + 1
```

**2. Logs Testing:**
```python
def test_error_logging():
    with LogCapture() as log_capture:
        # –í—ã–∑—ã–≤–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É
        client.get("/api/nonexistent")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
        assert "404 Not Found" in log_capture.records
        assert log_capture.records[0].level == "ERROR"
```

**3. Distributed Tracing:**
```python
def test_distributed_tracing():
    trace_id = str(uuid4())
    headers = {"X-Trace-Id": trace_id}
    
    response = client.post("/api/orders", 
                          json=order_data, 
                          headers=headers)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ trace –ø—Ä–æ—à–µ–ª —á–µ—Ä–µ–∑ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
    traces = tracing_client.get_traces(trace_id)
    service_names = [span.service_name for span in traces]
    
    expected_services = ["order-service", "payment-service", "inventory-service"]
    assert all(service in service_names for service in expected_services)
```

---

## üíª –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏

### –ó–∞–¥–∞—á–∞ 1: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–µ—Å—Ç–æ–≤
**–£—Å–ª–æ–≤–∏–µ:** –î–∞–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π –∏ –Ω–µ—É—Å—Ç–æ–π—á–∏–≤—ã–π —Ç–µ—Å—Ç. –û—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä—å—Ç–µ –µ–≥–æ —Å–ª–µ–¥—É—è best practices.

```python
# ‚ùå –ü–ª–æ—Ö–æ–π —Ç–µ—Å—Ç
def test_user_registration():
    # –°–æ–∑–¥–∞–µ–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
    db.execute("INSERT INTO users (email) VALUES ('test@example.com')")
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–π email
    email_service = RealEmailService()
    
    # –î–µ–ª–∞–µ–º HTTP –∑–∞–ø—Ä–æ—Å –∫ –≤–Ω–µ—à–Ω–µ–º—É API
    response = requests.post("https://api.external.com/validate", 
                           json={"email": "test@example.com"})
    
    # –ñ–¥–µ–º 5 —Å–µ–∫—É–Ω–¥
    time.sleep(5)
    
    user = db.query("SELECT * FROM users WHERE email = 'test@example.com'").first()
    assert user is not None
    
    # –ù–µ –æ—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ
```

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ —Ä–µ—à–µ–Ω–∏—é:**
```python
# ‚úÖ –•–æ—Ä–æ—à–∏–π —Ç–µ—Å—Ç
@pytest.fixture
def mock_email_service():
    return Mock()

@pytest.fixture
def mock_external_api():
    with patch('requests.post') as mock:
        mock.return_value.json.return_value = {"valid": True}
        yield mock

def test_user_registration(mock_email_service, mock_external_api, db_transaction):
    # Arrange
    user_service = UserService(
        email_service=mock_email_service,
        db=db_transaction
    )
    user_data = {
        "email": "test@example.com",
        "name": "Test User"
    }
    
    # Act
    result = user_service.register_user(user_data)
    
    # Assert
    assert result.success is True
    assert result.user.email == "test@example.com"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
    mock_email_service.send_welcome_email.assert_called_once_with("test@example.com")
    mock_external_api.assert_called_once()
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î
    user = db_transaction.query(User).filter_by(email="test@example.com").first()
    assert user is not None
    
    # –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ db_transaction fixture
```

### –ó–∞–¥–∞—á–∞ 2: Contract Testing Implementation
**–£—Å–ª–æ–≤–∏–µ:** –†–µ–∞–ª–∏–∑—É–π—Ç–µ contract —Ç–µ—Å—Ç –º–µ–∂–¥—É Order Service –∏ Payment Service.

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ —Ä–µ—à–µ–Ω–∏—é:**
```python
# Consumer side (Order Service)
def test_payment_service_contract():
    # Arrange
    pact = Pact(
        consumer="order-service",
        provider="payment-service",
        pact_dir="./pacts"
    )
    
    expected_response = {
        "payment_id": "pay_123",
        "status": "completed",
        "amount": 100.00,
        "currency": "USD"
    }
    
    # Define contract
    (pact
     .given("payment method is valid")
     .upon_receiving("a payment request")
     .with_request(
         method="POST",
         path="/payments",
         body={
             "amount": 100.00,
             "currency": "USD",
             "payment_method": "card_123"
         },
         headers={"Content-Type": "application/json"}
     )
     .will_respond_with(
         status=201,
         body=expected_response,
         headers={"Content-Type": "application/json"}
     ))
    
    # Act & Assert
    with pact:
        payment_client = PaymentServiceClient("http://localhost:1234")
        result = payment_client.process_payment({
            "amount": 100.00,
            "currency": "USD",
            "payment_method": "card_123"
        })
        
        assert result["status"] == "completed"
        assert result["amount"] == 100.00

# Provider side (Payment Service)
def test_payment_service_provider():
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ Payment Service —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É
    verifier = Verifier(
        provider="payment-service",
        provider_base_url="http://localhost:8080"
    )
    
    verifier.verify_pacts("./pacts/order-service-payment-service.json")
```

### –ó–∞–¥–∞—á–∞ 3: Chaos Engineering Test
**–£—Å–ª–æ–≤–∏–µ:** –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∫ —Å–±–æ—è–º.

**–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∫ —Ä–µ—à–µ–Ω–∏—é:**
```python
def test_order_resilience_to_payment_failures():
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–±–æ–∏ payment service
    """
    # Arrange
    order_data = {
        "user_id": 123,
        "items": [{"product_id": 1, "quantity": 2}],
        "total_amount": 200.00
    }
    
    # –°–∏–º—É–ª–∏—Ä—É–µ–º —Å–±–æ–π payment service (50% failure rate)
    with chaos_monkey() as chaos:
        chaos.add_failure(
            service="payment-service",
            failure_rate=0.5,
            failure_type="timeout"
        )
        
        successful_orders = 0
        failed_orders = 0
        
        # Act - –¥–µ–ª–∞–µ–º 10 –ø–æ–ø—ã—Ç–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
        for i in range(10):
            try:
                response = client.post("/api/orders", json=order_data)
                
                if response.status_code == 201:
                    successful_orders += 1
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ "pending_payment"
                    order = response.json()
                    assert order["status"] == "pending_payment"
                    
                elif response.status_code == 503:  # Service Unavailable
                    failed_orders += 1
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—à–∏–±–∫–∞
                    error = response.json()
                    assert "payment service unavailable" in error["message"]
                    
            except Exception as e:
                failed_orders += 1
        
        # Assert
        # –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ö–æ—Ç—è –±—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã
        assert successful_orders > 0
        # –ù–æ —Ç–∞–∫–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–±–æ–∏
        assert failed_orders > 0
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–±–æ–µ–≤
        time.sleep(2)  # –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
        
        response = client.post("/api/orders", json=order_data)
        assert response.status_code in [201, 503]  # –õ–∏–±–æ —É—Å–ø–µ—Ö, –ª–∏–±–æ graceful failure

def test_circuit_breaker_behavior():
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç—É Circuit Breaker pattern
    """
    # Arrange - –º–Ω–æ–≥–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Circuit Breaker
    for i in range(5):
        with patch('payment_service.process_payment', side_effect=TimeoutError()):
            response = client.post("/api/orders", json=order_data)
            assert response.status_code == 503
    
    # Act - —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω (Circuit Breaker –æ—Ç–∫—Ä—ã—Ç)
    response = client.post("/api/orders", json=order_data)
    
    # Assert
    assert response.status_code == 503
    assert "circuit breaker open" in response.json()["message"]
    
    # –û–∂–∏–¥–∞–Ω–∏–µ –¥–æ half-open —Å–æ—Å—Ç–æ—è–Ω–∏—è
    time.sleep(10)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
    with patch('payment_service.process_payment', return_value={"status": "success"}):
        response = client.post("/api/orders", json=order_data)
        assert response.status_code == 201
```

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤

### –û—Ç–ª–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç (5 –±–∞–ª–ª–æ–≤):
- –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–∏–≤–æ–¥–∏—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ 2025 –≥–æ–¥–∞
- –û–±—ä—è—Å–Ω—è–µ—Ç trade-offs –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã
- –£–ø–æ–º–∏–Ω–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏

### –•–æ—Ä–æ—à–∏–π –æ—Ç–≤–µ—Ç (4 –±–∞–ª–ª–∞):
- –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
- –ü—Ä–∏–≤–æ–¥–∏—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã
- –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ best practices
- –ú–æ–∂–µ—Ç –æ–±—ä—è—Å–Ω–∏—Ç—å –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∏–ª–∏ –∏–Ω–æ–π –ø–æ–¥—Ö–æ–¥

### –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (3 –±–∞–ª–ª–∞):
- –ó–Ω–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã
- –ü–æ–Ω–∏–º–∞–µ—Ç —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ —Ç–µ—Å—Ç–æ–≤
- –ó–Ω–∞–∫–æ–º —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

### –ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (1-2 –±–∞–ª–ª–∞):
- –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—ã–µ –∑–Ω–∞–Ω–∏—è
- –ù–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã
- –ü—É—Ç–∞–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
- –ù–µ –∑–Ω–∞–∫–æ–º —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

### –ö–Ω–∏–≥–∏ (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –≤ 2025):
- **"Unit Testing Principles, Practices, and Patterns"** - Vladimir Khorikov
- **"Testing Microservices with BDD"** - Sam Newman
- **"Modern Software Testing"** - Lisa Crispin

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏:
- **Unit Testing:** pytest, Jest, JUnit 5, RSpec
- **Integration Testing:** TestContainers, WireMock, Pact
- **E2E Testing:** Playwright, Cypress, REST Assured
- **Performance:** K6, Artillery, Locust
- **BDD:** Cucumber, SpecFlow, Behave

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã 2025:
- **AI-Assisted Testing** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤
- **Shift-Left Security Testing** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è security —Ç–µ—Å—Ç–æ–≤ –≤ CI/CD
- **Contract-First Development** - API contracts –∫–∞–∫ source of truth
- **Chaos Engineering** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –≤ production
- **Green Testing** - —ç–∫–æ–ª–æ–≥–∏—á–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

### Testing Pyramid 2025:
```
     /\    E2E (10%)
    /  \   - Critical user journeys
   /____\  - Production-like environment
  /      \ Integration (20%)
 /        \ - API contracts
/__________\ - Service boundaries
   Unit (70%)
   - Business logic
   - Pure functions
   - Fast & isolated
```

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–µ—Å—Ç–æ–≤:
- **Speed:** Unit < 100ms, Integration < 1s, E2E < 30s
- **Reliability:** Flaky rate < 1%
- **Coverage:** Branch coverage > 80%
- **Maintainability:** Test code –∫–∞—á–µ—Å—Ç–≤–æ = Production code –∫–∞—á–µ—Å—Ç–≤–æ

### –ß–µ–∫-–ª–∏—Å—Ç —Ö–æ—Ä–æ—à–µ–≥–æ —Ç–µ—Å—Ç–∞:
- ‚úÖ –ò–º–µ–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ –∏–º—è (describes what and why)
- ‚úÖ –°–ª–µ–¥—É–µ—Ç AAA pattern (Arrange, Act, Assert)
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –æ–¥–Ω—É –∫–æ–Ω—Ü–µ–ø—Ü–∏—é
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç –¥—Ä—É–≥–∏—Ö —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (always same result)
- ‚úÖ –ë—ã—Å—Ç—Ä–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- ‚úÖ –õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è